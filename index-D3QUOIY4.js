function dT(r,e){for(var t=0;t<e.length;t++){const a=e[t];if(typeof a!="string"&&!Array.isArray(a)){for(const l in a)if(l!=="default"&&!(l in r)){const c=Object.getOwnPropertyDescriptor(a,l);c&&Object.defineProperty(r,l,c.get?c:{enumerable:!0,get:()=>a[l]})}}}return Object.freeze(Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))a(l);new MutationObserver(l=>{for(const c of l)if(c.type==="childList")for(const d of c.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&a(d)}).observe(document,{childList:!0,subtree:!0});function t(l){const c={};return l.integrity&&(c.integrity=l.integrity),l.referrerPolicy&&(c.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?c.credentials="include":l.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function a(l){if(l.ep)return;l.ep=!0;const c=t(l);fetch(l.href,c)}})();function Kw(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var Kp={exports:{}},Pc={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Dv;function hT(){if(Dv)return Pc;Dv=1;var r=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(a,l,c){var d=null;if(c!==void 0&&(d=""+c),l.key!==void 0&&(d=""+l.key),"key"in l){c={};for(var m in l)m!=="key"&&(c[m]=l[m])}else c=l;return l=c.ref,{$$typeof:r,type:a,key:d,ref:l!==void 0?l:null,props:c}}return Pc.Fragment=e,Pc.jsx=t,Pc.jsxs=t,Pc}var Rv;function fT(){return Rv||(Rv=1,Kp.exports=hT()),Kp.exports}var o=fT(),Yp={exports:{}},Ue={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var kv;function mT(){if(kv)return Ue;kv=1;var r=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),l=Symbol.for("react.profiler"),c=Symbol.for("react.consumer"),d=Symbol.for("react.context"),m=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),x=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),b=Symbol.for("react.activity"),N=Symbol.iterator;function S(U){return U===null||typeof U!="object"?null:(U=N&&U[N]||U["@@iterator"],typeof U=="function"?U:null)}var z={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},O=Object.assign,P={};function C(U,$,ue){this.props=U,this.context=$,this.refs=P,this.updater=ue||z}C.prototype.isReactComponent={},C.prototype.setState=function(U,$){if(typeof U!="object"&&typeof U!="function"&&U!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,U,$,"setState")},C.prototype.forceUpdate=function(U){this.updater.enqueueForceUpdate(this,U,"forceUpdate")};function L(){}L.prototype=C.prototype;function M(U,$,ue){this.props=U,this.context=$,this.refs=P,this.updater=ue||z}var F=M.prototype=new L;F.constructor=M,O(F,C.prototype),F.isPureReactComponent=!0;var Z=Array.isArray;function te(){}var E={H:null,A:null,T:null,S:null},T=Object.prototype.hasOwnProperty;function k(U,$,ue){var fe=ue.ref;return{$$typeof:r,type:U,key:$,ref:fe!==void 0?fe:null,props:ue}}function R(U,$){return k(U.type,$,U.props)}function D(U){return typeof U=="object"&&U!==null&&U.$$typeof===r}function q(U){var $={"=":"=0",":":"=2"};return"$"+U.replace(/[=:]/g,function(ue){return $[ue]})}var V=/\/+/g;function de(U,$){return typeof U=="object"&&U!==null&&U.key!=null?q(""+U.key):$.toString(36)}function xe(U){switch(U.status){case"fulfilled":return U.value;case"rejected":throw U.reason;default:switch(typeof U.status=="string"?U.then(te,te):(U.status="pending",U.then(function($){U.status==="pending"&&(U.status="fulfilled",U.value=$)},function($){U.status==="pending"&&(U.status="rejected",U.reason=$)})),U.status){case"fulfilled":return U.value;case"rejected":throw U.reason}}throw U}function K(U,$,ue,fe,Ne){var re=typeof U;(re==="undefined"||re==="boolean")&&(U=null);var Ie=!1;if(U===null)Ie=!0;else switch(re){case"bigint":case"string":case"number":Ie=!0;break;case"object":switch(U.$$typeof){case r:case e:Ie=!0;break;case v:return Ie=U._init,K(Ie(U._payload),$,ue,fe,Ne)}}if(Ie)return Ne=Ne(U),Ie=fe===""?"."+de(U,0):fe,Z(Ne)?(ue="",Ie!=null&&(ue=Ie.replace(V,"$&/")+"/"),K(Ne,$,ue,"",function(De){return De})):Ne!=null&&(D(Ne)&&(Ne=R(Ne,ue+(Ne.key==null||U&&U.key===Ne.key?"":(""+Ne.key).replace(V,"$&/")+"/")+Ie)),$.push(Ne)),1;Ie=0;var Oe=fe===""?".":fe+":";if(Z(U))for(var ye=0;ye<U.length;ye++)fe=U[ye],re=Oe+de(fe,ye),Ie+=K(fe,$,ue,re,Ne);else if(ye=S(U),typeof ye=="function")for(U=ye.call(U),ye=0;!(fe=U.next()).done;)fe=fe.value,re=Oe+de(fe,ye++),Ie+=K(fe,$,ue,re,Ne);else if(re==="object"){if(typeof U.then=="function")return K(xe(U),$,ue,fe,Ne);throw $=String(U),Error("Objects are not valid as a React child (found: "+($==="[object Object]"?"object with keys {"+Object.keys(U).join(", ")+"}":$)+"). If you meant to render a collection of children, use an array instead.")}return Ie}function G(U,$,ue){if(U==null)return U;var fe=[],Ne=0;return K(U,fe,"","",function(re){return $.call(ue,re,Ne++)}),fe}function pe(U){if(U._status===-1){var $=U._result;$=$(),$.then(function(ue){(U._status===0||U._status===-1)&&(U._status=1,U._result=ue)},function(ue){(U._status===0||U._status===-1)&&(U._status=2,U._result=ue)}),U._status===-1&&(U._status=0,U._result=$)}if(U._status===1)return U._result.default;throw U._result}var Ee=typeof reportError=="function"?reportError:function(U){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var $=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof U=="object"&&U!==null&&typeof U.message=="string"?String(U.message):String(U),error:U});if(!window.dispatchEvent($))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",U);return}console.error(U)},Te={map:G,forEach:function(U,$,ue){G(U,function(){$.apply(this,arguments)},ue)},count:function(U){var $=0;return G(U,function(){$++}),$},toArray:function(U){return G(U,function($){return $})||[]},only:function(U){if(!D(U))throw Error("React.Children.only expected to receive a single React element child.");return U}};return Ue.Activity=b,Ue.Children=Te,Ue.Component=C,Ue.Fragment=t,Ue.Profiler=l,Ue.PureComponent=M,Ue.StrictMode=a,Ue.Suspense=p,Ue.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=E,Ue.__COMPILER_RUNTIME={__proto__:null,c:function(U){return E.H.useMemoCache(U)}},Ue.cache=function(U){return function(){return U.apply(null,arguments)}},Ue.cacheSignal=function(){return null},Ue.cloneElement=function(U,$,ue){if(U==null)throw Error("The argument must be a React element, but you passed "+U+".");var fe=O({},U.props),Ne=U.key;if($!=null)for(re in $.key!==void 0&&(Ne=""+$.key),$)!T.call($,re)||re==="key"||re==="__self"||re==="__source"||re==="ref"&&$.ref===void 0||(fe[re]=$[re]);var re=arguments.length-2;if(re===1)fe.children=ue;else if(1<re){for(var Ie=Array(re),Oe=0;Oe<re;Oe++)Ie[Oe]=arguments[Oe+2];fe.children=Ie}return k(U.type,Ne,fe)},Ue.createContext=function(U){return U={$$typeof:d,_currentValue:U,_currentValue2:U,_threadCount:0,Provider:null,Consumer:null},U.Provider=U,U.Consumer={$$typeof:c,_context:U},U},Ue.createElement=function(U,$,ue){var fe,Ne={},re=null;if($!=null)for(fe in $.key!==void 0&&(re=""+$.key),$)T.call($,fe)&&fe!=="key"&&fe!=="__self"&&fe!=="__source"&&(Ne[fe]=$[fe]);var Ie=arguments.length-2;if(Ie===1)Ne.children=ue;else if(1<Ie){for(var Oe=Array(Ie),ye=0;ye<Ie;ye++)Oe[ye]=arguments[ye+2];Ne.children=Oe}if(U&&U.defaultProps)for(fe in Ie=U.defaultProps,Ie)Ne[fe]===void 0&&(Ne[fe]=Ie[fe]);return k(U,re,Ne)},Ue.createRef=function(){return{current:null}},Ue.forwardRef=function(U){return{$$typeof:m,render:U}},Ue.isValidElement=D,Ue.lazy=function(U){return{$$typeof:v,_payload:{_status:-1,_result:U},_init:pe}},Ue.memo=function(U,$){return{$$typeof:x,type:U,compare:$===void 0?null:$}},Ue.startTransition=function(U){var $=E.T,ue={};E.T=ue;try{var fe=U(),Ne=E.S;Ne!==null&&Ne(ue,fe),typeof fe=="object"&&fe!==null&&typeof fe.then=="function"&&fe.then(te,Ee)}catch(re){Ee(re)}finally{$!==null&&ue.types!==null&&($.types=ue.types),E.T=$}},Ue.unstable_useCacheRefresh=function(){return E.H.useCacheRefresh()},Ue.use=function(U){return E.H.use(U)},Ue.useActionState=function(U,$,ue){return E.H.useActionState(U,$,ue)},Ue.useCallback=function(U,$){return E.H.useCallback(U,$)},Ue.useContext=function(U){return E.H.useContext(U)},Ue.useDebugValue=function(){},Ue.useDeferredValue=function(U,$){return E.H.useDeferredValue(U,$)},Ue.useEffect=function(U,$){return E.H.useEffect(U,$)},Ue.useEffectEvent=function(U){return E.H.useEffectEvent(U)},Ue.useId=function(){return E.H.useId()},Ue.useImperativeHandle=function(U,$,ue){return E.H.useImperativeHandle(U,$,ue)},Ue.useInsertionEffect=function(U,$){return E.H.useInsertionEffect(U,$)},Ue.useLayoutEffect=function(U,$){return E.H.useLayoutEffect(U,$)},Ue.useMemo=function(U,$){return E.H.useMemo(U,$)},Ue.useOptimistic=function(U,$){return E.H.useOptimistic(U,$)},Ue.useReducer=function(U,$,ue){return E.H.useReducer(U,$,ue)},Ue.useRef=function(U){return E.H.useRef(U)},Ue.useState=function(U){return E.H.useState(U)},Ue.useSyncExternalStore=function(U,$,ue){return E.H.useSyncExternalStore(U,$,ue)},Ue.useTransition=function(){return E.H.useTransition()},Ue.version="19.2.3",Ue}var Mv;function r0(){return Mv||(Mv=1,Yp.exports=mT()),Yp.exports}var A=r0();const ut=Kw(A),pT=dT({__proto__:null,default:ut},[A]);var Xp={exports:{}},Lc={},Zp={exports:{}},Jp={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Vv;function gT(){return Vv||(Vv=1,(function(r){function e(K,G){var pe=K.length;K.push(G);e:for(;0<pe;){var Ee=pe-1>>>1,Te=K[Ee];if(0<l(Te,G))K[Ee]=G,K[pe]=Te,pe=Ee;else break e}}function t(K){return K.length===0?null:K[0]}function a(K){if(K.length===0)return null;var G=K[0],pe=K.pop();if(pe!==G){K[0]=pe;e:for(var Ee=0,Te=K.length,U=Te>>>1;Ee<U;){var $=2*(Ee+1)-1,ue=K[$],fe=$+1,Ne=K[fe];if(0>l(ue,pe))fe<Te&&0>l(Ne,ue)?(K[Ee]=Ne,K[fe]=pe,Ee=fe):(K[Ee]=ue,K[$]=pe,Ee=$);else if(fe<Te&&0>l(Ne,pe))K[Ee]=Ne,K[fe]=pe,Ee=fe;else break e}}return G}function l(K,G){var pe=K.sortIndex-G.sortIndex;return pe!==0?pe:K.id-G.id}if(r.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var c=performance;r.unstable_now=function(){return c.now()}}else{var d=Date,m=d.now();r.unstable_now=function(){return d.now()-m}}var p=[],x=[],v=1,b=null,N=3,S=!1,z=!1,O=!1,P=!1,C=typeof setTimeout=="function"?setTimeout:null,L=typeof clearTimeout=="function"?clearTimeout:null,M=typeof setImmediate<"u"?setImmediate:null;function F(K){for(var G=t(x);G!==null;){if(G.callback===null)a(x);else if(G.startTime<=K)a(x),G.sortIndex=G.expirationTime,e(p,G);else break;G=t(x)}}function Z(K){if(O=!1,F(K),!z)if(t(p)!==null)z=!0,te||(te=!0,q());else{var G=t(x);G!==null&&xe(Z,G.startTime-K)}}var te=!1,E=-1,T=5,k=-1;function R(){return P?!0:!(r.unstable_now()-k<T)}function D(){if(P=!1,te){var K=r.unstable_now();k=K;var G=!0;try{e:{z=!1,O&&(O=!1,L(E),E=-1),S=!0;var pe=N;try{t:{for(F(K),b=t(p);b!==null&&!(b.expirationTime>K&&R());){var Ee=b.callback;if(typeof Ee=="function"){b.callback=null,N=b.priorityLevel;var Te=Ee(b.expirationTime<=K);if(K=r.unstable_now(),typeof Te=="function"){b.callback=Te,F(K),G=!0;break t}b===t(p)&&a(p),F(K)}else a(p);b=t(p)}if(b!==null)G=!0;else{var U=t(x);U!==null&&xe(Z,U.startTime-K),G=!1}}break e}finally{b=null,N=pe,S=!1}G=void 0}}finally{G?q():te=!1}}}var q;if(typeof M=="function")q=function(){M(D)};else if(typeof MessageChannel<"u"){var V=new MessageChannel,de=V.port2;V.port1.onmessage=D,q=function(){de.postMessage(null)}}else q=function(){C(D,0)};function xe(K,G){E=C(function(){K(r.unstable_now())},G)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(K){K.callback=null},r.unstable_forceFrameRate=function(K){0>K||125<K?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<K?Math.floor(1e3/K):5},r.unstable_getCurrentPriorityLevel=function(){return N},r.unstable_next=function(K){switch(N){case 1:case 2:case 3:var G=3;break;default:G=N}var pe=N;N=G;try{return K()}finally{N=pe}},r.unstable_requestPaint=function(){P=!0},r.unstable_runWithPriority=function(K,G){switch(K){case 1:case 2:case 3:case 4:case 5:break;default:K=3}var pe=N;N=K;try{return G()}finally{N=pe}},r.unstable_scheduleCallback=function(K,G,pe){var Ee=r.unstable_now();switch(typeof pe=="object"&&pe!==null?(pe=pe.delay,pe=typeof pe=="number"&&0<pe?Ee+pe:Ee):pe=Ee,K){case 1:var Te=-1;break;case 2:Te=250;break;case 5:Te=1073741823;break;case 4:Te=1e4;break;default:Te=5e3}return Te=pe+Te,K={id:v++,callback:G,priorityLevel:K,startTime:pe,expirationTime:Te,sortIndex:-1},pe>Ee?(K.sortIndex=pe,e(x,K),t(p)===null&&K===t(x)&&(O?(L(E),E=-1):O=!0,xe(Z,pe-Ee))):(K.sortIndex=Te,e(p,K),z||S||(z=!0,te||(te=!0,q()))),K},r.unstable_shouldYield=R,r.unstable_wrapCallback=function(K){var G=N;return function(){var pe=N;N=G;try{return K.apply(this,arguments)}finally{N=pe}}}})(Jp)),Jp}var Ov;function xT(){return Ov||(Ov=1,Zp.exports=gT()),Zp.exports}var Wp={exports:{}},Vn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Pv;function yT(){if(Pv)return Vn;Pv=1;var r=r0();function e(p){var x="https://react.dev/errors/"+p;if(1<arguments.length){x+="?args[]="+encodeURIComponent(arguments[1]);for(var v=2;v<arguments.length;v++)x+="&args[]="+encodeURIComponent(arguments[v])}return"Minified React error #"+p+"; visit "+x+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var a={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},l=Symbol.for("react.portal");function c(p,x,v){var b=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:l,key:b==null?null:""+b,children:p,containerInfo:x,implementation:v}}var d=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function m(p,x){if(p==="font")return"";if(typeof x=="string")return x==="use-credentials"?x:""}return Vn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=a,Vn.createPortal=function(p,x){var v=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!x||x.nodeType!==1&&x.nodeType!==9&&x.nodeType!==11)throw Error(e(299));return c(p,x,null,v)},Vn.flushSync=function(p){var x=d.T,v=a.p;try{if(d.T=null,a.p=2,p)return p()}finally{d.T=x,a.p=v,a.d.f()}},Vn.preconnect=function(p,x){typeof p=="string"&&(x?(x=x.crossOrigin,x=typeof x=="string"?x==="use-credentials"?x:"":void 0):x=null,a.d.C(p,x))},Vn.prefetchDNS=function(p){typeof p=="string"&&a.d.D(p)},Vn.preinit=function(p,x){if(typeof p=="string"&&x&&typeof x.as=="string"){var v=x.as,b=m(v,x.crossOrigin),N=typeof x.integrity=="string"?x.integrity:void 0,S=typeof x.fetchPriority=="string"?x.fetchPriority:void 0;v==="style"?a.d.S(p,typeof x.precedence=="string"?x.precedence:void 0,{crossOrigin:b,integrity:N,fetchPriority:S}):v==="script"&&a.d.X(p,{crossOrigin:b,integrity:N,fetchPriority:S,nonce:typeof x.nonce=="string"?x.nonce:void 0})}},Vn.preinitModule=function(p,x){if(typeof p=="string")if(typeof x=="object"&&x!==null){if(x.as==null||x.as==="script"){var v=m(x.as,x.crossOrigin);a.d.M(p,{crossOrigin:v,integrity:typeof x.integrity=="string"?x.integrity:void 0,nonce:typeof x.nonce=="string"?x.nonce:void 0})}}else x==null&&a.d.M(p)},Vn.preload=function(p,x){if(typeof p=="string"&&typeof x=="object"&&x!==null&&typeof x.as=="string"){var v=x.as,b=m(v,x.crossOrigin);a.d.L(p,v,{crossOrigin:b,integrity:typeof x.integrity=="string"?x.integrity:void 0,nonce:typeof x.nonce=="string"?x.nonce:void 0,type:typeof x.type=="string"?x.type:void 0,fetchPriority:typeof x.fetchPriority=="string"?x.fetchPriority:void 0,referrerPolicy:typeof x.referrerPolicy=="string"?x.referrerPolicy:void 0,imageSrcSet:typeof x.imageSrcSet=="string"?x.imageSrcSet:void 0,imageSizes:typeof x.imageSizes=="string"?x.imageSizes:void 0,media:typeof x.media=="string"?x.media:void 0})}},Vn.preloadModule=function(p,x){if(typeof p=="string")if(x){var v=m(x.as,x.crossOrigin);a.d.m(p,{as:typeof x.as=="string"&&x.as!=="script"?x.as:void 0,crossOrigin:v,integrity:typeof x.integrity=="string"?x.integrity:void 0})}else a.d.m(p)},Vn.requestFormReset=function(p){a.d.r(p)},Vn.unstable_batchedUpdates=function(p,x){return p(x)},Vn.useFormState=function(p,x,v){return d.H.useFormState(p,x,v)},Vn.useFormStatus=function(){return d.H.useHostTransitionStatus()},Vn.version="19.2.3",Vn}var Lv;function Yw(){if(Lv)return Wp.exports;Lv=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),Wp.exports=yT(),Wp.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zv;function bT(){if(zv)return Lc;zv=1;var r=xT(),e=r0(),t=Yw();function a(n){var s="https://react.dev/errors/"+n;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var i=2;i<arguments.length;i++)s+="&args[]="+encodeURIComponent(arguments[i])}return"Minified React error #"+n+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function l(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function c(n){var s=n,i=n;if(n.alternate)for(;s.return;)s=s.return;else{n=s;do s=n,(s.flags&4098)!==0&&(i=s.return),n=s.return;while(n)}return s.tag===3?i:null}function d(n){if(n.tag===13){var s=n.memoizedState;if(s===null&&(n=n.alternate,n!==null&&(s=n.memoizedState)),s!==null)return s.dehydrated}return null}function m(n){if(n.tag===31){var s=n.memoizedState;if(s===null&&(n=n.alternate,n!==null&&(s=n.memoizedState)),s!==null)return s.dehydrated}return null}function p(n){if(c(n)!==n)throw Error(a(188))}function x(n){var s=n.alternate;if(!s){if(s=c(n),s===null)throw Error(a(188));return s!==n?null:n}for(var i=n,u=s;;){var f=i.return;if(f===null)break;var g=f.alternate;if(g===null){if(u=f.return,u!==null){i=u;continue}break}if(f.child===g.child){for(g=f.child;g;){if(g===i)return p(f),n;if(g===u)return p(f),s;g=g.sibling}throw Error(a(188))}if(i.return!==u.return)i=f,u=g;else{for(var w=!1,j=f.child;j;){if(j===i){w=!0,i=f,u=g;break}if(j===u){w=!0,u=f,i=g;break}j=j.sibling}if(!w){for(j=g.child;j;){if(j===i){w=!0,i=g,u=f;break}if(j===u){w=!0,u=g,i=f;break}j=j.sibling}if(!w)throw Error(a(189))}}if(i.alternate!==u)throw Error(a(190))}if(i.tag!==3)throw Error(a(188));return i.stateNode.current===i?n:s}function v(n){var s=n.tag;if(s===5||s===26||s===27||s===6)return n;for(n=n.child;n!==null;){if(s=v(n),s!==null)return s;n=n.sibling}return null}var b=Object.assign,N=Symbol.for("react.element"),S=Symbol.for("react.transitional.element"),z=Symbol.for("react.portal"),O=Symbol.for("react.fragment"),P=Symbol.for("react.strict_mode"),C=Symbol.for("react.profiler"),L=Symbol.for("react.consumer"),M=Symbol.for("react.context"),F=Symbol.for("react.forward_ref"),Z=Symbol.for("react.suspense"),te=Symbol.for("react.suspense_list"),E=Symbol.for("react.memo"),T=Symbol.for("react.lazy"),k=Symbol.for("react.activity"),R=Symbol.for("react.memo_cache_sentinel"),D=Symbol.iterator;function q(n){return n===null||typeof n!="object"?null:(n=D&&n[D]||n["@@iterator"],typeof n=="function"?n:null)}var V=Symbol.for("react.client.reference");function de(n){if(n==null)return null;if(typeof n=="function")return n.$$typeof===V?null:n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case O:return"Fragment";case C:return"Profiler";case P:return"StrictMode";case Z:return"Suspense";case te:return"SuspenseList";case k:return"Activity"}if(typeof n=="object")switch(n.$$typeof){case z:return"Portal";case M:return n.displayName||"Context";case L:return(n._context.displayName||"Context")+".Consumer";case F:var s=n.render;return n=n.displayName,n||(n=s.displayName||s.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case E:return s=n.displayName||null,s!==null?s:de(n.type)||"Memo";case T:s=n._payload,n=n._init;try{return de(n(s))}catch{}}return null}var xe=Array.isArray,K=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,G=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,pe={pending:!1,data:null,method:null,action:null},Ee=[],Te=-1;function U(n){return{current:n}}function $(n){0>Te||(n.current=Ee[Te],Ee[Te]=null,Te--)}function ue(n,s){Te++,Ee[Te]=n.current,n.current=s}var fe=U(null),Ne=U(null),re=U(null),Ie=U(null);function Oe(n,s){switch(ue(re,s),ue(Ne,n),ue(fe,null),s.nodeType){case 9:case 11:n=(n=s.documentElement)&&(n=n.namespaceURI)?ev(n):0;break;default:if(n=s.tagName,s=s.namespaceURI)s=ev(s),n=tv(s,n);else switch(n){case"svg":n=1;break;case"math":n=2;break;default:n=0}}$(fe),ue(fe,n)}function ye(){$(fe),$(Ne),$(re)}function De(n){n.memoizedState!==null&&ue(Ie,n);var s=fe.current,i=tv(s,n.type);s!==i&&(ue(Ne,n),ue(fe,i))}function Dt(n){Ne.current===n&&($(fe),$(Ne)),Ie.current===n&&($(Ie),kc._currentValue=pe)}var Rt,Ut;function St(n){if(Rt===void 0)try{throw Error()}catch(i){var s=i.stack.trim().match(/\n( *(at )?)/);Rt=s&&s[1]||"",Ut=-1<i.stack.indexOf(`
    at`)?" (<anonymous>)":-1<i.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Rt+n+Ut}var cn=!1;function yn(n,s){if(!n||cn)return"";cn=!0;var i=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var u={DetermineComponentFrameRoot:function(){try{if(s){var ce=function(){throw Error()};if(Object.defineProperty(ce.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ce,[])}catch(se){var ee=se}Reflect.construct(n,[],ce)}else{try{ce.call()}catch(se){ee=se}n.call(ce.prototype)}}else{try{throw Error()}catch(se){ee=se}(ce=n())&&typeof ce.catch=="function"&&ce.catch(function(){})}}catch(se){if(se&&ee&&typeof se.stack=="string")return[se.stack,ee.stack]}return[null,null]}};u.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var f=Object.getOwnPropertyDescriptor(u.DetermineComponentFrameRoot,"name");f&&f.configurable&&Object.defineProperty(u.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var g=u.DetermineComponentFrameRoot(),w=g[0],j=g[1];if(w&&j){var B=w.split(`
`),W=j.split(`
`);for(f=u=0;u<B.length&&!B[u].includes("DetermineComponentFrameRoot");)u++;for(;f<W.length&&!W[f].includes("DetermineComponentFrameRoot");)f++;if(u===B.length||f===W.length)for(u=B.length-1,f=W.length-1;1<=u&&0<=f&&B[u]!==W[f];)f--;for(;1<=u&&0<=f;u--,f--)if(B[u]!==W[f]){if(u!==1||f!==1)do if(u--,f--,0>f||B[u]!==W[f]){var le=`
`+B[u].replace(" at new "," at ");return n.displayName&&le.includes("<anonymous>")&&(le=le.replace("<anonymous>",n.displayName)),le}while(1<=u&&0<=f);break}}}finally{cn=!1,Error.prepareStackTrace=i}return(i=n?n.displayName||n.name:"")?St(i):""}function be(n,s){switch(n.tag){case 26:case 27:case 5:return St(n.type);case 16:return St("Lazy");case 13:return n.child!==s&&s!==null?St("Suspense Fallback"):St("Suspense");case 19:return St("SuspenseList");case 0:case 15:return yn(n.type,!1);case 11:return yn(n.type.render,!1);case 1:return yn(n.type,!0);case 31:return St("Activity");default:return""}}function ae(n){try{var s="",i=null;do s+=be(n,i),i=n,n=n.return;while(n);return s}catch(u){return`
Error generating stack: `+u.message+`
`+u.stack}}var he=Object.prototype.hasOwnProperty,me=r.unstable_scheduleCallback,je=r.unstable_cancelCallback,Fe=r.unstable_shouldYield,st=r.unstable_requestPaint,rt=r.unstable_now,Qe=r.unstable_getCurrentPriorityLevel,Bt=r.unstable_ImmediatePriority,bn=r.unstable_UserBlockingPriority,un=r.unstable_NormalPriority,Bs=r.unstable_LowPriority,kt=r.unstable_IdlePriority,$e=r.log,vs=r.unstable_setDisableYieldValue,Un=null,dn=null;function Bn(n){if(typeof $e=="function"&&vs(n),dn&&typeof dn.setStrictMode=="function")try{dn.setStrictMode(Un,n)}catch{}}var qt=Math.clz32?Math.clz32:ml,ci=Math.log,ra=Math.LN2;function ml(n){return n>>>=0,n===0?32:31-(ci(n)/ra|0)|0}var ws=256,Tt=262144,et=4194304;function Mt(n){var s=n&42;if(s!==0)return s;switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return n&261888;case 262144:case 524288:case 1048576:case 2097152:return n&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return n&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return n}}function hn(n,s,i){var u=n.pendingLanes;if(u===0)return 0;var f=0,g=n.suspendedLanes,w=n.pingedLanes;n=n.warmLanes;var j=u&134217727;return j!==0?(u=j&~g,u!==0?f=Mt(u):(w&=j,w!==0?f=Mt(w):i||(i=j&~n,i!==0&&(f=Mt(i))))):(j=u&~g,j!==0?f=Mt(j):w!==0?f=Mt(w):i||(i=u&~n,i!==0&&(f=Mt(i)))),f===0?0:s!==0&&s!==f&&(s&g)===0&&(g=f&-f,i=s&-s,g>=i||g===32&&(i&4194048)!==0)?s:f}function Vt(n,s){return(n.pendingLanes&~(n.suspendedLanes&~n.pingedLanes)&s)===0}function qn(n,s){switch(n){case 1:case 2:case 4:case 8:case 64:return s+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Fn(){var n=et;return et<<=1,(et&62914560)===0&&(et=4194304),n}function Tn(n){for(var s=[],i=0;31>i;i++)s.push(n);return s}function fn(n,s){n.pendingLanes|=s,s!==268435456&&(n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0)}function Cr(n,s,i,u,f,g){var w=n.pendingLanes;n.pendingLanes=i,n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0,n.expiredLanes&=i,n.entangledLanes&=i,n.errorRecoveryDisabledLanes&=i,n.shellSuspendCounter=0;var j=n.entanglements,B=n.expirationTimes,W=n.hiddenUpdates;for(i=w&~i;0<i;){var le=31-qt(i),ce=1<<le;j[le]=0,B[le]=-1;var ee=W[le];if(ee!==null)for(W[le]=null,le=0;le<ee.length;le++){var se=ee[le];se!==null&&(se.lane&=-536870913)}i&=~ce}u!==0&&ls(n,u,0),g!==0&&f===0&&n.tag!==0&&(n.suspendedLanes|=g&~(w&~s))}function ls(n,s,i){n.pendingLanes|=s,n.suspendedLanes&=~s;var u=31-qt(s);n.entangledLanes|=s,n.entanglements[u]=n.entanglements[u]|1073741824|i&261930}function er(n,s){var i=n.entangledLanes|=s;for(n=n.entanglements;i;){var u=31-qt(i),f=1<<u;f&s|n[u]&s&&(n[u]|=s),i&=~f}}function tr(n,s){var i=s&-s;return i=(i&42)!==0?1:nr(i),(i&(n.suspendedLanes|s))!==0?0:i}function nr(n){switch(n){case 2:n=1;break;case 8:n=4;break;case 32:n=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:n=128;break;case 268435456:n=134217728;break;default:n=0}return n}function Hn(n){return n&=-n,2<n?8<n?(n&134217727)!==0?32:268435456:8:2}function sr(){var n=G.p;return n!==0?n:(n=window.event,n===void 0?32:Ev(n.type))}function $n(n,s){var i=G.p;try{return G.p=n,s()}finally{G.p=i}}var qs=Math.random().toString(36).slice(2),Zt="__reactFiber$"+qs,vn="__reactProps$"+qs,rr="__reactContainer$"+qs,pl="__reactEvents$"+qs,em="__reactListeners$"+qs,$u="__reactHandles$"+qs,Gu="__reactResources$"+qs,ar="__reactMarker$"+qs;function gl(n){delete n[Zt],delete n[vn],delete n[pl],delete n[em],delete n[$u]}function ir(n){var s=n[Zt];if(s)return s;for(var i=n.parentNode;i;){if(s=i[rr]||i[Zt]){if(i=s.alternate,s.child!==null||i!==null&&i.child!==null)for(n=ov(n);n!==null;){if(i=n[Zt])return i;n=ov(n)}return s}n=i,i=n.parentNode}return null}function _s(n){if(n=n[Zt]||n[rr]){var s=n.tag;if(s===5||s===6||s===13||s===31||s===26||s===27||s===3)return n}return null}function os(n){var s=n.tag;if(s===5||s===26||s===27||s===6)return n.stateNode;throw Error(a(33))}function lr(n){var s=n[Gu];return s||(s=n[Gu]={hoistableStyles:new Map,hoistableScripts:new Map}),s}function Jt(n){n[ar]=!0}var Uo=new Set,Bo={};function or(n,s){cr(n,s),cr(n+"Capture",s)}function cr(n,s){for(Bo[n]=s,n=0;n<s.length;n++)Uo.add(s[n])}var qo=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Fo={},Ho={};function Qu(n){return he.call(Ho,n)?!0:he.call(Fo,n)?!1:qo.test(n)?Ho[n]=!0:(Fo[n]=!0,!1)}function xl(n,s,i){if(Qu(s))if(i===null)n.removeAttribute(s);else{switch(typeof i){case"undefined":case"function":case"symbol":n.removeAttribute(s);return;case"boolean":var u=s.toLowerCase().slice(0,5);if(u!=="data-"&&u!=="aria-"){n.removeAttribute(s);return}}n.setAttribute(s,""+i)}}function cs(n,s,i){if(i===null)n.removeAttribute(s);else{switch(typeof i){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(s);return}n.setAttribute(s,""+i)}}function Wt(n,s,i,u){if(u===null)n.removeAttribute(i);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(i);return}n.setAttributeNS(s,i,""+u)}}function wn(n){switch(typeof n){case"bigint":case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function aa(n){var s=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function $o(n,s,i){var u=Object.getOwnPropertyDescriptor(n.constructor.prototype,s);if(!n.hasOwnProperty(s)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var f=u.get,g=u.set;return Object.defineProperty(n,s,{configurable:!0,get:function(){return f.call(this)},set:function(w){i=""+w,g.call(this,w)}}),Object.defineProperty(n,s,{enumerable:u.enumerable}),{getValue:function(){return i},setValue:function(w){i=""+w},stopTracking:function(){n._valueTracker=null,delete n[s]}}}}function mt(n){if(!n._valueTracker){var s=aa(n)?"checked":"value";n._valueTracker=$o(n,s,""+n[s])}}function ui(n){if(!n)return!1;var s=n._valueTracker;if(!s)return!0;var i=s.getValue(),u="";return n&&(u=aa(n)?n.checked?"true":"false":n.value),n=u,n!==i?(s.setValue(n),!0):!1}function ur(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}var di=/[\n"\\]/g;function Zn(n){return n.replace(di,function(s){return"\\"+s.charCodeAt(0).toString(16)+" "})}function yl(n,s,i,u,f,g,w,j){n.name="",w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"?n.type=w:n.removeAttribute("type"),s!=null?w==="number"?(s===0&&n.value===""||n.value!=s)&&(n.value=""+wn(s)):n.value!==""+wn(s)&&(n.value=""+wn(s)):w!=="submit"&&w!=="reset"||n.removeAttribute("value"),s!=null?Go(n,w,wn(s)):i!=null?Go(n,w,wn(i)):u!=null&&n.removeAttribute("value"),f==null&&g!=null&&(n.defaultChecked=!!g),f!=null&&(n.checked=f&&typeof f!="function"&&typeof f!="symbol"),j!=null&&typeof j!="function"&&typeof j!="symbol"&&typeof j!="boolean"?n.name=""+wn(j):n.removeAttribute("name")}function Ku(n,s,i,u,f,g,w,j){if(g!=null&&typeof g!="function"&&typeof g!="symbol"&&typeof g!="boolean"&&(n.type=g),s!=null||i!=null){if(!(g!=="submit"&&g!=="reset"||s!=null)){mt(n);return}i=i!=null?""+wn(i):"",s=s!=null?""+wn(s):i,j||s===n.value||(n.value=s),n.defaultValue=s}u=u??f,u=typeof u!="function"&&typeof u!="symbol"&&!!u,n.checked=j?n.checked:!!u,n.defaultChecked=!!u,w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"&&(n.name=w),mt(n)}function Go(n,s,i){s==="number"&&ur(n.ownerDocument)===n||n.defaultValue===""+i||(n.defaultValue=""+i)}function ia(n,s,i,u){if(n=n.options,s){s={};for(var f=0;f<i.length;f++)s["$"+i[f]]=!0;for(i=0;i<n.length;i++)f=s.hasOwnProperty("$"+n[i].value),n[i].selected!==f&&(n[i].selected=f),f&&u&&(n[i].defaultSelected=!0)}else{for(i=""+wn(i),s=null,f=0;f<n.length;f++){if(n[f].value===i){n[f].selected=!0,u&&(n[f].defaultSelected=!0);return}s!==null||n[f].disabled||(s=n[f])}s!==null&&(s.selected=!0)}}function Yu(n,s,i){if(s!=null&&(s=""+wn(s),s!==n.value&&(n.value=s),i==null)){n.defaultValue!==s&&(n.defaultValue=s);return}n.defaultValue=i!=null?""+wn(i):""}function la(n,s,i,u){if(s==null){if(u!=null){if(i!=null)throw Error(a(92));if(xe(u)){if(1<u.length)throw Error(a(93));u=u[0]}i=u}i==null&&(i=""),s=i}i=wn(s),n.defaultValue=i,u=n.textContent,u===i&&u!==""&&u!==null&&(n.value=u),mt(n)}function Jn(n,s){if(s){var i=n.firstChild;if(i&&i===n.lastChild&&i.nodeType===3){i.nodeValue=s;return}}n.textContent=s}var Xu=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Qo(n,s,i){var u=s.indexOf("--")===0;i==null||typeof i=="boolean"||i===""?u?n.setProperty(s,""):s==="float"?n.cssFloat="":n[s]="":u?n.setProperty(s,i):typeof i!="number"||i===0||Xu.has(s)?s==="float"?n.cssFloat=i:n[s]=(""+i).trim():n[s]=i+"px"}function Ko(n,s,i){if(s!=null&&typeof s!="object")throw Error(a(62));if(n=n.style,i!=null){for(var u in i)!i.hasOwnProperty(u)||s!=null&&s.hasOwnProperty(u)||(u.indexOf("--")===0?n.setProperty(u,""):u==="float"?n.cssFloat="":n[u]="");for(var f in s)u=s[f],s.hasOwnProperty(f)&&i[f]!==u&&Qo(n,f,u)}else for(var g in s)s.hasOwnProperty(g)&&Qo(n,g,s[g])}function bl(n){if(n.indexOf("-")===-1)return!1;switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Zu=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),oa=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function vl(n){return oa.test(""+n)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":n}function Fs(){}var Yo=null;function Ns(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var ca=null,dr=null;function hi(n){var s=_s(n);if(s&&(n=s.stateNode)){var i=n[vn]||null;e:switch(n=s.stateNode,s.type){case"input":if(yl(n,i.value,i.defaultValue,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name),s=i.name,i.type==="radio"&&s!=null){for(i=n;i.parentNode;)i=i.parentNode;for(i=i.querySelectorAll('input[name="'+Zn(""+s)+'"][type="radio"]'),s=0;s<i.length;s++){var u=i[s];if(u!==n&&u.form===n.form){var f=u[vn]||null;if(!f)throw Error(a(90));yl(u,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name)}}for(s=0;s<i.length;s++)u=i[s],u.form===n.form&&ui(u)}break e;case"textarea":Yu(n,i.value,i.defaultValue);break e;case"select":s=i.value,s!=null&&ia(n,!!i.multiple,s,!1)}}}var wl=!1;function ua(n,s,i){if(wl)return n(s,i);wl=!0;try{var u=n(s);return u}finally{if(wl=!1,(ca!==null||dr!==null)&&(Hd(),ca&&(s=ca,n=dr,dr=ca=null,hi(s),n)))for(s=0;s<n.length;s++)hi(n[s])}}function Hs(n,s){var i=n.stateNode;if(i===null)return null;var u=i[vn]||null;if(u===null)return null;i=u[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(n=n.type,u=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!u;break e;default:n=!1}if(n)return null;if(i&&typeof i!="function")throw Error(a(231,s,typeof i));return i}var Es=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),fi=!1;if(Es)try{var vt={};Object.defineProperty(vt,"passive",{get:function(){fi=!0}}),window.addEventListener("test",vt,vt),window.removeEventListener("test",vt,vt)}catch{fi=!1}var hr=null,Xo=null,mi=null;function Zo(){if(mi)return mi;var n,s=Xo,i=s.length,u,f="value"in hr?hr.value:hr.textContent,g=f.length;for(n=0;n<i&&s[n]===f[n];n++);var w=i-n;for(u=1;u<=w&&s[i-u]===f[g-u];u++);return mi=f.slice(n,1<u?1-u:void 0)}function pi(n){var s=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&s===13&&(n=13)):n=s,n===10&&(n=13),32<=n||n===13?n:0}function Ir(){return!0}function $s(){return!1}function jn(n){function s(i,u,f,g,w){this._reactName=i,this._targetInst=f,this.type=u,this.nativeEvent=g,this.target=w,this.currentTarget=null;for(var j in n)n.hasOwnProperty(j)&&(i=n[j],this[j]=i?i(g):g[j]);return this.isDefaultPrevented=(g.defaultPrevented!=null?g.defaultPrevented:g.returnValue===!1)?Ir:$s,this.isPropagationStopped=$s,this}return b(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var i=this.nativeEvent;i&&(i.preventDefault?i.preventDefault():typeof i.returnValue!="unknown"&&(i.returnValue=!1),this.isDefaultPrevented=Ir)},stopPropagation:function(){var i=this.nativeEvent;i&&(i.stopPropagation?i.stopPropagation():typeof i.cancelBubble!="unknown"&&(i.cancelBubble=!0),this.isPropagationStopped=Ir)},persist:function(){},isPersistent:Ir}),s}var Dr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},fr=jn(Dr),da=b({},Dr,{view:0,detail:0}),Jo=jn(da),ha,_l,mr,Nl=b({},da,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:fa,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==mr&&(mr&&n.type==="mousemove"?(ha=n.screenX-mr.screenX,_l=n.screenY-mr.screenY):_l=ha=0,mr=n),ha)},movementY:function(n){return"movementY"in n?n.movementY:_l}}),Wo=jn(Nl),gi=b({},Nl,{dataTransfer:0}),Ju=jn(gi),Wu=b({},da,{relatedTarget:0}),xi=jn(Wu),ec=b({},Dr,{animationName:0,elapsedTime:0,pseudoElement:0}),ed=jn(ec),El=b({},Dr,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),td=jn(El),nd=b({},Dr,{data:0}),pr=jn(nd),sd={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},rd={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ad={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function id(n){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(n):(n=ad[n])?!!s[n]:!1}function fa(){return id}var Gn=b({},da,{key:function(n){if(n.key){var s=sd[n.key]||n.key;if(s!=="Unidentified")return s}return n.type==="keypress"?(n=pi(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?rd[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:fa,charCode:function(n){return n.type==="keypress"?pi(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?pi(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),ld=jn(Gn),od=b({},Nl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Rr=jn(od),h=b({},da,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:fa}),y=jn(h),_=b({},Dr,{propertyName:0,elapsedTime:0,pseudoElement:0}),I=jn(_),X=b({},Nl,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),ne=jn(X),_e=b({},Dr,{newState:0,oldState:0}),Be=jn(_e),Kt=[9,13,27,32],ot=Es&&"CompositionEvent"in window,Ot=null;Es&&"documentMode"in document&&(Ot=document.documentMode);var Ss=Es&&"TextEvent"in window&&!Ot,gr=Es&&(!ot||Ot&&8<Ot&&11>=Ot),Gs=" ",Qs=!1;function yi(n,s){switch(n){case"keyup":return Kt.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Sl(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var Tl=!1;function VE(n,s){switch(n){case"compositionend":return Sl(s);case"keypress":return s.which!==32?null:(Qs=!0,Gs);case"textInput":return n=s.data,n===Gs&&Qs?null:n;default:return null}}function OE(n,s){if(Tl)return n==="compositionend"||!ot&&yi(n,s)?(n=Zo(),mi=Xo=hr=null,Tl=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return gr&&s.locale!=="ko"?null:s.data;default:return null}}var PE={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function dx(n){var s=n&&n.nodeName&&n.nodeName.toLowerCase();return s==="input"?!!PE[n.type]:s==="textarea"}function hx(n,s,i,u){ca?dr?dr.push(u):dr=[u]:ca=u,s=Zd(s,"onChange"),0<s.length&&(i=new fr("onChange","change",null,i,u),n.push({event:i,listeners:s}))}var tc=null,nc=null;function LE(n){Kb(n,0)}function cd(n){var s=os(n);if(ui(s))return n}function fx(n,s){if(n==="change")return s}var mx=!1;if(Es){var tm;if(Es){var nm="oninput"in document;if(!nm){var px=document.createElement("div");px.setAttribute("oninput","return;"),nm=typeof px.oninput=="function"}tm=nm}else tm=!1;mx=tm&&(!document.documentMode||9<document.documentMode)}function gx(){tc&&(tc.detachEvent("onpropertychange",xx),nc=tc=null)}function xx(n){if(n.propertyName==="value"&&cd(nc)){var s=[];hx(s,nc,n,Ns(n)),ua(LE,s)}}function zE(n,s,i){n==="focusin"?(gx(),tc=s,nc=i,tc.attachEvent("onpropertychange",xx)):n==="focusout"&&gx()}function UE(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return cd(nc)}function BE(n,s){if(n==="click")return cd(s)}function qE(n,s){if(n==="input"||n==="change")return cd(s)}function FE(n,s){return n===s&&(n!==0||1/n===1/s)||n!==n&&s!==s}var us=typeof Object.is=="function"?Object.is:FE;function sc(n,s){if(us(n,s))return!0;if(typeof n!="object"||n===null||typeof s!="object"||s===null)return!1;var i=Object.keys(n),u=Object.keys(s);if(i.length!==u.length)return!1;for(u=0;u<i.length;u++){var f=i[u];if(!he.call(s,f)||!us(n[f],s[f]))return!1}return!0}function yx(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function bx(n,s){var i=yx(n);n=0;for(var u;i;){if(i.nodeType===3){if(u=n+i.textContent.length,n<=s&&u>=s)return{node:i,offset:s-n};n=u}e:{for(;i;){if(i.nextSibling){i=i.nextSibling;break e}i=i.parentNode}i=void 0}i=yx(i)}}function vx(n,s){return n&&s?n===s?!0:n&&n.nodeType===3?!1:s&&s.nodeType===3?vx(n,s.parentNode):"contains"in n?n.contains(s):n.compareDocumentPosition?!!(n.compareDocumentPosition(s)&16):!1:!1}function wx(n){n=n!=null&&n.ownerDocument!=null&&n.ownerDocument.defaultView!=null?n.ownerDocument.defaultView:window;for(var s=ur(n.document);s instanceof n.HTMLIFrameElement;){try{var i=typeof s.contentWindow.location.href=="string"}catch{i=!1}if(i)n=s.contentWindow;else break;s=ur(n.document)}return s}function sm(n){var s=n&&n.nodeName&&n.nodeName.toLowerCase();return s&&(s==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||s==="textarea"||n.contentEditable==="true")}var HE=Es&&"documentMode"in document&&11>=document.documentMode,jl=null,rm=null,rc=null,am=!1;function _x(n,s,i){var u=i.window===i?i.document:i.nodeType===9?i:i.ownerDocument;am||jl==null||jl!==ur(u)||(u=jl,"selectionStart"in u&&sm(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),rc&&sc(rc,u)||(rc=u,u=Zd(rm,"onSelect"),0<u.length&&(s=new fr("onSelect","select",null,s,i),n.push({event:s,listeners:u}),s.target=jl)))}function bi(n,s){var i={};return i[n.toLowerCase()]=s.toLowerCase(),i["Webkit"+n]="webkit"+s,i["Moz"+n]="moz"+s,i}var Al={animationend:bi("Animation","AnimationEnd"),animationiteration:bi("Animation","AnimationIteration"),animationstart:bi("Animation","AnimationStart"),transitionrun:bi("Transition","TransitionRun"),transitionstart:bi("Transition","TransitionStart"),transitioncancel:bi("Transition","TransitionCancel"),transitionend:bi("Transition","TransitionEnd")},im={},Nx={};Es&&(Nx=document.createElement("div").style,"AnimationEvent"in window||(delete Al.animationend.animation,delete Al.animationiteration.animation,delete Al.animationstart.animation),"TransitionEvent"in window||delete Al.transitionend.transition);function vi(n){if(im[n])return im[n];if(!Al[n])return n;var s=Al[n],i;for(i in s)if(s.hasOwnProperty(i)&&i in Nx)return im[n]=s[i];return n}var Ex=vi("animationend"),Sx=vi("animationiteration"),Tx=vi("animationstart"),$E=vi("transitionrun"),GE=vi("transitionstart"),QE=vi("transitioncancel"),jx=vi("transitionend"),Ax=new Map,lm="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");lm.push("scrollEnd");function Ks(n,s){Ax.set(n,s),or(s,[n])}var ud=typeof reportError=="function"?reportError:function(n){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof n=="object"&&n!==null&&typeof n.message=="string"?String(n.message):String(n),error:n});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",n);return}console.error(n)},Ts=[],Cl=0,om=0;function dd(){for(var n=Cl,s=om=Cl=0;s<n;){var i=Ts[s];Ts[s++]=null;var u=Ts[s];Ts[s++]=null;var f=Ts[s];Ts[s++]=null;var g=Ts[s];if(Ts[s++]=null,u!==null&&f!==null){var w=u.pending;w===null?f.next=f:(f.next=w.next,w.next=f),u.pending=f}g!==0&&Cx(i,f,g)}}function hd(n,s,i,u){Ts[Cl++]=n,Ts[Cl++]=s,Ts[Cl++]=i,Ts[Cl++]=u,om|=u,n.lanes|=u,n=n.alternate,n!==null&&(n.lanes|=u)}function cm(n,s,i,u){return hd(n,s,i,u),fd(n)}function wi(n,s){return hd(n,null,null,s),fd(n)}function Cx(n,s,i){n.lanes|=i;var u=n.alternate;u!==null&&(u.lanes|=i);for(var f=!1,g=n.return;g!==null;)g.childLanes|=i,u=g.alternate,u!==null&&(u.childLanes|=i),g.tag===22&&(n=g.stateNode,n===null||n._visibility&1||(f=!0)),n=g,g=g.return;return n.tag===3?(g=n.stateNode,f&&s!==null&&(f=31-qt(i),n=g.hiddenUpdates,u=n[f],u===null?n[f]=[s]:u.push(s),s.lane=i|536870912),g):null}function fd(n){if(50<Tc)throw Tc=0,yp=null,Error(a(185));for(var s=n.return;s!==null;)n=s,s=n.return;return n.tag===3?n.stateNode:null}var Il={};function KE(n,s,i,u){this.tag=n,this.key=i,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ds(n,s,i,u){return new KE(n,s,i,u)}function um(n){return n=n.prototype,!(!n||!n.isReactComponent)}function kr(n,s){var i=n.alternate;return i===null?(i=ds(n.tag,s,n.key,n.mode),i.elementType=n.elementType,i.type=n.type,i.stateNode=n.stateNode,i.alternate=n,n.alternate=i):(i.pendingProps=s,i.type=n.type,i.flags=0,i.subtreeFlags=0,i.deletions=null),i.flags=n.flags&65011712,i.childLanes=n.childLanes,i.lanes=n.lanes,i.child=n.child,i.memoizedProps=n.memoizedProps,i.memoizedState=n.memoizedState,i.updateQueue=n.updateQueue,s=n.dependencies,i.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},i.sibling=n.sibling,i.index=n.index,i.ref=n.ref,i.refCleanup=n.refCleanup,i}function Ix(n,s){n.flags&=65011714;var i=n.alternate;return i===null?(n.childLanes=0,n.lanes=s,n.child=null,n.subtreeFlags=0,n.memoizedProps=null,n.memoizedState=null,n.updateQueue=null,n.dependencies=null,n.stateNode=null):(n.childLanes=i.childLanes,n.lanes=i.lanes,n.child=i.child,n.subtreeFlags=0,n.deletions=null,n.memoizedProps=i.memoizedProps,n.memoizedState=i.memoizedState,n.updateQueue=i.updateQueue,n.type=i.type,s=i.dependencies,n.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),n}function md(n,s,i,u,f,g){var w=0;if(u=n,typeof n=="function")um(n)&&(w=1);else if(typeof n=="string")w=WS(n,i,fe.current)?26:n==="html"||n==="head"||n==="body"?27:5;else e:switch(n){case k:return n=ds(31,i,s,f),n.elementType=k,n.lanes=g,n;case O:return _i(i.children,f,g,s);case P:w=8,f|=24;break;case C:return n=ds(12,i,s,f|2),n.elementType=C,n.lanes=g,n;case Z:return n=ds(13,i,s,f),n.elementType=Z,n.lanes=g,n;case te:return n=ds(19,i,s,f),n.elementType=te,n.lanes=g,n;default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case M:w=10;break e;case L:w=9;break e;case F:w=11;break e;case E:w=14;break e;case T:w=16,u=null;break e}w=29,i=Error(a(130,n===null?"null":typeof n,"")),u=null}return s=ds(w,i,s,f),s.elementType=n,s.type=u,s.lanes=g,s}function _i(n,s,i,u){return n=ds(7,n,u,s),n.lanes=i,n}function dm(n,s,i){return n=ds(6,n,null,s),n.lanes=i,n}function Dx(n){var s=ds(18,null,null,0);return s.stateNode=n,s}function hm(n,s,i){return s=ds(4,n.children!==null?n.children:[],n.key,s),s.lanes=i,s.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},s}var Rx=new WeakMap;function js(n,s){if(typeof n=="object"&&n!==null){var i=Rx.get(n);return i!==void 0?i:(s={value:n,source:s,stack:ae(s)},Rx.set(n,s),s)}return{value:n,source:s,stack:ae(s)}}var Dl=[],Rl=0,pd=null,ac=0,As=[],Cs=0,ma=null,xr=1,yr="";function Mr(n,s){Dl[Rl++]=ac,Dl[Rl++]=pd,pd=n,ac=s}function kx(n,s,i){As[Cs++]=xr,As[Cs++]=yr,As[Cs++]=ma,ma=n;var u=xr;n=yr;var f=32-qt(u)-1;u&=~(1<<f),i+=1;var g=32-qt(s)+f;if(30<g){var w=f-f%5;g=(u&(1<<w)-1).toString(32),u>>=w,f-=w,xr=1<<32-qt(s)+f|i<<f|u,yr=g+n}else xr=1<<g|i<<f|u,yr=n}function fm(n){n.return!==null&&(Mr(n,1),kx(n,1,0))}function mm(n){for(;n===pd;)pd=Dl[--Rl],Dl[Rl]=null,ac=Dl[--Rl],Dl[Rl]=null;for(;n===ma;)ma=As[--Cs],As[Cs]=null,yr=As[--Cs],As[Cs]=null,xr=As[--Cs],As[Cs]=null}function Mx(n,s){As[Cs++]=xr,As[Cs++]=yr,As[Cs++]=ma,xr=s.id,yr=s.overflow,ma=n}var An=null,jt=null,We=!1,pa=null,Is=!1,pm=Error(a(519));function ga(n){var s=Error(a(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw ic(js(s,n)),pm}function Vx(n){var s=n.stateNode,i=n.type,u=n.memoizedProps;switch(s[Zt]=n,s[vn]=u,i){case"dialog":Ye("cancel",s),Ye("close",s);break;case"iframe":case"object":case"embed":Ye("load",s);break;case"video":case"audio":for(i=0;i<Ac.length;i++)Ye(Ac[i],s);break;case"source":Ye("error",s);break;case"img":case"image":case"link":Ye("error",s),Ye("load",s);break;case"details":Ye("toggle",s);break;case"input":Ye("invalid",s),Ku(s,u.value,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name,!0);break;case"select":Ye("invalid",s);break;case"textarea":Ye("invalid",s),la(s,u.value,u.defaultValue,u.children)}i=u.children,typeof i!="string"&&typeof i!="number"&&typeof i!="bigint"||s.textContent===""+i||u.suppressHydrationWarning===!0||Jb(s.textContent,i)?(u.popover!=null&&(Ye("beforetoggle",s),Ye("toggle",s)),u.onScroll!=null&&Ye("scroll",s),u.onScrollEnd!=null&&Ye("scrollend",s),u.onClick!=null&&(s.onclick=Fs),s=!0):s=!1,s||ga(n,!0)}function Ox(n){for(An=n.return;An;)switch(An.tag){case 5:case 31:case 13:Is=!1;return;case 27:case 3:Is=!0;return;default:An=An.return}}function kl(n){if(n!==An)return!1;if(!We)return Ox(n),We=!0,!1;var s=n.tag,i;if((i=s!==3&&s!==27)&&((i=s===5)&&(i=n.type,i=!(i!=="form"&&i!=="button")||kp(n.type,n.memoizedProps)),i=!i),i&&jt&&ga(n),Ox(n),s===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(a(317));jt=lv(n)}else if(s===31){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(a(317));jt=lv(n)}else s===27?(s=jt,Ia(n.type)?(n=Lp,Lp=null,jt=n):jt=s):jt=An?Rs(n.stateNode.nextSibling):null;return!0}function Ni(){jt=An=null,We=!1}function gm(){var n=pa;return n!==null&&(ns===null?ns=n:ns.push.apply(ns,n),pa=null),n}function ic(n){pa===null?pa=[n]:pa.push(n)}var xm=U(null),Ei=null,Vr=null;function xa(n,s,i){ue(xm,s._currentValue),s._currentValue=i}function Or(n){n._currentValue=xm.current,$(xm)}function ym(n,s,i){for(;n!==null;){var u=n.alternate;if((n.childLanes&s)!==s?(n.childLanes|=s,u!==null&&(u.childLanes|=s)):u!==null&&(u.childLanes&s)!==s&&(u.childLanes|=s),n===i)break;n=n.return}}function bm(n,s,i,u){var f=n.child;for(f!==null&&(f.return=n);f!==null;){var g=f.dependencies;if(g!==null){var w=f.child;g=g.firstContext;e:for(;g!==null;){var j=g;g=f;for(var B=0;B<s.length;B++)if(j.context===s[B]){g.lanes|=i,j=g.alternate,j!==null&&(j.lanes|=i),ym(g.return,i,n),u||(w=null);break e}g=j.next}}else if(f.tag===18){if(w=f.return,w===null)throw Error(a(341));w.lanes|=i,g=w.alternate,g!==null&&(g.lanes|=i),ym(w,i,n),w=null}else w=f.child;if(w!==null)w.return=f;else for(w=f;w!==null;){if(w===n){w=null;break}if(f=w.sibling,f!==null){f.return=w.return,w=f;break}w=w.return}f=w}}function Ml(n,s,i,u){n=null;for(var f=s,g=!1;f!==null;){if(!g){if((f.flags&524288)!==0)g=!0;else if((f.flags&262144)!==0)break}if(f.tag===10){var w=f.alternate;if(w===null)throw Error(a(387));if(w=w.memoizedProps,w!==null){var j=f.type;us(f.pendingProps.value,w.value)||(n!==null?n.push(j):n=[j])}}else if(f===Ie.current){if(w=f.alternate,w===null)throw Error(a(387));w.memoizedState.memoizedState!==f.memoizedState.memoizedState&&(n!==null?n.push(kc):n=[kc])}f=f.return}n!==null&&bm(s,n,i,u),s.flags|=262144}function gd(n){for(n=n.firstContext;n!==null;){if(!us(n.context._currentValue,n.memoizedValue))return!0;n=n.next}return!1}function Si(n){Ei=n,Vr=null,n=n.dependencies,n!==null&&(n.firstContext=null)}function Cn(n){return Px(Ei,n)}function xd(n,s){return Ei===null&&Si(n),Px(n,s)}function Px(n,s){var i=s._currentValue;if(s={context:s,memoizedValue:i,next:null},Vr===null){if(n===null)throw Error(a(308));Vr=s,n.dependencies={lanes:0,firstContext:s},n.flags|=524288}else Vr=Vr.next=s;return i}var YE=typeof AbortController<"u"?AbortController:function(){var n=[],s=this.signal={aborted:!1,addEventListener:function(i,u){n.push(u)}};this.abort=function(){s.aborted=!0,n.forEach(function(i){return i()})}},XE=r.unstable_scheduleCallback,ZE=r.unstable_NormalPriority,en={$$typeof:M,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function vm(){return{controller:new YE,data:new Map,refCount:0}}function lc(n){n.refCount--,n.refCount===0&&XE(ZE,function(){n.controller.abort()})}var oc=null,wm=0,Vl=0,Ol=null;function JE(n,s){if(oc===null){var i=oc=[];wm=0,Vl=Ep(),Ol={status:"pending",value:void 0,then:function(u){i.push(u)}}}return wm++,s.then(Lx,Lx),s}function Lx(){if(--wm===0&&oc!==null){Ol!==null&&(Ol.status="fulfilled");var n=oc;oc=null,Vl=0,Ol=null;for(var s=0;s<n.length;s++)(0,n[s])()}}function WE(n,s){var i=[],u={status:"pending",value:null,reason:null,then:function(f){i.push(f)}};return n.then(function(){u.status="fulfilled",u.value=s;for(var f=0;f<i.length;f++)(0,i[f])(s)},function(f){for(u.status="rejected",u.reason=f,f=0;f<i.length;f++)(0,i[f])(void 0)}),u}var zx=K.S;K.S=function(n,s){_b=rt(),typeof s=="object"&&s!==null&&typeof s.then=="function"&&JE(n,s),zx!==null&&zx(n,s)};var Ti=U(null);function _m(){var n=Ti.current;return n!==null?n:Et.pooledCache}function yd(n,s){s===null?ue(Ti,Ti.current):ue(Ti,s.pool)}function Ux(){var n=_m();return n===null?null:{parent:en._currentValue,pool:n}}var Pl=Error(a(460)),Nm=Error(a(474)),bd=Error(a(542)),vd={then:function(){}};function Bx(n){return n=n.status,n==="fulfilled"||n==="rejected"}function qx(n,s,i){switch(i=n[i],i===void 0?n.push(s):i!==s&&(s.then(Fs,Fs),s=i),s.status){case"fulfilled":return s.value;case"rejected":throw n=s.reason,Hx(n),n;default:if(typeof s.status=="string")s.then(Fs,Fs);else{if(n=Et,n!==null&&100<n.shellSuspendCounter)throw Error(a(482));n=s,n.status="pending",n.then(function(u){if(s.status==="pending"){var f=s;f.status="fulfilled",f.value=u}},function(u){if(s.status==="pending"){var f=s;f.status="rejected",f.reason=u}})}switch(s.status){case"fulfilled":return s.value;case"rejected":throw n=s.reason,Hx(n),n}throw Ai=s,Pl}}function ji(n){try{var s=n._init;return s(n._payload)}catch(i){throw i!==null&&typeof i=="object"&&typeof i.then=="function"?(Ai=i,Pl):i}}var Ai=null;function Fx(){if(Ai===null)throw Error(a(459));var n=Ai;return Ai=null,n}function Hx(n){if(n===Pl||n===bd)throw Error(a(483))}var Ll=null,cc=0;function wd(n){var s=cc;return cc+=1,Ll===null&&(Ll=[]),qx(Ll,n,s)}function uc(n,s){s=s.props.ref,n.ref=s!==void 0?s:null}function _d(n,s){throw s.$$typeof===N?Error(a(525)):(n=Object.prototype.toString.call(s),Error(a(31,n==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":n)))}function $x(n){function s(Q,H){if(n){var J=Q.deletions;J===null?(Q.deletions=[H],Q.flags|=16):J.push(H)}}function i(Q,H){if(!n)return null;for(;H!==null;)s(Q,H),H=H.sibling;return null}function u(Q){for(var H=new Map;Q!==null;)Q.key!==null?H.set(Q.key,Q):H.set(Q.index,Q),Q=Q.sibling;return H}function f(Q,H){return Q=kr(Q,H),Q.index=0,Q.sibling=null,Q}function g(Q,H,J){return Q.index=J,n?(J=Q.alternate,J!==null?(J=J.index,J<H?(Q.flags|=67108866,H):J):(Q.flags|=67108866,H)):(Q.flags|=1048576,H)}function w(Q){return n&&Q.alternate===null&&(Q.flags|=67108866),Q}function j(Q,H,J,oe){return H===null||H.tag!==6?(H=dm(J,Q.mode,oe),H.return=Q,H):(H=f(H,J),H.return=Q,H)}function B(Q,H,J,oe){var Me=J.type;return Me===O?le(Q,H,J.props.children,oe,J.key):H!==null&&(H.elementType===Me||typeof Me=="object"&&Me!==null&&Me.$$typeof===T&&ji(Me)===H.type)?(H=f(H,J.props),uc(H,J),H.return=Q,H):(H=md(J.type,J.key,J.props,null,Q.mode,oe),uc(H,J),H.return=Q,H)}function W(Q,H,J,oe){return H===null||H.tag!==4||H.stateNode.containerInfo!==J.containerInfo||H.stateNode.implementation!==J.implementation?(H=hm(J,Q.mode,oe),H.return=Q,H):(H=f(H,J.children||[]),H.return=Q,H)}function le(Q,H,J,oe,Me){return H===null||H.tag!==7?(H=_i(J,Q.mode,oe,Me),H.return=Q,H):(H=f(H,J),H.return=Q,H)}function ce(Q,H,J){if(typeof H=="string"&&H!==""||typeof H=="number"||typeof H=="bigint")return H=dm(""+H,Q.mode,J),H.return=Q,H;if(typeof H=="object"&&H!==null){switch(H.$$typeof){case S:return J=md(H.type,H.key,H.props,null,Q.mode,J),uc(J,H),J.return=Q,J;case z:return H=hm(H,Q.mode,J),H.return=Q,H;case T:return H=ji(H),ce(Q,H,J)}if(xe(H)||q(H))return H=_i(H,Q.mode,J,null),H.return=Q,H;if(typeof H.then=="function")return ce(Q,wd(H),J);if(H.$$typeof===M)return ce(Q,xd(Q,H),J);_d(Q,H)}return null}function ee(Q,H,J,oe){var Me=H!==null?H.key:null;if(typeof J=="string"&&J!==""||typeof J=="number"||typeof J=="bigint")return Me!==null?null:j(Q,H,""+J,oe);if(typeof J=="object"&&J!==null){switch(J.$$typeof){case S:return J.key===Me?B(Q,H,J,oe):null;case z:return J.key===Me?W(Q,H,J,oe):null;case T:return J=ji(J),ee(Q,H,J,oe)}if(xe(J)||q(J))return Me!==null?null:le(Q,H,J,oe,null);if(typeof J.then=="function")return ee(Q,H,wd(J),oe);if(J.$$typeof===M)return ee(Q,H,xd(Q,J),oe);_d(Q,J)}return null}function se(Q,H,J,oe,Me){if(typeof oe=="string"&&oe!==""||typeof oe=="number"||typeof oe=="bigint")return Q=Q.get(J)||null,j(H,Q,""+oe,Me);if(typeof oe=="object"&&oe!==null){switch(oe.$$typeof){case S:return Q=Q.get(oe.key===null?J:oe.key)||null,B(H,Q,oe,Me);case z:return Q=Q.get(oe.key===null?J:oe.key)||null,W(H,Q,oe,Me);case T:return oe=ji(oe),se(Q,H,J,oe,Me)}if(xe(oe)||q(oe))return Q=Q.get(J)||null,le(H,Q,oe,Me,null);if(typeof oe.then=="function")return se(Q,H,J,wd(oe),Me);if(oe.$$typeof===M)return se(Q,H,J,xd(H,oe),Me);_d(H,oe)}return null}function Ae(Q,H,J,oe){for(var Me=null,at=null,Re=H,He=H=0,Ze=null;Re!==null&&He<J.length;He++){Re.index>He?(Ze=Re,Re=null):Ze=Re.sibling;var it=ee(Q,Re,J[He],oe);if(it===null){Re===null&&(Re=Ze);break}n&&Re&&it.alternate===null&&s(Q,Re),H=g(it,H,He),at===null?Me=it:at.sibling=it,at=it,Re=Ze}if(He===J.length)return i(Q,Re),We&&Mr(Q,He),Me;if(Re===null){for(;He<J.length;He++)Re=ce(Q,J[He],oe),Re!==null&&(H=g(Re,H,He),at===null?Me=Re:at.sibling=Re,at=Re);return We&&Mr(Q,He),Me}for(Re=u(Re);He<J.length;He++)Ze=se(Re,Q,He,J[He],oe),Ze!==null&&(n&&Ze.alternate!==null&&Re.delete(Ze.key===null?He:Ze.key),H=g(Ze,H,He),at===null?Me=Ze:at.sibling=Ze,at=Ze);return n&&Re.forEach(function(Va){return s(Q,Va)}),We&&Mr(Q,He),Me}function Pe(Q,H,J,oe){if(J==null)throw Error(a(151));for(var Me=null,at=null,Re=H,He=H=0,Ze=null,it=J.next();Re!==null&&!it.done;He++,it=J.next()){Re.index>He?(Ze=Re,Re=null):Ze=Re.sibling;var Va=ee(Q,Re,it.value,oe);if(Va===null){Re===null&&(Re=Ze);break}n&&Re&&Va.alternate===null&&s(Q,Re),H=g(Va,H,He),at===null?Me=Va:at.sibling=Va,at=Va,Re=Ze}if(it.done)return i(Q,Re),We&&Mr(Q,He),Me;if(Re===null){for(;!it.done;He++,it=J.next())it=ce(Q,it.value,oe),it!==null&&(H=g(it,H,He),at===null?Me=it:at.sibling=it,at=it);return We&&Mr(Q,He),Me}for(Re=u(Re);!it.done;He++,it=J.next())it=se(Re,Q,He,it.value,oe),it!==null&&(n&&it.alternate!==null&&Re.delete(it.key===null?He:it.key),H=g(it,H,He),at===null?Me=it:at.sibling=it,at=it);return n&&Re.forEach(function(uT){return s(Q,uT)}),We&&Mr(Q,He),Me}function Nt(Q,H,J,oe){if(typeof J=="object"&&J!==null&&J.type===O&&J.key===null&&(J=J.props.children),typeof J=="object"&&J!==null){switch(J.$$typeof){case S:e:{for(var Me=J.key;H!==null;){if(H.key===Me){if(Me=J.type,Me===O){if(H.tag===7){i(Q,H.sibling),oe=f(H,J.props.children),oe.return=Q,Q=oe;break e}}else if(H.elementType===Me||typeof Me=="object"&&Me!==null&&Me.$$typeof===T&&ji(Me)===H.type){i(Q,H.sibling),oe=f(H,J.props),uc(oe,J),oe.return=Q,Q=oe;break e}i(Q,H);break}else s(Q,H);H=H.sibling}J.type===O?(oe=_i(J.props.children,Q.mode,oe,J.key),oe.return=Q,Q=oe):(oe=md(J.type,J.key,J.props,null,Q.mode,oe),uc(oe,J),oe.return=Q,Q=oe)}return w(Q);case z:e:{for(Me=J.key;H!==null;){if(H.key===Me)if(H.tag===4&&H.stateNode.containerInfo===J.containerInfo&&H.stateNode.implementation===J.implementation){i(Q,H.sibling),oe=f(H,J.children||[]),oe.return=Q,Q=oe;break e}else{i(Q,H);break}else s(Q,H);H=H.sibling}oe=hm(J,Q.mode,oe),oe.return=Q,Q=oe}return w(Q);case T:return J=ji(J),Nt(Q,H,J,oe)}if(xe(J))return Ae(Q,H,J,oe);if(q(J)){if(Me=q(J),typeof Me!="function")throw Error(a(150));return J=Me.call(J),Pe(Q,H,J,oe)}if(typeof J.then=="function")return Nt(Q,H,wd(J),oe);if(J.$$typeof===M)return Nt(Q,H,xd(Q,J),oe);_d(Q,J)}return typeof J=="string"&&J!==""||typeof J=="number"||typeof J=="bigint"?(J=""+J,H!==null&&H.tag===6?(i(Q,H.sibling),oe=f(H,J),oe.return=Q,Q=oe):(i(Q,H),oe=dm(J,Q.mode,oe),oe.return=Q,Q=oe),w(Q)):i(Q,H)}return function(Q,H,J,oe){try{cc=0;var Me=Nt(Q,H,J,oe);return Ll=null,Me}catch(Re){if(Re===Pl||Re===bd)throw Re;var at=ds(29,Re,null,Q.mode);return at.lanes=oe,at.return=Q,at}finally{}}}var Ci=$x(!0),Gx=$x(!1),ya=!1;function Em(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Sm(n,s){n=n.updateQueue,s.updateQueue===n&&(s.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,callbacks:null})}function ba(n){return{lane:n,tag:0,payload:null,callback:null,next:null}}function va(n,s,i){var u=n.updateQueue;if(u===null)return null;if(u=u.shared,(ct&2)!==0){var f=u.pending;return f===null?s.next=s:(s.next=f.next,f.next=s),u.pending=s,s=fd(n),Cx(n,null,i),s}return hd(n,u,s,i),fd(n)}function dc(n,s,i){if(s=s.updateQueue,s!==null&&(s=s.shared,(i&4194048)!==0)){var u=s.lanes;u&=n.pendingLanes,i|=u,s.lanes=i,er(n,i)}}function Tm(n,s){var i=n.updateQueue,u=n.alternate;if(u!==null&&(u=u.updateQueue,i===u)){var f=null,g=null;if(i=i.firstBaseUpdate,i!==null){do{var w={lane:i.lane,tag:i.tag,payload:i.payload,callback:null,next:null};g===null?f=g=w:g=g.next=w,i=i.next}while(i!==null);g===null?f=g=s:g=g.next=s}else f=g=s;i={baseState:u.baseState,firstBaseUpdate:f,lastBaseUpdate:g,shared:u.shared,callbacks:u.callbacks},n.updateQueue=i;return}n=i.lastBaseUpdate,n===null?i.firstBaseUpdate=s:n.next=s,i.lastBaseUpdate=s}var jm=!1;function hc(){if(jm){var n=Ol;if(n!==null)throw n}}function fc(n,s,i,u){jm=!1;var f=n.updateQueue;ya=!1;var g=f.firstBaseUpdate,w=f.lastBaseUpdate,j=f.shared.pending;if(j!==null){f.shared.pending=null;var B=j,W=B.next;B.next=null,w===null?g=W:w.next=W,w=B;var le=n.alternate;le!==null&&(le=le.updateQueue,j=le.lastBaseUpdate,j!==w&&(j===null?le.firstBaseUpdate=W:j.next=W,le.lastBaseUpdate=B))}if(g!==null){var ce=f.baseState;w=0,le=W=B=null,j=g;do{var ee=j.lane&-536870913,se=ee!==j.lane;if(se?(Xe&ee)===ee:(u&ee)===ee){ee!==0&&ee===Vl&&(jm=!0),le!==null&&(le=le.next={lane:0,tag:j.tag,payload:j.payload,callback:null,next:null});e:{var Ae=n,Pe=j;ee=s;var Nt=i;switch(Pe.tag){case 1:if(Ae=Pe.payload,typeof Ae=="function"){ce=Ae.call(Nt,ce,ee);break e}ce=Ae;break e;case 3:Ae.flags=Ae.flags&-65537|128;case 0:if(Ae=Pe.payload,ee=typeof Ae=="function"?Ae.call(Nt,ce,ee):Ae,ee==null)break e;ce=b({},ce,ee);break e;case 2:ya=!0}}ee=j.callback,ee!==null&&(n.flags|=64,se&&(n.flags|=8192),se=f.callbacks,se===null?f.callbacks=[ee]:se.push(ee))}else se={lane:ee,tag:j.tag,payload:j.payload,callback:j.callback,next:null},le===null?(W=le=se,B=ce):le=le.next=se,w|=ee;if(j=j.next,j===null){if(j=f.shared.pending,j===null)break;se=j,j=se.next,se.next=null,f.lastBaseUpdate=se,f.shared.pending=null}}while(!0);le===null&&(B=ce),f.baseState=B,f.firstBaseUpdate=W,f.lastBaseUpdate=le,g===null&&(f.shared.lanes=0),Sa|=w,n.lanes=w,n.memoizedState=ce}}function Qx(n,s){if(typeof n!="function")throw Error(a(191,n));n.call(s)}function Kx(n,s){var i=n.callbacks;if(i!==null)for(n.callbacks=null,n=0;n<i.length;n++)Qx(i[n],s)}var zl=U(null),Nd=U(0);function Yx(n,s){n=$r,ue(Nd,n),ue(zl,s),$r=n|s.baseLanes}function Am(){ue(Nd,$r),ue(zl,zl.current)}function Cm(){$r=Nd.current,$(zl),$(Nd)}var hs=U(null),Ds=null;function wa(n){var s=n.alternate;ue(Yt,Yt.current&1),ue(hs,n),Ds===null&&(s===null||zl.current!==null||s.memoizedState!==null)&&(Ds=n)}function Im(n){ue(Yt,Yt.current),ue(hs,n),Ds===null&&(Ds=n)}function Xx(n){n.tag===22?(ue(Yt,Yt.current),ue(hs,n),Ds===null&&(Ds=n)):_a()}function _a(){ue(Yt,Yt.current),ue(hs,hs.current)}function fs(n){$(hs),Ds===n&&(Ds=null),$(Yt)}var Yt=U(0);function Ed(n){for(var s=n;s!==null;){if(s.tag===13){var i=s.memoizedState;if(i!==null&&(i=i.dehydrated,i===null||Op(i)||Pp(i)))return s}else if(s.tag===19&&(s.memoizedProps.revealOrder==="forwards"||s.memoizedProps.revealOrder==="backwards"||s.memoizedProps.revealOrder==="unstable_legacy-backwards"||s.memoizedProps.revealOrder==="together")){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var Pr=0,qe=null,wt=null,tn=null,Sd=!1,Ul=!1,Ii=!1,Td=0,mc=0,Bl=null,eS=0;function Ht(){throw Error(a(321))}function Dm(n,s){if(s===null)return!1;for(var i=0;i<s.length&&i<n.length;i++)if(!us(n[i],s[i]))return!1;return!0}function Rm(n,s,i,u,f,g){return Pr=g,qe=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,K.H=n===null||n.memoizedState===null?ky:Qm,Ii=!1,g=i(u,f),Ii=!1,Ul&&(g=Jx(s,i,u,f)),Zx(n),g}function Zx(n){K.H=xc;var s=wt!==null&&wt.next!==null;if(Pr=0,tn=wt=qe=null,Sd=!1,mc=0,Bl=null,s)throw Error(a(300));n===null||nn||(n=n.dependencies,n!==null&&gd(n)&&(nn=!0))}function Jx(n,s,i,u){qe=n;var f=0;do{if(Ul&&(Bl=null),mc=0,Ul=!1,25<=f)throw Error(a(301));if(f+=1,tn=wt=null,n.updateQueue!=null){var g=n.updateQueue;g.lastEffect=null,g.events=null,g.stores=null,g.memoCache!=null&&(g.memoCache.index=0)}K.H=My,g=s(i,u)}while(Ul);return g}function tS(){var n=K.H,s=n.useState()[0];return s=typeof s.then=="function"?pc(s):s,n=n.useState()[0],(wt!==null?wt.memoizedState:null)!==n&&(qe.flags|=1024),s}function km(){var n=Td!==0;return Td=0,n}function Mm(n,s,i){s.updateQueue=n.updateQueue,s.flags&=-2053,n.lanes&=~i}function Vm(n){if(Sd){for(n=n.memoizedState;n!==null;){var s=n.queue;s!==null&&(s.pending=null),n=n.next}Sd=!1}Pr=0,tn=wt=qe=null,Ul=!1,mc=Td=0,Bl=null}function Qn(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return tn===null?qe.memoizedState=tn=n:tn=tn.next=n,tn}function Xt(){if(wt===null){var n=qe.alternate;n=n!==null?n.memoizedState:null}else n=wt.next;var s=tn===null?qe.memoizedState:tn.next;if(s!==null)tn=s,wt=n;else{if(n===null)throw qe.alternate===null?Error(a(467)):Error(a(310));wt=n,n={memoizedState:wt.memoizedState,baseState:wt.baseState,baseQueue:wt.baseQueue,queue:wt.queue,next:null},tn===null?qe.memoizedState=tn=n:tn=tn.next=n}return tn}function jd(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function pc(n){var s=mc;return mc+=1,Bl===null&&(Bl=[]),n=qx(Bl,n,s),s=qe,(tn===null?s.memoizedState:tn.next)===null&&(s=s.alternate,K.H=s===null||s.memoizedState===null?ky:Qm),n}function Ad(n){if(n!==null&&typeof n=="object"){if(typeof n.then=="function")return pc(n);if(n.$$typeof===M)return Cn(n)}throw Error(a(438,String(n)))}function Om(n){var s=null,i=qe.updateQueue;if(i!==null&&(s=i.memoCache),s==null){var u=qe.alternate;u!==null&&(u=u.updateQueue,u!==null&&(u=u.memoCache,u!=null&&(s={data:u.data.map(function(f){return f.slice()}),index:0})))}if(s==null&&(s={data:[],index:0}),i===null&&(i=jd(),qe.updateQueue=i),i.memoCache=s,i=s.data[s.index],i===void 0)for(i=s.data[s.index]=Array(n),u=0;u<n;u++)i[u]=R;return s.index++,i}function Lr(n,s){return typeof s=="function"?s(n):s}function Cd(n){var s=Xt();return Pm(s,wt,n)}function Pm(n,s,i){var u=n.queue;if(u===null)throw Error(a(311));u.lastRenderedReducer=i;var f=n.baseQueue,g=u.pending;if(g!==null){if(f!==null){var w=f.next;f.next=g.next,g.next=w}s.baseQueue=f=g,u.pending=null}if(g=n.baseState,f===null)n.memoizedState=g;else{s=f.next;var j=w=null,B=null,W=s,le=!1;do{var ce=W.lane&-536870913;if(ce!==W.lane?(Xe&ce)===ce:(Pr&ce)===ce){var ee=W.revertLane;if(ee===0)B!==null&&(B=B.next={lane:0,revertLane:0,gesture:null,action:W.action,hasEagerState:W.hasEagerState,eagerState:W.eagerState,next:null}),ce===Vl&&(le=!0);else if((Pr&ee)===ee){W=W.next,ee===Vl&&(le=!0);continue}else ce={lane:0,revertLane:W.revertLane,gesture:null,action:W.action,hasEagerState:W.hasEagerState,eagerState:W.eagerState,next:null},B===null?(j=B=ce,w=g):B=B.next=ce,qe.lanes|=ee,Sa|=ee;ce=W.action,Ii&&i(g,ce),g=W.hasEagerState?W.eagerState:i(g,ce)}else ee={lane:ce,revertLane:W.revertLane,gesture:W.gesture,action:W.action,hasEagerState:W.hasEagerState,eagerState:W.eagerState,next:null},B===null?(j=B=ee,w=g):B=B.next=ee,qe.lanes|=ce,Sa|=ce;W=W.next}while(W!==null&&W!==s);if(B===null?w=g:B.next=j,!us(g,n.memoizedState)&&(nn=!0,le&&(i=Ol,i!==null)))throw i;n.memoizedState=g,n.baseState=w,n.baseQueue=B,u.lastRenderedState=g}return f===null&&(u.lanes=0),[n.memoizedState,u.dispatch]}function Lm(n){var s=Xt(),i=s.queue;if(i===null)throw Error(a(311));i.lastRenderedReducer=n;var u=i.dispatch,f=i.pending,g=s.memoizedState;if(f!==null){i.pending=null;var w=f=f.next;do g=n(g,w.action),w=w.next;while(w!==f);us(g,s.memoizedState)||(nn=!0),s.memoizedState=g,s.baseQueue===null&&(s.baseState=g),i.lastRenderedState=g}return[g,u]}function Wx(n,s,i){var u=qe,f=Xt(),g=We;if(g){if(i===void 0)throw Error(a(407));i=i()}else i=s();var w=!us((wt||f).memoizedState,i);if(w&&(f.memoizedState=i,nn=!0),f=f.queue,Bm(ny.bind(null,u,f,n),[n]),f.getSnapshot!==s||w||tn!==null&&tn.memoizedState.tag&1){if(u.flags|=2048,ql(9,{destroy:void 0},ty.bind(null,u,f,i,s),null),Et===null)throw Error(a(349));g||(Pr&127)!==0||ey(u,s,i)}return i}function ey(n,s,i){n.flags|=16384,n={getSnapshot:s,value:i},s=qe.updateQueue,s===null?(s=jd(),qe.updateQueue=s,s.stores=[n]):(i=s.stores,i===null?s.stores=[n]:i.push(n))}function ty(n,s,i,u){s.value=i,s.getSnapshot=u,sy(s)&&ry(n)}function ny(n,s,i){return i(function(){sy(s)&&ry(n)})}function sy(n){var s=n.getSnapshot;n=n.value;try{var i=s();return!us(n,i)}catch{return!0}}function ry(n){var s=wi(n,2);s!==null&&ss(s,n,2)}function zm(n){var s=Qn();if(typeof n=="function"){var i=n;if(n=i(),Ii){Bn(!0);try{i()}finally{Bn(!1)}}}return s.memoizedState=s.baseState=n,s.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Lr,lastRenderedState:n},s}function ay(n,s,i,u){return n.baseState=i,Pm(n,wt,typeof u=="function"?u:Lr)}function nS(n,s,i,u,f){if(Rd(n))throw Error(a(485));if(n=s.action,n!==null){var g={payload:f,action:n,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(w){g.listeners.push(w)}};K.T!==null?i(!0):g.isTransition=!1,u(g),i=s.pending,i===null?(g.next=s.pending=g,iy(s,g)):(g.next=i.next,s.pending=i.next=g)}}function iy(n,s){var i=s.action,u=s.payload,f=n.state;if(s.isTransition){var g=K.T,w={};K.T=w;try{var j=i(f,u),B=K.S;B!==null&&B(w,j),ly(n,s,j)}catch(W){Um(n,s,W)}finally{g!==null&&w.types!==null&&(g.types=w.types),K.T=g}}else try{g=i(f,u),ly(n,s,g)}catch(W){Um(n,s,W)}}function ly(n,s,i){i!==null&&typeof i=="object"&&typeof i.then=="function"?i.then(function(u){oy(n,s,u)},function(u){return Um(n,s,u)}):oy(n,s,i)}function oy(n,s,i){s.status="fulfilled",s.value=i,cy(s),n.state=i,s=n.pending,s!==null&&(i=s.next,i===s?n.pending=null:(i=i.next,s.next=i,iy(n,i)))}function Um(n,s,i){var u=n.pending;if(n.pending=null,u!==null){u=u.next;do s.status="rejected",s.reason=i,cy(s),s=s.next;while(s!==u)}n.action=null}function cy(n){n=n.listeners;for(var s=0;s<n.length;s++)(0,n[s])()}function uy(n,s){return s}function dy(n,s){if(We){var i=Et.formState;if(i!==null){e:{var u=qe;if(We){if(jt){t:{for(var f=jt,g=Is;f.nodeType!==8;){if(!g){f=null;break t}if(f=Rs(f.nextSibling),f===null){f=null;break t}}g=f.data,f=g==="F!"||g==="F"?f:null}if(f){jt=Rs(f.nextSibling),u=f.data==="F!";break e}}ga(u)}u=!1}u&&(s=i[0])}}return i=Qn(),i.memoizedState=i.baseState=s,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:uy,lastRenderedState:s},i.queue=u,i=Iy.bind(null,qe,u),u.dispatch=i,u=zm(!1),g=Gm.bind(null,qe,!1,u.queue),u=Qn(),f={state:s,dispatch:null,action:n,pending:null},u.queue=f,i=nS.bind(null,qe,f,g,i),f.dispatch=i,u.memoizedState=n,[s,i,!1]}function hy(n){var s=Xt();return fy(s,wt,n)}function fy(n,s,i){if(s=Pm(n,s,uy)[0],n=Cd(Lr)[0],typeof s=="object"&&s!==null&&typeof s.then=="function")try{var u=pc(s)}catch(w){throw w===Pl?bd:w}else u=s;s=Xt();var f=s.queue,g=f.dispatch;return i!==s.memoizedState&&(qe.flags|=2048,ql(9,{destroy:void 0},sS.bind(null,f,i),null)),[u,g,n]}function sS(n,s){n.action=s}function my(n){var s=Xt(),i=wt;if(i!==null)return fy(s,i,n);Xt(),s=s.memoizedState,i=Xt();var u=i.queue.dispatch;return i.memoizedState=n,[s,u,!1]}function ql(n,s,i,u){return n={tag:n,create:i,deps:u,inst:s,next:null},s=qe.updateQueue,s===null&&(s=jd(),qe.updateQueue=s),i=s.lastEffect,i===null?s.lastEffect=n.next=n:(u=i.next,i.next=n,n.next=u,s.lastEffect=n),n}function py(){return Xt().memoizedState}function Id(n,s,i,u){var f=Qn();qe.flags|=n,f.memoizedState=ql(1|s,{destroy:void 0},i,u===void 0?null:u)}function Dd(n,s,i,u){var f=Xt();u=u===void 0?null:u;var g=f.memoizedState.inst;wt!==null&&u!==null&&Dm(u,wt.memoizedState.deps)?f.memoizedState=ql(s,g,i,u):(qe.flags|=n,f.memoizedState=ql(1|s,g,i,u))}function gy(n,s){Id(8390656,8,n,s)}function Bm(n,s){Dd(2048,8,n,s)}function rS(n){qe.flags|=4;var s=qe.updateQueue;if(s===null)s=jd(),qe.updateQueue=s,s.events=[n];else{var i=s.events;i===null?s.events=[n]:i.push(n)}}function xy(n){var s=Xt().memoizedState;return rS({ref:s,nextImpl:n}),function(){if((ct&2)!==0)throw Error(a(440));return s.impl.apply(void 0,arguments)}}function yy(n,s){return Dd(4,2,n,s)}function by(n,s){return Dd(4,4,n,s)}function vy(n,s){if(typeof s=="function"){n=n();var i=s(n);return function(){typeof i=="function"?i():s(null)}}if(s!=null)return n=n(),s.current=n,function(){s.current=null}}function wy(n,s,i){i=i!=null?i.concat([n]):null,Dd(4,4,vy.bind(null,s,n),i)}function qm(){}function _y(n,s){var i=Xt();s=s===void 0?null:s;var u=i.memoizedState;return s!==null&&Dm(s,u[1])?u[0]:(i.memoizedState=[n,s],n)}function Ny(n,s){var i=Xt();s=s===void 0?null:s;var u=i.memoizedState;if(s!==null&&Dm(s,u[1]))return u[0];if(u=n(),Ii){Bn(!0);try{n()}finally{Bn(!1)}}return i.memoizedState=[u,s],u}function Fm(n,s,i){return i===void 0||(Pr&1073741824)!==0&&(Xe&261930)===0?n.memoizedState=s:(n.memoizedState=i,n=Eb(),qe.lanes|=n,Sa|=n,i)}function Ey(n,s,i,u){return us(i,s)?i:zl.current!==null?(n=Fm(n,i,u),us(n,s)||(nn=!0),n):(Pr&42)===0||(Pr&1073741824)!==0&&(Xe&261930)===0?(nn=!0,n.memoizedState=i):(n=Eb(),qe.lanes|=n,Sa|=n,s)}function Sy(n,s,i,u,f){var g=G.p;G.p=g!==0&&8>g?g:8;var w=K.T,j={};K.T=j,Gm(n,!1,s,i);try{var B=f(),W=K.S;if(W!==null&&W(j,B),B!==null&&typeof B=="object"&&typeof B.then=="function"){var le=WE(B,u);gc(n,s,le,gs(n))}else gc(n,s,u,gs(n))}catch(ce){gc(n,s,{then:function(){},status:"rejected",reason:ce},gs())}finally{G.p=g,w!==null&&j.types!==null&&(w.types=j.types),K.T=w}}function aS(){}function Hm(n,s,i,u){if(n.tag!==5)throw Error(a(476));var f=Ty(n).queue;Sy(n,f,s,pe,i===null?aS:function(){return jy(n),i(u)})}function Ty(n){var s=n.memoizedState;if(s!==null)return s;s={memoizedState:pe,baseState:pe,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Lr,lastRenderedState:pe},next:null};var i={};return s.next={memoizedState:i,baseState:i,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Lr,lastRenderedState:i},next:null},n.memoizedState=s,n=n.alternate,n!==null&&(n.memoizedState=s),s}function jy(n){var s=Ty(n);s.next===null&&(s=n.alternate.memoizedState),gc(n,s.next.queue,{},gs())}function $m(){return Cn(kc)}function Ay(){return Xt().memoizedState}function Cy(){return Xt().memoizedState}function iS(n){for(var s=n.return;s!==null;){switch(s.tag){case 24:case 3:var i=gs();n=ba(i);var u=va(s,n,i);u!==null&&(ss(u,s,i),dc(u,s,i)),s={cache:vm()},n.payload=s;return}s=s.return}}function lS(n,s,i){var u=gs();i={lane:u,revertLane:0,gesture:null,action:i,hasEagerState:!1,eagerState:null,next:null},Rd(n)?Dy(s,i):(i=cm(n,s,i,u),i!==null&&(ss(i,n,u),Ry(i,s,u)))}function Iy(n,s,i){var u=gs();gc(n,s,i,u)}function gc(n,s,i,u){var f={lane:u,revertLane:0,gesture:null,action:i,hasEagerState:!1,eagerState:null,next:null};if(Rd(n))Dy(s,f);else{var g=n.alternate;if(n.lanes===0&&(g===null||g.lanes===0)&&(g=s.lastRenderedReducer,g!==null))try{var w=s.lastRenderedState,j=g(w,i);if(f.hasEagerState=!0,f.eagerState=j,us(j,w))return hd(n,s,f,0),Et===null&&dd(),!1}catch{}finally{}if(i=cm(n,s,f,u),i!==null)return ss(i,n,u),Ry(i,s,u),!0}return!1}function Gm(n,s,i,u){if(u={lane:2,revertLane:Ep(),gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null},Rd(n)){if(s)throw Error(a(479))}else s=cm(n,i,u,2),s!==null&&ss(s,n,2)}function Rd(n){var s=n.alternate;return n===qe||s!==null&&s===qe}function Dy(n,s){Ul=Sd=!0;var i=n.pending;i===null?s.next=s:(s.next=i.next,i.next=s),n.pending=s}function Ry(n,s,i){if((i&4194048)!==0){var u=s.lanes;u&=n.pendingLanes,i|=u,s.lanes=i,er(n,i)}}var xc={readContext:Cn,use:Ad,useCallback:Ht,useContext:Ht,useEffect:Ht,useImperativeHandle:Ht,useLayoutEffect:Ht,useInsertionEffect:Ht,useMemo:Ht,useReducer:Ht,useRef:Ht,useState:Ht,useDebugValue:Ht,useDeferredValue:Ht,useTransition:Ht,useSyncExternalStore:Ht,useId:Ht,useHostTransitionStatus:Ht,useFormState:Ht,useActionState:Ht,useOptimistic:Ht,useMemoCache:Ht,useCacheRefresh:Ht};xc.useEffectEvent=Ht;var ky={readContext:Cn,use:Ad,useCallback:function(n,s){return Qn().memoizedState=[n,s===void 0?null:s],n},useContext:Cn,useEffect:gy,useImperativeHandle:function(n,s,i){i=i!=null?i.concat([n]):null,Id(4194308,4,vy.bind(null,s,n),i)},useLayoutEffect:function(n,s){return Id(4194308,4,n,s)},useInsertionEffect:function(n,s){Id(4,2,n,s)},useMemo:function(n,s){var i=Qn();s=s===void 0?null:s;var u=n();if(Ii){Bn(!0);try{n()}finally{Bn(!1)}}return i.memoizedState=[u,s],u},useReducer:function(n,s,i){var u=Qn();if(i!==void 0){var f=i(s);if(Ii){Bn(!0);try{i(s)}finally{Bn(!1)}}}else f=s;return u.memoizedState=u.baseState=f,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:f},u.queue=n,n=n.dispatch=lS.bind(null,qe,n),[u.memoizedState,n]},useRef:function(n){var s=Qn();return n={current:n},s.memoizedState=n},useState:function(n){n=zm(n);var s=n.queue,i=Iy.bind(null,qe,s);return s.dispatch=i,[n.memoizedState,i]},useDebugValue:qm,useDeferredValue:function(n,s){var i=Qn();return Fm(i,n,s)},useTransition:function(){var n=zm(!1);return n=Sy.bind(null,qe,n.queue,!0,!1),Qn().memoizedState=n,[!1,n]},useSyncExternalStore:function(n,s,i){var u=qe,f=Qn();if(We){if(i===void 0)throw Error(a(407));i=i()}else{if(i=s(),Et===null)throw Error(a(349));(Xe&127)!==0||ey(u,s,i)}f.memoizedState=i;var g={value:i,getSnapshot:s};return f.queue=g,gy(ny.bind(null,u,g,n),[n]),u.flags|=2048,ql(9,{destroy:void 0},ty.bind(null,u,g,i,s),null),i},useId:function(){var n=Qn(),s=Et.identifierPrefix;if(We){var i=yr,u=xr;i=(u&~(1<<32-qt(u)-1)).toString(32)+i,s="_"+s+"R_"+i,i=Td++,0<i&&(s+="H"+i.toString(32)),s+="_"}else i=eS++,s="_"+s+"r_"+i.toString(32)+"_";return n.memoizedState=s},useHostTransitionStatus:$m,useFormState:dy,useActionState:dy,useOptimistic:function(n){var s=Qn();s.memoizedState=s.baseState=n;var i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return s.queue=i,s=Gm.bind(null,qe,!0,i),i.dispatch=s,[n,s]},useMemoCache:Om,useCacheRefresh:function(){return Qn().memoizedState=iS.bind(null,qe)},useEffectEvent:function(n){var s=Qn(),i={impl:n};return s.memoizedState=i,function(){if((ct&2)!==0)throw Error(a(440));return i.impl.apply(void 0,arguments)}}},Qm={readContext:Cn,use:Ad,useCallback:_y,useContext:Cn,useEffect:Bm,useImperativeHandle:wy,useInsertionEffect:yy,useLayoutEffect:by,useMemo:Ny,useReducer:Cd,useRef:py,useState:function(){return Cd(Lr)},useDebugValue:qm,useDeferredValue:function(n,s){var i=Xt();return Ey(i,wt.memoizedState,n,s)},useTransition:function(){var n=Cd(Lr)[0],s=Xt().memoizedState;return[typeof n=="boolean"?n:pc(n),s]},useSyncExternalStore:Wx,useId:Ay,useHostTransitionStatus:$m,useFormState:hy,useActionState:hy,useOptimistic:function(n,s){var i=Xt();return ay(i,wt,n,s)},useMemoCache:Om,useCacheRefresh:Cy};Qm.useEffectEvent=xy;var My={readContext:Cn,use:Ad,useCallback:_y,useContext:Cn,useEffect:Bm,useImperativeHandle:wy,useInsertionEffect:yy,useLayoutEffect:by,useMemo:Ny,useReducer:Lm,useRef:py,useState:function(){return Lm(Lr)},useDebugValue:qm,useDeferredValue:function(n,s){var i=Xt();return wt===null?Fm(i,n,s):Ey(i,wt.memoizedState,n,s)},useTransition:function(){var n=Lm(Lr)[0],s=Xt().memoizedState;return[typeof n=="boolean"?n:pc(n),s]},useSyncExternalStore:Wx,useId:Ay,useHostTransitionStatus:$m,useFormState:my,useActionState:my,useOptimistic:function(n,s){var i=Xt();return wt!==null?ay(i,wt,n,s):(i.baseState=n,[n,i.queue.dispatch])},useMemoCache:Om,useCacheRefresh:Cy};My.useEffectEvent=xy;function Km(n,s,i,u){s=n.memoizedState,i=i(u,s),i=i==null?s:b({},s,i),n.memoizedState=i,n.lanes===0&&(n.updateQueue.baseState=i)}var Ym={enqueueSetState:function(n,s,i){n=n._reactInternals;var u=gs(),f=ba(u);f.payload=s,i!=null&&(f.callback=i),s=va(n,f,u),s!==null&&(ss(s,n,u),dc(s,n,u))},enqueueReplaceState:function(n,s,i){n=n._reactInternals;var u=gs(),f=ba(u);f.tag=1,f.payload=s,i!=null&&(f.callback=i),s=va(n,f,u),s!==null&&(ss(s,n,u),dc(s,n,u))},enqueueForceUpdate:function(n,s){n=n._reactInternals;var i=gs(),u=ba(i);u.tag=2,s!=null&&(u.callback=s),s=va(n,u,i),s!==null&&(ss(s,n,i),dc(s,n,i))}};function Vy(n,s,i,u,f,g,w){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(u,g,w):s.prototype&&s.prototype.isPureReactComponent?!sc(i,u)||!sc(f,g):!0}function Oy(n,s,i,u){n=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(i,u),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(i,u),s.state!==n&&Ym.enqueueReplaceState(s,s.state,null)}function Di(n,s){var i=s;if("ref"in s){i={};for(var u in s)u!=="ref"&&(i[u]=s[u])}if(n=n.defaultProps){i===s&&(i=b({},i));for(var f in n)i[f]===void 0&&(i[f]=n[f])}return i}function Py(n){ud(n)}function Ly(n){console.error(n)}function zy(n){ud(n)}function kd(n,s){try{var i=n.onUncaughtError;i(s.value,{componentStack:s.stack})}catch(u){setTimeout(function(){throw u})}}function Uy(n,s,i){try{var u=n.onCaughtError;u(i.value,{componentStack:i.stack,errorBoundary:s.tag===1?s.stateNode:null})}catch(f){setTimeout(function(){throw f})}}function Xm(n,s,i){return i=ba(i),i.tag=3,i.payload={element:null},i.callback=function(){kd(n,s)},i}function By(n){return n=ba(n),n.tag=3,n}function qy(n,s,i,u){var f=i.type.getDerivedStateFromError;if(typeof f=="function"){var g=u.value;n.payload=function(){return f(g)},n.callback=function(){Uy(s,i,u)}}var w=i.stateNode;w!==null&&typeof w.componentDidCatch=="function"&&(n.callback=function(){Uy(s,i,u),typeof f!="function"&&(Ta===null?Ta=new Set([this]):Ta.add(this));var j=u.stack;this.componentDidCatch(u.value,{componentStack:j!==null?j:""})})}function oS(n,s,i,u,f){if(i.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){if(s=i.alternate,s!==null&&Ml(s,i,f,!0),i=hs.current,i!==null){switch(i.tag){case 31:case 13:return Ds===null?$d():i.alternate===null&&$t===0&&($t=3),i.flags&=-257,i.flags|=65536,i.lanes=f,u===vd?i.flags|=16384:(s=i.updateQueue,s===null?i.updateQueue=new Set([u]):s.add(u),wp(n,u,f)),!1;case 22:return i.flags|=65536,u===vd?i.flags|=16384:(s=i.updateQueue,s===null?(s={transitions:null,markerInstances:null,retryQueue:new Set([u])},i.updateQueue=s):(i=s.retryQueue,i===null?s.retryQueue=new Set([u]):i.add(u)),wp(n,u,f)),!1}throw Error(a(435,i.tag))}return wp(n,u,f),$d(),!1}if(We)return s=hs.current,s!==null?((s.flags&65536)===0&&(s.flags|=256),s.flags|=65536,s.lanes=f,u!==pm&&(n=Error(a(422),{cause:u}),ic(js(n,i)))):(u!==pm&&(s=Error(a(423),{cause:u}),ic(js(s,i))),n=n.current.alternate,n.flags|=65536,f&=-f,n.lanes|=f,u=js(u,i),f=Xm(n.stateNode,u,f),Tm(n,f),$t!==4&&($t=2)),!1;var g=Error(a(520),{cause:u});if(g=js(g,i),Sc===null?Sc=[g]:Sc.push(g),$t!==4&&($t=2),s===null)return!0;u=js(u,i),i=s;do{switch(i.tag){case 3:return i.flags|=65536,n=f&-f,i.lanes|=n,n=Xm(i.stateNode,u,n),Tm(i,n),!1;case 1:if(s=i.type,g=i.stateNode,(i.flags&128)===0&&(typeof s.getDerivedStateFromError=="function"||g!==null&&typeof g.componentDidCatch=="function"&&(Ta===null||!Ta.has(g))))return i.flags|=65536,f&=-f,i.lanes|=f,f=By(f),qy(f,n,i,u),Tm(i,f),!1}i=i.return}while(i!==null);return!1}var Zm=Error(a(461)),nn=!1;function In(n,s,i,u){s.child=n===null?Gx(s,null,i,u):Ci(s,n.child,i,u)}function Fy(n,s,i,u,f){i=i.render;var g=s.ref;if("ref"in u){var w={};for(var j in u)j!=="ref"&&(w[j]=u[j])}else w=u;return Si(s),u=Rm(n,s,i,w,g,f),j=km(),n!==null&&!nn?(Mm(n,s,f),zr(n,s,f)):(We&&j&&fm(s),s.flags|=1,In(n,s,u,f),s.child)}function Hy(n,s,i,u,f){if(n===null){var g=i.type;return typeof g=="function"&&!um(g)&&g.defaultProps===void 0&&i.compare===null?(s.tag=15,s.type=g,$y(n,s,g,u,f)):(n=md(i.type,null,u,s,s.mode,f),n.ref=s.ref,n.return=s,s.child=n)}if(g=n.child,!ap(n,f)){var w=g.memoizedProps;if(i=i.compare,i=i!==null?i:sc,i(w,u)&&n.ref===s.ref)return zr(n,s,f)}return s.flags|=1,n=kr(g,u),n.ref=s.ref,n.return=s,s.child=n}function $y(n,s,i,u,f){if(n!==null){var g=n.memoizedProps;if(sc(g,u)&&n.ref===s.ref)if(nn=!1,s.pendingProps=u=g,ap(n,f))(n.flags&131072)!==0&&(nn=!0);else return s.lanes=n.lanes,zr(n,s,f)}return Jm(n,s,i,u,f)}function Gy(n,s,i,u){var f=u.children,g=n!==null?n.memoizedState:null;if(n===null&&s.stateNode===null&&(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),u.mode==="hidden"){if((s.flags&128)!==0){if(g=g!==null?g.baseLanes|i:i,n!==null){for(u=s.child=n.child,f=0;u!==null;)f=f|u.lanes|u.childLanes,u=u.sibling;u=f&~g}else u=0,s.child=null;return Qy(n,s,g,i,u)}if((i&536870912)!==0)s.memoizedState={baseLanes:0,cachePool:null},n!==null&&yd(s,g!==null?g.cachePool:null),g!==null?Yx(s,g):Am(),Xx(s);else return u=s.lanes=536870912,Qy(n,s,g!==null?g.baseLanes|i:i,i,u)}else g!==null?(yd(s,g.cachePool),Yx(s,g),_a(),s.memoizedState=null):(n!==null&&yd(s,null),Am(),_a());return In(n,s,f,i),s.child}function yc(n,s){return n!==null&&n.tag===22||s.stateNode!==null||(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),s.sibling}function Qy(n,s,i,u,f){var g=_m();return g=g===null?null:{parent:en._currentValue,pool:g},s.memoizedState={baseLanes:i,cachePool:g},n!==null&&yd(s,null),Am(),Xx(s),n!==null&&Ml(n,s,u,!0),s.childLanes=f,null}function Md(n,s){return s=Od({mode:s.mode,children:s.children},n.mode),s.ref=n.ref,n.child=s,s.return=n,s}function Ky(n,s,i){return Ci(s,n.child,null,i),n=Md(s,s.pendingProps),n.flags|=2,fs(s),s.memoizedState=null,n}function cS(n,s,i){var u=s.pendingProps,f=(s.flags&128)!==0;if(s.flags&=-129,n===null){if(We){if(u.mode==="hidden")return n=Md(s,u),s.lanes=536870912,yc(null,n);if(Im(s),(n=jt)?(n=iv(n,Is),n=n!==null&&n.data==="&"?n:null,n!==null&&(s.memoizedState={dehydrated:n,treeContext:ma!==null?{id:xr,overflow:yr}:null,retryLane:536870912,hydrationErrors:null},i=Dx(n),i.return=s,s.child=i,An=s,jt=null)):n=null,n===null)throw ga(s);return s.lanes=536870912,null}return Md(s,u)}var g=n.memoizedState;if(g!==null){var w=g.dehydrated;if(Im(s),f)if(s.flags&256)s.flags&=-257,s=Ky(n,s,i);else if(s.memoizedState!==null)s.child=n.child,s.flags|=128,s=null;else throw Error(a(558));else if(nn||Ml(n,s,i,!1),f=(i&n.childLanes)!==0,nn||f){if(u=Et,u!==null&&(w=tr(u,i),w!==0&&w!==g.retryLane))throw g.retryLane=w,wi(n,w),ss(u,n,w),Zm;$d(),s=Ky(n,s,i)}else n=g.treeContext,jt=Rs(w.nextSibling),An=s,We=!0,pa=null,Is=!1,n!==null&&Mx(s,n),s=Md(s,u),s.flags|=4096;return s}return n=kr(n.child,{mode:u.mode,children:u.children}),n.ref=s.ref,s.child=n,n.return=s,n}function Vd(n,s){var i=s.ref;if(i===null)n!==null&&n.ref!==null&&(s.flags|=4194816);else{if(typeof i!="function"&&typeof i!="object")throw Error(a(284));(n===null||n.ref!==i)&&(s.flags|=4194816)}}function Jm(n,s,i,u,f){return Si(s),i=Rm(n,s,i,u,void 0,f),u=km(),n!==null&&!nn?(Mm(n,s,f),zr(n,s,f)):(We&&u&&fm(s),s.flags|=1,In(n,s,i,f),s.child)}function Yy(n,s,i,u,f,g){return Si(s),s.updateQueue=null,i=Jx(s,u,i,f),Zx(n),u=km(),n!==null&&!nn?(Mm(n,s,g),zr(n,s,g)):(We&&u&&fm(s),s.flags|=1,In(n,s,i,g),s.child)}function Xy(n,s,i,u,f){if(Si(s),s.stateNode===null){var g=Il,w=i.contextType;typeof w=="object"&&w!==null&&(g=Cn(w)),g=new i(u,g),s.memoizedState=g.state!==null&&g.state!==void 0?g.state:null,g.updater=Ym,s.stateNode=g,g._reactInternals=s,g=s.stateNode,g.props=u,g.state=s.memoizedState,g.refs={},Em(s),w=i.contextType,g.context=typeof w=="object"&&w!==null?Cn(w):Il,g.state=s.memoizedState,w=i.getDerivedStateFromProps,typeof w=="function"&&(Km(s,i,w,u),g.state=s.memoizedState),typeof i.getDerivedStateFromProps=="function"||typeof g.getSnapshotBeforeUpdate=="function"||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(w=g.state,typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount(),w!==g.state&&Ym.enqueueReplaceState(g,g.state,null),fc(s,u,g,f),hc(),g.state=s.memoizedState),typeof g.componentDidMount=="function"&&(s.flags|=4194308),u=!0}else if(n===null){g=s.stateNode;var j=s.memoizedProps,B=Di(i,j);g.props=B;var W=g.context,le=i.contextType;w=Il,typeof le=="object"&&le!==null&&(w=Cn(le));var ce=i.getDerivedStateFromProps;le=typeof ce=="function"||typeof g.getSnapshotBeforeUpdate=="function",j=s.pendingProps!==j,le||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(j||W!==w)&&Oy(s,g,u,w),ya=!1;var ee=s.memoizedState;g.state=ee,fc(s,u,g,f),hc(),W=s.memoizedState,j||ee!==W||ya?(typeof ce=="function"&&(Km(s,i,ce,u),W=s.memoizedState),(B=ya||Vy(s,i,B,u,ee,W,w))?(le||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount()),typeof g.componentDidMount=="function"&&(s.flags|=4194308)):(typeof g.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=u,s.memoizedState=W),g.props=u,g.state=W,g.context=w,u=B):(typeof g.componentDidMount=="function"&&(s.flags|=4194308),u=!1)}else{g=s.stateNode,Sm(n,s),w=s.memoizedProps,le=Di(i,w),g.props=le,ce=s.pendingProps,ee=g.context,W=i.contextType,B=Il,typeof W=="object"&&W!==null&&(B=Cn(W)),j=i.getDerivedStateFromProps,(W=typeof j=="function"||typeof g.getSnapshotBeforeUpdate=="function")||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(w!==ce||ee!==B)&&Oy(s,g,u,B),ya=!1,ee=s.memoizedState,g.state=ee,fc(s,u,g,f),hc();var se=s.memoizedState;w!==ce||ee!==se||ya||n!==null&&n.dependencies!==null&&gd(n.dependencies)?(typeof j=="function"&&(Km(s,i,j,u),se=s.memoizedState),(le=ya||Vy(s,i,le,u,ee,se,B)||n!==null&&n.dependencies!==null&&gd(n.dependencies))?(W||typeof g.UNSAFE_componentWillUpdate!="function"&&typeof g.componentWillUpdate!="function"||(typeof g.componentWillUpdate=="function"&&g.componentWillUpdate(u,se,B),typeof g.UNSAFE_componentWillUpdate=="function"&&g.UNSAFE_componentWillUpdate(u,se,B)),typeof g.componentDidUpdate=="function"&&(s.flags|=4),typeof g.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof g.componentDidUpdate!="function"||w===n.memoizedProps&&ee===n.memoizedState||(s.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||w===n.memoizedProps&&ee===n.memoizedState||(s.flags|=1024),s.memoizedProps=u,s.memoizedState=se),g.props=u,g.state=se,g.context=B,u=le):(typeof g.componentDidUpdate!="function"||w===n.memoizedProps&&ee===n.memoizedState||(s.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||w===n.memoizedProps&&ee===n.memoizedState||(s.flags|=1024),u=!1)}return g=u,Vd(n,s),u=(s.flags&128)!==0,g||u?(g=s.stateNode,i=u&&typeof i.getDerivedStateFromError!="function"?null:g.render(),s.flags|=1,n!==null&&u?(s.child=Ci(s,n.child,null,f),s.child=Ci(s,null,i,f)):In(n,s,i,f),s.memoizedState=g.state,n=s.child):n=zr(n,s,f),n}function Zy(n,s,i,u){return Ni(),s.flags|=256,In(n,s,i,u),s.child}var Wm={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function ep(n){return{baseLanes:n,cachePool:Ux()}}function tp(n,s,i){return n=n!==null?n.childLanes&~i:0,s&&(n|=ps),n}function Jy(n,s,i){var u=s.pendingProps,f=!1,g=(s.flags&128)!==0,w;if((w=g)||(w=n!==null&&n.memoizedState===null?!1:(Yt.current&2)!==0),w&&(f=!0,s.flags&=-129),w=(s.flags&32)!==0,s.flags&=-33,n===null){if(We){if(f?wa(s):_a(),(n=jt)?(n=iv(n,Is),n=n!==null&&n.data!=="&"?n:null,n!==null&&(s.memoizedState={dehydrated:n,treeContext:ma!==null?{id:xr,overflow:yr}:null,retryLane:536870912,hydrationErrors:null},i=Dx(n),i.return=s,s.child=i,An=s,jt=null)):n=null,n===null)throw ga(s);return Pp(n)?s.lanes=32:s.lanes=536870912,null}var j=u.children;return u=u.fallback,f?(_a(),f=s.mode,j=Od({mode:"hidden",children:j},f),u=_i(u,f,i,null),j.return=s,u.return=s,j.sibling=u,s.child=j,u=s.child,u.memoizedState=ep(i),u.childLanes=tp(n,w,i),s.memoizedState=Wm,yc(null,u)):(wa(s),np(s,j))}var B=n.memoizedState;if(B!==null&&(j=B.dehydrated,j!==null)){if(g)s.flags&256?(wa(s),s.flags&=-257,s=sp(n,s,i)):s.memoizedState!==null?(_a(),s.child=n.child,s.flags|=128,s=null):(_a(),j=u.fallback,f=s.mode,u=Od({mode:"visible",children:u.children},f),j=_i(j,f,i,null),j.flags|=2,u.return=s,j.return=s,u.sibling=j,s.child=u,Ci(s,n.child,null,i),u=s.child,u.memoizedState=ep(i),u.childLanes=tp(n,w,i),s.memoizedState=Wm,s=yc(null,u));else if(wa(s),Pp(j)){if(w=j.nextSibling&&j.nextSibling.dataset,w)var W=w.dgst;w=W,u=Error(a(419)),u.stack="",u.digest=w,ic({value:u,source:null,stack:null}),s=sp(n,s,i)}else if(nn||Ml(n,s,i,!1),w=(i&n.childLanes)!==0,nn||w){if(w=Et,w!==null&&(u=tr(w,i),u!==0&&u!==B.retryLane))throw B.retryLane=u,wi(n,u),ss(w,n,u),Zm;Op(j)||$d(),s=sp(n,s,i)}else Op(j)?(s.flags|=192,s.child=n.child,s=null):(n=B.treeContext,jt=Rs(j.nextSibling),An=s,We=!0,pa=null,Is=!1,n!==null&&Mx(s,n),s=np(s,u.children),s.flags|=4096);return s}return f?(_a(),j=u.fallback,f=s.mode,B=n.child,W=B.sibling,u=kr(B,{mode:"hidden",children:u.children}),u.subtreeFlags=B.subtreeFlags&65011712,W!==null?j=kr(W,j):(j=_i(j,f,i,null),j.flags|=2),j.return=s,u.return=s,u.sibling=j,s.child=u,yc(null,u),u=s.child,j=n.child.memoizedState,j===null?j=ep(i):(f=j.cachePool,f!==null?(B=en._currentValue,f=f.parent!==B?{parent:B,pool:B}:f):f=Ux(),j={baseLanes:j.baseLanes|i,cachePool:f}),u.memoizedState=j,u.childLanes=tp(n,w,i),s.memoizedState=Wm,yc(n.child,u)):(wa(s),i=n.child,n=i.sibling,i=kr(i,{mode:"visible",children:u.children}),i.return=s,i.sibling=null,n!==null&&(w=s.deletions,w===null?(s.deletions=[n],s.flags|=16):w.push(n)),s.child=i,s.memoizedState=null,i)}function np(n,s){return s=Od({mode:"visible",children:s},n.mode),s.return=n,n.child=s}function Od(n,s){return n=ds(22,n,null,s),n.lanes=0,n}function sp(n,s,i){return Ci(s,n.child,null,i),n=np(s,s.pendingProps.children),n.flags|=2,s.memoizedState=null,n}function Wy(n,s,i){n.lanes|=s;var u=n.alternate;u!==null&&(u.lanes|=s),ym(n.return,s,i)}function rp(n,s,i,u,f,g){var w=n.memoizedState;w===null?n.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:u,tail:i,tailMode:f,treeForkCount:g}:(w.isBackwards=s,w.rendering=null,w.renderingStartTime=0,w.last=u,w.tail=i,w.tailMode=f,w.treeForkCount=g)}function eb(n,s,i){var u=s.pendingProps,f=u.revealOrder,g=u.tail;u=u.children;var w=Yt.current,j=(w&2)!==0;if(j?(w=w&1|2,s.flags|=128):w&=1,ue(Yt,w),In(n,s,u,i),u=We?ac:0,!j&&n!==null&&(n.flags&128)!==0)e:for(n=s.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&Wy(n,i,s);else if(n.tag===19)Wy(n,i,s);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===s)break e;for(;n.sibling===null;){if(n.return===null||n.return===s)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}switch(f){case"forwards":for(i=s.child,f=null;i!==null;)n=i.alternate,n!==null&&Ed(n)===null&&(f=i),i=i.sibling;i=f,i===null?(f=s.child,s.child=null):(f=i.sibling,i.sibling=null),rp(s,!1,f,i,g,u);break;case"backwards":case"unstable_legacy-backwards":for(i=null,f=s.child,s.child=null;f!==null;){if(n=f.alternate,n!==null&&Ed(n)===null){s.child=f;break}n=f.sibling,f.sibling=i,i=f,f=n}rp(s,!0,i,null,g,u);break;case"together":rp(s,!1,null,null,void 0,u);break;default:s.memoizedState=null}return s.child}function zr(n,s,i){if(n!==null&&(s.dependencies=n.dependencies),Sa|=s.lanes,(i&s.childLanes)===0)if(n!==null){if(Ml(n,s,i,!1),(i&s.childLanes)===0)return null}else return null;if(n!==null&&s.child!==n.child)throw Error(a(153));if(s.child!==null){for(n=s.child,i=kr(n,n.pendingProps),s.child=i,i.return=s;n.sibling!==null;)n=n.sibling,i=i.sibling=kr(n,n.pendingProps),i.return=s;i.sibling=null}return s.child}function ap(n,s){return(n.lanes&s)!==0?!0:(n=n.dependencies,!!(n!==null&&gd(n)))}function uS(n,s,i){switch(s.tag){case 3:Oe(s,s.stateNode.containerInfo),xa(s,en,n.memoizedState.cache),Ni();break;case 27:case 5:De(s);break;case 4:Oe(s,s.stateNode.containerInfo);break;case 10:xa(s,s.type,s.memoizedProps.value);break;case 31:if(s.memoizedState!==null)return s.flags|=128,Im(s),null;break;case 13:var u=s.memoizedState;if(u!==null)return u.dehydrated!==null?(wa(s),s.flags|=128,null):(i&s.child.childLanes)!==0?Jy(n,s,i):(wa(s),n=zr(n,s,i),n!==null?n.sibling:null);wa(s);break;case 19:var f=(n.flags&128)!==0;if(u=(i&s.childLanes)!==0,u||(Ml(n,s,i,!1),u=(i&s.childLanes)!==0),f){if(u)return eb(n,s,i);s.flags|=128}if(f=s.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),ue(Yt,Yt.current),u)break;return null;case 22:return s.lanes=0,Gy(n,s,i,s.pendingProps);case 24:xa(s,en,n.memoizedState.cache)}return zr(n,s,i)}function tb(n,s,i){if(n!==null)if(n.memoizedProps!==s.pendingProps)nn=!0;else{if(!ap(n,i)&&(s.flags&128)===0)return nn=!1,uS(n,s,i);nn=(n.flags&131072)!==0}else nn=!1,We&&(s.flags&1048576)!==0&&kx(s,ac,s.index);switch(s.lanes=0,s.tag){case 16:e:{var u=s.pendingProps;if(n=ji(s.elementType),s.type=n,typeof n=="function")um(n)?(u=Di(n,u),s.tag=1,s=Xy(null,s,n,u,i)):(s.tag=0,s=Jm(null,s,n,u,i));else{if(n!=null){var f=n.$$typeof;if(f===F){s.tag=11,s=Fy(null,s,n,u,i);break e}else if(f===E){s.tag=14,s=Hy(null,s,n,u,i);break e}}throw s=de(n)||n,Error(a(306,s,""))}}return s;case 0:return Jm(n,s,s.type,s.pendingProps,i);case 1:return u=s.type,f=Di(u,s.pendingProps),Xy(n,s,u,f,i);case 3:e:{if(Oe(s,s.stateNode.containerInfo),n===null)throw Error(a(387));u=s.pendingProps;var g=s.memoizedState;f=g.element,Sm(n,s),fc(s,u,null,i);var w=s.memoizedState;if(u=w.cache,xa(s,en,u),u!==g.cache&&bm(s,[en],i,!0),hc(),u=w.element,g.isDehydrated)if(g={element:u,isDehydrated:!1,cache:w.cache},s.updateQueue.baseState=g,s.memoizedState=g,s.flags&256){s=Zy(n,s,u,i);break e}else if(u!==f){f=js(Error(a(424)),s),ic(f),s=Zy(n,s,u,i);break e}else{switch(n=s.stateNode.containerInfo,n.nodeType){case 9:n=n.body;break;default:n=n.nodeName==="HTML"?n.ownerDocument.body:n}for(jt=Rs(n.firstChild),An=s,We=!0,pa=null,Is=!0,i=Gx(s,null,u,i),s.child=i;i;)i.flags=i.flags&-3|4096,i=i.sibling}else{if(Ni(),u===f){s=zr(n,s,i);break e}In(n,s,u,i)}s=s.child}return s;case 26:return Vd(n,s),n===null?(i=hv(s.type,null,s.pendingProps,null))?s.memoizedState=i:We||(i=s.type,n=s.pendingProps,u=Jd(re.current).createElement(i),u[Zt]=s,u[vn]=n,Dn(u,i,n),Jt(u),s.stateNode=u):s.memoizedState=hv(s.type,n.memoizedProps,s.pendingProps,n.memoizedState),null;case 27:return De(s),n===null&&We&&(u=s.stateNode=cv(s.type,s.pendingProps,re.current),An=s,Is=!0,f=jt,Ia(s.type)?(Lp=f,jt=Rs(u.firstChild)):jt=f),In(n,s,s.pendingProps.children,i),Vd(n,s),n===null&&(s.flags|=4194304),s.child;case 5:return n===null&&We&&((f=u=jt)&&(u=US(u,s.type,s.pendingProps,Is),u!==null?(s.stateNode=u,An=s,jt=Rs(u.firstChild),Is=!1,f=!0):f=!1),f||ga(s)),De(s),f=s.type,g=s.pendingProps,w=n!==null?n.memoizedProps:null,u=g.children,kp(f,g)?u=null:w!==null&&kp(f,w)&&(s.flags|=32),s.memoizedState!==null&&(f=Rm(n,s,tS,null,null,i),kc._currentValue=f),Vd(n,s),In(n,s,u,i),s.child;case 6:return n===null&&We&&((n=i=jt)&&(i=BS(i,s.pendingProps,Is),i!==null?(s.stateNode=i,An=s,jt=null,n=!0):n=!1),n||ga(s)),null;case 13:return Jy(n,s,i);case 4:return Oe(s,s.stateNode.containerInfo),u=s.pendingProps,n===null?s.child=Ci(s,null,u,i):In(n,s,u,i),s.child;case 11:return Fy(n,s,s.type,s.pendingProps,i);case 7:return In(n,s,s.pendingProps,i),s.child;case 8:return In(n,s,s.pendingProps.children,i),s.child;case 12:return In(n,s,s.pendingProps.children,i),s.child;case 10:return u=s.pendingProps,xa(s,s.type,u.value),In(n,s,u.children,i),s.child;case 9:return f=s.type._context,u=s.pendingProps.children,Si(s),f=Cn(f),u=u(f),s.flags|=1,In(n,s,u,i),s.child;case 14:return Hy(n,s,s.type,s.pendingProps,i);case 15:return $y(n,s,s.type,s.pendingProps,i);case 19:return eb(n,s,i);case 31:return cS(n,s,i);case 22:return Gy(n,s,i,s.pendingProps);case 24:return Si(s),u=Cn(en),n===null?(f=_m(),f===null&&(f=Et,g=vm(),f.pooledCache=g,g.refCount++,g!==null&&(f.pooledCacheLanes|=i),f=g),s.memoizedState={parent:u,cache:f},Em(s),xa(s,en,f)):((n.lanes&i)!==0&&(Sm(n,s),fc(s,null,null,i),hc()),f=n.memoizedState,g=s.memoizedState,f.parent!==u?(f={parent:u,cache:u},s.memoizedState=f,s.lanes===0&&(s.memoizedState=s.updateQueue.baseState=f),xa(s,en,u)):(u=g.cache,xa(s,en,u),u!==f.cache&&bm(s,[en],i,!0))),In(n,s,s.pendingProps.children,i),s.child;case 29:throw s.pendingProps}throw Error(a(156,s.tag))}function Ur(n){n.flags|=4}function ip(n,s,i,u,f){if((s=(n.mode&32)!==0)&&(s=!1),s){if(n.flags|=16777216,(f&335544128)===f)if(n.stateNode.complete)n.flags|=8192;else if(Ab())n.flags|=8192;else throw Ai=vd,Nm}else n.flags&=-16777217}function nb(n,s){if(s.type!=="stylesheet"||(s.state.loading&4)!==0)n.flags&=-16777217;else if(n.flags|=16777216,!xv(s))if(Ab())n.flags|=8192;else throw Ai=vd,Nm}function Pd(n,s){s!==null&&(n.flags|=4),n.flags&16384&&(s=n.tag!==22?Fn():536870912,n.lanes|=s,Gl|=s)}function bc(n,s){if(!We)switch(n.tailMode){case"hidden":s=n.tail;for(var i=null;s!==null;)s.alternate!==null&&(i=s),s=s.sibling;i===null?n.tail=null:i.sibling=null;break;case"collapsed":i=n.tail;for(var u=null;i!==null;)i.alternate!==null&&(u=i),i=i.sibling;u===null?s||n.tail===null?n.tail=null:n.tail.sibling=null:u.sibling=null}}function At(n){var s=n.alternate!==null&&n.alternate.child===n.child,i=0,u=0;if(s)for(var f=n.child;f!==null;)i|=f.lanes|f.childLanes,u|=f.subtreeFlags&65011712,u|=f.flags&65011712,f.return=n,f=f.sibling;else for(f=n.child;f!==null;)i|=f.lanes|f.childLanes,u|=f.subtreeFlags,u|=f.flags,f.return=n,f=f.sibling;return n.subtreeFlags|=u,n.childLanes=i,s}function dS(n,s,i){var u=s.pendingProps;switch(mm(s),s.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return At(s),null;case 1:return At(s),null;case 3:return i=s.stateNode,u=null,n!==null&&(u=n.memoizedState.cache),s.memoizedState.cache!==u&&(s.flags|=2048),Or(en),ye(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(n===null||n.child===null)&&(kl(s)?Ur(s):n===null||n.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,gm())),At(s),null;case 26:var f=s.type,g=s.memoizedState;return n===null?(Ur(s),g!==null?(At(s),nb(s,g)):(At(s),ip(s,f,null,u,i))):g?g!==n.memoizedState?(Ur(s),At(s),nb(s,g)):(At(s),s.flags&=-16777217):(n=n.memoizedProps,n!==u&&Ur(s),At(s),ip(s,f,n,u,i)),null;case 27:if(Dt(s),i=re.current,f=s.type,n!==null&&s.stateNode!=null)n.memoizedProps!==u&&Ur(s);else{if(!u){if(s.stateNode===null)throw Error(a(166));return At(s),null}n=fe.current,kl(s)?Vx(s):(n=cv(f,u,i),s.stateNode=n,Ur(s))}return At(s),null;case 5:if(Dt(s),f=s.type,n!==null&&s.stateNode!=null)n.memoizedProps!==u&&Ur(s);else{if(!u){if(s.stateNode===null)throw Error(a(166));return At(s),null}if(g=fe.current,kl(s))Vx(s);else{var w=Jd(re.current);switch(g){case 1:g=w.createElementNS("http://www.w3.org/2000/svg",f);break;case 2:g=w.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;default:switch(f){case"svg":g=w.createElementNS("http://www.w3.org/2000/svg",f);break;case"math":g=w.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;case"script":g=w.createElement("div"),g.innerHTML="<script><\/script>",g=g.removeChild(g.firstChild);break;case"select":g=typeof u.is=="string"?w.createElement("select",{is:u.is}):w.createElement("select"),u.multiple?g.multiple=!0:u.size&&(g.size=u.size);break;default:g=typeof u.is=="string"?w.createElement(f,{is:u.is}):w.createElement(f)}}g[Zt]=s,g[vn]=u;e:for(w=s.child;w!==null;){if(w.tag===5||w.tag===6)g.appendChild(w.stateNode);else if(w.tag!==4&&w.tag!==27&&w.child!==null){w.child.return=w,w=w.child;continue}if(w===s)break e;for(;w.sibling===null;){if(w.return===null||w.return===s)break e;w=w.return}w.sibling.return=w.return,w=w.sibling}s.stateNode=g;e:switch(Dn(g,f,u),f){case"button":case"input":case"select":case"textarea":u=!!u.autoFocus;break e;case"img":u=!0;break e;default:u=!1}u&&Ur(s)}}return At(s),ip(s,s.type,n===null?null:n.memoizedProps,s.pendingProps,i),null;case 6:if(n&&s.stateNode!=null)n.memoizedProps!==u&&Ur(s);else{if(typeof u!="string"&&s.stateNode===null)throw Error(a(166));if(n=re.current,kl(s)){if(n=s.stateNode,i=s.memoizedProps,u=null,f=An,f!==null)switch(f.tag){case 27:case 5:u=f.memoizedProps}n[Zt]=s,n=!!(n.nodeValue===i||u!==null&&u.suppressHydrationWarning===!0||Jb(n.nodeValue,i)),n||ga(s,!0)}else n=Jd(n).createTextNode(u),n[Zt]=s,s.stateNode=n}return At(s),null;case 31:if(i=s.memoizedState,n===null||n.memoizedState!==null){if(u=kl(s),i!==null){if(n===null){if(!u)throw Error(a(318));if(n=s.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(a(557));n[Zt]=s}else Ni(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;At(s),n=!1}else i=gm(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=i),n=!0;if(!n)return s.flags&256?(fs(s),s):(fs(s),null);if((s.flags&128)!==0)throw Error(a(558))}return At(s),null;case 13:if(u=s.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(f=kl(s),u!==null&&u.dehydrated!==null){if(n===null){if(!f)throw Error(a(318));if(f=s.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(a(317));f[Zt]=s}else Ni(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;At(s),f=!1}else f=gm(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=f),f=!0;if(!f)return s.flags&256?(fs(s),s):(fs(s),null)}return fs(s),(s.flags&128)!==0?(s.lanes=i,s):(i=u!==null,n=n!==null&&n.memoizedState!==null,i&&(u=s.child,f=null,u.alternate!==null&&u.alternate.memoizedState!==null&&u.alternate.memoizedState.cachePool!==null&&(f=u.alternate.memoizedState.cachePool.pool),g=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(g=u.memoizedState.cachePool.pool),g!==f&&(u.flags|=2048)),i!==n&&i&&(s.child.flags|=8192),Pd(s,s.updateQueue),At(s),null);case 4:return ye(),n===null&&Ap(s.stateNode.containerInfo),At(s),null;case 10:return Or(s.type),At(s),null;case 19:if($(Yt),u=s.memoizedState,u===null)return At(s),null;if(f=(s.flags&128)!==0,g=u.rendering,g===null)if(f)bc(u,!1);else{if($t!==0||n!==null&&(n.flags&128)!==0)for(n=s.child;n!==null;){if(g=Ed(n),g!==null){for(s.flags|=128,bc(u,!1),n=g.updateQueue,s.updateQueue=n,Pd(s,n),s.subtreeFlags=0,n=i,i=s.child;i!==null;)Ix(i,n),i=i.sibling;return ue(Yt,Yt.current&1|2),We&&Mr(s,u.treeForkCount),s.child}n=n.sibling}u.tail!==null&&rt()>qd&&(s.flags|=128,f=!0,bc(u,!1),s.lanes=4194304)}else{if(!f)if(n=Ed(g),n!==null){if(s.flags|=128,f=!0,n=n.updateQueue,s.updateQueue=n,Pd(s,n),bc(u,!0),u.tail===null&&u.tailMode==="hidden"&&!g.alternate&&!We)return At(s),null}else 2*rt()-u.renderingStartTime>qd&&i!==536870912&&(s.flags|=128,f=!0,bc(u,!1),s.lanes=4194304);u.isBackwards?(g.sibling=s.child,s.child=g):(n=u.last,n!==null?n.sibling=g:s.child=g,u.last=g)}return u.tail!==null?(n=u.tail,u.rendering=n,u.tail=n.sibling,u.renderingStartTime=rt(),n.sibling=null,i=Yt.current,ue(Yt,f?i&1|2:i&1),We&&Mr(s,u.treeForkCount),n):(At(s),null);case 22:case 23:return fs(s),Cm(),u=s.memoizedState!==null,n!==null?n.memoizedState!==null!==u&&(s.flags|=8192):u&&(s.flags|=8192),u?(i&536870912)!==0&&(s.flags&128)===0&&(At(s),s.subtreeFlags&6&&(s.flags|=8192)):At(s),i=s.updateQueue,i!==null&&Pd(s,i.retryQueue),i=null,n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(i=n.memoizedState.cachePool.pool),u=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(u=s.memoizedState.cachePool.pool),u!==i&&(s.flags|=2048),n!==null&&$(Ti),null;case 24:return i=null,n!==null&&(i=n.memoizedState.cache),s.memoizedState.cache!==i&&(s.flags|=2048),Or(en),At(s),null;case 25:return null;case 30:return null}throw Error(a(156,s.tag))}function hS(n,s){switch(mm(s),s.tag){case 1:return n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 3:return Or(en),ye(),n=s.flags,(n&65536)!==0&&(n&128)===0?(s.flags=n&-65537|128,s):null;case 26:case 27:case 5:return Dt(s),null;case 31:if(s.memoizedState!==null){if(fs(s),s.alternate===null)throw Error(a(340));Ni()}return n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 13:if(fs(s),n=s.memoizedState,n!==null&&n.dehydrated!==null){if(s.alternate===null)throw Error(a(340));Ni()}return n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 19:return $(Yt),null;case 4:return ye(),null;case 10:return Or(s.type),null;case 22:case 23:return fs(s),Cm(),n!==null&&$(Ti),n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 24:return Or(en),null;case 25:return null;default:return null}}function sb(n,s){switch(mm(s),s.tag){case 3:Or(en),ye();break;case 26:case 27:case 5:Dt(s);break;case 4:ye();break;case 31:s.memoizedState!==null&&fs(s);break;case 13:fs(s);break;case 19:$(Yt);break;case 10:Or(s.type);break;case 22:case 23:fs(s),Cm(),n!==null&&$(Ti);break;case 24:Or(en)}}function vc(n,s){try{var i=s.updateQueue,u=i!==null?i.lastEffect:null;if(u!==null){var f=u.next;i=f;do{if((i.tag&n)===n){u=void 0;var g=i.create,w=i.inst;u=g(),w.destroy=u}i=i.next}while(i!==f)}}catch(j){gt(s,s.return,j)}}function Na(n,s,i){try{var u=s.updateQueue,f=u!==null?u.lastEffect:null;if(f!==null){var g=f.next;u=g;do{if((u.tag&n)===n){var w=u.inst,j=w.destroy;if(j!==void 0){w.destroy=void 0,f=s;var B=i,W=j;try{W()}catch(le){gt(f,B,le)}}}u=u.next}while(u!==g)}}catch(le){gt(s,s.return,le)}}function rb(n){var s=n.updateQueue;if(s!==null){var i=n.stateNode;try{Kx(s,i)}catch(u){gt(n,n.return,u)}}}function ab(n,s,i){i.props=Di(n.type,n.memoizedProps),i.state=n.memoizedState;try{i.componentWillUnmount()}catch(u){gt(n,s,u)}}function wc(n,s){try{var i=n.ref;if(i!==null){switch(n.tag){case 26:case 27:case 5:var u=n.stateNode;break;case 30:u=n.stateNode;break;default:u=n.stateNode}typeof i=="function"?n.refCleanup=i(u):i.current=u}}catch(f){gt(n,s,f)}}function br(n,s){var i=n.ref,u=n.refCleanup;if(i!==null)if(typeof u=="function")try{u()}catch(f){gt(n,s,f)}finally{n.refCleanup=null,n=n.alternate,n!=null&&(n.refCleanup=null)}else if(typeof i=="function")try{i(null)}catch(f){gt(n,s,f)}else i.current=null}function ib(n){var s=n.type,i=n.memoizedProps,u=n.stateNode;try{e:switch(s){case"button":case"input":case"select":case"textarea":i.autoFocus&&u.focus();break e;case"img":i.src?u.src=i.src:i.srcSet&&(u.srcset=i.srcSet)}}catch(f){gt(n,n.return,f)}}function lp(n,s,i){try{var u=n.stateNode;MS(u,n.type,i,s),u[vn]=s}catch(f){gt(n,n.return,f)}}function lb(n){return n.tag===5||n.tag===3||n.tag===26||n.tag===27&&Ia(n.type)||n.tag===4}function op(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||lb(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.tag===27&&Ia(n.type)||n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function cp(n,s,i){var u=n.tag;if(u===5||u===6)n=n.stateNode,s?(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i).insertBefore(n,s):(s=i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,s.appendChild(n),i=i._reactRootContainer,i!=null||s.onclick!==null||(s.onclick=Fs));else if(u!==4&&(u===27&&Ia(n.type)&&(i=n.stateNode,s=null),n=n.child,n!==null))for(cp(n,s,i),n=n.sibling;n!==null;)cp(n,s,i),n=n.sibling}function Ld(n,s,i){var u=n.tag;if(u===5||u===6)n=n.stateNode,s?i.insertBefore(n,s):i.appendChild(n);else if(u!==4&&(u===27&&Ia(n.type)&&(i=n.stateNode),n=n.child,n!==null))for(Ld(n,s,i),n=n.sibling;n!==null;)Ld(n,s,i),n=n.sibling}function ob(n){var s=n.stateNode,i=n.memoizedProps;try{for(var u=n.type,f=s.attributes;f.length;)s.removeAttributeNode(f[0]);Dn(s,u,i),s[Zt]=n,s[vn]=i}catch(g){gt(n,n.return,g)}}var Br=!1,sn=!1,up=!1,cb=typeof WeakSet=="function"?WeakSet:Set,_n=null;function fS(n,s){if(n=n.containerInfo,Dp=ah,n=wx(n),sm(n)){if("selectionStart"in n)var i={start:n.selectionStart,end:n.selectionEnd};else e:{i=(i=n.ownerDocument)&&i.defaultView||window;var u=i.getSelection&&i.getSelection();if(u&&u.rangeCount!==0){i=u.anchorNode;var f=u.anchorOffset,g=u.focusNode;u=u.focusOffset;try{i.nodeType,g.nodeType}catch{i=null;break e}var w=0,j=-1,B=-1,W=0,le=0,ce=n,ee=null;t:for(;;){for(var se;ce!==i||f!==0&&ce.nodeType!==3||(j=w+f),ce!==g||u!==0&&ce.nodeType!==3||(B=w+u),ce.nodeType===3&&(w+=ce.nodeValue.length),(se=ce.firstChild)!==null;)ee=ce,ce=se;for(;;){if(ce===n)break t;if(ee===i&&++W===f&&(j=w),ee===g&&++le===u&&(B=w),(se=ce.nextSibling)!==null)break;ce=ee,ee=ce.parentNode}ce=se}i=j===-1||B===-1?null:{start:j,end:B}}else i=null}i=i||{start:0,end:0}}else i=null;for(Rp={focusedElem:n,selectionRange:i},ah=!1,_n=s;_n!==null;)if(s=_n,n=s.child,(s.subtreeFlags&1028)!==0&&n!==null)n.return=s,_n=n;else for(;_n!==null;){switch(s=_n,g=s.alternate,n=s.flags,s.tag){case 0:if((n&4)!==0&&(n=s.updateQueue,n=n!==null?n.events:null,n!==null))for(i=0;i<n.length;i++)f=n[i],f.ref.impl=f.nextImpl;break;case 11:case 15:break;case 1:if((n&1024)!==0&&g!==null){n=void 0,i=s,f=g.memoizedProps,g=g.memoizedState,u=i.stateNode;try{var Ae=Di(i.type,f);n=u.getSnapshotBeforeUpdate(Ae,g),u.__reactInternalSnapshotBeforeUpdate=n}catch(Pe){gt(i,i.return,Pe)}}break;case 3:if((n&1024)!==0){if(n=s.stateNode.containerInfo,i=n.nodeType,i===9)Vp(n);else if(i===1)switch(n.nodeName){case"HEAD":case"HTML":case"BODY":Vp(n);break;default:n.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((n&1024)!==0)throw Error(a(163))}if(n=s.sibling,n!==null){n.return=s.return,_n=n;break}_n=s.return}}function ub(n,s,i){var u=i.flags;switch(i.tag){case 0:case 11:case 15:Fr(n,i),u&4&&vc(5,i);break;case 1:if(Fr(n,i),u&4)if(n=i.stateNode,s===null)try{n.componentDidMount()}catch(w){gt(i,i.return,w)}else{var f=Di(i.type,s.memoizedProps);s=s.memoizedState;try{n.componentDidUpdate(f,s,n.__reactInternalSnapshotBeforeUpdate)}catch(w){gt(i,i.return,w)}}u&64&&rb(i),u&512&&wc(i,i.return);break;case 3:if(Fr(n,i),u&64&&(n=i.updateQueue,n!==null)){if(s=null,i.child!==null)switch(i.child.tag){case 27:case 5:s=i.child.stateNode;break;case 1:s=i.child.stateNode}try{Kx(n,s)}catch(w){gt(i,i.return,w)}}break;case 27:s===null&&u&4&&ob(i);case 26:case 5:Fr(n,i),s===null&&u&4&&ib(i),u&512&&wc(i,i.return);break;case 12:Fr(n,i);break;case 31:Fr(n,i),u&4&&fb(n,i);break;case 13:Fr(n,i),u&4&&mb(n,i),u&64&&(n=i.memoizedState,n!==null&&(n=n.dehydrated,n!==null&&(i=_S.bind(null,i),qS(n,i))));break;case 22:if(u=i.memoizedState!==null||Br,!u){s=s!==null&&s.memoizedState!==null||sn,f=Br;var g=sn;Br=u,(sn=s)&&!g?Hr(n,i,(i.subtreeFlags&8772)!==0):Fr(n,i),Br=f,sn=g}break;case 30:break;default:Fr(n,i)}}function db(n){var s=n.alternate;s!==null&&(n.alternate=null,db(s)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(s=n.stateNode,s!==null&&gl(s)),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}var Pt=null,Wn=!1;function qr(n,s,i){for(i=i.child;i!==null;)hb(n,s,i),i=i.sibling}function hb(n,s,i){if(dn&&typeof dn.onCommitFiberUnmount=="function")try{dn.onCommitFiberUnmount(Un,i)}catch{}switch(i.tag){case 26:sn||br(i,s),qr(n,s,i),i.memoizedState?i.memoizedState.count--:i.stateNode&&(i=i.stateNode,i.parentNode.removeChild(i));break;case 27:sn||br(i,s);var u=Pt,f=Wn;Ia(i.type)&&(Pt=i.stateNode,Wn=!1),qr(n,s,i),Ic(i.stateNode),Pt=u,Wn=f;break;case 5:sn||br(i,s);case 6:if(u=Pt,f=Wn,Pt=null,qr(n,s,i),Pt=u,Wn=f,Pt!==null)if(Wn)try{(Pt.nodeType===9?Pt.body:Pt.nodeName==="HTML"?Pt.ownerDocument.body:Pt).removeChild(i.stateNode)}catch(g){gt(i,s,g)}else try{Pt.removeChild(i.stateNode)}catch(g){gt(i,s,g)}break;case 18:Pt!==null&&(Wn?(n=Pt,rv(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,i.stateNode),eo(n)):rv(Pt,i.stateNode));break;case 4:u=Pt,f=Wn,Pt=i.stateNode.containerInfo,Wn=!0,qr(n,s,i),Pt=u,Wn=f;break;case 0:case 11:case 14:case 15:Na(2,i,s),sn||Na(4,i,s),qr(n,s,i);break;case 1:sn||(br(i,s),u=i.stateNode,typeof u.componentWillUnmount=="function"&&ab(i,s,u)),qr(n,s,i);break;case 21:qr(n,s,i);break;case 22:sn=(u=sn)||i.memoizedState!==null,qr(n,s,i),sn=u;break;default:qr(n,s,i)}}function fb(n,s){if(s.memoizedState===null&&(n=s.alternate,n!==null&&(n=n.memoizedState,n!==null))){n=n.dehydrated;try{eo(n)}catch(i){gt(s,s.return,i)}}}function mb(n,s){if(s.memoizedState===null&&(n=s.alternate,n!==null&&(n=n.memoizedState,n!==null&&(n=n.dehydrated,n!==null))))try{eo(n)}catch(i){gt(s,s.return,i)}}function mS(n){switch(n.tag){case 31:case 13:case 19:var s=n.stateNode;return s===null&&(s=n.stateNode=new cb),s;case 22:return n=n.stateNode,s=n._retryCache,s===null&&(s=n._retryCache=new cb),s;default:throw Error(a(435,n.tag))}}function zd(n,s){var i=mS(n);s.forEach(function(u){if(!i.has(u)){i.add(u);var f=NS.bind(null,n,u);u.then(f,f)}})}function es(n,s){var i=s.deletions;if(i!==null)for(var u=0;u<i.length;u++){var f=i[u],g=n,w=s,j=w;e:for(;j!==null;){switch(j.tag){case 27:if(Ia(j.type)){Pt=j.stateNode,Wn=!1;break e}break;case 5:Pt=j.stateNode,Wn=!1;break e;case 3:case 4:Pt=j.stateNode.containerInfo,Wn=!0;break e}j=j.return}if(Pt===null)throw Error(a(160));hb(g,w,f),Pt=null,Wn=!1,g=f.alternate,g!==null&&(g.return=null),f.return=null}if(s.subtreeFlags&13886)for(s=s.child;s!==null;)pb(s,n),s=s.sibling}var Ys=null;function pb(n,s){var i=n.alternate,u=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:es(s,n),ts(n),u&4&&(Na(3,n,n.return),vc(3,n),Na(5,n,n.return));break;case 1:es(s,n),ts(n),u&512&&(sn||i===null||br(i,i.return)),u&64&&Br&&(n=n.updateQueue,n!==null&&(u=n.callbacks,u!==null&&(i=n.shared.hiddenCallbacks,n.shared.hiddenCallbacks=i===null?u:i.concat(u))));break;case 26:var f=Ys;if(es(s,n),ts(n),u&512&&(sn||i===null||br(i,i.return)),u&4){var g=i!==null?i.memoizedState:null;if(u=n.memoizedState,i===null)if(u===null)if(n.stateNode===null){e:{u=n.type,i=n.memoizedProps,f=f.ownerDocument||f;t:switch(u){case"title":g=f.getElementsByTagName("title")[0],(!g||g[ar]||g[Zt]||g.namespaceURI==="http://www.w3.org/2000/svg"||g.hasAttribute("itemprop"))&&(g=f.createElement(u),f.head.insertBefore(g,f.querySelector("head > title"))),Dn(g,u,i),g[Zt]=n,Jt(g),u=g;break e;case"link":var w=pv("link","href",f).get(u+(i.href||""));if(w){for(var j=0;j<w.length;j++)if(g=w[j],g.getAttribute("href")===(i.href==null||i.href===""?null:i.href)&&g.getAttribute("rel")===(i.rel==null?null:i.rel)&&g.getAttribute("title")===(i.title==null?null:i.title)&&g.getAttribute("crossorigin")===(i.crossOrigin==null?null:i.crossOrigin)){w.splice(j,1);break t}}g=f.createElement(u),Dn(g,u,i),f.head.appendChild(g);break;case"meta":if(w=pv("meta","content",f).get(u+(i.content||""))){for(j=0;j<w.length;j++)if(g=w[j],g.getAttribute("content")===(i.content==null?null:""+i.content)&&g.getAttribute("name")===(i.name==null?null:i.name)&&g.getAttribute("property")===(i.property==null?null:i.property)&&g.getAttribute("http-equiv")===(i.httpEquiv==null?null:i.httpEquiv)&&g.getAttribute("charset")===(i.charSet==null?null:i.charSet)){w.splice(j,1);break t}}g=f.createElement(u),Dn(g,u,i),f.head.appendChild(g);break;default:throw Error(a(468,u))}g[Zt]=n,Jt(g),u=g}n.stateNode=u}else gv(f,n.type,n.stateNode);else n.stateNode=mv(f,u,n.memoizedProps);else g!==u?(g===null?i.stateNode!==null&&(i=i.stateNode,i.parentNode.removeChild(i)):g.count--,u===null?gv(f,n.type,n.stateNode):mv(f,u,n.memoizedProps)):u===null&&n.stateNode!==null&&lp(n,n.memoizedProps,i.memoizedProps)}break;case 27:es(s,n),ts(n),u&512&&(sn||i===null||br(i,i.return)),i!==null&&u&4&&lp(n,n.memoizedProps,i.memoizedProps);break;case 5:if(es(s,n),ts(n),u&512&&(sn||i===null||br(i,i.return)),n.flags&32){f=n.stateNode;try{Jn(f,"")}catch(Ae){gt(n,n.return,Ae)}}u&4&&n.stateNode!=null&&(f=n.memoizedProps,lp(n,f,i!==null?i.memoizedProps:f)),u&1024&&(up=!0);break;case 6:if(es(s,n),ts(n),u&4){if(n.stateNode===null)throw Error(a(162));u=n.memoizedProps,i=n.stateNode;try{i.nodeValue=u}catch(Ae){gt(n,n.return,Ae)}}break;case 3:if(th=null,f=Ys,Ys=Wd(s.containerInfo),es(s,n),Ys=f,ts(n),u&4&&i!==null&&i.memoizedState.isDehydrated)try{eo(s.containerInfo)}catch(Ae){gt(n,n.return,Ae)}up&&(up=!1,gb(n));break;case 4:u=Ys,Ys=Wd(n.stateNode.containerInfo),es(s,n),ts(n),Ys=u;break;case 12:es(s,n),ts(n);break;case 31:es(s,n),ts(n),u&4&&(u=n.updateQueue,u!==null&&(n.updateQueue=null,zd(n,u)));break;case 13:es(s,n),ts(n),n.child.flags&8192&&n.memoizedState!==null!=(i!==null&&i.memoizedState!==null)&&(Bd=rt()),u&4&&(u=n.updateQueue,u!==null&&(n.updateQueue=null,zd(n,u)));break;case 22:f=n.memoizedState!==null;var B=i!==null&&i.memoizedState!==null,W=Br,le=sn;if(Br=W||f,sn=le||B,es(s,n),sn=le,Br=W,ts(n),u&8192)e:for(s=n.stateNode,s._visibility=f?s._visibility&-2:s._visibility|1,f&&(i===null||B||Br||sn||Ri(n)),i=null,s=n;;){if(s.tag===5||s.tag===26){if(i===null){B=i=s;try{if(g=B.stateNode,f)w=g.style,typeof w.setProperty=="function"?w.setProperty("display","none","important"):w.display="none";else{j=B.stateNode;var ce=B.memoizedProps.style,ee=ce!=null&&ce.hasOwnProperty("display")?ce.display:null;j.style.display=ee==null||typeof ee=="boolean"?"":(""+ee).trim()}}catch(Ae){gt(B,B.return,Ae)}}}else if(s.tag===6){if(i===null){B=s;try{B.stateNode.nodeValue=f?"":B.memoizedProps}catch(Ae){gt(B,B.return,Ae)}}}else if(s.tag===18){if(i===null){B=s;try{var se=B.stateNode;f?av(se,!0):av(B.stateNode,!1)}catch(Ae){gt(B,B.return,Ae)}}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===n)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===n)break e;for(;s.sibling===null;){if(s.return===null||s.return===n)break e;i===s&&(i=null),s=s.return}i===s&&(i=null),s.sibling.return=s.return,s=s.sibling}u&4&&(u=n.updateQueue,u!==null&&(i=u.retryQueue,i!==null&&(u.retryQueue=null,zd(n,i))));break;case 19:es(s,n),ts(n),u&4&&(u=n.updateQueue,u!==null&&(n.updateQueue=null,zd(n,u)));break;case 30:break;case 21:break;default:es(s,n),ts(n)}}function ts(n){var s=n.flags;if(s&2){try{for(var i,u=n.return;u!==null;){if(lb(u)){i=u;break}u=u.return}if(i==null)throw Error(a(160));switch(i.tag){case 27:var f=i.stateNode,g=op(n);Ld(n,g,f);break;case 5:var w=i.stateNode;i.flags&32&&(Jn(w,""),i.flags&=-33);var j=op(n);Ld(n,j,w);break;case 3:case 4:var B=i.stateNode.containerInfo,W=op(n);cp(n,W,B);break;default:throw Error(a(161))}}catch(le){gt(n,n.return,le)}n.flags&=-3}s&4096&&(n.flags&=-4097)}function gb(n){if(n.subtreeFlags&1024)for(n=n.child;n!==null;){var s=n;gb(s),s.tag===5&&s.flags&1024&&s.stateNode.reset(),n=n.sibling}}function Fr(n,s){if(s.subtreeFlags&8772)for(s=s.child;s!==null;)ub(n,s.alternate,s),s=s.sibling}function Ri(n){for(n=n.child;n!==null;){var s=n;switch(s.tag){case 0:case 11:case 14:case 15:Na(4,s,s.return),Ri(s);break;case 1:br(s,s.return);var i=s.stateNode;typeof i.componentWillUnmount=="function"&&ab(s,s.return,i),Ri(s);break;case 27:Ic(s.stateNode);case 26:case 5:br(s,s.return),Ri(s);break;case 22:s.memoizedState===null&&Ri(s);break;case 30:Ri(s);break;default:Ri(s)}n=n.sibling}}function Hr(n,s,i){for(i=i&&(s.subtreeFlags&8772)!==0,s=s.child;s!==null;){var u=s.alternate,f=n,g=s,w=g.flags;switch(g.tag){case 0:case 11:case 15:Hr(f,g,i),vc(4,g);break;case 1:if(Hr(f,g,i),u=g,f=u.stateNode,typeof f.componentDidMount=="function")try{f.componentDidMount()}catch(W){gt(u,u.return,W)}if(u=g,f=u.updateQueue,f!==null){var j=u.stateNode;try{var B=f.shared.hiddenCallbacks;if(B!==null)for(f.shared.hiddenCallbacks=null,f=0;f<B.length;f++)Qx(B[f],j)}catch(W){gt(u,u.return,W)}}i&&w&64&&rb(g),wc(g,g.return);break;case 27:ob(g);case 26:case 5:Hr(f,g,i),i&&u===null&&w&4&&ib(g),wc(g,g.return);break;case 12:Hr(f,g,i);break;case 31:Hr(f,g,i),i&&w&4&&fb(f,g);break;case 13:Hr(f,g,i),i&&w&4&&mb(f,g);break;case 22:g.memoizedState===null&&Hr(f,g,i),wc(g,g.return);break;case 30:break;default:Hr(f,g,i)}s=s.sibling}}function dp(n,s){var i=null;n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(i=n.memoizedState.cachePool.pool),n=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(n=s.memoizedState.cachePool.pool),n!==i&&(n!=null&&n.refCount++,i!=null&&lc(i))}function hp(n,s){n=null,s.alternate!==null&&(n=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==n&&(s.refCount++,n!=null&&lc(n))}function Xs(n,s,i,u){if(s.subtreeFlags&10256)for(s=s.child;s!==null;)xb(n,s,i,u),s=s.sibling}function xb(n,s,i,u){var f=s.flags;switch(s.tag){case 0:case 11:case 15:Xs(n,s,i,u),f&2048&&vc(9,s);break;case 1:Xs(n,s,i,u);break;case 3:Xs(n,s,i,u),f&2048&&(n=null,s.alternate!==null&&(n=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==n&&(s.refCount++,n!=null&&lc(n)));break;case 12:if(f&2048){Xs(n,s,i,u),n=s.stateNode;try{var g=s.memoizedProps,w=g.id,j=g.onPostCommit;typeof j=="function"&&j(w,s.alternate===null?"mount":"update",n.passiveEffectDuration,-0)}catch(B){gt(s,s.return,B)}}else Xs(n,s,i,u);break;case 31:Xs(n,s,i,u);break;case 13:Xs(n,s,i,u);break;case 23:break;case 22:g=s.stateNode,w=s.alternate,s.memoizedState!==null?g._visibility&2?Xs(n,s,i,u):_c(n,s):g._visibility&2?Xs(n,s,i,u):(g._visibility|=2,Fl(n,s,i,u,(s.subtreeFlags&10256)!==0||!1)),f&2048&&dp(w,s);break;case 24:Xs(n,s,i,u),f&2048&&hp(s.alternate,s);break;default:Xs(n,s,i,u)}}function Fl(n,s,i,u,f){for(f=f&&((s.subtreeFlags&10256)!==0||!1),s=s.child;s!==null;){var g=n,w=s,j=i,B=u,W=w.flags;switch(w.tag){case 0:case 11:case 15:Fl(g,w,j,B,f),vc(8,w);break;case 23:break;case 22:var le=w.stateNode;w.memoizedState!==null?le._visibility&2?Fl(g,w,j,B,f):_c(g,w):(le._visibility|=2,Fl(g,w,j,B,f)),f&&W&2048&&dp(w.alternate,w);break;case 24:Fl(g,w,j,B,f),f&&W&2048&&hp(w.alternate,w);break;default:Fl(g,w,j,B,f)}s=s.sibling}}function _c(n,s){if(s.subtreeFlags&10256)for(s=s.child;s!==null;){var i=n,u=s,f=u.flags;switch(u.tag){case 22:_c(i,u),f&2048&&dp(u.alternate,u);break;case 24:_c(i,u),f&2048&&hp(u.alternate,u);break;default:_c(i,u)}s=s.sibling}}var Nc=8192;function Hl(n,s,i){if(n.subtreeFlags&Nc)for(n=n.child;n!==null;)yb(n,s,i),n=n.sibling}function yb(n,s,i){switch(n.tag){case 26:Hl(n,s,i),n.flags&Nc&&n.memoizedState!==null&&eT(i,Ys,n.memoizedState,n.memoizedProps);break;case 5:Hl(n,s,i);break;case 3:case 4:var u=Ys;Ys=Wd(n.stateNode.containerInfo),Hl(n,s,i),Ys=u;break;case 22:n.memoizedState===null&&(u=n.alternate,u!==null&&u.memoizedState!==null?(u=Nc,Nc=16777216,Hl(n,s,i),Nc=u):Hl(n,s,i));break;default:Hl(n,s,i)}}function bb(n){var s=n.alternate;if(s!==null&&(n=s.child,n!==null)){s.child=null;do s=n.sibling,n.sibling=null,n=s;while(n!==null)}}function Ec(n){var s=n.deletions;if((n.flags&16)!==0){if(s!==null)for(var i=0;i<s.length;i++){var u=s[i];_n=u,wb(u,n)}bb(n)}if(n.subtreeFlags&10256)for(n=n.child;n!==null;)vb(n),n=n.sibling}function vb(n){switch(n.tag){case 0:case 11:case 15:Ec(n),n.flags&2048&&Na(9,n,n.return);break;case 3:Ec(n);break;case 12:Ec(n);break;case 22:var s=n.stateNode;n.memoizedState!==null&&s._visibility&2&&(n.return===null||n.return.tag!==13)?(s._visibility&=-3,Ud(n)):Ec(n);break;default:Ec(n)}}function Ud(n){var s=n.deletions;if((n.flags&16)!==0){if(s!==null)for(var i=0;i<s.length;i++){var u=s[i];_n=u,wb(u,n)}bb(n)}for(n=n.child;n!==null;){switch(s=n,s.tag){case 0:case 11:case 15:Na(8,s,s.return),Ud(s);break;case 22:i=s.stateNode,i._visibility&2&&(i._visibility&=-3,Ud(s));break;default:Ud(s)}n=n.sibling}}function wb(n,s){for(;_n!==null;){var i=_n;switch(i.tag){case 0:case 11:case 15:Na(8,i,s);break;case 23:case 22:if(i.memoizedState!==null&&i.memoizedState.cachePool!==null){var u=i.memoizedState.cachePool.pool;u!=null&&u.refCount++}break;case 24:lc(i.memoizedState.cache)}if(u=i.child,u!==null)u.return=i,_n=u;else e:for(i=n;_n!==null;){u=_n;var f=u.sibling,g=u.return;if(db(u),u===i){_n=null;break e}if(f!==null){f.return=g,_n=f;break e}_n=g}}}var pS={getCacheForType:function(n){var s=Cn(en),i=s.data.get(n);return i===void 0&&(i=n(),s.data.set(n,i)),i},cacheSignal:function(){return Cn(en).controller.signal}},gS=typeof WeakMap=="function"?WeakMap:Map,ct=0,Et=null,Ke=null,Xe=0,pt=0,ms=null,Ea=!1,$l=!1,fp=!1,$r=0,$t=0,Sa=0,ki=0,mp=0,ps=0,Gl=0,Sc=null,ns=null,pp=!1,Bd=0,_b=0,qd=1/0,Fd=null,Ta=null,mn=0,ja=null,Ql=null,Gr=0,gp=0,xp=null,Nb=null,Tc=0,yp=null;function gs(){return(ct&2)!==0&&Xe!==0?Xe&-Xe:K.T!==null?Ep():sr()}function Eb(){if(ps===0)if((Xe&536870912)===0||We){var n=Tt;Tt<<=1,(Tt&3932160)===0&&(Tt=262144),ps=n}else ps=536870912;return n=hs.current,n!==null&&(n.flags|=32),ps}function ss(n,s,i){(n===Et&&(pt===2||pt===9)||n.cancelPendingCommit!==null)&&(Kl(n,0),Aa(n,Xe,ps,!1)),fn(n,i),((ct&2)===0||n!==Et)&&(n===Et&&((ct&2)===0&&(ki|=i),$t===4&&Aa(n,Xe,ps,!1)),vr(n))}function Sb(n,s,i){if((ct&6)!==0)throw Error(a(327));var u=!i&&(s&127)===0&&(s&n.expiredLanes)===0||Vt(n,s),f=u?bS(n,s):vp(n,s,!0),g=u;do{if(f===0){$l&&!u&&Aa(n,s,0,!1);break}else{if(i=n.current.alternate,g&&!xS(i)){f=vp(n,s,!1),g=!1;continue}if(f===2){if(g=s,n.errorRecoveryDisabledLanes&g)var w=0;else w=n.pendingLanes&-536870913,w=w!==0?w:w&536870912?536870912:0;if(w!==0){s=w;e:{var j=n;f=Sc;var B=j.current.memoizedState.isDehydrated;if(B&&(Kl(j,w).flags|=256),w=vp(j,w,!1),w!==2){if(fp&&!B){j.errorRecoveryDisabledLanes|=g,ki|=g,f=4;break e}g=ns,ns=f,g!==null&&(ns===null?ns=g:ns.push.apply(ns,g))}f=w}if(g=!1,f!==2)continue}}if(f===1){Kl(n,0),Aa(n,s,0,!0);break}e:{switch(u=n,g=f,g){case 0:case 1:throw Error(a(345));case 4:if((s&4194048)!==s)break;case 6:Aa(u,s,ps,!Ea);break e;case 2:ns=null;break;case 3:case 5:break;default:throw Error(a(329))}if((s&62914560)===s&&(f=Bd+300-rt(),10<f)){if(Aa(u,s,ps,!Ea),hn(u,0,!0)!==0)break e;Gr=s,u.timeoutHandle=nv(Tb.bind(null,u,i,ns,Fd,pp,s,ps,ki,Gl,Ea,g,"Throttled",-0,0),f);break e}Tb(u,i,ns,Fd,pp,s,ps,ki,Gl,Ea,g,null,-0,0)}}break}while(!0);vr(n)}function Tb(n,s,i,u,f,g,w,j,B,W,le,ce,ee,se){if(n.timeoutHandle=-1,ce=s.subtreeFlags,ce&8192||(ce&16785408)===16785408){ce={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Fs},yb(s,g,ce);var Ae=(g&62914560)===g?Bd-rt():(g&4194048)===g?_b-rt():0;if(Ae=tT(ce,Ae),Ae!==null){Gr=g,n.cancelPendingCommit=Ae(Mb.bind(null,n,s,g,i,u,f,w,j,B,le,ce,null,ee,se)),Aa(n,g,w,!W);return}}Mb(n,s,g,i,u,f,w,j,B)}function xS(n){for(var s=n;;){var i=s.tag;if((i===0||i===11||i===15)&&s.flags&16384&&(i=s.updateQueue,i!==null&&(i=i.stores,i!==null)))for(var u=0;u<i.length;u++){var f=i[u],g=f.getSnapshot;f=f.value;try{if(!us(g(),f))return!1}catch{return!1}}if(i=s.child,s.subtreeFlags&16384&&i!==null)i.return=s,s=i;else{if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function Aa(n,s,i,u){s&=~mp,s&=~ki,n.suspendedLanes|=s,n.pingedLanes&=~s,u&&(n.warmLanes|=s),u=n.expirationTimes;for(var f=s;0<f;){var g=31-qt(f),w=1<<g;u[g]=-1,f&=~w}i!==0&&ls(n,i,s)}function Hd(){return(ct&6)===0?(jc(0),!1):!0}function bp(){if(Ke!==null){if(pt===0)var n=Ke.return;else n=Ke,Vr=Ei=null,Vm(n),Ll=null,cc=0,n=Ke;for(;n!==null;)sb(n.alternate,n),n=n.return;Ke=null}}function Kl(n,s){var i=n.timeoutHandle;i!==-1&&(n.timeoutHandle=-1,PS(i)),i=n.cancelPendingCommit,i!==null&&(n.cancelPendingCommit=null,i()),Gr=0,bp(),Et=n,Ke=i=kr(n.current,null),Xe=s,pt=0,ms=null,Ea=!1,$l=Vt(n,s),fp=!1,Gl=ps=mp=ki=Sa=$t=0,ns=Sc=null,pp=!1,(s&8)!==0&&(s|=s&32);var u=n.entangledLanes;if(u!==0)for(n=n.entanglements,u&=s;0<u;){var f=31-qt(u),g=1<<f;s|=n[f],u&=~g}return $r=s,dd(),i}function jb(n,s){qe=null,K.H=xc,s===Pl||s===bd?(s=Fx(),pt=3):s===Nm?(s=Fx(),pt=4):pt=s===Zm?8:s!==null&&typeof s=="object"&&typeof s.then=="function"?6:1,ms=s,Ke===null&&($t=1,kd(n,js(s,n.current)))}function Ab(){var n=hs.current;return n===null?!0:(Xe&4194048)===Xe?Ds===null:(Xe&62914560)===Xe||(Xe&536870912)!==0?n===Ds:!1}function Cb(){var n=K.H;return K.H=xc,n===null?xc:n}function Ib(){var n=K.A;return K.A=pS,n}function $d(){$t=4,Ea||(Xe&4194048)!==Xe&&hs.current!==null||($l=!0),(Sa&134217727)===0&&(ki&134217727)===0||Et===null||Aa(Et,Xe,ps,!1)}function vp(n,s,i){var u=ct;ct|=2;var f=Cb(),g=Ib();(Et!==n||Xe!==s)&&(Fd=null,Kl(n,s)),s=!1;var w=$t;e:do try{if(pt!==0&&Ke!==null){var j=Ke,B=ms;switch(pt){case 8:bp(),w=6;break e;case 3:case 2:case 9:case 6:hs.current===null&&(s=!0);var W=pt;if(pt=0,ms=null,Yl(n,j,B,W),i&&$l){w=0;break e}break;default:W=pt,pt=0,ms=null,Yl(n,j,B,W)}}yS(),w=$t;break}catch(le){jb(n,le)}while(!0);return s&&n.shellSuspendCounter++,Vr=Ei=null,ct=u,K.H=f,K.A=g,Ke===null&&(Et=null,Xe=0,dd()),w}function yS(){for(;Ke!==null;)Db(Ke)}function bS(n,s){var i=ct;ct|=2;var u=Cb(),f=Ib();Et!==n||Xe!==s?(Fd=null,qd=rt()+500,Kl(n,s)):$l=Vt(n,s);e:do try{if(pt!==0&&Ke!==null){s=Ke;var g=ms;t:switch(pt){case 1:pt=0,ms=null,Yl(n,s,g,1);break;case 2:case 9:if(Bx(g)){pt=0,ms=null,Rb(s);break}s=function(){pt!==2&&pt!==9||Et!==n||(pt=7),vr(n)},g.then(s,s);break e;case 3:pt=7;break e;case 4:pt=5;break e;case 7:Bx(g)?(pt=0,ms=null,Rb(s)):(pt=0,ms=null,Yl(n,s,g,7));break;case 5:var w=null;switch(Ke.tag){case 26:w=Ke.memoizedState;case 5:case 27:var j=Ke;if(w?xv(w):j.stateNode.complete){pt=0,ms=null;var B=j.sibling;if(B!==null)Ke=B;else{var W=j.return;W!==null?(Ke=W,Gd(W)):Ke=null}break t}}pt=0,ms=null,Yl(n,s,g,5);break;case 6:pt=0,ms=null,Yl(n,s,g,6);break;case 8:bp(),$t=6;break e;default:throw Error(a(462))}}vS();break}catch(le){jb(n,le)}while(!0);return Vr=Ei=null,K.H=u,K.A=f,ct=i,Ke!==null?0:(Et=null,Xe=0,dd(),$t)}function vS(){for(;Ke!==null&&!Fe();)Db(Ke)}function Db(n){var s=tb(n.alternate,n,$r);n.memoizedProps=n.pendingProps,s===null?Gd(n):Ke=s}function Rb(n){var s=n,i=s.alternate;switch(s.tag){case 15:case 0:s=Yy(i,s,s.pendingProps,s.type,void 0,Xe);break;case 11:s=Yy(i,s,s.pendingProps,s.type.render,s.ref,Xe);break;case 5:Vm(s);default:sb(i,s),s=Ke=Ix(s,$r),s=tb(i,s,$r)}n.memoizedProps=n.pendingProps,s===null?Gd(n):Ke=s}function Yl(n,s,i,u){Vr=Ei=null,Vm(s),Ll=null,cc=0;var f=s.return;try{if(oS(n,f,s,i,Xe)){$t=1,kd(n,js(i,n.current)),Ke=null;return}}catch(g){if(f!==null)throw Ke=f,g;$t=1,kd(n,js(i,n.current)),Ke=null;return}s.flags&32768?(We||u===1?n=!0:$l||(Xe&536870912)!==0?n=!1:(Ea=n=!0,(u===2||u===9||u===3||u===6)&&(u=hs.current,u!==null&&u.tag===13&&(u.flags|=16384))),kb(s,n)):Gd(s)}function Gd(n){var s=n;do{if((s.flags&32768)!==0){kb(s,Ea);return}n=s.return;var i=dS(s.alternate,s,$r);if(i!==null){Ke=i;return}if(s=s.sibling,s!==null){Ke=s;return}Ke=s=n}while(s!==null);$t===0&&($t=5)}function kb(n,s){do{var i=hS(n.alternate,n);if(i!==null){i.flags&=32767,Ke=i;return}if(i=n.return,i!==null&&(i.flags|=32768,i.subtreeFlags=0,i.deletions=null),!s&&(n=n.sibling,n!==null)){Ke=n;return}Ke=n=i}while(n!==null);$t=6,Ke=null}function Mb(n,s,i,u,f,g,w,j,B){n.cancelPendingCommit=null;do Qd();while(mn!==0);if((ct&6)!==0)throw Error(a(327));if(s!==null){if(s===n.current)throw Error(a(177));if(g=s.lanes|s.childLanes,g|=om,Cr(n,i,g,w,j,B),n===Et&&(Ke=Et=null,Xe=0),Ql=s,ja=n,Gr=i,gp=g,xp=f,Nb=u,(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?(n.callbackNode=null,n.callbackPriority=0,ES(un,function(){return zb(),null})):(n.callbackNode=null,n.callbackPriority=0),u=(s.flags&13878)!==0,(s.subtreeFlags&13878)!==0||u){u=K.T,K.T=null,f=G.p,G.p=2,w=ct,ct|=4;try{fS(n,s,i)}finally{ct=w,G.p=f,K.T=u}}mn=1,Vb(),Ob(),Pb()}}function Vb(){if(mn===1){mn=0;var n=ja,s=Ql,i=(s.flags&13878)!==0;if((s.subtreeFlags&13878)!==0||i){i=K.T,K.T=null;var u=G.p;G.p=2;var f=ct;ct|=4;try{pb(s,n);var g=Rp,w=wx(n.containerInfo),j=g.focusedElem,B=g.selectionRange;if(w!==j&&j&&j.ownerDocument&&vx(j.ownerDocument.documentElement,j)){if(B!==null&&sm(j)){var W=B.start,le=B.end;if(le===void 0&&(le=W),"selectionStart"in j)j.selectionStart=W,j.selectionEnd=Math.min(le,j.value.length);else{var ce=j.ownerDocument||document,ee=ce&&ce.defaultView||window;if(ee.getSelection){var se=ee.getSelection(),Ae=j.textContent.length,Pe=Math.min(B.start,Ae),Nt=B.end===void 0?Pe:Math.min(B.end,Ae);!se.extend&&Pe>Nt&&(w=Nt,Nt=Pe,Pe=w);var Q=bx(j,Pe),H=bx(j,Nt);if(Q&&H&&(se.rangeCount!==1||se.anchorNode!==Q.node||se.anchorOffset!==Q.offset||se.focusNode!==H.node||se.focusOffset!==H.offset)){var J=ce.createRange();J.setStart(Q.node,Q.offset),se.removeAllRanges(),Pe>Nt?(se.addRange(J),se.extend(H.node,H.offset)):(J.setEnd(H.node,H.offset),se.addRange(J))}}}}for(ce=[],se=j;se=se.parentNode;)se.nodeType===1&&ce.push({element:se,left:se.scrollLeft,top:se.scrollTop});for(typeof j.focus=="function"&&j.focus(),j=0;j<ce.length;j++){var oe=ce[j];oe.element.scrollLeft=oe.left,oe.element.scrollTop=oe.top}}ah=!!Dp,Rp=Dp=null}finally{ct=f,G.p=u,K.T=i}}n.current=s,mn=2}}function Ob(){if(mn===2){mn=0;var n=ja,s=Ql,i=(s.flags&8772)!==0;if((s.subtreeFlags&8772)!==0||i){i=K.T,K.T=null;var u=G.p;G.p=2;var f=ct;ct|=4;try{ub(n,s.alternate,s)}finally{ct=f,G.p=u,K.T=i}}mn=3}}function Pb(){if(mn===4||mn===3){mn=0,st();var n=ja,s=Ql,i=Gr,u=Nb;(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?mn=5:(mn=0,Ql=ja=null,Lb(n,n.pendingLanes));var f=n.pendingLanes;if(f===0&&(Ta=null),Hn(i),s=s.stateNode,dn&&typeof dn.onCommitFiberRoot=="function")try{dn.onCommitFiberRoot(Un,s,void 0,(s.current.flags&128)===128)}catch{}if(u!==null){s=K.T,f=G.p,G.p=2,K.T=null;try{for(var g=n.onRecoverableError,w=0;w<u.length;w++){var j=u[w];g(j.value,{componentStack:j.stack})}}finally{K.T=s,G.p=f}}(Gr&3)!==0&&Qd(),vr(n),f=n.pendingLanes,(i&261930)!==0&&(f&42)!==0?n===yp?Tc++:(Tc=0,yp=n):Tc=0,jc(0)}}function Lb(n,s){(n.pooledCacheLanes&=s)===0&&(s=n.pooledCache,s!=null&&(n.pooledCache=null,lc(s)))}function Qd(){return Vb(),Ob(),Pb(),zb()}function zb(){if(mn!==5)return!1;var n=ja,s=gp;gp=0;var i=Hn(Gr),u=K.T,f=G.p;try{G.p=32>i?32:i,K.T=null,i=xp,xp=null;var g=ja,w=Gr;if(mn=0,Ql=ja=null,Gr=0,(ct&6)!==0)throw Error(a(331));var j=ct;if(ct|=4,vb(g.current),xb(g,g.current,w,i),ct=j,jc(0,!1),dn&&typeof dn.onPostCommitFiberRoot=="function")try{dn.onPostCommitFiberRoot(Un,g)}catch{}return!0}finally{G.p=f,K.T=u,Lb(n,s)}}function Ub(n,s,i){s=js(i,s),s=Xm(n.stateNode,s,2),n=va(n,s,2),n!==null&&(fn(n,2),vr(n))}function gt(n,s,i){if(n.tag===3)Ub(n,n,i);else for(;s!==null;){if(s.tag===3){Ub(s,n,i);break}else if(s.tag===1){var u=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(Ta===null||!Ta.has(u))){n=js(i,n),i=By(2),u=va(s,i,2),u!==null&&(qy(i,u,s,n),fn(u,2),vr(u));break}}s=s.return}}function wp(n,s,i){var u=n.pingCache;if(u===null){u=n.pingCache=new gS;var f=new Set;u.set(s,f)}else f=u.get(s),f===void 0&&(f=new Set,u.set(s,f));f.has(i)||(fp=!0,f.add(i),n=wS.bind(null,n,s,i),s.then(n,n))}function wS(n,s,i){var u=n.pingCache;u!==null&&u.delete(s),n.pingedLanes|=n.suspendedLanes&i,n.warmLanes&=~i,Et===n&&(Xe&i)===i&&($t===4||$t===3&&(Xe&62914560)===Xe&&300>rt()-Bd?(ct&2)===0&&Kl(n,0):mp|=i,Gl===Xe&&(Gl=0)),vr(n)}function Bb(n,s){s===0&&(s=Fn()),n=wi(n,s),n!==null&&(fn(n,s),vr(n))}function _S(n){var s=n.memoizedState,i=0;s!==null&&(i=s.retryLane),Bb(n,i)}function NS(n,s){var i=0;switch(n.tag){case 31:case 13:var u=n.stateNode,f=n.memoizedState;f!==null&&(i=f.retryLane);break;case 19:u=n.stateNode;break;case 22:u=n.stateNode._retryCache;break;default:throw Error(a(314))}u!==null&&u.delete(s),Bb(n,i)}function ES(n,s){return me(n,s)}var Kd=null,Xl=null,_p=!1,Yd=!1,Np=!1,Ca=0;function vr(n){n!==Xl&&n.next===null&&(Xl===null?Kd=Xl=n:Xl=Xl.next=n),Yd=!0,_p||(_p=!0,TS())}function jc(n,s){if(!Np&&Yd){Np=!0;do for(var i=!1,u=Kd;u!==null;){if(n!==0){var f=u.pendingLanes;if(f===0)var g=0;else{var w=u.suspendedLanes,j=u.pingedLanes;g=(1<<31-qt(42|n)+1)-1,g&=f&~(w&~j),g=g&201326741?g&201326741|1:g?g|2:0}g!==0&&(i=!0,$b(u,g))}else g=Xe,g=hn(u,u===Et?g:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),(g&3)===0||Vt(u,g)||(i=!0,$b(u,g));u=u.next}while(i);Np=!1}}function SS(){qb()}function qb(){Yd=_p=!1;var n=0;Ca!==0&&OS()&&(n=Ca);for(var s=rt(),i=null,u=Kd;u!==null;){var f=u.next,g=Fb(u,s);g===0?(u.next=null,i===null?Kd=f:i.next=f,f===null&&(Xl=i)):(i=u,(n!==0||(g&3)!==0)&&(Yd=!0)),u=f}mn!==0&&mn!==5||jc(n),Ca!==0&&(Ca=0)}function Fb(n,s){for(var i=n.suspendedLanes,u=n.pingedLanes,f=n.expirationTimes,g=n.pendingLanes&-62914561;0<g;){var w=31-qt(g),j=1<<w,B=f[w];B===-1?((j&i)===0||(j&u)!==0)&&(f[w]=qn(j,s)):B<=s&&(n.expiredLanes|=j),g&=~j}if(s=Et,i=Xe,i=hn(n,n===s?i:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),u=n.callbackNode,i===0||n===s&&(pt===2||pt===9)||n.cancelPendingCommit!==null)return u!==null&&u!==null&&je(u),n.callbackNode=null,n.callbackPriority=0;if((i&3)===0||Vt(n,i)){if(s=i&-i,s===n.callbackPriority)return s;switch(u!==null&&je(u),Hn(i)){case 2:case 8:i=bn;break;case 32:i=un;break;case 268435456:i=kt;break;default:i=un}return u=Hb.bind(null,n),i=me(i,u),n.callbackPriority=s,n.callbackNode=i,s}return u!==null&&u!==null&&je(u),n.callbackPriority=2,n.callbackNode=null,2}function Hb(n,s){if(mn!==0&&mn!==5)return n.callbackNode=null,n.callbackPriority=0,null;var i=n.callbackNode;if(Qd()&&n.callbackNode!==i)return null;var u=Xe;return u=hn(n,n===Et?u:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),u===0?null:(Sb(n,u,s),Fb(n,rt()),n.callbackNode!=null&&n.callbackNode===i?Hb.bind(null,n):null)}function $b(n,s){if(Qd())return null;Sb(n,s,!0)}function TS(){LS(function(){(ct&6)!==0?me(Bt,SS):qb()})}function Ep(){if(Ca===0){var n=Vl;n===0&&(n=ws,ws<<=1,(ws&261888)===0&&(ws=256)),Ca=n}return Ca}function Gb(n){return n==null||typeof n=="symbol"||typeof n=="boolean"?null:typeof n=="function"?n:vl(""+n)}function Qb(n,s){var i=s.ownerDocument.createElement("input");return i.name=s.name,i.value=s.value,n.id&&i.setAttribute("form",n.id),s.parentNode.insertBefore(i,s),n=new FormData(n),i.parentNode.removeChild(i),n}function jS(n,s,i,u,f){if(s==="submit"&&i&&i.stateNode===f){var g=Gb((f[vn]||null).action),w=u.submitter;w&&(s=(s=w[vn]||null)?Gb(s.formAction):w.getAttribute("formAction"),s!==null&&(g=s,w=null));var j=new fr("action","action",null,u,f);n.push({event:j,listeners:[{instance:null,listener:function(){if(u.defaultPrevented){if(Ca!==0){var B=w?Qb(f,w):new FormData(f);Hm(i,{pending:!0,data:B,method:f.method,action:g},null,B)}}else typeof g=="function"&&(j.preventDefault(),B=w?Qb(f,w):new FormData(f),Hm(i,{pending:!0,data:B,method:f.method,action:g},g,B))},currentTarget:f}]})}}for(var Sp=0;Sp<lm.length;Sp++){var Tp=lm[Sp],AS=Tp.toLowerCase(),CS=Tp[0].toUpperCase()+Tp.slice(1);Ks(AS,"on"+CS)}Ks(Ex,"onAnimationEnd"),Ks(Sx,"onAnimationIteration"),Ks(Tx,"onAnimationStart"),Ks("dblclick","onDoubleClick"),Ks("focusin","onFocus"),Ks("focusout","onBlur"),Ks($E,"onTransitionRun"),Ks(GE,"onTransitionStart"),Ks(QE,"onTransitionCancel"),Ks(jx,"onTransitionEnd"),cr("onMouseEnter",["mouseout","mouseover"]),cr("onMouseLeave",["mouseout","mouseover"]),cr("onPointerEnter",["pointerout","pointerover"]),cr("onPointerLeave",["pointerout","pointerover"]),or("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),or("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),or("onBeforeInput",["compositionend","keypress","textInput","paste"]),or("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),or("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),or("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ac="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),IS=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Ac));function Kb(n,s){s=(s&4)!==0;for(var i=0;i<n.length;i++){var u=n[i],f=u.event;u=u.listeners;e:{var g=void 0;if(s)for(var w=u.length-1;0<=w;w--){var j=u[w],B=j.instance,W=j.currentTarget;if(j=j.listener,B!==g&&f.isPropagationStopped())break e;g=j,f.currentTarget=W;try{g(f)}catch(le){ud(le)}f.currentTarget=null,g=B}else for(w=0;w<u.length;w++){if(j=u[w],B=j.instance,W=j.currentTarget,j=j.listener,B!==g&&f.isPropagationStopped())break e;g=j,f.currentTarget=W;try{g(f)}catch(le){ud(le)}f.currentTarget=null,g=B}}}}function Ye(n,s){var i=s[pl];i===void 0&&(i=s[pl]=new Set);var u=n+"__bubble";i.has(u)||(Yb(s,n,2,!1),i.add(u))}function jp(n,s,i){var u=0;s&&(u|=4),Yb(i,n,u,s)}var Xd="_reactListening"+Math.random().toString(36).slice(2);function Ap(n){if(!n[Xd]){n[Xd]=!0,Uo.forEach(function(i){i!=="selectionchange"&&(IS.has(i)||jp(i,!1,n),jp(i,!0,n))});var s=n.nodeType===9?n:n.ownerDocument;s===null||s[Xd]||(s[Xd]=!0,jp("selectionchange",!1,s))}}function Yb(n,s,i,u){switch(Ev(s)){case 2:var f=rT;break;case 8:f=aT;break;default:f=Fp}i=f.bind(null,s,i,n),f=void 0,!fi||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(f=!0),u?f!==void 0?n.addEventListener(s,i,{capture:!0,passive:f}):n.addEventListener(s,i,!0):f!==void 0?n.addEventListener(s,i,{passive:f}):n.addEventListener(s,i,!1)}function Cp(n,s,i,u,f){var g=u;if((s&1)===0&&(s&2)===0&&u!==null)e:for(;;){if(u===null)return;var w=u.tag;if(w===3||w===4){var j=u.stateNode.containerInfo;if(j===f)break;if(w===4)for(w=u.return;w!==null;){var B=w.tag;if((B===3||B===4)&&w.stateNode.containerInfo===f)return;w=w.return}for(;j!==null;){if(w=ir(j),w===null)return;if(B=w.tag,B===5||B===6||B===26||B===27){u=g=w;continue e}j=j.parentNode}}u=u.return}ua(function(){var W=g,le=Ns(i),ce=[];e:{var ee=Ax.get(n);if(ee!==void 0){var se=fr,Ae=n;switch(n){case"keypress":if(pi(i)===0)break e;case"keydown":case"keyup":se=ld;break;case"focusin":Ae="focus",se=xi;break;case"focusout":Ae="blur",se=xi;break;case"beforeblur":case"afterblur":se=xi;break;case"click":if(i.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":se=Wo;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":se=Ju;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":se=y;break;case Ex:case Sx:case Tx:se=ed;break;case jx:se=I;break;case"scroll":case"scrollend":se=Jo;break;case"wheel":se=ne;break;case"copy":case"cut":case"paste":se=td;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":se=Rr;break;case"toggle":case"beforetoggle":se=Be}var Pe=(s&4)!==0,Nt=!Pe&&(n==="scroll"||n==="scrollend"),Q=Pe?ee!==null?ee+"Capture":null:ee;Pe=[];for(var H=W,J;H!==null;){var oe=H;if(J=oe.stateNode,oe=oe.tag,oe!==5&&oe!==26&&oe!==27||J===null||Q===null||(oe=Hs(H,Q),oe!=null&&Pe.push(Cc(H,oe,J))),Nt)break;H=H.return}0<Pe.length&&(ee=new se(ee,Ae,null,i,le),ce.push({event:ee,listeners:Pe}))}}if((s&7)===0){e:{if(ee=n==="mouseover"||n==="pointerover",se=n==="mouseout"||n==="pointerout",ee&&i!==Yo&&(Ae=i.relatedTarget||i.fromElement)&&(ir(Ae)||Ae[rr]))break e;if((se||ee)&&(ee=le.window===le?le:(ee=le.ownerDocument)?ee.defaultView||ee.parentWindow:window,se?(Ae=i.relatedTarget||i.toElement,se=W,Ae=Ae?ir(Ae):null,Ae!==null&&(Nt=c(Ae),Pe=Ae.tag,Ae!==Nt||Pe!==5&&Pe!==27&&Pe!==6)&&(Ae=null)):(se=null,Ae=W),se!==Ae)){if(Pe=Wo,oe="onMouseLeave",Q="onMouseEnter",H="mouse",(n==="pointerout"||n==="pointerover")&&(Pe=Rr,oe="onPointerLeave",Q="onPointerEnter",H="pointer"),Nt=se==null?ee:os(se),J=Ae==null?ee:os(Ae),ee=new Pe(oe,H+"leave",se,i,le),ee.target=Nt,ee.relatedTarget=J,oe=null,ir(le)===W&&(Pe=new Pe(Q,H+"enter",Ae,i,le),Pe.target=J,Pe.relatedTarget=Nt,oe=Pe),Nt=oe,se&&Ae)t:{for(Pe=DS,Q=se,H=Ae,J=0,oe=Q;oe;oe=Pe(oe))J++;oe=0;for(var Me=H;Me;Me=Pe(Me))oe++;for(;0<J-oe;)Q=Pe(Q),J--;for(;0<oe-J;)H=Pe(H),oe--;for(;J--;){if(Q===H||H!==null&&Q===H.alternate){Pe=Q;break t}Q=Pe(Q),H=Pe(H)}Pe=null}else Pe=null;se!==null&&Xb(ce,ee,se,Pe,!1),Ae!==null&&Nt!==null&&Xb(ce,Nt,Ae,Pe,!0)}}e:{if(ee=W?os(W):window,se=ee.nodeName&&ee.nodeName.toLowerCase(),se==="select"||se==="input"&&ee.type==="file")var at=fx;else if(dx(ee))if(mx)at=qE;else{at=UE;var Re=zE}else se=ee.nodeName,!se||se.toLowerCase()!=="input"||ee.type!=="checkbox"&&ee.type!=="radio"?W&&bl(W.elementType)&&(at=fx):at=BE;if(at&&(at=at(n,W))){hx(ce,at,i,le);break e}Re&&Re(n,ee,W),n==="focusout"&&W&&ee.type==="number"&&W.memoizedProps.value!=null&&Go(ee,"number",ee.value)}switch(Re=W?os(W):window,n){case"focusin":(dx(Re)||Re.contentEditable==="true")&&(jl=Re,rm=W,rc=null);break;case"focusout":rc=rm=jl=null;break;case"mousedown":am=!0;break;case"contextmenu":case"mouseup":case"dragend":am=!1,_x(ce,i,le);break;case"selectionchange":if(HE)break;case"keydown":case"keyup":_x(ce,i,le)}var He;if(ot)e:{switch(n){case"compositionstart":var Ze="onCompositionStart";break e;case"compositionend":Ze="onCompositionEnd";break e;case"compositionupdate":Ze="onCompositionUpdate";break e}Ze=void 0}else Tl?yi(n,i)&&(Ze="onCompositionEnd"):n==="keydown"&&i.keyCode===229&&(Ze="onCompositionStart");Ze&&(gr&&i.locale!=="ko"&&(Tl||Ze!=="onCompositionStart"?Ze==="onCompositionEnd"&&Tl&&(He=Zo()):(hr=le,Xo="value"in hr?hr.value:hr.textContent,Tl=!0)),Re=Zd(W,Ze),0<Re.length&&(Ze=new pr(Ze,n,null,i,le),ce.push({event:Ze,listeners:Re}),He?Ze.data=He:(He=Sl(i),He!==null&&(Ze.data=He)))),(He=Ss?VE(n,i):OE(n,i))&&(Ze=Zd(W,"onBeforeInput"),0<Ze.length&&(Re=new pr("onBeforeInput","beforeinput",null,i,le),ce.push({event:Re,listeners:Ze}),Re.data=He)),jS(ce,n,W,i,le)}Kb(ce,s)})}function Cc(n,s,i){return{instance:n,listener:s,currentTarget:i}}function Zd(n,s){for(var i=s+"Capture",u=[];n!==null;){var f=n,g=f.stateNode;if(f=f.tag,f!==5&&f!==26&&f!==27||g===null||(f=Hs(n,i),f!=null&&u.unshift(Cc(n,f,g)),f=Hs(n,s),f!=null&&u.push(Cc(n,f,g))),n.tag===3)return u;n=n.return}return[]}function DS(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5&&n.tag!==27);return n||null}function Xb(n,s,i,u,f){for(var g=s._reactName,w=[];i!==null&&i!==u;){var j=i,B=j.alternate,W=j.stateNode;if(j=j.tag,B!==null&&B===u)break;j!==5&&j!==26&&j!==27||W===null||(B=W,f?(W=Hs(i,g),W!=null&&w.unshift(Cc(i,W,B))):f||(W=Hs(i,g),W!=null&&w.push(Cc(i,W,B)))),i=i.return}w.length!==0&&n.push({event:s,listeners:w})}var RS=/\r\n?/g,kS=/\u0000|\uFFFD/g;function Zb(n){return(typeof n=="string"?n:""+n).replace(RS,`
`).replace(kS,"")}function Jb(n,s){return s=Zb(s),Zb(n)===s}function _t(n,s,i,u,f,g){switch(i){case"children":typeof u=="string"?s==="body"||s==="textarea"&&u===""||Jn(n,u):(typeof u=="number"||typeof u=="bigint")&&s!=="body"&&Jn(n,""+u);break;case"className":cs(n,"class",u);break;case"tabIndex":cs(n,"tabindex",u);break;case"dir":case"role":case"viewBox":case"width":case"height":cs(n,i,u);break;case"style":Ko(n,u,g);break;case"data":if(s!=="object"){cs(n,"data",u);break}case"src":case"href":if(u===""&&(s!=="a"||i!=="href")){n.removeAttribute(i);break}if(u==null||typeof u=="function"||typeof u=="symbol"||typeof u=="boolean"){n.removeAttribute(i);break}u=vl(""+u),n.setAttribute(i,u);break;case"action":case"formAction":if(typeof u=="function"){n.setAttribute(i,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof g=="function"&&(i==="formAction"?(s!=="input"&&_t(n,s,"name",f.name,f,null),_t(n,s,"formEncType",f.formEncType,f,null),_t(n,s,"formMethod",f.formMethod,f,null),_t(n,s,"formTarget",f.formTarget,f,null)):(_t(n,s,"encType",f.encType,f,null),_t(n,s,"method",f.method,f,null),_t(n,s,"target",f.target,f,null)));if(u==null||typeof u=="symbol"||typeof u=="boolean"){n.removeAttribute(i);break}u=vl(""+u),n.setAttribute(i,u);break;case"onClick":u!=null&&(n.onclick=Fs);break;case"onScroll":u!=null&&Ye("scroll",n);break;case"onScrollEnd":u!=null&&Ye("scrollend",n);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(a(61));if(i=u.__html,i!=null){if(f.children!=null)throw Error(a(60));n.innerHTML=i}}break;case"multiple":n.multiple=u&&typeof u!="function"&&typeof u!="symbol";break;case"muted":n.muted=u&&typeof u!="function"&&typeof u!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(u==null||typeof u=="function"||typeof u=="boolean"||typeof u=="symbol"){n.removeAttribute("xlink:href");break}i=vl(""+u),n.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",i);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":u!=null&&typeof u!="function"&&typeof u!="symbol"?n.setAttribute(i,""+u):n.removeAttribute(i);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":u&&typeof u!="function"&&typeof u!="symbol"?n.setAttribute(i,""):n.removeAttribute(i);break;case"capture":case"download":u===!0?n.setAttribute(i,""):u!==!1&&u!=null&&typeof u!="function"&&typeof u!="symbol"?n.setAttribute(i,u):n.removeAttribute(i);break;case"cols":case"rows":case"size":case"span":u!=null&&typeof u!="function"&&typeof u!="symbol"&&!isNaN(u)&&1<=u?n.setAttribute(i,u):n.removeAttribute(i);break;case"rowSpan":case"start":u==null||typeof u=="function"||typeof u=="symbol"||isNaN(u)?n.removeAttribute(i):n.setAttribute(i,u);break;case"popover":Ye("beforetoggle",n),Ye("toggle",n),xl(n,"popover",u);break;case"xlinkActuate":Wt(n,"http://www.w3.org/1999/xlink","xlink:actuate",u);break;case"xlinkArcrole":Wt(n,"http://www.w3.org/1999/xlink","xlink:arcrole",u);break;case"xlinkRole":Wt(n,"http://www.w3.org/1999/xlink","xlink:role",u);break;case"xlinkShow":Wt(n,"http://www.w3.org/1999/xlink","xlink:show",u);break;case"xlinkTitle":Wt(n,"http://www.w3.org/1999/xlink","xlink:title",u);break;case"xlinkType":Wt(n,"http://www.w3.org/1999/xlink","xlink:type",u);break;case"xmlBase":Wt(n,"http://www.w3.org/XML/1998/namespace","xml:base",u);break;case"xmlLang":Wt(n,"http://www.w3.org/XML/1998/namespace","xml:lang",u);break;case"xmlSpace":Wt(n,"http://www.w3.org/XML/1998/namespace","xml:space",u);break;case"is":xl(n,"is",u);break;case"innerText":case"textContent":break;default:(!(2<i.length)||i[0]!=="o"&&i[0]!=="O"||i[1]!=="n"&&i[1]!=="N")&&(i=Zu.get(i)||i,xl(n,i,u))}}function Ip(n,s,i,u,f,g){switch(i){case"style":Ko(n,u,g);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(a(61));if(i=u.__html,i!=null){if(f.children!=null)throw Error(a(60));n.innerHTML=i}}break;case"children":typeof u=="string"?Jn(n,u):(typeof u=="number"||typeof u=="bigint")&&Jn(n,""+u);break;case"onScroll":u!=null&&Ye("scroll",n);break;case"onScrollEnd":u!=null&&Ye("scrollend",n);break;case"onClick":u!=null&&(n.onclick=Fs);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Bo.hasOwnProperty(i))e:{if(i[0]==="o"&&i[1]==="n"&&(f=i.endsWith("Capture"),s=i.slice(2,f?i.length-7:void 0),g=n[vn]||null,g=g!=null?g[i]:null,typeof g=="function"&&n.removeEventListener(s,g,f),typeof u=="function")){typeof g!="function"&&g!==null&&(i in n?n[i]=null:n.hasAttribute(i)&&n.removeAttribute(i)),n.addEventListener(s,u,f);break e}i in n?n[i]=u:u===!0?n.setAttribute(i,""):xl(n,i,u)}}}function Dn(n,s,i){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ye("error",n),Ye("load",n);var u=!1,f=!1,g;for(g in i)if(i.hasOwnProperty(g)){var w=i[g];if(w!=null)switch(g){case"src":u=!0;break;case"srcSet":f=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(a(137,s));default:_t(n,s,g,w,i,null)}}f&&_t(n,s,"srcSet",i.srcSet,i,null),u&&_t(n,s,"src",i.src,i,null);return;case"input":Ye("invalid",n);var j=g=w=f=null,B=null,W=null;for(u in i)if(i.hasOwnProperty(u)){var le=i[u];if(le!=null)switch(u){case"name":f=le;break;case"type":w=le;break;case"checked":B=le;break;case"defaultChecked":W=le;break;case"value":g=le;break;case"defaultValue":j=le;break;case"children":case"dangerouslySetInnerHTML":if(le!=null)throw Error(a(137,s));break;default:_t(n,s,u,le,i,null)}}Ku(n,g,j,B,W,w,f,!1);return;case"select":Ye("invalid",n),u=w=g=null;for(f in i)if(i.hasOwnProperty(f)&&(j=i[f],j!=null))switch(f){case"value":g=j;break;case"defaultValue":w=j;break;case"multiple":u=j;default:_t(n,s,f,j,i,null)}s=g,i=w,n.multiple=!!u,s!=null?ia(n,!!u,s,!1):i!=null&&ia(n,!!u,i,!0);return;case"textarea":Ye("invalid",n),g=f=u=null;for(w in i)if(i.hasOwnProperty(w)&&(j=i[w],j!=null))switch(w){case"value":u=j;break;case"defaultValue":f=j;break;case"children":g=j;break;case"dangerouslySetInnerHTML":if(j!=null)throw Error(a(91));break;default:_t(n,s,w,j,i,null)}la(n,u,f,g);return;case"option":for(B in i)if(i.hasOwnProperty(B)&&(u=i[B],u!=null))switch(B){case"selected":n.selected=u&&typeof u!="function"&&typeof u!="symbol";break;default:_t(n,s,B,u,i,null)}return;case"dialog":Ye("beforetoggle",n),Ye("toggle",n),Ye("cancel",n),Ye("close",n);break;case"iframe":case"object":Ye("load",n);break;case"video":case"audio":for(u=0;u<Ac.length;u++)Ye(Ac[u],n);break;case"image":Ye("error",n),Ye("load",n);break;case"details":Ye("toggle",n);break;case"embed":case"source":case"link":Ye("error",n),Ye("load",n);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(W in i)if(i.hasOwnProperty(W)&&(u=i[W],u!=null))switch(W){case"children":case"dangerouslySetInnerHTML":throw Error(a(137,s));default:_t(n,s,W,u,i,null)}return;default:if(bl(s)){for(le in i)i.hasOwnProperty(le)&&(u=i[le],u!==void 0&&Ip(n,s,le,u,i,void 0));return}}for(j in i)i.hasOwnProperty(j)&&(u=i[j],u!=null&&_t(n,s,j,u,i,null))}function MS(n,s,i,u){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var f=null,g=null,w=null,j=null,B=null,W=null,le=null;for(se in i){var ce=i[se];if(i.hasOwnProperty(se)&&ce!=null)switch(se){case"checked":break;case"value":break;case"defaultValue":B=ce;default:u.hasOwnProperty(se)||_t(n,s,se,null,u,ce)}}for(var ee in u){var se=u[ee];if(ce=i[ee],u.hasOwnProperty(ee)&&(se!=null||ce!=null))switch(ee){case"type":g=se;break;case"name":f=se;break;case"checked":W=se;break;case"defaultChecked":le=se;break;case"value":w=se;break;case"defaultValue":j=se;break;case"children":case"dangerouslySetInnerHTML":if(se!=null)throw Error(a(137,s));break;default:se!==ce&&_t(n,s,ee,se,u,ce)}}yl(n,w,j,B,W,le,g,f);return;case"select":se=w=j=ee=null;for(g in i)if(B=i[g],i.hasOwnProperty(g)&&B!=null)switch(g){case"value":break;case"multiple":se=B;default:u.hasOwnProperty(g)||_t(n,s,g,null,u,B)}for(f in u)if(g=u[f],B=i[f],u.hasOwnProperty(f)&&(g!=null||B!=null))switch(f){case"value":ee=g;break;case"defaultValue":j=g;break;case"multiple":w=g;default:g!==B&&_t(n,s,f,g,u,B)}s=j,i=w,u=se,ee!=null?ia(n,!!i,ee,!1):!!u!=!!i&&(s!=null?ia(n,!!i,s,!0):ia(n,!!i,i?[]:"",!1));return;case"textarea":se=ee=null;for(j in i)if(f=i[j],i.hasOwnProperty(j)&&f!=null&&!u.hasOwnProperty(j))switch(j){case"value":break;case"children":break;default:_t(n,s,j,null,u,f)}for(w in u)if(f=u[w],g=i[w],u.hasOwnProperty(w)&&(f!=null||g!=null))switch(w){case"value":ee=f;break;case"defaultValue":se=f;break;case"children":break;case"dangerouslySetInnerHTML":if(f!=null)throw Error(a(91));break;default:f!==g&&_t(n,s,w,f,u,g)}Yu(n,ee,se);return;case"option":for(var Ae in i)if(ee=i[Ae],i.hasOwnProperty(Ae)&&ee!=null&&!u.hasOwnProperty(Ae))switch(Ae){case"selected":n.selected=!1;break;default:_t(n,s,Ae,null,u,ee)}for(B in u)if(ee=u[B],se=i[B],u.hasOwnProperty(B)&&ee!==se&&(ee!=null||se!=null))switch(B){case"selected":n.selected=ee&&typeof ee!="function"&&typeof ee!="symbol";break;default:_t(n,s,B,ee,u,se)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Pe in i)ee=i[Pe],i.hasOwnProperty(Pe)&&ee!=null&&!u.hasOwnProperty(Pe)&&_t(n,s,Pe,null,u,ee);for(W in u)if(ee=u[W],se=i[W],u.hasOwnProperty(W)&&ee!==se&&(ee!=null||se!=null))switch(W){case"children":case"dangerouslySetInnerHTML":if(ee!=null)throw Error(a(137,s));break;default:_t(n,s,W,ee,u,se)}return;default:if(bl(s)){for(var Nt in i)ee=i[Nt],i.hasOwnProperty(Nt)&&ee!==void 0&&!u.hasOwnProperty(Nt)&&Ip(n,s,Nt,void 0,u,ee);for(le in u)ee=u[le],se=i[le],!u.hasOwnProperty(le)||ee===se||ee===void 0&&se===void 0||Ip(n,s,le,ee,u,se);return}}for(var Q in i)ee=i[Q],i.hasOwnProperty(Q)&&ee!=null&&!u.hasOwnProperty(Q)&&_t(n,s,Q,null,u,ee);for(ce in u)ee=u[ce],se=i[ce],!u.hasOwnProperty(ce)||ee===se||ee==null&&se==null||_t(n,s,ce,ee,u,se)}function Wb(n){switch(n){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function VS(){if(typeof performance.getEntriesByType=="function"){for(var n=0,s=0,i=performance.getEntriesByType("resource"),u=0;u<i.length;u++){var f=i[u],g=f.transferSize,w=f.initiatorType,j=f.duration;if(g&&j&&Wb(w)){for(w=0,j=f.responseEnd,u+=1;u<i.length;u++){var B=i[u],W=B.startTime;if(W>j)break;var le=B.transferSize,ce=B.initiatorType;le&&Wb(ce)&&(B=B.responseEnd,w+=le*(B<j?1:(j-W)/(B-W)))}if(--u,s+=8*(g+w)/(f.duration/1e3),n++,10<n)break}}if(0<n)return s/n/1e6}return navigator.connection&&(n=navigator.connection.downlink,typeof n=="number")?n:5}var Dp=null,Rp=null;function Jd(n){return n.nodeType===9?n:n.ownerDocument}function ev(n){switch(n){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function tv(n,s){if(n===0)switch(s){case"svg":return 1;case"math":return 2;default:return 0}return n===1&&s==="foreignObject"?0:n}function kp(n,s){return n==="textarea"||n==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.children=="bigint"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var Mp=null;function OS(){var n=window.event;return n&&n.type==="popstate"?n===Mp?!1:(Mp=n,!0):(Mp=null,!1)}var nv=typeof setTimeout=="function"?setTimeout:void 0,PS=typeof clearTimeout=="function"?clearTimeout:void 0,sv=typeof Promise=="function"?Promise:void 0,LS=typeof queueMicrotask=="function"?queueMicrotask:typeof sv<"u"?function(n){return sv.resolve(null).then(n).catch(zS)}:nv;function zS(n){setTimeout(function(){throw n})}function Ia(n){return n==="head"}function rv(n,s){var i=s,u=0;do{var f=i.nextSibling;if(n.removeChild(i),f&&f.nodeType===8)if(i=f.data,i==="/$"||i==="/&"){if(u===0){n.removeChild(f),eo(s);return}u--}else if(i==="$"||i==="$?"||i==="$~"||i==="$!"||i==="&")u++;else if(i==="html")Ic(n.ownerDocument.documentElement);else if(i==="head"){i=n.ownerDocument.head,Ic(i);for(var g=i.firstChild;g;){var w=g.nextSibling,j=g.nodeName;g[ar]||j==="SCRIPT"||j==="STYLE"||j==="LINK"&&g.rel.toLowerCase()==="stylesheet"||i.removeChild(g),g=w}}else i==="body"&&Ic(n.ownerDocument.body);i=f}while(i);eo(s)}function av(n,s){var i=n;n=0;do{var u=i.nextSibling;if(i.nodeType===1?s?(i._stashedDisplay=i.style.display,i.style.display="none"):(i.style.display=i._stashedDisplay||"",i.getAttribute("style")===""&&i.removeAttribute("style")):i.nodeType===3&&(s?(i._stashedText=i.nodeValue,i.nodeValue=""):i.nodeValue=i._stashedText||""),u&&u.nodeType===8)if(i=u.data,i==="/$"){if(n===0)break;n--}else i!=="$"&&i!=="$?"&&i!=="$~"&&i!=="$!"||n++;i=u}while(i)}function Vp(n){var s=n.firstChild;for(s&&s.nodeType===10&&(s=s.nextSibling);s;){var i=s;switch(s=s.nextSibling,i.nodeName){case"HTML":case"HEAD":case"BODY":Vp(i),gl(i);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(i.rel.toLowerCase()==="stylesheet")continue}n.removeChild(i)}}function US(n,s,i,u){for(;n.nodeType===1;){var f=i;if(n.nodeName.toLowerCase()!==s.toLowerCase()){if(!u&&(n.nodeName!=="INPUT"||n.type!=="hidden"))break}else if(u){if(!n[ar])switch(s){case"meta":if(!n.hasAttribute("itemprop"))break;return n;case"link":if(g=n.getAttribute("rel"),g==="stylesheet"&&n.hasAttribute("data-precedence"))break;if(g!==f.rel||n.getAttribute("href")!==(f.href==null||f.href===""?null:f.href)||n.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin)||n.getAttribute("title")!==(f.title==null?null:f.title))break;return n;case"style":if(n.hasAttribute("data-precedence"))break;return n;case"script":if(g=n.getAttribute("src"),(g!==(f.src==null?null:f.src)||n.getAttribute("type")!==(f.type==null?null:f.type)||n.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin))&&g&&n.hasAttribute("async")&&!n.hasAttribute("itemprop"))break;return n;default:return n}}else if(s==="input"&&n.type==="hidden"){var g=f.name==null?null:""+f.name;if(f.type==="hidden"&&n.getAttribute("name")===g)return n}else return n;if(n=Rs(n.nextSibling),n===null)break}return null}function BS(n,s,i){if(s==="")return null;for(;n.nodeType!==3;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!i||(n=Rs(n.nextSibling),n===null))return null;return n}function iv(n,s){for(;n.nodeType!==8;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!s||(n=Rs(n.nextSibling),n===null))return null;return n}function Op(n){return n.data==="$?"||n.data==="$~"}function Pp(n){return n.data==="$!"||n.data==="$?"&&n.ownerDocument.readyState!=="loading"}function qS(n,s){var i=n.ownerDocument;if(n.data==="$~")n._reactRetry=s;else if(n.data!=="$?"||i.readyState!=="loading")s();else{var u=function(){s(),i.removeEventListener("DOMContentLoaded",u)};i.addEventListener("DOMContentLoaded",u),n._reactRetry=u}}function Rs(n){for(;n!=null;n=n.nextSibling){var s=n.nodeType;if(s===1||s===3)break;if(s===8){if(s=n.data,s==="$"||s==="$!"||s==="$?"||s==="$~"||s==="&"||s==="F!"||s==="F")break;if(s==="/$"||s==="/&")return null}}return n}var Lp=null;function lv(n){n=n.nextSibling;for(var s=0;n;){if(n.nodeType===8){var i=n.data;if(i==="/$"||i==="/&"){if(s===0)return Rs(n.nextSibling);s--}else i!=="$"&&i!=="$!"&&i!=="$?"&&i!=="$~"&&i!=="&"||s++}n=n.nextSibling}return null}function ov(n){n=n.previousSibling;for(var s=0;n;){if(n.nodeType===8){var i=n.data;if(i==="$"||i==="$!"||i==="$?"||i==="$~"||i==="&"){if(s===0)return n;s--}else i!=="/$"&&i!=="/&"||s++}n=n.previousSibling}return null}function cv(n,s,i){switch(s=Jd(i),n){case"html":if(n=s.documentElement,!n)throw Error(a(452));return n;case"head":if(n=s.head,!n)throw Error(a(453));return n;case"body":if(n=s.body,!n)throw Error(a(454));return n;default:throw Error(a(451))}}function Ic(n){for(var s=n.attributes;s.length;)n.removeAttributeNode(s[0]);gl(n)}var ks=new Map,uv=new Set;function Wd(n){return typeof n.getRootNode=="function"?n.getRootNode():n.nodeType===9?n:n.ownerDocument}var Qr=G.d;G.d={f:FS,r:HS,D:$S,C:GS,L:QS,m:KS,X:XS,S:YS,M:ZS};function FS(){var n=Qr.f(),s=Hd();return n||s}function HS(n){var s=_s(n);s!==null&&s.tag===5&&s.type==="form"?jy(s):Qr.r(n)}var Zl=typeof document>"u"?null:document;function dv(n,s,i){var u=Zl;if(u&&typeof s=="string"&&s){var f=Zn(s);f='link[rel="'+n+'"][href="'+f+'"]',typeof i=="string"&&(f+='[crossorigin="'+i+'"]'),uv.has(f)||(uv.add(f),n={rel:n,crossOrigin:i,href:s},u.querySelector(f)===null&&(s=u.createElement("link"),Dn(s,"link",n),Jt(s),u.head.appendChild(s)))}}function $S(n){Qr.D(n),dv("dns-prefetch",n,null)}function GS(n,s){Qr.C(n,s),dv("preconnect",n,s)}function QS(n,s,i){Qr.L(n,s,i);var u=Zl;if(u&&n&&s){var f='link[rel="preload"][as="'+Zn(s)+'"]';s==="image"&&i&&i.imageSrcSet?(f+='[imagesrcset="'+Zn(i.imageSrcSet)+'"]',typeof i.imageSizes=="string"&&(f+='[imagesizes="'+Zn(i.imageSizes)+'"]')):f+='[href="'+Zn(n)+'"]';var g=f;switch(s){case"style":g=Jl(n);break;case"script":g=Wl(n)}ks.has(g)||(n=b({rel:"preload",href:s==="image"&&i&&i.imageSrcSet?void 0:n,as:s},i),ks.set(g,n),u.querySelector(f)!==null||s==="style"&&u.querySelector(Dc(g))||s==="script"&&u.querySelector(Rc(g))||(s=u.createElement("link"),Dn(s,"link",n),Jt(s),u.head.appendChild(s)))}}function KS(n,s){Qr.m(n,s);var i=Zl;if(i&&n){var u=s&&typeof s.as=="string"?s.as:"script",f='link[rel="modulepreload"][as="'+Zn(u)+'"][href="'+Zn(n)+'"]',g=f;switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":g=Wl(n)}if(!ks.has(g)&&(n=b({rel:"modulepreload",href:n},s),ks.set(g,n),i.querySelector(f)===null)){switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(i.querySelector(Rc(g)))return}u=i.createElement("link"),Dn(u,"link",n),Jt(u),i.head.appendChild(u)}}}function YS(n,s,i){Qr.S(n,s,i);var u=Zl;if(u&&n){var f=lr(u).hoistableStyles,g=Jl(n);s=s||"default";var w=f.get(g);if(!w){var j={loading:0,preload:null};if(w=u.querySelector(Dc(g)))j.loading=5;else{n=b({rel:"stylesheet",href:n,"data-precedence":s},i),(i=ks.get(g))&&zp(n,i);var B=w=u.createElement("link");Jt(B),Dn(B,"link",n),B._p=new Promise(function(W,le){B.onload=W,B.onerror=le}),B.addEventListener("load",function(){j.loading|=1}),B.addEventListener("error",function(){j.loading|=2}),j.loading|=4,eh(w,s,u)}w={type:"stylesheet",instance:w,count:1,state:j},f.set(g,w)}}}function XS(n,s){Qr.X(n,s);var i=Zl;if(i&&n){var u=lr(i).hoistableScripts,f=Wl(n),g=u.get(f);g||(g=i.querySelector(Rc(f)),g||(n=b({src:n,async:!0},s),(s=ks.get(f))&&Up(n,s),g=i.createElement("script"),Jt(g),Dn(g,"link",n),i.head.appendChild(g)),g={type:"script",instance:g,count:1,state:null},u.set(f,g))}}function ZS(n,s){Qr.M(n,s);var i=Zl;if(i&&n){var u=lr(i).hoistableScripts,f=Wl(n),g=u.get(f);g||(g=i.querySelector(Rc(f)),g||(n=b({src:n,async:!0,type:"module"},s),(s=ks.get(f))&&Up(n,s),g=i.createElement("script"),Jt(g),Dn(g,"link",n),i.head.appendChild(g)),g={type:"script",instance:g,count:1,state:null},u.set(f,g))}}function hv(n,s,i,u){var f=(f=re.current)?Wd(f):null;if(!f)throw Error(a(446));switch(n){case"meta":case"title":return null;case"style":return typeof i.precedence=="string"&&typeof i.href=="string"?(s=Jl(i.href),i=lr(f).hoistableStyles,u=i.get(s),u||(u={type:"style",instance:null,count:0,state:null},i.set(s,u)),u):{type:"void",instance:null,count:0,state:null};case"link":if(i.rel==="stylesheet"&&typeof i.href=="string"&&typeof i.precedence=="string"){n=Jl(i.href);var g=lr(f).hoistableStyles,w=g.get(n);if(w||(f=f.ownerDocument||f,w={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},g.set(n,w),(g=f.querySelector(Dc(n)))&&!g._p&&(w.instance=g,w.state.loading=5),ks.has(n)||(i={rel:"preload",as:"style",href:i.href,crossOrigin:i.crossOrigin,integrity:i.integrity,media:i.media,hrefLang:i.hrefLang,referrerPolicy:i.referrerPolicy},ks.set(n,i),g||JS(f,n,i,w.state))),s&&u===null)throw Error(a(528,""));return w}if(s&&u!==null)throw Error(a(529,""));return null;case"script":return s=i.async,i=i.src,typeof i=="string"&&s&&typeof s!="function"&&typeof s!="symbol"?(s=Wl(i),i=lr(f).hoistableScripts,u=i.get(s),u||(u={type:"script",instance:null,count:0,state:null},i.set(s,u)),u):{type:"void",instance:null,count:0,state:null};default:throw Error(a(444,n))}}function Jl(n){return'href="'+Zn(n)+'"'}function Dc(n){return'link[rel="stylesheet"]['+n+"]"}function fv(n){return b({},n,{"data-precedence":n.precedence,precedence:null})}function JS(n,s,i,u){n.querySelector('link[rel="preload"][as="style"]['+s+"]")?u.loading=1:(s=n.createElement("link"),u.preload=s,s.addEventListener("load",function(){return u.loading|=1}),s.addEventListener("error",function(){return u.loading|=2}),Dn(s,"link",i),Jt(s),n.head.appendChild(s))}function Wl(n){return'[src="'+Zn(n)+'"]'}function Rc(n){return"script[async]"+n}function mv(n,s,i){if(s.count++,s.instance===null)switch(s.type){case"style":var u=n.querySelector('style[data-href~="'+Zn(i.href)+'"]');if(u)return s.instance=u,Jt(u),u;var f=b({},i,{"data-href":i.href,"data-precedence":i.precedence,href:null,precedence:null});return u=(n.ownerDocument||n).createElement("style"),Jt(u),Dn(u,"style",f),eh(u,i.precedence,n),s.instance=u;case"stylesheet":f=Jl(i.href);var g=n.querySelector(Dc(f));if(g)return s.state.loading|=4,s.instance=g,Jt(g),g;u=fv(i),(f=ks.get(f))&&zp(u,f),g=(n.ownerDocument||n).createElement("link"),Jt(g);var w=g;return w._p=new Promise(function(j,B){w.onload=j,w.onerror=B}),Dn(g,"link",u),s.state.loading|=4,eh(g,i.precedence,n),s.instance=g;case"script":return g=Wl(i.src),(f=n.querySelector(Rc(g)))?(s.instance=f,Jt(f),f):(u=i,(f=ks.get(g))&&(u=b({},i),Up(u,f)),n=n.ownerDocument||n,f=n.createElement("script"),Jt(f),Dn(f,"link",u),n.head.appendChild(f),s.instance=f);case"void":return null;default:throw Error(a(443,s.type))}else s.type==="stylesheet"&&(s.state.loading&4)===0&&(u=s.instance,s.state.loading|=4,eh(u,i.precedence,n));return s.instance}function eh(n,s,i){for(var u=i.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),f=u.length?u[u.length-1]:null,g=f,w=0;w<u.length;w++){var j=u[w];if(j.dataset.precedence===s)g=j;else if(g!==f)break}g?g.parentNode.insertBefore(n,g.nextSibling):(s=i.nodeType===9?i.head:i,s.insertBefore(n,s.firstChild))}function zp(n,s){n.crossOrigin==null&&(n.crossOrigin=s.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=s.referrerPolicy),n.title==null&&(n.title=s.title)}function Up(n,s){n.crossOrigin==null&&(n.crossOrigin=s.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=s.referrerPolicy),n.integrity==null&&(n.integrity=s.integrity)}var th=null;function pv(n,s,i){if(th===null){var u=new Map,f=th=new Map;f.set(i,u)}else f=th,u=f.get(i),u||(u=new Map,f.set(i,u));if(u.has(n))return u;for(u.set(n,null),i=i.getElementsByTagName(n),f=0;f<i.length;f++){var g=i[f];if(!(g[ar]||g[Zt]||n==="link"&&g.getAttribute("rel")==="stylesheet")&&g.namespaceURI!=="http://www.w3.org/2000/svg"){var w=g.getAttribute(s)||"";w=n+w;var j=u.get(w);j?j.push(g):u.set(w,[g])}}return u}function gv(n,s,i){n=n.ownerDocument||n,n.head.insertBefore(i,s==="title"?n.querySelector("head > title"):null)}function WS(n,s,i){if(i===1||s.itemProp!=null)return!1;switch(n){case"meta":case"title":return!0;case"style":if(typeof s.precedence!="string"||typeof s.href!="string"||s.href==="")break;return!0;case"link":if(typeof s.rel!="string"||typeof s.href!="string"||s.href===""||s.onLoad||s.onError)break;switch(s.rel){case"stylesheet":return n=s.disabled,typeof s.precedence=="string"&&n==null;default:return!0}case"script":if(s.async&&typeof s.async!="function"&&typeof s.async!="symbol"&&!s.onLoad&&!s.onError&&s.src&&typeof s.src=="string")return!0}return!1}function xv(n){return!(n.type==="stylesheet"&&(n.state.loading&3)===0)}function eT(n,s,i,u){if(i.type==="stylesheet"&&(typeof u.media!="string"||matchMedia(u.media).matches!==!1)&&(i.state.loading&4)===0){if(i.instance===null){var f=Jl(u.href),g=s.querySelector(Dc(f));if(g){s=g._p,s!==null&&typeof s=="object"&&typeof s.then=="function"&&(n.count++,n=nh.bind(n),s.then(n,n)),i.state.loading|=4,i.instance=g,Jt(g);return}g=s.ownerDocument||s,u=fv(u),(f=ks.get(f))&&zp(u,f),g=g.createElement("link"),Jt(g);var w=g;w._p=new Promise(function(j,B){w.onload=j,w.onerror=B}),Dn(g,"link",u),i.instance=g}n.stylesheets===null&&(n.stylesheets=new Map),n.stylesheets.set(i,s),(s=i.state.preload)&&(i.state.loading&3)===0&&(n.count++,i=nh.bind(n),s.addEventListener("load",i),s.addEventListener("error",i))}}var Bp=0;function tT(n,s){return n.stylesheets&&n.count===0&&rh(n,n.stylesheets),0<n.count||0<n.imgCount?function(i){var u=setTimeout(function(){if(n.stylesheets&&rh(n,n.stylesheets),n.unsuspend){var g=n.unsuspend;n.unsuspend=null,g()}},6e4+s);0<n.imgBytes&&Bp===0&&(Bp=62500*VS());var f=setTimeout(function(){if(n.waitingForImages=!1,n.count===0&&(n.stylesheets&&rh(n,n.stylesheets),n.unsuspend)){var g=n.unsuspend;n.unsuspend=null,g()}},(n.imgBytes>Bp?50:800)+s);return n.unsuspend=i,function(){n.unsuspend=null,clearTimeout(u),clearTimeout(f)}}:null}function nh(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)rh(this,this.stylesheets);else if(this.unsuspend){var n=this.unsuspend;this.unsuspend=null,n()}}}var sh=null;function rh(n,s){n.stylesheets=null,n.unsuspend!==null&&(n.count++,sh=new Map,s.forEach(nT,n),sh=null,nh.call(n))}function nT(n,s){if(!(s.state.loading&4)){var i=sh.get(n);if(i)var u=i.get(null);else{i=new Map,sh.set(n,i);for(var f=n.querySelectorAll("link[data-precedence],style[data-precedence]"),g=0;g<f.length;g++){var w=f[g];(w.nodeName==="LINK"||w.getAttribute("media")!=="not all")&&(i.set(w.dataset.precedence,w),u=w)}u&&i.set(null,u)}f=s.instance,w=f.getAttribute("data-precedence"),g=i.get(w)||u,g===u&&i.set(null,f),i.set(w,f),this.count++,u=nh.bind(this),f.addEventListener("load",u),f.addEventListener("error",u),g?g.parentNode.insertBefore(f,g.nextSibling):(n=n.nodeType===9?n.head:n,n.insertBefore(f,n.firstChild)),s.state.loading|=4}}var kc={$$typeof:M,Provider:null,Consumer:null,_currentValue:pe,_currentValue2:pe,_threadCount:0};function sT(n,s,i,u,f,g,w,j,B){this.tag=1,this.containerInfo=n,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Tn(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Tn(0),this.hiddenUpdates=Tn(null),this.identifierPrefix=u,this.onUncaughtError=f,this.onCaughtError=g,this.onRecoverableError=w,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=B,this.incompleteTransitions=new Map}function yv(n,s,i,u,f,g,w,j,B,W,le,ce){return n=new sT(n,s,i,w,B,W,le,ce,j),s=1,g===!0&&(s|=24),g=ds(3,null,null,s),n.current=g,g.stateNode=n,s=vm(),s.refCount++,n.pooledCache=s,s.refCount++,g.memoizedState={element:u,isDehydrated:i,cache:s},Em(g),n}function bv(n){return n?(n=Il,n):Il}function vv(n,s,i,u,f,g){f=bv(f),u.context===null?u.context=f:u.pendingContext=f,u=ba(s),u.payload={element:i},g=g===void 0?null:g,g!==null&&(u.callback=g),i=va(n,u,s),i!==null&&(ss(i,n,s),dc(i,n,s))}function wv(n,s){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var i=n.retryLane;n.retryLane=i!==0&&i<s?i:s}}function qp(n,s){wv(n,s),(n=n.alternate)&&wv(n,s)}function _v(n){if(n.tag===13||n.tag===31){var s=wi(n,67108864);s!==null&&ss(s,n,67108864),qp(n,67108864)}}function Nv(n){if(n.tag===13||n.tag===31){var s=gs();s=nr(s);var i=wi(n,s);i!==null&&ss(i,n,s),qp(n,s)}}var ah=!0;function rT(n,s,i,u){var f=K.T;K.T=null;var g=G.p;try{G.p=2,Fp(n,s,i,u)}finally{G.p=g,K.T=f}}function aT(n,s,i,u){var f=K.T;K.T=null;var g=G.p;try{G.p=8,Fp(n,s,i,u)}finally{G.p=g,K.T=f}}function Fp(n,s,i,u){if(ah){var f=Hp(u);if(f===null)Cp(n,s,u,ih,i),Sv(n,u);else if(lT(f,n,s,i,u))u.stopPropagation();else if(Sv(n,u),s&4&&-1<iT.indexOf(n)){for(;f!==null;){var g=_s(f);if(g!==null)switch(g.tag){case 3:if(g=g.stateNode,g.current.memoizedState.isDehydrated){var w=Mt(g.pendingLanes);if(w!==0){var j=g;for(j.pendingLanes|=2,j.entangledLanes|=2;w;){var B=1<<31-qt(w);j.entanglements[1]|=B,w&=~B}vr(g),(ct&6)===0&&(qd=rt()+500,jc(0))}}break;case 31:case 13:j=wi(g,2),j!==null&&ss(j,g,2),Hd(),qp(g,2)}if(g=Hp(u),g===null&&Cp(n,s,u,ih,i),g===f)break;f=g}f!==null&&u.stopPropagation()}else Cp(n,s,u,null,i)}}function Hp(n){return n=Ns(n),$p(n)}var ih=null;function $p(n){if(ih=null,n=ir(n),n!==null){var s=c(n);if(s===null)n=null;else{var i=s.tag;if(i===13){if(n=d(s),n!==null)return n;n=null}else if(i===31){if(n=m(s),n!==null)return n;n=null}else if(i===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;n=null}else s!==n&&(n=null)}}return ih=n,null}function Ev(n){switch(n){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Qe()){case Bt:return 2;case bn:return 8;case un:case Bs:return 32;case kt:return 268435456;default:return 32}default:return 32}}var Gp=!1,Da=null,Ra=null,ka=null,Mc=new Map,Vc=new Map,Ma=[],iT="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Sv(n,s){switch(n){case"focusin":case"focusout":Da=null;break;case"dragenter":case"dragleave":Ra=null;break;case"mouseover":case"mouseout":ka=null;break;case"pointerover":case"pointerout":Mc.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":Vc.delete(s.pointerId)}}function Oc(n,s,i,u,f,g){return n===null||n.nativeEvent!==g?(n={blockedOn:s,domEventName:i,eventSystemFlags:u,nativeEvent:g,targetContainers:[f]},s!==null&&(s=_s(s),s!==null&&_v(s)),n):(n.eventSystemFlags|=u,s=n.targetContainers,f!==null&&s.indexOf(f)===-1&&s.push(f),n)}function lT(n,s,i,u,f){switch(s){case"focusin":return Da=Oc(Da,n,s,i,u,f),!0;case"dragenter":return Ra=Oc(Ra,n,s,i,u,f),!0;case"mouseover":return ka=Oc(ka,n,s,i,u,f),!0;case"pointerover":var g=f.pointerId;return Mc.set(g,Oc(Mc.get(g)||null,n,s,i,u,f)),!0;case"gotpointercapture":return g=f.pointerId,Vc.set(g,Oc(Vc.get(g)||null,n,s,i,u,f)),!0}return!1}function Tv(n){var s=ir(n.target);if(s!==null){var i=c(s);if(i!==null){if(s=i.tag,s===13){if(s=d(i),s!==null){n.blockedOn=s,$n(n.priority,function(){Nv(i)});return}}else if(s===31){if(s=m(i),s!==null){n.blockedOn=s,$n(n.priority,function(){Nv(i)});return}}else if(s===3&&i.stateNode.current.memoizedState.isDehydrated){n.blockedOn=i.tag===3?i.stateNode.containerInfo:null;return}}}n.blockedOn=null}function lh(n){if(n.blockedOn!==null)return!1;for(var s=n.targetContainers;0<s.length;){var i=Hp(n.nativeEvent);if(i===null){i=n.nativeEvent;var u=new i.constructor(i.type,i);Yo=u,i.target.dispatchEvent(u),Yo=null}else return s=_s(i),s!==null&&_v(s),n.blockedOn=i,!1;s.shift()}return!0}function jv(n,s,i){lh(n)&&i.delete(s)}function oT(){Gp=!1,Da!==null&&lh(Da)&&(Da=null),Ra!==null&&lh(Ra)&&(Ra=null),ka!==null&&lh(ka)&&(ka=null),Mc.forEach(jv),Vc.forEach(jv)}function oh(n,s){n.blockedOn===s&&(n.blockedOn=null,Gp||(Gp=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,oT)))}var ch=null;function Av(n){ch!==n&&(ch=n,r.unstable_scheduleCallback(r.unstable_NormalPriority,function(){ch===n&&(ch=null);for(var s=0;s<n.length;s+=3){var i=n[s],u=n[s+1],f=n[s+2];if(typeof u!="function"){if($p(u||i)===null)continue;break}var g=_s(i);g!==null&&(n.splice(s,3),s-=3,Hm(g,{pending:!0,data:f,method:i.method,action:u},u,f))}}))}function eo(n){function s(B){return oh(B,n)}Da!==null&&oh(Da,n),Ra!==null&&oh(Ra,n),ka!==null&&oh(ka,n),Mc.forEach(s),Vc.forEach(s);for(var i=0;i<Ma.length;i++){var u=Ma[i];u.blockedOn===n&&(u.blockedOn=null)}for(;0<Ma.length&&(i=Ma[0],i.blockedOn===null);)Tv(i),i.blockedOn===null&&Ma.shift();if(i=(n.ownerDocument||n).$$reactFormReplay,i!=null)for(u=0;u<i.length;u+=3){var f=i[u],g=i[u+1],w=f[vn]||null;if(typeof g=="function")w||Av(i);else if(w){var j=null;if(g&&g.hasAttribute("formAction")){if(f=g,w=g[vn]||null)j=w.formAction;else if($p(f)!==null)continue}else j=w.action;typeof j=="function"?i[u+1]=j:(i.splice(u,3),u-=3),Av(i)}}}function Cv(){function n(g){g.canIntercept&&g.info==="react-transition"&&g.intercept({handler:function(){return new Promise(function(w){return f=w})},focusReset:"manual",scroll:"manual"})}function s(){f!==null&&(f(),f=null),u||setTimeout(i,20)}function i(){if(!u&&!navigation.transition){var g=navigation.currentEntry;g&&g.url!=null&&navigation.navigate(g.url,{state:g.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var u=!1,f=null;return navigation.addEventListener("navigate",n),navigation.addEventListener("navigatesuccess",s),navigation.addEventListener("navigateerror",s),setTimeout(i,100),function(){u=!0,navigation.removeEventListener("navigate",n),navigation.removeEventListener("navigatesuccess",s),navigation.removeEventListener("navigateerror",s),f!==null&&(f(),f=null)}}}function Qp(n){this._internalRoot=n}uh.prototype.render=Qp.prototype.render=function(n){var s=this._internalRoot;if(s===null)throw Error(a(409));var i=s.current,u=gs();vv(i,u,n,s,null,null)},uh.prototype.unmount=Qp.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var s=n.containerInfo;vv(n.current,2,null,n,null,null),Hd(),s[rr]=null}};function uh(n){this._internalRoot=n}uh.prototype.unstable_scheduleHydration=function(n){if(n){var s=sr();n={blockedOn:null,target:n,priority:s};for(var i=0;i<Ma.length&&s!==0&&s<Ma[i].priority;i++);Ma.splice(i,0,n),i===0&&Tv(n)}};var Iv=e.version;if(Iv!=="19.2.3")throw Error(a(527,Iv,"19.2.3"));G.findDOMNode=function(n){var s=n._reactInternals;if(s===void 0)throw typeof n.render=="function"?Error(a(188)):(n=Object.keys(n).join(","),Error(a(268,n)));return n=x(s),n=n!==null?v(n):null,n=n===null?null:n.stateNode,n};var cT={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:K,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var dh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!dh.isDisabled&&dh.supportsFiber)try{Un=dh.inject(cT),dn=dh}catch{}}return Lc.createRoot=function(n,s){if(!l(n))throw Error(a(299));var i=!1,u="",f=Py,g=Ly,w=zy;return s!=null&&(s.unstable_strictMode===!0&&(i=!0),s.identifierPrefix!==void 0&&(u=s.identifierPrefix),s.onUncaughtError!==void 0&&(f=s.onUncaughtError),s.onCaughtError!==void 0&&(g=s.onCaughtError),s.onRecoverableError!==void 0&&(w=s.onRecoverableError)),s=yv(n,1,!1,null,null,i,u,null,f,g,w,Cv),n[rr]=s.current,Ap(n),new Qp(s)},Lc.hydrateRoot=function(n,s,i){if(!l(n))throw Error(a(299));var u=!1,f="",g=Py,w=Ly,j=zy,B=null;return i!=null&&(i.unstable_strictMode===!0&&(u=!0),i.identifierPrefix!==void 0&&(f=i.identifierPrefix),i.onUncaughtError!==void 0&&(g=i.onUncaughtError),i.onCaughtError!==void 0&&(w=i.onCaughtError),i.onRecoverableError!==void 0&&(j=i.onRecoverableError),i.formState!==void 0&&(B=i.formState)),s=yv(n,1,!0,s,i??null,u,f,B,g,w,j,Cv),s.context=bv(null),i=s.current,u=gs(),u=nr(u),f=ba(u),f.callback=null,va(i,f,u),i=u,s.current.lanes=i,fn(s,i),vr(s),n[rr]=s.current,Ap(n),new uh(s)},Lc.version="19.2.3",Lc}var Uv;function vT(){if(Uv)return Xp.exports;Uv=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),Xp.exports=bT(),Xp.exports}var wT=vT();const _T=Kw(wT);var oo=Yw();/**
 * @remix-run/router v1.15.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Uh(){return Uh=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(r[a]=t[a])}return r},Uh.apply(this,arguments)}var qi;(function(r){r.Pop="POP",r.Push="PUSH",r.Replace="REPLACE"})(qi||(qi={}));const Bv="popstate";function NT(r){r===void 0&&(r={});function e(l,c){let{pathname:d="/",search:m="",hash:p=""}=a0(l.location.hash.substr(1));return!d.startsWith("/")&&!d.startsWith(".")&&(d="/"+d),yg("",{pathname:d,search:m,hash:p},c.state&&c.state.usr||null,c.state&&c.state.key||"default")}function t(l,c){let d=l.document.querySelector("base"),m="";if(d&&d.getAttribute("href")){let p=l.location.href,x=p.indexOf("#");m=x===-1?p:p.slice(0,x)}return m+"#"+(typeof c=="string"?c:Zw(c))}function a(l,c){ET(l.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(c)+")")}return TT(e,t,a,r)}function Xw(r,e){if(r===!1||r===null||typeof r>"u")throw new Error(e)}function ET(r,e){if(!r){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function ST(){return Math.random().toString(36).substr(2,8)}function qv(r,e){return{usr:r.state,key:r.key,idx:e}}function yg(r,e,t,a){return t===void 0&&(t=null),Uh({pathname:typeof r=="string"?r:r.pathname,search:"",hash:""},typeof e=="string"?a0(e):e,{state:t,key:e&&e.key||a||ST()})}function Zw(r){let{pathname:e="/",search:t="",hash:a=""}=r;return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),a&&a!=="#"&&(e+=a.charAt(0)==="#"?a:"#"+a),e}function a0(r){let e={};if(r){let t=r.indexOf("#");t>=0&&(e.hash=r.substr(t),r=r.substr(0,t));let a=r.indexOf("?");a>=0&&(e.search=r.substr(a),r=r.substr(0,a)),r&&(e.pathname=r)}return e}function TT(r,e,t,a){a===void 0&&(a={});let{window:l=document.defaultView,v5Compat:c=!1}=a,d=l.history,m=qi.Pop,p=null,x=v();x==null&&(x=0,d.replaceState(Uh({},d.state,{idx:x}),""));function v(){return(d.state||{idx:null}).idx}function b(){m=qi.Pop;let P=v(),C=P==null?null:P-x;x=P,p&&p({action:m,location:O.location,delta:C})}function N(P,C){m=qi.Push;let L=yg(O.location,P,C);t&&t(L,P),x=v()+1;let M=qv(L,x),F=O.createHref(L);try{d.pushState(M,"",F)}catch(Z){if(Z instanceof DOMException&&Z.name==="DataCloneError")throw Z;l.location.assign(F)}c&&p&&p({action:m,location:O.location,delta:1})}function S(P,C){m=qi.Replace;let L=yg(O.location,P,C);t&&t(L,P),x=v();let M=qv(L,x),F=O.createHref(L);d.replaceState(M,"",F),c&&p&&p({action:m,location:O.location,delta:0})}function z(P){let C=l.location.origin!=="null"?l.location.origin:l.location.href,L=typeof P=="string"?P:Zw(P);return Xw(C,"No window.location.(origin|href) available to create URL for href: "+L),new URL(L,C)}let O={get action(){return m},get location(){return r(l,d)},listen(P){if(p)throw new Error("A history only accepts one active listener");return l.addEventListener(Bv,b),p=P,()=>{l.removeEventListener(Bv,b),p=null}},createHref(P){return e(l,P)},createURL:z,encodeLocation(P){let C=z(P);return{pathname:C.pathname,search:C.search,hash:C.hash}},push:N,replace:S,go(P){return d.go(P)}};return O}var Fv;(function(r){r.data="data",r.deferred="deferred",r.redirect="redirect",r.error="error"})(Fv||(Fv={}));function jT(r,e){if(e==="/")return r;if(!r.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,a=r.charAt(t);return a&&a!=="/"?null:r.slice(t)||"/"}const Jw=["post","put","patch","delete"];new Set(Jw);const AT=["get",...Jw];new Set(AT);/**
 * React Router v6.22.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function bg(){return bg=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(r[a]=t[a])}return r},bg.apply(this,arguments)}const CT=A.createContext(null),Ww=A.createContext(null);function IT(){return A.useContext(Ww)!=null}function DT(r){let{basename:e="/",children:t=null,location:a,navigationType:l=qi.Pop,navigator:c,static:d=!1,future:m}=r;IT()&&Xw(!1);let p=e.replace(/^\/*/,"/"),x=A.useMemo(()=>({basename:p,navigator:c,static:d,future:bg({v7_relativeSplatPath:!1},m)}),[p,m,c,d]);typeof a=="string"&&(a=a0(a));let{pathname:v="/",search:b="",hash:N="",state:S=null,key:z="default"}=a,O=A.useMemo(()=>{let P=jT(v,p);return P==null?null:{location:{pathname:P,search:b,hash:N,state:S,key:z},navigationType:l}},[p,v,b,N,S,z,l]);return O==null?null:A.createElement(CT.Provider,{value:x},A.createElement(Ww.Provider,{children:t,value:O}))}new Promise(()=>{});/**
 * React Router DOM v6.22.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const RT="6";try{window.__reactRouterVersion=RT}catch{}const kT="startTransition",Hv=pT[kT];function MT(r){let{basename:e,children:t,future:a,window:l}=r,c=A.useRef();c.current==null&&(c.current=NT({window:l,v5Compat:!0}));let d=c.current,[m,p]=A.useState({action:d.action,location:d.location}),{v7_startTransition:x}=a||{},v=A.useCallback(b=>{x&&Hv?Hv(()=>p(b)):p(b)},[p,x]);return A.useLayoutEffect(()=>d.listen(v),[d,v]),A.createElement(DT,{basename:e,children:t,location:m.location,navigationType:m.action,navigator:d,future:a})}var $v;(function(r){r.UseScrollRestoration="useScrollRestoration",r.UseSubmit="useSubmit",r.UseSubmitFetcher="useSubmitFetcher",r.UseFetcher="useFetcher",r.useViewTransitionState="useViewTransitionState"})($v||($v={}));var Gv;(function(r){r.UseFetcher="useFetcher",r.UseFetchers="useFetchers",r.UseScrollRestoration="useScrollRestoration"})(Gv||(Gv={}));const VT=()=>{};var Qv={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e_=function(r){const e=[];let t=0;for(let a=0;a<r.length;a++){let l=r.charCodeAt(a);l<128?e[t++]=l:l<2048?(e[t++]=l>>6|192,e[t++]=l&63|128):(l&64512)===55296&&a+1<r.length&&(r.charCodeAt(a+1)&64512)===56320?(l=65536+((l&1023)<<10)+(r.charCodeAt(++a)&1023),e[t++]=l>>18|240,e[t++]=l>>12&63|128,e[t++]=l>>6&63|128,e[t++]=l&63|128):(e[t++]=l>>12|224,e[t++]=l>>6&63|128,e[t++]=l&63|128)}return e},OT=function(r){const e=[];let t=0,a=0;for(;t<r.length;){const l=r[t++];if(l<128)e[a++]=String.fromCharCode(l);else if(l>191&&l<224){const c=r[t++];e[a++]=String.fromCharCode((l&31)<<6|c&63)}else if(l>239&&l<365){const c=r[t++],d=r[t++],m=r[t++],p=((l&7)<<18|(c&63)<<12|(d&63)<<6|m&63)-65536;e[a++]=String.fromCharCode(55296+(p>>10)),e[a++]=String.fromCharCode(56320+(p&1023))}else{const c=r[t++],d=r[t++];e[a++]=String.fromCharCode((l&15)<<12|(c&63)<<6|d&63)}}return e.join("")},t_={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(r,e){if(!Array.isArray(r))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,a=[];for(let l=0;l<r.length;l+=3){const c=r[l],d=l+1<r.length,m=d?r[l+1]:0,p=l+2<r.length,x=p?r[l+2]:0,v=c>>2,b=(c&3)<<4|m>>4;let N=(m&15)<<2|x>>6,S=x&63;p||(S=64,d||(N=64)),a.push(t[v],t[b],t[N],t[S])}return a.join("")},encodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(r):this.encodeByteArray(e_(r),e)},decodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(r):OT(this.decodeStringToByteArray(r,e))},decodeStringToByteArray(r,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,a=[];for(let l=0;l<r.length;){const c=t[r.charAt(l++)],m=l<r.length?t[r.charAt(l)]:0;++l;const x=l<r.length?t[r.charAt(l)]:64;++l;const b=l<r.length?t[r.charAt(l)]:64;if(++l,c==null||m==null||x==null||b==null)throw new PT;const N=c<<2|m>>4;if(a.push(N),x!==64){const S=m<<4&240|x>>2;if(a.push(S),b!==64){const z=x<<6&192|b;a.push(z)}}}return a},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let r=0;r<this.ENCODED_VALS.length;r++)this.byteToCharMap_[r]=this.ENCODED_VALS.charAt(r),this.charToByteMap_[this.byteToCharMap_[r]]=r,this.byteToCharMapWebSafe_[r]=this.ENCODED_VALS_WEBSAFE.charAt(r),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[r]]=r,r>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(r)]=r,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(r)]=r)}}};class PT extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const LT=function(r){const e=e_(r);return t_.encodeByteArray(e,!0)},Bh=function(r){return LT(r).replace(/\./g,"")},zT=function(r){try{return t_.decodeString(r,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function n_(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UT=()=>n_().__FIREBASE_DEFAULTS__,BT=()=>{if(typeof process>"u"||typeof Qv>"u")return;const r=Qv.__FIREBASE_DEFAULTS__;if(r)return JSON.parse(r)},qT=()=>{if(typeof document>"u")return;let r;try{r=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=r&&zT(r[1]);return e&&JSON.parse(e)},i0=()=>{try{return VT()||UT()||BT()||qT()}catch(r){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${r}`);return}},FT=r=>{var e,t;return(t=(e=i0())==null?void 0:e.emulatorHosts)==null?void 0:t[r]},HT=r=>{const e=FT(r);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const a=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),a]:[e.substring(0,t),a]},s_=()=>{var r;return(r=i0())==null?void 0:r.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $T{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,a)=>{t?this.reject(t):this.resolve(a),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,a))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l0(r){try{return(r.startsWith("http://")||r.startsWith("https://")?new URL(r).hostname:r).endsWith(".cloudworkstations.dev")}catch{return!1}}async function GT(r){return(await fetch(r,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QT(r,e){if(r.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},a=e||"demo-project",l=r.iat||0,c=r.sub||r.user_id;if(!c)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const d={iss:`https://securetoken.google.com/${a}`,aud:a,iat:l,exp:l+3600,auth_time:l,sub:c,user_id:c,firebase:{sign_in_provider:"custom",identities:{}},...r};return[Bh(JSON.stringify(t)),Bh(JSON.stringify(d)),""].join(".")}const Yc={};function KT(){const r={prod:[],emulator:[]};for(const e of Object.keys(Yc))Yc[e]?r.emulator.push(e):r.prod.push(e);return r}function YT(r){let e=document.getElementById(r),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",r),t=!0),{created:t,element:e}}let Kv=!1;function XT(r,e){if(typeof window>"u"||typeof document>"u"||!l0(window.location.host)||Yc[r]===e||Yc[r]||Kv)return;Yc[r]=e;function t(N){return`__firebase__banner__${N}`}const a="__firebase__banner",c=KT().prod.length>0;function d(){const N=document.getElementById(a);N&&N.remove()}function m(N){N.style.display="flex",N.style.background="#7faaf0",N.style.position="fixed",N.style.bottom="5px",N.style.left="5px",N.style.padding=".5em",N.style.borderRadius="5px",N.style.alignItems="center"}function p(N,S){N.setAttribute("width","24"),N.setAttribute("id",S),N.setAttribute("height","24"),N.setAttribute("viewBox","0 0 24 24"),N.setAttribute("fill","none"),N.style.marginLeft="-6px"}function x(){const N=document.createElement("span");return N.style.cursor="pointer",N.style.marginLeft="16px",N.style.fontSize="24px",N.innerHTML=" &times;",N.onclick=()=>{Kv=!0,d()},N}function v(N,S){N.setAttribute("id",S),N.innerText="Learn more",N.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",N.setAttribute("target","__blank"),N.style.paddingLeft="5px",N.style.textDecoration="underline"}function b(){const N=YT(a),S=t("text"),z=document.getElementById(S)||document.createElement("span"),O=t("learnmore"),P=document.getElementById(O)||document.createElement("a"),C=t("preprendIcon"),L=document.getElementById(C)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(N.created){const M=N.element;m(M),v(P,O);const F=x();p(L,C),M.append(L,z,P,F),document.body.appendChild(M)}c?(z.innerText="Preview backend disconnected.",L.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(L.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,z.innerText="Preview backend running in this workspace."),z.setAttribute("id",S)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",b):b()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qh(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function r_(){var e;const r=(e=i0())==null?void 0:e.forceEnvironment;if(r==="node")return!0;if(r==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function a_(){return!r_()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function i_(){return!r_()&&!!navigator.userAgent&&(navigator.userAgent.includes("Safari")||navigator.userAgent.includes("WebKit"))&&!navigator.userAgent.includes("Chrome")}function l_(){try{return typeof indexedDB=="object"}catch{return!1}}function ZT(){return new Promise((r,e)=>{try{let t=!0;const a="validate-browser-context-for-indexeddb-analytics-module",l=self.indexedDB.open(a);l.onsuccess=()=>{l.result.close(),t||self.indexedDB.deleteDatabase(a),r(!0)},l.onupgradeneeded=()=>{t=!1},l.onerror=()=>{var c;e(((c=l.error)==null?void 0:c.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JT="FirebaseError";class Ro extends Error{constructor(e,t,a){super(t),this.code=e,this.customData=a,this.name=JT,Object.setPrototypeOf(this,Ro.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,o_.prototype.create)}}class o_{constructor(e,t,a){this.service=e,this.serviceName=t,this.errors=a}create(e,...t){const a=t[0]||{},l=`${this.service}/${e}`,c=this.errors[e],d=c?WT(c,a):"Error",m=`${this.serviceName}: ${d} (${l}).`;return new Ro(l,m,a)}}function WT(r,e){return r.replace(ej,(t,a)=>{const l=e[a];return l!=null?String(l):`<${a}?>`})}const ej=/\{\$([^}]+)}/g;function Fh(r,e){if(r===e)return!0;const t=Object.keys(r),a=Object.keys(e);for(const l of t){if(!a.includes(l))return!1;const c=r[l],d=e[l];if(Yv(c)&&Yv(d)){if(!Fh(c,d))return!1}else if(c!==d)return!1}for(const l of a)if(!t.includes(l))return!1;return!0}function Yv(r){return r!==null&&typeof r=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zs(r){return r&&r._delegate?r._delegate:r}class lu{constructor(e,t,a){this.name=e,this.instanceFactory=t,this.type=a,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vi="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tj{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const a=new $T;if(this.instancesDeferred.set(t,a),this.isInitialized(t)||this.shouldAutoInitialize())try{const l=this.getOrInitializeService({instanceIdentifier:t});l&&a.resolve(l)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),a=(e==null?void 0:e.optional)??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(l){if(a)return null;throw l}else{if(a)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(sj(e))try{this.getOrInitializeService({instanceIdentifier:Vi})}catch{}for(const[t,a]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(t);try{const c=this.getOrInitializeService({instanceIdentifier:l});a.resolve(c)}catch{}}}}clearInstance(e=Vi){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Vi){return this.instances.has(e)}getOptions(e=Vi){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,a=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(a))throw Error(`${this.name}(${a}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const l=this.getOrInitializeService({instanceIdentifier:a,options:t});for(const[c,d]of this.instancesDeferred.entries()){const m=this.normalizeInstanceIdentifier(c);a===m&&d.resolve(l)}return l}onInit(e,t){const a=this.normalizeInstanceIdentifier(t),l=this.onInitCallbacks.get(a)??new Set;l.add(e),this.onInitCallbacks.set(a,l);const c=this.instances.get(a);return c&&e(c,a),()=>{l.delete(e)}}invokeOnInitCallbacks(e,t){const a=this.onInitCallbacks.get(t);if(a)for(const l of a)try{l(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let a=this.instances.get(e);if(!a&&this.component&&(a=this.component.instanceFactory(this.container,{instanceIdentifier:nj(e),options:t}),this.instances.set(e,a),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(a,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,a)}catch{}return a||null}normalizeInstanceIdentifier(e=Vi){return this.component?this.component.multipleInstances?e:Vi:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function nj(r){return r===Vi?void 0:r}function sj(r){return r.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rj{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new tj(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var nt;(function(r){r[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT"})(nt||(nt={}));const aj={debug:nt.DEBUG,verbose:nt.VERBOSE,info:nt.INFO,warn:nt.WARN,error:nt.ERROR,silent:nt.SILENT},ij=nt.INFO,lj={[nt.DEBUG]:"log",[nt.VERBOSE]:"log",[nt.INFO]:"info",[nt.WARN]:"warn",[nt.ERROR]:"error"},oj=(r,e,...t)=>{if(e<r.logLevel)return;const a=new Date().toISOString(),l=lj[e];if(l)console[l](`[${a}]  ${r.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class c_{constructor(e){this.name=e,this._logLevel=ij,this._logHandler=oj,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in nt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?aj[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,nt.DEBUG,...e),this._logHandler(this,nt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,nt.VERBOSE,...e),this._logHandler(this,nt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,nt.INFO,...e),this._logHandler(this,nt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,nt.WARN,...e),this._logHandler(this,nt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,nt.ERROR,...e),this._logHandler(this,nt.ERROR,...e)}}const cj=(r,e)=>e.some(t=>r instanceof t);let Xv,Zv;function uj(){return Xv||(Xv=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function dj(){return Zv||(Zv=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const u_=new WeakMap,vg=new WeakMap,d_=new WeakMap,eg=new WeakMap,o0=new WeakMap;function hj(r){const e=new Promise((t,a)=>{const l=()=>{r.removeEventListener("success",c),r.removeEventListener("error",d)},c=()=>{t(Ha(r.result)),l()},d=()=>{a(r.error),l()};r.addEventListener("success",c),r.addEventListener("error",d)});return e.then(t=>{t instanceof IDBCursor&&u_.set(t,r)}).catch(()=>{}),o0.set(e,r),e}function fj(r){if(vg.has(r))return;const e=new Promise((t,a)=>{const l=()=>{r.removeEventListener("complete",c),r.removeEventListener("error",d),r.removeEventListener("abort",d)},c=()=>{t(),l()},d=()=>{a(r.error||new DOMException("AbortError","AbortError")),l()};r.addEventListener("complete",c),r.addEventListener("error",d),r.addEventListener("abort",d)});vg.set(r,e)}let wg={get(r,e,t){if(r instanceof IDBTransaction){if(e==="done")return vg.get(r);if(e==="objectStoreNames")return r.objectStoreNames||d_.get(r);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Ha(r[e])},set(r,e,t){return r[e]=t,!0},has(r,e){return r instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in r}};function mj(r){wg=r(wg)}function pj(r){return r===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const a=r.call(tg(this),e,...t);return d_.set(a,e.sort?e.sort():[e]),Ha(a)}:dj().includes(r)?function(...e){return r.apply(tg(this),e),Ha(u_.get(this))}:function(...e){return Ha(r.apply(tg(this),e))}}function gj(r){return typeof r=="function"?pj(r):(r instanceof IDBTransaction&&fj(r),cj(r,uj())?new Proxy(r,wg):r)}function Ha(r){if(r instanceof IDBRequest)return hj(r);if(eg.has(r))return eg.get(r);const e=gj(r);return e!==r&&(eg.set(r,e),o0.set(e,r)),e}const tg=r=>o0.get(r);function xj(r,e,{blocked:t,upgrade:a,blocking:l,terminated:c}={}){const d=indexedDB.open(r,e),m=Ha(d);return a&&d.addEventListener("upgradeneeded",p=>{a(Ha(d.result),p.oldVersion,p.newVersion,Ha(d.transaction),p)}),t&&d.addEventListener("blocked",p=>t(p.oldVersion,p.newVersion,p)),m.then(p=>{c&&p.addEventListener("close",()=>c()),l&&p.addEventListener("versionchange",x=>l(x.oldVersion,x.newVersion,x))}).catch(()=>{}),m}const yj=["get","getKey","getAll","getAllKeys","count"],bj=["put","add","delete","clear"],ng=new Map;function Jv(r,e){if(!(r instanceof IDBDatabase&&!(e in r)&&typeof e=="string"))return;if(ng.get(e))return ng.get(e);const t=e.replace(/FromIndex$/,""),a=e!==t,l=bj.includes(t);if(!(t in(a?IDBIndex:IDBObjectStore).prototype)||!(l||yj.includes(t)))return;const c=async function(d,...m){const p=this.transaction(d,l?"readwrite":"readonly");let x=p.store;return a&&(x=x.index(m.shift())),(await Promise.all([x[t](...m),l&&p.done]))[0]};return ng.set(e,c),c}mj(r=>({...r,get:(e,t,a)=>Jv(e,t)||r.get(e,t,a),has:(e,t)=>!!Jv(e,t)||r.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vj{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(wj(t)){const a=t.getImmediate();return`${a.library}/${a.version}`}else return null}).filter(t=>t).join(" ")}}function wj(r){const e=r.getComponent();return(e==null?void 0:e.type)==="VERSION"}const _g="@firebase/app",Wv="0.14.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xr=new c_("@firebase/app"),_j="@firebase/app-compat",Nj="@firebase/analytics-compat",Ej="@firebase/analytics",Sj="@firebase/app-check-compat",Tj="@firebase/app-check",jj="@firebase/auth",Aj="@firebase/auth-compat",Cj="@firebase/database",Ij="@firebase/data-connect",Dj="@firebase/database-compat",Rj="@firebase/functions",kj="@firebase/functions-compat",Mj="@firebase/installations",Vj="@firebase/installations-compat",Oj="@firebase/messaging",Pj="@firebase/messaging-compat",Lj="@firebase/performance",zj="@firebase/performance-compat",Uj="@firebase/remote-config",Bj="@firebase/remote-config-compat",qj="@firebase/storage",Fj="@firebase/storage-compat",Hj="@firebase/firestore",$j="@firebase/ai",Gj="@firebase/firestore-compat",Qj="firebase",Kj="12.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ng="[DEFAULT]",Yj={[_g]:"fire-core",[_j]:"fire-core-compat",[Ej]:"fire-analytics",[Nj]:"fire-analytics-compat",[Tj]:"fire-app-check",[Sj]:"fire-app-check-compat",[jj]:"fire-auth",[Aj]:"fire-auth-compat",[Cj]:"fire-rtdb",[Ij]:"fire-data-connect",[Dj]:"fire-rtdb-compat",[Rj]:"fire-fn",[kj]:"fire-fn-compat",[Mj]:"fire-iid",[Vj]:"fire-iid-compat",[Oj]:"fire-fcm",[Pj]:"fire-fcm-compat",[Lj]:"fire-perf",[zj]:"fire-perf-compat",[Uj]:"fire-rc",[Bj]:"fire-rc-compat",[qj]:"fire-gcs",[Fj]:"fire-gcs-compat",[Hj]:"fire-fst",[Gj]:"fire-fst-compat",[$j]:"fire-vertex","fire-js":"fire-js",[Qj]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hh=new Map,Xj=new Map,Eg=new Map;function e1(r,e){try{r.container.addComponent(e)}catch(t){Xr.debug(`Component ${e.name} failed to register with FirebaseApp ${r.name}`,t)}}function $h(r){const e=r.name;if(Eg.has(e))return Xr.debug(`There were multiple attempts to register component ${e}.`),!1;Eg.set(e,r);for(const t of Hh.values())e1(t,r);for(const t of Xj.values())e1(t,r);return!0}function Zj(r,e){const t=r.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),r.container.getProvider(e)}function Jj(r){return r==null?!1:r.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wj={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},$a=new o_("app","Firebase",Wj);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e5{constructor(e,t,a){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=a,this.container.addComponent(new lu("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw $a.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t5=Kj;function h_(r,e={}){let t=r;typeof e!="object"&&(e={name:e});const a={name:Ng,automaticDataCollectionEnabled:!0,...e},l=a.name;if(typeof l!="string"||!l)throw $a.create("bad-app-name",{appName:String(l)});if(t||(t=s_()),!t)throw $a.create("no-options");const c=Hh.get(l);if(c){if(Fh(t,c.options)&&Fh(a,c.config))return c;throw $a.create("duplicate-app",{appName:l})}const d=new rj(l);for(const p of Eg.values())d.addComponent(p);const m=new e5(t,a,d);return Hh.set(l,m),m}function n5(r=Ng){const e=Hh.get(r);if(!e&&r===Ng&&s_())return h_();if(!e)throw $a.create("no-app",{appName:r});return e}function po(r,e,t){let a=Yj[r]??r;t&&(a+=`-${t}`);const l=a.match(/\s|\//),c=e.match(/\s|\//);if(l||c){const d=[`Unable to register library "${a}" with version "${e}":`];l&&d.push(`library name "${a}" contains illegal characters (whitespace or "/")`),l&&c&&d.push("and"),c&&d.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Xr.warn(d.join(" "));return}$h(new lu(`${a}-version`,()=>({library:a,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s5="firebase-heartbeat-database",r5=1,ou="firebase-heartbeat-store";let sg=null;function f_(){return sg||(sg=xj(s5,r5,{upgrade:(r,e)=>{switch(e){case 0:try{r.createObjectStore(ou)}catch(t){console.warn(t)}}}}).catch(r=>{throw $a.create("idb-open",{originalErrorMessage:r.message})})),sg}async function a5(r){try{const t=(await f_()).transaction(ou),a=await t.objectStore(ou).get(m_(r));return await t.done,a}catch(e){if(e instanceof Ro)Xr.warn(e.message);else{const t=$a.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Xr.warn(t.message)}}}async function t1(r,e){try{const a=(await f_()).transaction(ou,"readwrite");await a.objectStore(ou).put(e,m_(r)),await a.done}catch(t){if(t instanceof Ro)Xr.warn(t.message);else{const a=$a.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});Xr.warn(a.message)}}}function m_(r){return`${r.name}!${r.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i5=1024,l5=30;class o5{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new u5(t),this._heartbeatsCachePromise=this._storage.read().then(a=>(this._heartbeatsCache=a,a))}async triggerHeartbeat(){var e,t;try{const l=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),c=n1();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===c||this._heartbeatsCache.heartbeats.some(d=>d.date===c))return;if(this._heartbeatsCache.heartbeats.push({date:c,agent:l}),this._heartbeatsCache.heartbeats.length>l5){const d=d5(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(d,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(a){Xr.warn(a)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=n1(),{heartbeatsToSend:a,unsentEntries:l}=c5(this._heartbeatsCache.heartbeats),c=Bh(JSON.stringify({version:2,heartbeats:a}));return this._heartbeatsCache.lastSentHeartbeatDate=t,l.length>0?(this._heartbeatsCache.heartbeats=l,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),c}catch(t){return Xr.warn(t),""}}}function n1(){return new Date().toISOString().substring(0,10)}function c5(r,e=i5){const t=[];let a=r.slice();for(const l of r){const c=t.find(d=>d.agent===l.agent);if(c){if(c.dates.push(l.date),s1(t)>e){c.dates.pop();break}}else if(t.push({agent:l.agent,dates:[l.date]}),s1(t)>e){t.pop();break}a=a.slice(1)}return{heartbeatsToSend:t,unsentEntries:a}}class u5{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return l_()?ZT().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await a5(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const a=await this.read();return t1(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??a.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const a=await this.read();return t1(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??a.lastSentHeartbeatDate,heartbeats:[...a.heartbeats,...e.heartbeats]})}else return}}function s1(r){return Bh(JSON.stringify({version:2,heartbeats:r})).length}function d5(r){if(r.length===0)return-1;let e=0,t=r[0].date;for(let a=1;a<r.length;a++)r[a].date<t&&(t=r[a].date,e=a);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function h5(r){$h(new lu("platform-logger",e=>new vj(e),"PRIVATE")),$h(new lu("heartbeat",e=>new o5(e),"PRIVATE")),po(_g,Wv,r),po(_g,Wv,"esm2020"),po("fire-js","")}h5("");var r1=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Ga,p_;(function(){var r;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(E,T){function k(){}k.prototype=T.prototype,E.F=T.prototype,E.prototype=new k,E.prototype.constructor=E,E.D=function(R,D,q){for(var V=Array(arguments.length-2),de=2;de<arguments.length;de++)V[de-2]=arguments[de];return T.prototype[D].apply(R,V)}}function t(){this.blockSize=-1}function a(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(a,t),a.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function l(E,T,k){k||(k=0);const R=Array(16);if(typeof T=="string")for(var D=0;D<16;++D)R[D]=T.charCodeAt(k++)|T.charCodeAt(k++)<<8|T.charCodeAt(k++)<<16|T.charCodeAt(k++)<<24;else for(D=0;D<16;++D)R[D]=T[k++]|T[k++]<<8|T[k++]<<16|T[k++]<<24;T=E.g[0],k=E.g[1],D=E.g[2];let q=E.g[3],V;V=T+(q^k&(D^q))+R[0]+3614090360&4294967295,T=k+(V<<7&4294967295|V>>>25),V=q+(D^T&(k^D))+R[1]+3905402710&4294967295,q=T+(V<<12&4294967295|V>>>20),V=D+(k^q&(T^k))+R[2]+606105819&4294967295,D=q+(V<<17&4294967295|V>>>15),V=k+(T^D&(q^T))+R[3]+3250441966&4294967295,k=D+(V<<22&4294967295|V>>>10),V=T+(q^k&(D^q))+R[4]+4118548399&4294967295,T=k+(V<<7&4294967295|V>>>25),V=q+(D^T&(k^D))+R[5]+1200080426&4294967295,q=T+(V<<12&4294967295|V>>>20),V=D+(k^q&(T^k))+R[6]+2821735955&4294967295,D=q+(V<<17&4294967295|V>>>15),V=k+(T^D&(q^T))+R[7]+4249261313&4294967295,k=D+(V<<22&4294967295|V>>>10),V=T+(q^k&(D^q))+R[8]+1770035416&4294967295,T=k+(V<<7&4294967295|V>>>25),V=q+(D^T&(k^D))+R[9]+2336552879&4294967295,q=T+(V<<12&4294967295|V>>>20),V=D+(k^q&(T^k))+R[10]+4294925233&4294967295,D=q+(V<<17&4294967295|V>>>15),V=k+(T^D&(q^T))+R[11]+2304563134&4294967295,k=D+(V<<22&4294967295|V>>>10),V=T+(q^k&(D^q))+R[12]+1804603682&4294967295,T=k+(V<<7&4294967295|V>>>25),V=q+(D^T&(k^D))+R[13]+4254626195&4294967295,q=T+(V<<12&4294967295|V>>>20),V=D+(k^q&(T^k))+R[14]+2792965006&4294967295,D=q+(V<<17&4294967295|V>>>15),V=k+(T^D&(q^T))+R[15]+1236535329&4294967295,k=D+(V<<22&4294967295|V>>>10),V=T+(D^q&(k^D))+R[1]+4129170786&4294967295,T=k+(V<<5&4294967295|V>>>27),V=q+(k^D&(T^k))+R[6]+3225465664&4294967295,q=T+(V<<9&4294967295|V>>>23),V=D+(T^k&(q^T))+R[11]+643717713&4294967295,D=q+(V<<14&4294967295|V>>>18),V=k+(q^T&(D^q))+R[0]+3921069994&4294967295,k=D+(V<<20&4294967295|V>>>12),V=T+(D^q&(k^D))+R[5]+3593408605&4294967295,T=k+(V<<5&4294967295|V>>>27),V=q+(k^D&(T^k))+R[10]+38016083&4294967295,q=T+(V<<9&4294967295|V>>>23),V=D+(T^k&(q^T))+R[15]+3634488961&4294967295,D=q+(V<<14&4294967295|V>>>18),V=k+(q^T&(D^q))+R[4]+3889429448&4294967295,k=D+(V<<20&4294967295|V>>>12),V=T+(D^q&(k^D))+R[9]+568446438&4294967295,T=k+(V<<5&4294967295|V>>>27),V=q+(k^D&(T^k))+R[14]+3275163606&4294967295,q=T+(V<<9&4294967295|V>>>23),V=D+(T^k&(q^T))+R[3]+4107603335&4294967295,D=q+(V<<14&4294967295|V>>>18),V=k+(q^T&(D^q))+R[8]+1163531501&4294967295,k=D+(V<<20&4294967295|V>>>12),V=T+(D^q&(k^D))+R[13]+2850285829&4294967295,T=k+(V<<5&4294967295|V>>>27),V=q+(k^D&(T^k))+R[2]+4243563512&4294967295,q=T+(V<<9&4294967295|V>>>23),V=D+(T^k&(q^T))+R[7]+1735328473&4294967295,D=q+(V<<14&4294967295|V>>>18),V=k+(q^T&(D^q))+R[12]+2368359562&4294967295,k=D+(V<<20&4294967295|V>>>12),V=T+(k^D^q)+R[5]+4294588738&4294967295,T=k+(V<<4&4294967295|V>>>28),V=q+(T^k^D)+R[8]+2272392833&4294967295,q=T+(V<<11&4294967295|V>>>21),V=D+(q^T^k)+R[11]+1839030562&4294967295,D=q+(V<<16&4294967295|V>>>16),V=k+(D^q^T)+R[14]+4259657740&4294967295,k=D+(V<<23&4294967295|V>>>9),V=T+(k^D^q)+R[1]+2763975236&4294967295,T=k+(V<<4&4294967295|V>>>28),V=q+(T^k^D)+R[4]+1272893353&4294967295,q=T+(V<<11&4294967295|V>>>21),V=D+(q^T^k)+R[7]+4139469664&4294967295,D=q+(V<<16&4294967295|V>>>16),V=k+(D^q^T)+R[10]+3200236656&4294967295,k=D+(V<<23&4294967295|V>>>9),V=T+(k^D^q)+R[13]+681279174&4294967295,T=k+(V<<4&4294967295|V>>>28),V=q+(T^k^D)+R[0]+3936430074&4294967295,q=T+(V<<11&4294967295|V>>>21),V=D+(q^T^k)+R[3]+3572445317&4294967295,D=q+(V<<16&4294967295|V>>>16),V=k+(D^q^T)+R[6]+76029189&4294967295,k=D+(V<<23&4294967295|V>>>9),V=T+(k^D^q)+R[9]+3654602809&4294967295,T=k+(V<<4&4294967295|V>>>28),V=q+(T^k^D)+R[12]+3873151461&4294967295,q=T+(V<<11&4294967295|V>>>21),V=D+(q^T^k)+R[15]+530742520&4294967295,D=q+(V<<16&4294967295|V>>>16),V=k+(D^q^T)+R[2]+3299628645&4294967295,k=D+(V<<23&4294967295|V>>>9),V=T+(D^(k|~q))+R[0]+4096336452&4294967295,T=k+(V<<6&4294967295|V>>>26),V=q+(k^(T|~D))+R[7]+1126891415&4294967295,q=T+(V<<10&4294967295|V>>>22),V=D+(T^(q|~k))+R[14]+2878612391&4294967295,D=q+(V<<15&4294967295|V>>>17),V=k+(q^(D|~T))+R[5]+4237533241&4294967295,k=D+(V<<21&4294967295|V>>>11),V=T+(D^(k|~q))+R[12]+1700485571&4294967295,T=k+(V<<6&4294967295|V>>>26),V=q+(k^(T|~D))+R[3]+2399980690&4294967295,q=T+(V<<10&4294967295|V>>>22),V=D+(T^(q|~k))+R[10]+4293915773&4294967295,D=q+(V<<15&4294967295|V>>>17),V=k+(q^(D|~T))+R[1]+2240044497&4294967295,k=D+(V<<21&4294967295|V>>>11),V=T+(D^(k|~q))+R[8]+1873313359&4294967295,T=k+(V<<6&4294967295|V>>>26),V=q+(k^(T|~D))+R[15]+4264355552&4294967295,q=T+(V<<10&4294967295|V>>>22),V=D+(T^(q|~k))+R[6]+2734768916&4294967295,D=q+(V<<15&4294967295|V>>>17),V=k+(q^(D|~T))+R[13]+1309151649&4294967295,k=D+(V<<21&4294967295|V>>>11),V=T+(D^(k|~q))+R[4]+4149444226&4294967295,T=k+(V<<6&4294967295|V>>>26),V=q+(k^(T|~D))+R[11]+3174756917&4294967295,q=T+(V<<10&4294967295|V>>>22),V=D+(T^(q|~k))+R[2]+718787259&4294967295,D=q+(V<<15&4294967295|V>>>17),V=k+(q^(D|~T))+R[9]+3951481745&4294967295,E.g[0]=E.g[0]+T&4294967295,E.g[1]=E.g[1]+(D+(V<<21&4294967295|V>>>11))&4294967295,E.g[2]=E.g[2]+D&4294967295,E.g[3]=E.g[3]+q&4294967295}a.prototype.v=function(E,T){T===void 0&&(T=E.length);const k=T-this.blockSize,R=this.C;let D=this.h,q=0;for(;q<T;){if(D==0)for(;q<=k;)l(this,E,q),q+=this.blockSize;if(typeof E=="string"){for(;q<T;)if(R[D++]=E.charCodeAt(q++),D==this.blockSize){l(this,R),D=0;break}}else for(;q<T;)if(R[D++]=E[q++],D==this.blockSize){l(this,R),D=0;break}}this.h=D,this.o+=T},a.prototype.A=function(){var E=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);E[0]=128;for(var T=1;T<E.length-8;++T)E[T]=0;T=this.o*8;for(var k=E.length-8;k<E.length;++k)E[k]=T&255,T/=256;for(this.v(E),E=Array(16),T=0,k=0;k<4;++k)for(let R=0;R<32;R+=8)E[T++]=this.g[k]>>>R&255;return E};function c(E,T){var k=m;return Object.prototype.hasOwnProperty.call(k,E)?k[E]:k[E]=T(E)}function d(E,T){this.h=T;const k=[];let R=!0;for(let D=E.length-1;D>=0;D--){const q=E[D]|0;R&&q==T||(k[D]=q,R=!1)}this.g=k}var m={};function p(E){return-128<=E&&E<128?c(E,function(T){return new d([T|0],T<0?-1:0)}):new d([E|0],E<0?-1:0)}function x(E){if(isNaN(E)||!isFinite(E))return b;if(E<0)return P(x(-E));const T=[];let k=1;for(let R=0;E>=k;R++)T[R]=E/k|0,k*=4294967296;return new d(T,0)}function v(E,T){if(E.length==0)throw Error("number format error: empty string");if(T=T||10,T<2||36<T)throw Error("radix out of range: "+T);if(E.charAt(0)=="-")return P(v(E.substring(1),T));if(E.indexOf("-")>=0)throw Error('number format error: interior "-" character');const k=x(Math.pow(T,8));let R=b;for(let q=0;q<E.length;q+=8){var D=Math.min(8,E.length-q);const V=parseInt(E.substring(q,q+D),T);D<8?(D=x(Math.pow(T,D)),R=R.j(D).add(x(V))):(R=R.j(k),R=R.add(x(V)))}return R}var b=p(0),N=p(1),S=p(16777216);r=d.prototype,r.m=function(){if(O(this))return-P(this).m();let E=0,T=1;for(let k=0;k<this.g.length;k++){const R=this.i(k);E+=(R>=0?R:4294967296+R)*T,T*=4294967296}return E},r.toString=function(E){if(E=E||10,E<2||36<E)throw Error("radix out of range: "+E);if(z(this))return"0";if(O(this))return"-"+P(this).toString(E);const T=x(Math.pow(E,6));var k=this;let R="";for(;;){const D=F(k,T).g;k=C(k,D.j(T));let q=((k.g.length>0?k.g[0]:k.h)>>>0).toString(E);if(k=D,z(k))return q+R;for(;q.length<6;)q="0"+q;R=q+R}},r.i=function(E){return E<0?0:E<this.g.length?this.g[E]:this.h};function z(E){if(E.h!=0)return!1;for(let T=0;T<E.g.length;T++)if(E.g[T]!=0)return!1;return!0}function O(E){return E.h==-1}r.l=function(E){return E=C(this,E),O(E)?-1:z(E)?0:1};function P(E){const T=E.g.length,k=[];for(let R=0;R<T;R++)k[R]=~E.g[R];return new d(k,~E.h).add(N)}r.abs=function(){return O(this)?P(this):this},r.add=function(E){const T=Math.max(this.g.length,E.g.length),k=[];let R=0;for(let D=0;D<=T;D++){let q=R+(this.i(D)&65535)+(E.i(D)&65535),V=(q>>>16)+(this.i(D)>>>16)+(E.i(D)>>>16);R=V>>>16,q&=65535,V&=65535,k[D]=V<<16|q}return new d(k,k[k.length-1]&-2147483648?-1:0)};function C(E,T){return E.add(P(T))}r.j=function(E){if(z(this)||z(E))return b;if(O(this))return O(E)?P(this).j(P(E)):P(P(this).j(E));if(O(E))return P(this.j(P(E)));if(this.l(S)<0&&E.l(S)<0)return x(this.m()*E.m());const T=this.g.length+E.g.length,k=[];for(var R=0;R<2*T;R++)k[R]=0;for(R=0;R<this.g.length;R++)for(let D=0;D<E.g.length;D++){const q=this.i(R)>>>16,V=this.i(R)&65535,de=E.i(D)>>>16,xe=E.i(D)&65535;k[2*R+2*D]+=V*xe,L(k,2*R+2*D),k[2*R+2*D+1]+=q*xe,L(k,2*R+2*D+1),k[2*R+2*D+1]+=V*de,L(k,2*R+2*D+1),k[2*R+2*D+2]+=q*de,L(k,2*R+2*D+2)}for(E=0;E<T;E++)k[E]=k[2*E+1]<<16|k[2*E];for(E=T;E<2*T;E++)k[E]=0;return new d(k,0)};function L(E,T){for(;(E[T]&65535)!=E[T];)E[T+1]+=E[T]>>>16,E[T]&=65535,T++}function M(E,T){this.g=E,this.h=T}function F(E,T){if(z(T))throw Error("division by zero");if(z(E))return new M(b,b);if(O(E))return T=F(P(E),T),new M(P(T.g),P(T.h));if(O(T))return T=F(E,P(T)),new M(P(T.g),T.h);if(E.g.length>30){if(O(E)||O(T))throw Error("slowDivide_ only works with positive integers.");for(var k=N,R=T;R.l(E)<=0;)k=Z(k),R=Z(R);var D=te(k,1),q=te(R,1);for(R=te(R,2),k=te(k,2);!z(R);){var V=q.add(R);V.l(E)<=0&&(D=D.add(k),q=V),R=te(R,1),k=te(k,1)}return T=C(E,D.j(T)),new M(D,T)}for(D=b;E.l(T)>=0;){for(k=Math.max(1,Math.floor(E.m()/T.m())),R=Math.ceil(Math.log(k)/Math.LN2),R=R<=48?1:Math.pow(2,R-48),q=x(k),V=q.j(T);O(V)||V.l(E)>0;)k-=R,q=x(k),V=q.j(T);z(q)&&(q=N),D=D.add(q),E=C(E,V)}return new M(D,E)}r.B=function(E){return F(this,E).h},r.and=function(E){const T=Math.max(this.g.length,E.g.length),k=[];for(let R=0;R<T;R++)k[R]=this.i(R)&E.i(R);return new d(k,this.h&E.h)},r.or=function(E){const T=Math.max(this.g.length,E.g.length),k=[];for(let R=0;R<T;R++)k[R]=this.i(R)|E.i(R);return new d(k,this.h|E.h)},r.xor=function(E){const T=Math.max(this.g.length,E.g.length),k=[];for(let R=0;R<T;R++)k[R]=this.i(R)^E.i(R);return new d(k,this.h^E.h)};function Z(E){const T=E.g.length+1,k=[];for(let R=0;R<T;R++)k[R]=E.i(R)<<1|E.i(R-1)>>>31;return new d(k,E.h)}function te(E,T){const k=T>>5;T%=32;const R=E.g.length-k,D=[];for(let q=0;q<R;q++)D[q]=T>0?E.i(q+k)>>>T|E.i(q+k+1)<<32-T:E.i(q+k);return new d(D,E.h)}a.prototype.digest=a.prototype.A,a.prototype.reset=a.prototype.u,a.prototype.update=a.prototype.v,p_=a,d.prototype.add=d.prototype.add,d.prototype.multiply=d.prototype.j,d.prototype.modulo=d.prototype.B,d.prototype.compare=d.prototype.l,d.prototype.toNumber=d.prototype.m,d.prototype.toString=d.prototype.toString,d.prototype.getBits=d.prototype.i,d.fromNumber=x,d.fromString=v,Ga=d}).apply(typeof r1<"u"?r1:typeof self<"u"?self:typeof window<"u"?window:{});var hh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var g_,Hc,x_,jh,Sg,y_,b_,v_;(function(){var r,e=Object.defineProperty;function t(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof hh=="object"&&hh];for(var y=0;y<h.length;++y){var _=h[y];if(_&&_.Math==Math)return _}throw Error("Cannot find global object")}var a=t(this);function l(h,y){if(y)e:{var _=a;h=h.split(".");for(var I=0;I<h.length-1;I++){var X=h[I];if(!(X in _))break e;_=_[X]}h=h[h.length-1],I=_[h],y=y(I),y!=I&&y!=null&&e(_,h,{configurable:!0,writable:!0,value:y})}}l("Symbol.dispose",function(h){return h||Symbol("Symbol.dispose")}),l("Array.prototype.values",function(h){return h||function(){return this[Symbol.iterator]()}}),l("Object.entries",function(h){return h||function(y){var _=[],I;for(I in y)Object.prototype.hasOwnProperty.call(y,I)&&_.push([I,y[I]]);return _}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var c=c||{},d=this||self;function m(h){var y=typeof h;return y=="object"&&h!=null||y=="function"}function p(h,y,_){return h.call.apply(h.bind,arguments)}function x(h,y,_){return x=p,x.apply(null,arguments)}function v(h,y){var _=Array.prototype.slice.call(arguments,1);return function(){var I=_.slice();return I.push.apply(I,arguments),h.apply(this,I)}}function b(h,y){function _(){}_.prototype=y.prototype,h.Z=y.prototype,h.prototype=new _,h.prototype.constructor=h,h.Ob=function(I,X,ne){for(var _e=Array(arguments.length-2),Be=2;Be<arguments.length;Be++)_e[Be-2]=arguments[Be];return y.prototype[X].apply(I,_e)}}var N=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?h=>h&&AsyncContext.Snapshot.wrap(h):h=>h;function S(h){const y=h.length;if(y>0){const _=Array(y);for(let I=0;I<y;I++)_[I]=h[I];return _}return[]}function z(h,y){for(let I=1;I<arguments.length;I++){const X=arguments[I];var _=typeof X;if(_=_!="object"?_:X?Array.isArray(X)?"array":_:"null",_=="array"||_=="object"&&typeof X.length=="number"){_=h.length||0;const ne=X.length||0;h.length=_+ne;for(let _e=0;_e<ne;_e++)h[_+_e]=X[_e]}else h.push(X)}}class O{constructor(y,_){this.i=y,this.j=_,this.h=0,this.g=null}get(){let y;return this.h>0?(this.h--,y=this.g,this.g=y.next,y.next=null):y=this.i(),y}}function P(h){d.setTimeout(()=>{throw h},0)}function C(){var h=E;let y=null;return h.g&&(y=h.g,h.g=h.g.next,h.g||(h.h=null),y.next=null),y}class L{constructor(){this.h=this.g=null}add(y,_){const I=M.get();I.set(y,_),this.h?this.h.next=I:this.g=I,this.h=I}}var M=new O(()=>new F,h=>h.reset());class F{constructor(){this.next=this.g=this.h=null}set(y,_){this.h=y,this.g=_,this.next=null}reset(){this.next=this.g=this.h=null}}let Z,te=!1,E=new L,T=()=>{const h=Promise.resolve(void 0);Z=()=>{h.then(k)}};function k(){for(var h;h=C();){try{h.h.call(h.g)}catch(_){P(_)}var y=M;y.j(h),y.h<100&&(y.h++,h.next=y.g,y.g=h)}te=!1}function R(){this.u=this.u,this.C=this.C}R.prototype.u=!1,R.prototype.dispose=function(){this.u||(this.u=!0,this.N())},R.prototype[Symbol.dispose]=function(){this.dispose()},R.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function D(h,y){this.type=h,this.g=this.target=y,this.defaultPrevented=!1}D.prototype.h=function(){this.defaultPrevented=!0};var q=(function(){if(!d.addEventListener||!Object.defineProperty)return!1;var h=!1,y=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const _=()=>{};d.addEventListener("test",_,y),d.removeEventListener("test",_,y)}catch{}return h})();function V(h){return/^[\s\xa0]*$/.test(h)}function de(h,y){D.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h&&this.init(h,y)}b(de,D),de.prototype.init=function(h,y){const _=this.type=h.type,I=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;this.target=h.target||h.srcElement,this.g=y,y=h.relatedTarget,y||(_=="mouseover"?y=h.fromElement:_=="mouseout"&&(y=h.toElement)),this.relatedTarget=y,I?(this.clientX=I.clientX!==void 0?I.clientX:I.pageX,this.clientY=I.clientY!==void 0?I.clientY:I.pageY,this.screenX=I.screenX||0,this.screenY=I.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=h.pointerType,this.state=h.state,this.i=h,h.defaultPrevented&&de.Z.h.call(this)},de.prototype.h=function(){de.Z.h.call(this);const h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var xe="closure_listenable_"+(Math.random()*1e6|0),K=0;function G(h,y,_,I,X){this.listener=h,this.proxy=null,this.src=y,this.type=_,this.capture=!!I,this.ha=X,this.key=++K,this.da=this.fa=!1}function pe(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function Ee(h,y,_){for(const I in h)y.call(_,h[I],I,h)}function Te(h,y){for(const _ in h)y.call(void 0,h[_],_,h)}function U(h){const y={};for(const _ in h)y[_]=h[_];return y}const $="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ue(h,y){let _,I;for(let X=1;X<arguments.length;X++){I=arguments[X];for(_ in I)h[_]=I[_];for(let ne=0;ne<$.length;ne++)_=$[ne],Object.prototype.hasOwnProperty.call(I,_)&&(h[_]=I[_])}}function fe(h){this.src=h,this.g={},this.h=0}fe.prototype.add=function(h,y,_,I,X){const ne=h.toString();h=this.g[ne],h||(h=this.g[ne]=[],this.h++);const _e=re(h,y,I,X);return _e>-1?(y=h[_e],_||(y.fa=!1)):(y=new G(y,this.src,ne,!!I,X),y.fa=_,h.push(y)),y};function Ne(h,y){const _=y.type;if(_ in h.g){var I=h.g[_],X=Array.prototype.indexOf.call(I,y,void 0),ne;(ne=X>=0)&&Array.prototype.splice.call(I,X,1),ne&&(pe(y),h.g[_].length==0&&(delete h.g[_],h.h--))}}function re(h,y,_,I){for(let X=0;X<h.length;++X){const ne=h[X];if(!ne.da&&ne.listener==y&&ne.capture==!!_&&ne.ha==I)return X}return-1}var Ie="closure_lm_"+(Math.random()*1e6|0),Oe={};function ye(h,y,_,I,X){if(Array.isArray(y)){for(let ne=0;ne<y.length;ne++)ye(h,y[ne],_,I,X);return null}return _=ae(_),h&&h[xe]?h.J(y,_,m(I)?!!I.capture:!1,X):De(h,y,_,!1,I,X)}function De(h,y,_,I,X,ne){if(!y)throw Error("Invalid event type");const _e=m(X)?!!X.capture:!!X;let Be=yn(h);if(Be||(h[Ie]=Be=new fe(h)),_=Be.add(y,_,I,_e,ne),_.proxy)return _;if(I=Dt(),_.proxy=I,I.src=h,I.listener=_,h.addEventListener)q||(X=_e),X===void 0&&(X=!1),h.addEventListener(y.toString(),I,X);else if(h.attachEvent)h.attachEvent(St(y.toString()),I);else if(h.addListener&&h.removeListener)h.addListener(I);else throw Error("addEventListener and attachEvent are unavailable.");return _}function Dt(){function h(_){return y.call(h.src,h.listener,_)}const y=cn;return h}function Rt(h,y,_,I,X){if(Array.isArray(y))for(var ne=0;ne<y.length;ne++)Rt(h,y[ne],_,I,X);else I=m(I)?!!I.capture:!!I,_=ae(_),h&&h[xe]?(h=h.i,ne=String(y).toString(),ne in h.g&&(y=h.g[ne],_=re(y,_,I,X),_>-1&&(pe(y[_]),Array.prototype.splice.call(y,_,1),y.length==0&&(delete h.g[ne],h.h--)))):h&&(h=yn(h))&&(y=h.g[y.toString()],h=-1,y&&(h=re(y,_,I,X)),(_=h>-1?y[h]:null)&&Ut(_))}function Ut(h){if(typeof h!="number"&&h&&!h.da){var y=h.src;if(y&&y[xe])Ne(y.i,h);else{var _=h.type,I=h.proxy;y.removeEventListener?y.removeEventListener(_,I,h.capture):y.detachEvent?y.detachEvent(St(_),I):y.addListener&&y.removeListener&&y.removeListener(I),(_=yn(y))?(Ne(_,h),_.h==0&&(_.src=null,y[Ie]=null)):pe(h)}}}function St(h){return h in Oe?Oe[h]:Oe[h]="on"+h}function cn(h,y){if(h.da)h=!0;else{y=new de(y,this);const _=h.listener,I=h.ha||h.src;h.fa&&Ut(h),h=_.call(I,y)}return h}function yn(h){return h=h[Ie],h instanceof fe?h:null}var be="__closure_events_fn_"+(Math.random()*1e9>>>0);function ae(h){return typeof h=="function"?h:(h[be]||(h[be]=function(y){return h.handleEvent(y)}),h[be])}function he(){R.call(this),this.i=new fe(this),this.M=this,this.G=null}b(he,R),he.prototype[xe]=!0,he.prototype.removeEventListener=function(h,y,_,I){Rt(this,h,y,_,I)};function me(h,y){var _,I=h.G;if(I)for(_=[];I;I=I.G)_.push(I);if(h=h.M,I=y.type||y,typeof y=="string")y=new D(y,h);else if(y instanceof D)y.target=y.target||h;else{var X=y;y=new D(I,h),ue(y,X)}X=!0;let ne,_e;if(_)for(_e=_.length-1;_e>=0;_e--)ne=y.g=_[_e],X=je(ne,I,!0,y)&&X;if(ne=y.g=h,X=je(ne,I,!0,y)&&X,X=je(ne,I,!1,y)&&X,_)for(_e=0;_e<_.length;_e++)ne=y.g=_[_e],X=je(ne,I,!1,y)&&X}he.prototype.N=function(){if(he.Z.N.call(this),this.i){var h=this.i;for(const y in h.g){const _=h.g[y];for(let I=0;I<_.length;I++)pe(_[I]);delete h.g[y],h.h--}}this.G=null},he.prototype.J=function(h,y,_,I){return this.i.add(String(h),y,!1,_,I)},he.prototype.K=function(h,y,_,I){return this.i.add(String(h),y,!0,_,I)};function je(h,y,_,I){if(y=h.i.g[String(y)],!y)return!0;y=y.concat();let X=!0;for(let ne=0;ne<y.length;++ne){const _e=y[ne];if(_e&&!_e.da&&_e.capture==_){const Be=_e.listener,Kt=_e.ha||_e.src;_e.fa&&Ne(h.i,_e),X=Be.call(Kt,I)!==!1&&X}}return X&&!I.defaultPrevented}function Fe(h,y){if(typeof h!="function")if(h&&typeof h.handleEvent=="function")h=x(h.handleEvent,h);else throw Error("Invalid listener argument");return Number(y)>2147483647?-1:d.setTimeout(h,y||0)}function st(h){h.g=Fe(()=>{h.g=null,h.i&&(h.i=!1,st(h))},h.l);const y=h.h;h.h=null,h.m.apply(null,y)}class rt extends R{constructor(y,_){super(),this.m=y,this.l=_,this.h=null,this.i=!1,this.g=null}j(y){this.h=arguments,this.g?this.i=!0:st(this)}N(){super.N(),this.g&&(d.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Qe(h){R.call(this),this.h=h,this.g={}}b(Qe,R);var Bt=[];function bn(h){Ee(h.g,function(y,_){this.g.hasOwnProperty(_)&&Ut(y)},h),h.g={}}Qe.prototype.N=function(){Qe.Z.N.call(this),bn(this)},Qe.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var un=d.JSON.stringify,Bs=d.JSON.parse,kt=class{stringify(h){return d.JSON.stringify(h,void 0)}parse(h){return d.JSON.parse(h,void 0)}};function $e(){}function vs(){}var Un={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function dn(){D.call(this,"d")}b(dn,D);function Bn(){D.call(this,"c")}b(Bn,D);var qt={},ci=null;function ra(){return ci=ci||new he}qt.Ia="serverreachability";function ml(h){D.call(this,qt.Ia,h)}b(ml,D);function ws(h){const y=ra();me(y,new ml(y))}qt.STAT_EVENT="statevent";function Tt(h,y){D.call(this,qt.STAT_EVENT,h),this.stat=y}b(Tt,D);function et(h){const y=ra();me(y,new Tt(y,h))}qt.Ja="timingevent";function Mt(h,y){D.call(this,qt.Ja,h),this.size=y}b(Mt,D);function hn(h,y){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return d.setTimeout(function(){h()},y)}function Vt(){this.g=!0}Vt.prototype.ua=function(){this.g=!1};function qn(h,y,_,I,X,ne){h.info(function(){if(h.g)if(ne){var _e="",Be=ne.split("&");for(let ot=0;ot<Be.length;ot++){var Kt=Be[ot].split("=");if(Kt.length>1){const Ot=Kt[0];Kt=Kt[1];const Ss=Ot.split("_");_e=Ss.length>=2&&Ss[1]=="type"?_e+(Ot+"="+Kt+"&"):_e+(Ot+"=redacted&")}}}else _e=null;else _e=ne;return"XMLHTTP REQ ("+I+") [attempt "+X+"]: "+y+`
`+_+`
`+_e})}function Fn(h,y,_,I,X,ne,_e){h.info(function(){return"XMLHTTP RESP ("+I+") [ attempt "+X+"]: "+y+`
`+_+`
`+ne+" "+_e})}function Tn(h,y,_,I){h.info(function(){return"XMLHTTP TEXT ("+y+"): "+Cr(h,_)+(I?" "+I:"")})}function fn(h,y){h.info(function(){return"TIMEOUT: "+y})}Vt.prototype.info=function(){};function Cr(h,y){if(!h.g)return y;if(!y)return null;try{const ne=JSON.parse(y);if(ne){for(h=0;h<ne.length;h++)if(Array.isArray(ne[h])){var _=ne[h];if(!(_.length<2)){var I=_[1];if(Array.isArray(I)&&!(I.length<1)){var X=I[0];if(X!="noop"&&X!="stop"&&X!="close")for(let _e=1;_e<I.length;_e++)I[_e]=""}}}}return un(ne)}catch{return y}}var ls={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},er={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},tr;function nr(){}b(nr,$e),nr.prototype.g=function(){return new XMLHttpRequest},tr=new nr;function Hn(h){return encodeURIComponent(String(h))}function sr(h){var y=1;h=h.split(":");const _=[];for(;y>0&&h.length;)_.push(h.shift()),y--;return h.length&&_.push(h.join(":")),_}function $n(h,y,_,I){this.j=h,this.i=y,this.l=_,this.S=I||1,this.V=new Qe(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new qs}function qs(){this.i=null,this.g="",this.h=!1}var Zt={},vn={};function rr(h,y,_){h.M=1,h.A=ui(Wt(y)),h.u=_,h.R=!0,pl(h,null)}function pl(h,y){h.F=Date.now(),ar(h),h.B=Wt(h.A);var _=h.B,I=h.S;Array.isArray(I)||(I=[String(I)]),bl(_.i,"t",I),h.C=0,_=h.j.L,h.h=new qs,h.g=ad(h.j,_?y:null,!h.u),h.P>0&&(h.O=new rt(x(h.Y,h,h.g),h.P)),y=h.V,_=h.g,I=h.ba;var X="readystatechange";Array.isArray(X)||(X&&(Bt[0]=X.toString()),X=Bt);for(let ne=0;ne<X.length;ne++){const _e=ye(_,X[ne],I||y.handleEvent,!1,y.h||y);if(!_e)break;y.g[_e.key]=_e}y=h.J?U(h.J):{},h.u?(h.v||(h.v="POST"),y["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.B,h.v,h.u,y)):(h.v="GET",h.g.ea(h.B,h.v,null,y)),ws(),qn(h.i,h.v,h.B,h.l,h.S,h.u)}$n.prototype.ba=function(h){h=h.target;const y=this.O;y&&$s(h)==3?y.j():this.Y(h)},$n.prototype.Y=function(h){try{if(h==this.g)e:{const Be=$s(this.g),Kt=this.g.ya(),ot=this.g.ca();if(!(Be<3)&&(Be!=3||this.g&&(this.h.h||this.g.la()||jn(this.g)))){this.K||Be!=4||Kt==7||(Kt==8||ot<=0?ws(3):ws(2)),ir(this);var y=this.g.ca();this.X=y;var _=em(this);if(this.o=y==200,Fn(this.i,this.v,this.B,this.l,this.S,Be,y),this.o){if(this.U&&!this.L){t:{if(this.g){var I,X=this.g;if((I=X.g?X.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!V(I)){var ne=I;break t}}ne=null}if(h=ne)Tn(this.i,this.l,h,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,lr(this,h);else{this.o=!1,this.m=3,et(12),os(this),_s(this);break e}}if(this.R){h=!0;let Ot;for(;!this.K&&this.C<_.length;)if(Ot=Gu(this,_),Ot==vn){Be==4&&(this.m=4,et(14),h=!1),Tn(this.i,this.l,null,"[Incomplete Response]");break}else if(Ot==Zt){this.m=4,et(15),Tn(this.i,this.l,_,"[Invalid Chunk]"),h=!1;break}else Tn(this.i,this.l,Ot,null),lr(this,Ot);if($u(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Be!=4||_.length!=0||this.h.h||(this.m=1,et(16),h=!1),this.o=this.o&&h,!h)Tn(this.i,this.l,_,"[Invalid Chunked Response]"),os(this),_s(this);else if(_.length>0&&!this.W){this.W=!0;var _e=this.j;_e.g==this&&_e.aa&&!_e.P&&(_e.j.info("Great, no buffering proxy detected. Bytes received: "+_.length),ec(_e),_e.P=!0,et(11))}}else Tn(this.i,this.l,_,null),lr(this,_);Be==4&&os(this),this.o&&!this.K&&(Be==4?td(this.j,this):(this.o=!1,ar(this)))}else Dr(this.g),y==400&&_.indexOf("Unknown SID")>0?(this.m=3,et(12)):(this.m=0,et(13)),os(this),_s(this)}}}catch{}finally{}};function em(h){if(!$u(h))return h.g.la();const y=jn(h.g);if(y==="")return"";let _="";const I=y.length,X=$s(h.g)==4;if(!h.h.i){if(typeof TextDecoder>"u")return os(h),_s(h),"";h.h.i=new d.TextDecoder}for(let ne=0;ne<I;ne++)h.h.h=!0,_+=h.h.i.decode(y[ne],{stream:!(X&&ne==I-1)});return y.length=0,h.h.g+=_,h.C=0,h.h.g}function $u(h){return h.g?h.v=="GET"&&h.M!=2&&h.j.Aa:!1}function Gu(h,y){var _=h.C,I=y.indexOf(`
`,_);return I==-1?vn:(_=Number(y.substring(_,I)),isNaN(_)?Zt:(I+=1,I+_>y.length?vn:(y=y.slice(I,I+_),h.C=I+_,y)))}$n.prototype.cancel=function(){this.K=!0,os(this)};function ar(h){h.T=Date.now()+h.H,gl(h,h.H)}function gl(h,y){if(h.D!=null)throw Error("WatchDog timer not null");h.D=hn(x(h.aa,h),y)}function ir(h){h.D&&(d.clearTimeout(h.D),h.D=null)}$n.prototype.aa=function(){this.D=null;const h=Date.now();h-this.T>=0?(fn(this.i,this.B),this.M!=2&&(ws(),et(17)),os(this),this.m=2,_s(this)):gl(this,this.T-h)};function _s(h){h.j.I==0||h.K||td(h.j,h)}function os(h){ir(h);var y=h.O;y&&typeof y.dispose=="function"&&y.dispose(),h.O=null,bn(h.V),h.g&&(y=h.g,h.g=null,y.abort(),y.dispose())}function lr(h,y){try{var _=h.j;if(_.I!=0&&(_.g==h||cr(_.h,h))){if(!h.L&&cr(_.h,h)&&_.I==3){try{var I=_.Ba.g.parse(y)}catch{I=null}if(Array.isArray(I)&&I.length==3){var X=I;if(X[0]==0){e:if(!_.v){if(_.g)if(_.g.F+3e3<h.F)El(_),ha(_);else break e;xi(_),et(18)}}else _.xa=X[1],0<_.xa-_.K&&X[2]<37500&&_.F&&_.A==0&&!_.C&&(_.C=hn(x(_.Va,_),6e3));or(_.h)<=1&&_.ta&&(_.ta=void 0)}else pr(_,11)}else if((h.L||_.g==h)&&El(_),!V(y))for(X=_.Ba.g.parse(y),y=0;y<X.length;y++){let ot=X[y];const Ot=ot[0];if(!(Ot<=_.K))if(_.K=Ot,ot=ot[1],_.I==2)if(ot[0]=="c"){_.M=ot[1],_.ba=ot[2];const Ss=ot[3];Ss!=null&&(_.ka=Ss,_.j.info("VER="+_.ka));const gr=ot[4];gr!=null&&(_.za=gr,_.j.info("SVER="+_.za));const Gs=ot[5];Gs!=null&&typeof Gs=="number"&&Gs>0&&(I=1.5*Gs,_.O=I,_.j.info("backChannelRequestTimeoutMs_="+I)),I=_;const Qs=h.g;if(Qs){const yi=Qs.g?Qs.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(yi){var ne=I.h;ne.g||yi.indexOf("spdy")==-1&&yi.indexOf("quic")==-1&&yi.indexOf("h2")==-1||(ne.j=ne.l,ne.g=new Set,ne.h&&(qo(ne,ne.h),ne.h=null))}if(I.G){const Sl=Qs.g?Qs.g.getResponseHeader("X-HTTP-Session-Id"):null;Sl&&(I.wa=Sl,mt(I.J,I.G,Sl))}}_.I=3,_.l&&_.l.ra(),_.aa&&(_.T=Date.now()-h.F,_.j.info("Handshake RTT: "+_.T+"ms")),I=_;var _e=h;if(I.na=rd(I,I.L?I.ba:null,I.W),_e.L){Fo(I.h,_e);var Be=_e,Kt=I.O;Kt&&(Be.H=Kt),Be.D&&(ir(Be),ar(Be)),I.g=_e}else Wu(I);_.i.length>0&&mr(_)}else ot[0]!="stop"&&ot[0]!="close"||pr(_,7);else _.I==3&&(ot[0]=="stop"||ot[0]=="close"?ot[0]=="stop"?pr(_,7):Jo(_):ot[0]!="noop"&&_.l&&_.l.qa(ot),_.A=0)}}ws(4)}catch{}}var Jt=class{constructor(h,y){this.g=h,this.map=y}};function Uo(h){this.l=h||10,d.PerformanceNavigationTiming?(h=d.performance.getEntriesByType("navigation"),h=h.length>0&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(d.chrome&&d.chrome.loadTimes&&d.chrome.loadTimes()&&d.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Bo(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function or(h){return h.h?1:h.g?h.g.size:0}function cr(h,y){return h.h?h.h==y:h.g?h.g.has(y):!1}function qo(h,y){h.g?h.g.add(y):h.h=y}function Fo(h,y){h.h&&h.h==y?h.h=null:h.g&&h.g.has(y)&&h.g.delete(y)}Uo.prototype.cancel=function(){if(this.i=Ho(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function Ho(h){if(h.h!=null)return h.i.concat(h.h.G);if(h.g!=null&&h.g.size!==0){let y=h.i;for(const _ of h.g.values())y=y.concat(_.G);return y}return S(h.i)}var Qu=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function xl(h,y){if(h){h=h.split("&");for(let _=0;_<h.length;_++){const I=h[_].indexOf("=");let X,ne=null;I>=0?(X=h[_].substring(0,I),ne=h[_].substring(I+1)):X=h[_],y(X,ne?decodeURIComponent(ne.replace(/\+/g," ")):"")}}}function cs(h){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let y;h instanceof cs?(this.l=h.l,wn(this,h.j),this.o=h.o,this.g=h.g,aa(this,h.u),this.h=h.h,$o(this,Zu(h.i)),this.m=h.m):h&&(y=String(h).match(Qu))?(this.l=!1,wn(this,y[1]||"",!0),this.o=ur(y[2]||""),this.g=ur(y[3]||"",!0),aa(this,y[4]),this.h=ur(y[5]||"",!0),$o(this,y[6]||"",!0),this.m=ur(y[7]||"")):(this.l=!1,this.i=new la(null,this.l))}cs.prototype.toString=function(){const h=[];var y=this.j;y&&h.push(di(y,yl,!0),":");var _=this.g;return(_||y=="file")&&(h.push("//"),(y=this.o)&&h.push(di(y,yl,!0),"@"),h.push(Hn(_).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),_=this.u,_!=null&&h.push(":",String(_))),(_=this.h)&&(this.g&&_.charAt(0)!="/"&&h.push("/"),h.push(di(_,_.charAt(0)=="/"?Go:Ku,!0))),(_=this.i.toString())&&h.push("?",_),(_=this.m)&&h.push("#",di(_,Yu)),h.join("")},cs.prototype.resolve=function(h){const y=Wt(this);let _=!!h.j;_?wn(y,h.j):_=!!h.o,_?y.o=h.o:_=!!h.g,_?y.g=h.g:_=h.u!=null;var I=h.h;if(_)aa(y,h.u);else if(_=!!h.h){if(I.charAt(0)!="/")if(this.g&&!this.h)I="/"+I;else{var X=y.h.lastIndexOf("/");X!=-1&&(I=y.h.slice(0,X+1)+I)}if(X=I,X==".."||X==".")I="";else if(X.indexOf("./")!=-1||X.indexOf("/.")!=-1){I=X.lastIndexOf("/",0)==0,X=X.split("/");const ne=[];for(let _e=0;_e<X.length;){const Be=X[_e++];Be=="."?I&&_e==X.length&&ne.push(""):Be==".."?((ne.length>1||ne.length==1&&ne[0]!="")&&ne.pop(),I&&_e==X.length&&ne.push("")):(ne.push(Be),I=!0)}I=ne.join("/")}else I=X}return _?y.h=I:_=h.i.toString()!=="",_?$o(y,Zu(h.i)):_=!!h.m,_&&(y.m=h.m),y};function Wt(h){return new cs(h)}function wn(h,y,_){h.j=_?ur(y,!0):y,h.j&&(h.j=h.j.replace(/:$/,""))}function aa(h,y){if(y){if(y=Number(y),isNaN(y)||y<0)throw Error("Bad port number "+y);h.u=y}else h.u=null}function $o(h,y,_){y instanceof la?(h.i=y,vl(h.i,h.l)):(_||(y=di(y,ia)),h.i=new la(y,h.l))}function mt(h,y,_){h.i.set(y,_)}function ui(h){return mt(h,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),h}function ur(h,y){return h?y?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function di(h,y,_){return typeof h=="string"?(h=encodeURI(h).replace(y,Zn),_&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function Zn(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var yl=/[#\/\?@]/g,Ku=/[#\?:]/g,Go=/[#\?]/g,ia=/[#\?@]/g,Yu=/#/g;function la(h,y){this.h=this.g=null,this.i=h||null,this.j=!!y}function Jn(h){h.g||(h.g=new Map,h.h=0,h.i&&xl(h.i,function(y,_){h.add(decodeURIComponent(y.replace(/\+/g," ")),_)}))}r=la.prototype,r.add=function(h,y){Jn(this),this.i=null,h=oa(this,h);let _=this.g.get(h);return _||this.g.set(h,_=[]),_.push(y),this.h+=1,this};function Xu(h,y){Jn(h),y=oa(h,y),h.g.has(y)&&(h.i=null,h.h-=h.g.get(y).length,h.g.delete(y))}function Qo(h,y){return Jn(h),y=oa(h,y),h.g.has(y)}r.forEach=function(h,y){Jn(this),this.g.forEach(function(_,I){_.forEach(function(X){h.call(y,X,I,this)},this)},this)};function Ko(h,y){Jn(h);let _=[];if(typeof y=="string")Qo(h,y)&&(_=_.concat(h.g.get(oa(h,y))));else for(h=Array.from(h.g.values()),y=0;y<h.length;y++)_=_.concat(h[y]);return _}r.set=function(h,y){return Jn(this),this.i=null,h=oa(this,h),Qo(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[y]),this.h+=1,this},r.get=function(h,y){return h?(h=Ko(this,h),h.length>0?String(h[0]):y):y};function bl(h,y,_){Xu(h,y),_.length>0&&(h.i=null,h.g.set(oa(h,y),S(_)),h.h+=_.length)}r.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],y=Array.from(this.g.keys());for(let I=0;I<y.length;I++){var _=y[I];const X=Hn(_);_=Ko(this,_);for(let ne=0;ne<_.length;ne++){let _e=X;_[ne]!==""&&(_e+="="+Hn(_[ne])),h.push(_e)}}return this.i=h.join("&")};function Zu(h){const y=new la;return y.i=h.i,h.g&&(y.g=new Map(h.g),y.h=h.h),y}function oa(h,y){return y=String(y),h.j&&(y=y.toLowerCase()),y}function vl(h,y){y&&!h.j&&(Jn(h),h.i=null,h.g.forEach(function(_,I){const X=I.toLowerCase();I!=X&&(Xu(this,I),bl(this,X,_))},h)),h.j=y}function Fs(h,y){const _=new Vt;if(d.Image){const I=new Image;I.onload=v(Ns,_,"TestLoadImage: loaded",!0,y,I),I.onerror=v(Ns,_,"TestLoadImage: error",!1,y,I),I.onabort=v(Ns,_,"TestLoadImage: abort",!1,y,I),I.ontimeout=v(Ns,_,"TestLoadImage: timeout",!1,y,I),d.setTimeout(function(){I.ontimeout&&I.ontimeout()},1e4),I.src=h}else y(!1)}function Yo(h,y){const _=new Vt,I=new AbortController,X=setTimeout(()=>{I.abort(),Ns(_,"TestPingServer: timeout",!1,y)},1e4);fetch(h,{signal:I.signal}).then(ne=>{clearTimeout(X),ne.ok?Ns(_,"TestPingServer: ok",!0,y):Ns(_,"TestPingServer: server error",!1,y)}).catch(()=>{clearTimeout(X),Ns(_,"TestPingServer: error",!1,y)})}function Ns(h,y,_,I,X){try{X&&(X.onload=null,X.onerror=null,X.onabort=null,X.ontimeout=null),I(_)}catch{}}function ca(){this.g=new kt}function dr(h){this.i=h.Sb||null,this.h=h.ab||!1}b(dr,$e),dr.prototype.g=function(){return new hi(this.i,this.h)};function hi(h,y){he.call(this),this.H=h,this.o=y,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}b(hi,he),r=hi.prototype,r.open=function(h,y){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=h,this.D=y,this.readyState=1,Hs(this)},r.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const y={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};h&&(y.body=h),(this.H||d).fetch(new Request(this.D,y)).then(this.Pa.bind(this),this.ga.bind(this))},r.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,ua(this)),this.readyState=0},r.Pa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,Hs(this)),this.g&&(this.readyState=3,Hs(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof d.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;wl(this)}else h.text().then(this.Oa.bind(this),this.ga.bind(this))};function wl(h){h.j.read().then(h.Ma.bind(h)).catch(h.ga.bind(h))}r.Ma=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var y=h.value?h.value:new Uint8Array(0);(y=this.B.decode(y,{stream:!h.done}))&&(this.response=this.responseText+=y)}h.done?ua(this):Hs(this),this.readyState==3&&wl(this)}},r.Oa=function(h){this.g&&(this.response=this.responseText=h,ua(this))},r.Na=function(h){this.g&&(this.response=h,ua(this))},r.ga=function(){this.g&&ua(this)};function ua(h){h.readyState=4,h.l=null,h.j=null,h.B=null,Hs(h)}r.setRequestHeader=function(h,y){this.A.append(h,y)},r.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},r.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],y=this.h.entries();for(var _=y.next();!_.done;)_=_.value,h.push(_[0]+": "+_[1]),_=y.next();return h.join(`\r
`)};function Hs(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(hi.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function Es(h){let y="";return Ee(h,function(_,I){y+=I,y+=":",y+=_,y+=`\r
`}),y}function fi(h,y,_){e:{for(I in _){var I=!1;break e}I=!0}I||(_=Es(_),typeof h=="string"?_!=null&&Hn(_):mt(h,y,_))}function vt(h){he.call(this),this.headers=new Map,this.L=h||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}b(vt,he);var hr=/^https?$/i,Xo=["POST","PUT"];r=vt.prototype,r.Fa=function(h){this.H=h},r.ea=function(h,y,_,I){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);y=y?y.toUpperCase():"GET",this.D=h,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():tr.g(),this.g.onreadystatechange=N(x(this.Ca,this));try{this.B=!0,this.g.open(y,String(h),!0),this.B=!1}catch(ne){mi(this,ne);return}if(h=_||"",_=new Map(this.headers),I)if(Object.getPrototypeOf(I)===Object.prototype)for(var X in I)_.set(X,I[X]);else if(typeof I.keys=="function"&&typeof I.get=="function")for(const ne of I.keys())_.set(ne,I.get(ne));else throw Error("Unknown input type for opt_headers: "+String(I));I=Array.from(_.keys()).find(ne=>ne.toLowerCase()=="content-type"),X=d.FormData&&h instanceof d.FormData,!(Array.prototype.indexOf.call(Xo,y,void 0)>=0)||I||X||_.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[ne,_e]of _)this.g.setRequestHeader(ne,_e);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(h),this.v=!1}catch(ne){mi(this,ne)}};function mi(h,y){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=y,h.o=5,Zo(h),Ir(h)}function Zo(h){h.A||(h.A=!0,me(h,"complete"),me(h,"error"))}r.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=h||7,me(this,"complete"),me(this,"abort"),Ir(this))},r.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ir(this,!0)),vt.Z.N.call(this)},r.Ca=function(){this.u||(this.B||this.v||this.j?pi(this):this.Xa())},r.Xa=function(){pi(this)};function pi(h){if(h.h&&typeof c<"u"){if(h.v&&$s(h)==4)setTimeout(h.Ca.bind(h),0);else if(me(h,"readystatechange"),$s(h)==4){h.h=!1;try{const ne=h.ca();e:switch(ne){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var y=!0;break e;default:y=!1}var _;if(!(_=y)){var I;if(I=ne===0){let _e=String(h.D).match(Qu)[1]||null;!_e&&d.self&&d.self.location&&(_e=d.self.location.protocol.slice(0,-1)),I=!hr.test(_e?_e.toLowerCase():"")}_=I}if(_)me(h,"complete"),me(h,"success");else{h.o=6;try{var X=$s(h)>2?h.g.statusText:""}catch{X=""}h.l=X+" ["+h.ca()+"]",Zo(h)}}finally{Ir(h)}}}}function Ir(h,y){if(h.g){h.m&&(clearTimeout(h.m),h.m=null);const _=h.g;h.g=null,y||me(h,"ready");try{_.onreadystatechange=null}catch{}}}r.isActive=function(){return!!this.g};function $s(h){return h.g?h.g.readyState:0}r.ca=function(){try{return $s(this)>2?this.g.status:-1}catch{return-1}},r.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},r.La=function(h){if(this.g){var y=this.g.responseText;return h&&y.indexOf(h)==0&&(y=y.substring(h.length)),Bs(y)}};function jn(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.F){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function Dr(h){const y={};h=(h.g&&$s(h)>=2&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let I=0;I<h.length;I++){if(V(h[I]))continue;var _=sr(h[I]);const X=_[0];if(_=_[1],typeof _!="string")continue;_=_.trim();const ne=y[X]||[];y[X]=ne,ne.push(_)}Te(y,function(I){return I.join(", ")})}r.ya=function(){return this.o},r.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function fr(h,y,_){return _&&_.internalChannelParams&&_.internalChannelParams[h]||y}function da(h){this.za=0,this.i=[],this.j=new Vt,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=fr("failFast",!1,h),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=fr("baseRetryDelayMs",5e3,h),this.Za=fr("retryDelaySeedMs",1e4,h),this.Ta=fr("forwardChannelMaxRetries",2,h),this.va=fr("forwardChannelRequestTimeoutMs",2e4,h),this.ma=h&&h.xmlHttpFactory||void 0,this.Ua=h&&h.Rb||void 0,this.Aa=h&&h.useFetchStreams||!1,this.O=void 0,this.L=h&&h.supportsCrossDomainXhr||!1,this.M="",this.h=new Uo(h&&h.concurrentRequestLimit),this.Ba=new ca,this.S=h&&h.fastHandshake||!1,this.R=h&&h.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=h&&h.Pb||!1,h&&h.ua&&this.j.ua(),h&&h.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&h&&h.detectBufferingProxy||!1,this.ia=void 0,h&&h.longPollingTimeout&&h.longPollingTimeout>0&&(this.ia=h.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}r=da.prototype,r.ka=8,r.I=1,r.connect=function(h,y,_,I){et(0),this.W=h,this.H=y||{},_&&I!==void 0&&(this.H.OSID=_,this.H.OAID=I),this.F=this.X,this.J=rd(this,null,this.W),mr(this)};function Jo(h){if(_l(h),h.I==3){var y=h.V++,_=Wt(h.J);if(mt(_,"SID",h.M),mt(_,"RID",y),mt(_,"TYPE","terminate"),gi(h,_),y=new $n(h,h.j,y),y.M=2,y.A=ui(Wt(_)),_=!1,d.navigator&&d.navigator.sendBeacon)try{_=d.navigator.sendBeacon(y.A.toString(),"")}catch{}!_&&d.Image&&(new Image().src=y.A,_=!0),_||(y.g=ad(y.j,null),y.g.ea(y.A)),y.F=Date.now(),ar(y)}sd(h)}function ha(h){h.g&&(ec(h),h.g.cancel(),h.g=null)}function _l(h){ha(h),h.v&&(d.clearTimeout(h.v),h.v=null),El(h),h.h.cancel(),h.m&&(typeof h.m=="number"&&d.clearTimeout(h.m),h.m=null)}function mr(h){if(!Bo(h.h)&&!h.m){h.m=!0;var y=h.Ea;Z||T(),te||(Z(),te=!0),E.add(y,h),h.D=0}}function Nl(h,y){return or(h.h)>=h.h.j-(h.m?1:0)?!1:h.m?(h.i=y.G.concat(h.i),!0):h.I==1||h.I==2||h.D>=(h.Sa?0:h.Ta)?!1:(h.m=hn(x(h.Ea,h,y),nd(h,h.D)),h.D++,!0)}r.Ea=function(h){if(this.m)if(this.m=null,this.I==1){if(!h){this.V=Math.floor(Math.random()*1e5),h=this.V++;const X=new $n(this,this.j,h);let ne=this.o;if(this.U&&(ne?(ne=U(ne),ue(ne,this.U)):ne=this.U),this.u!==null||this.R||(X.J=ne,ne=null),this.S)e:{for(var y=0,_=0;_<this.i.length;_++){t:{var I=this.i[_];if("__data__"in I.map&&(I=I.map.__data__,typeof I=="string")){I=I.length;break t}I=void 0}if(I===void 0)break;if(y+=I,y>4096){y=_;break e}if(y===4096||_===this.i.length-1){y=_+1;break e}}y=1e3}else y=1e3;y=Ju(this,X,y),_=Wt(this.J),mt(_,"RID",h),mt(_,"CVER",22),this.G&&mt(_,"X-HTTP-Session-Id",this.G),gi(this,_),ne&&(this.R?y="headers="+Hn(Es(ne))+"&"+y:this.u&&fi(_,this.u,ne)),qo(this.h,X),this.Ra&&mt(_,"TYPE","init"),this.S?(mt(_,"$req",y),mt(_,"SID","null"),X.U=!0,rr(X,_,null)):rr(X,_,y),this.I=2}}else this.I==3&&(h?Wo(this,h):this.i.length==0||Bo(this.h)||Wo(this))};function Wo(h,y){var _;y?_=y.l:_=h.V++;const I=Wt(h.J);mt(I,"SID",h.M),mt(I,"RID",_),mt(I,"AID",h.K),gi(h,I),h.u&&h.o&&fi(I,h.u,h.o),_=new $n(h,h.j,_,h.D+1),h.u===null&&(_.J=h.o),y&&(h.i=y.G.concat(h.i)),y=Ju(h,_,1e3),_.H=Math.round(h.va*.5)+Math.round(h.va*.5*Math.random()),qo(h.h,_),rr(_,I,y)}function gi(h,y){h.H&&Ee(h.H,function(_,I){mt(y,I,_)}),h.l&&Ee({},function(_,I){mt(y,I,_)})}function Ju(h,y,_){_=Math.min(h.i.length,_);const I=h.l?x(h.l.Ka,h.l,h):null;e:{var X=h.i;let Be=-1;for(;;){const Kt=["count="+_];Be==-1?_>0?(Be=X[0].g,Kt.push("ofs="+Be)):Be=0:Kt.push("ofs="+Be);let ot=!0;for(let Ot=0;Ot<_;Ot++){var ne=X[Ot].g;const Ss=X[Ot].map;if(ne-=Be,ne<0)Be=Math.max(0,X[Ot].g-100),ot=!1;else try{ne="req"+ne+"_"||"";try{var _e=Ss instanceof Map?Ss:Object.entries(Ss);for(const[gr,Gs]of _e){let Qs=Gs;m(Gs)&&(Qs=un(Gs)),Kt.push(ne+gr+"="+encodeURIComponent(Qs))}}catch(gr){throw Kt.push(ne+"type="+encodeURIComponent("_badmap")),gr}}catch{I&&I(Ss)}}if(ot){_e=Kt.join("&");break e}}_e=void 0}return h=h.i.splice(0,_),y.G=h,_e}function Wu(h){if(!h.g&&!h.v){h.Y=1;var y=h.Da;Z||T(),te||(Z(),te=!0),E.add(y,h),h.A=0}}function xi(h){return h.g||h.v||h.A>=3?!1:(h.Y++,h.v=hn(x(h.Da,h),nd(h,h.A)),h.A++,!0)}r.Da=function(){if(this.v=null,ed(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var h=4*this.T;this.j.info("BP detection timer enabled: "+h),this.B=hn(x(this.Wa,this),h)}},r.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,et(10),ha(this),ed(this))};function ec(h){h.B!=null&&(d.clearTimeout(h.B),h.B=null)}function ed(h){h.g=new $n(h,h.j,"rpc",h.Y),h.u===null&&(h.g.J=h.o),h.g.P=0;var y=Wt(h.na);mt(y,"RID","rpc"),mt(y,"SID",h.M),mt(y,"AID",h.K),mt(y,"CI",h.F?"0":"1"),!h.F&&h.ia&&mt(y,"TO",h.ia),mt(y,"TYPE","xmlhttp"),gi(h,y),h.u&&h.o&&fi(y,h.u,h.o),h.O&&(h.g.H=h.O);var _=h.g;h=h.ba,_.M=1,_.A=ui(Wt(y)),_.u=null,_.R=!0,pl(_,h)}r.Va=function(){this.C!=null&&(this.C=null,ha(this),xi(this),et(19))};function El(h){h.C!=null&&(d.clearTimeout(h.C),h.C=null)}function td(h,y){var _=null;if(h.g==y){El(h),ec(h),h.g=null;var I=2}else if(cr(h.h,y))_=y.G,Fo(h.h,y),I=1;else return;if(h.I!=0){if(y.o)if(I==1){_=y.u?y.u.length:0,y=Date.now()-y.F;var X=h.D;I=ra(),me(I,new Mt(I,_)),mr(h)}else Wu(h);else if(X=y.m,X==3||X==0&&y.X>0||!(I==1&&Nl(h,y)||I==2&&xi(h)))switch(_&&_.length>0&&(y=h.h,y.i=y.i.concat(_)),X){case 1:pr(h,5);break;case 4:pr(h,10);break;case 3:pr(h,6);break;default:pr(h,2)}}}function nd(h,y){let _=h.Qa+Math.floor(Math.random()*h.Za);return h.isActive()||(_*=2),_*y}function pr(h,y){if(h.j.info("Error code "+y),y==2){var _=x(h.bb,h),I=h.Ua;const X=!I;I=new cs(I||"//www.google.com/images/cleardot.gif"),d.location&&d.location.protocol=="http"||wn(I,"https"),ui(I),X?Fs(I.toString(),_):Yo(I.toString(),_)}else et(2);h.I=0,h.l&&h.l.pa(y),sd(h),_l(h)}r.bb=function(h){h?(this.j.info("Successfully pinged google.com"),et(2)):(this.j.info("Failed to ping google.com"),et(1))};function sd(h){if(h.I=0,h.ja=[],h.l){const y=Ho(h.h);(y.length!=0||h.i.length!=0)&&(z(h.ja,y),z(h.ja,h.i),h.h.i.length=0,S(h.i),h.i.length=0),h.l.oa()}}function rd(h,y,_){var I=_ instanceof cs?Wt(_):new cs(_);if(I.g!="")y&&(I.g=y+"."+I.g),aa(I,I.u);else{var X=d.location;I=X.protocol,y=y?y+"."+X.hostname:X.hostname,X=+X.port;const ne=new cs(null);I&&wn(ne,I),y&&(ne.g=y),X&&aa(ne,X),_&&(ne.h=_),I=ne}return _=h.G,y=h.wa,_&&y&&mt(I,_,y),mt(I,"VER",h.ka),gi(h,I),I}function ad(h,y,_){if(y&&!h.L)throw Error("Can't create secondary domain capable XhrIo object.");return y=h.Aa&&!h.ma?new vt(new dr({ab:_})):new vt(h.ma),y.Fa(h.L),y}r.isActive=function(){return!!this.l&&this.l.isActive(this)};function id(){}r=id.prototype,r.ra=function(){},r.qa=function(){},r.pa=function(){},r.oa=function(){},r.isActive=function(){return!0},r.Ka=function(){};function fa(){}fa.prototype.g=function(h,y){return new Gn(h,y)};function Gn(h,y){he.call(this),this.g=new da(y),this.l=h,this.h=y&&y.messageUrlParams||null,h=y&&y.messageHeaders||null,y&&y.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=y&&y.initMessageHeaders||null,y&&y.messageContentType&&(h?h["X-WebChannel-Content-Type"]=y.messageContentType:h={"X-WebChannel-Content-Type":y.messageContentType}),y&&y.sa&&(h?h["X-WebChannel-Client-Profile"]=y.sa:h={"X-WebChannel-Client-Profile":y.sa}),this.g.U=h,(h=y&&y.Qb)&&!V(h)&&(this.g.u=h),this.A=y&&y.supportsCrossDomainXhr||!1,this.v=y&&y.sendRawJson||!1,(y=y&&y.httpSessionIdParam)&&!V(y)&&(this.g.G=y,h=this.h,h!==null&&y in h&&(h=this.h,y in h&&delete h[y])),this.j=new Rr(this)}b(Gn,he),Gn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Gn.prototype.close=function(){Jo(this.g)},Gn.prototype.o=function(h){var y=this.g;if(typeof h=="string"){var _={};_.__data__=h,h=_}else this.v&&(_={},_.__data__=un(h),h=_);y.i.push(new Jt(y.Ya++,h)),y.I==3&&mr(y)},Gn.prototype.N=function(){this.g.l=null,delete this.j,Jo(this.g),delete this.g,Gn.Z.N.call(this)};function ld(h){dn.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var y=h.__sm__;if(y){e:{for(const _ in y){h=_;break e}h=void 0}(this.i=h)&&(h=this.i,y=y!==null&&h in y?y[h]:void 0),this.data=y}else this.data=h}b(ld,dn);function od(){Bn.call(this),this.status=1}b(od,Bn);function Rr(h){this.g=h}b(Rr,id),Rr.prototype.ra=function(){me(this.g,"a")},Rr.prototype.qa=function(h){me(this.g,new ld(h))},Rr.prototype.pa=function(h){me(this.g,new od)},Rr.prototype.oa=function(){me(this.g,"b")},fa.prototype.createWebChannel=fa.prototype.g,Gn.prototype.send=Gn.prototype.o,Gn.prototype.open=Gn.prototype.m,Gn.prototype.close=Gn.prototype.close,v_=function(){return new fa},b_=function(){return ra()},y_=qt,Sg={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},ls.NO_ERROR=0,ls.TIMEOUT=8,ls.HTTP_ERROR=6,jh=ls,er.COMPLETE="complete",x_=er,vs.EventType=Un,Un.OPEN="a",Un.CLOSE="b",Un.ERROR="c",Un.MESSAGE="d",he.prototype.listen=he.prototype.J,Hc=vs,vt.prototype.listenOnce=vt.prototype.K,vt.prototype.getLastError=vt.prototype.Ha,vt.prototype.getLastErrorCode=vt.prototype.ya,vt.prototype.getStatus=vt.prototype.ca,vt.prototype.getResponseJson=vt.prototype.La,vt.prototype.getResponseText=vt.prototype.la,vt.prototype.send=vt.prototype.ea,vt.prototype.setWithCredentials=vt.prototype.Fa,g_=vt}).apply(typeof hh<"u"?hh:typeof self<"u"?self:typeof window<"u"?window:{});const a1="@firebase/firestore",i1="4.9.3";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Rn=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Rn.UNAUTHENTICATED=new Rn(null),Rn.GOOGLE_CREDENTIALS=new Rn("google-credentials-uid"),Rn.FIRST_PARTY=new Rn("first-party-uid"),Rn.MOCK_USER=new Rn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ko="12.7.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ja=new c_("@firebase/firestore");function co(){return Ja.logLevel}function f5(r){Ja.setLogLevel(r)}function ge(r,...e){if(Ja.logLevel<=nt.DEBUG){const t=e.map(c0);Ja.debug(`Firestore (${ko}): ${r}`,...t)}}function Kn(r,...e){if(Ja.logLevel<=nt.ERROR){const t=e.map(c0);Ja.error(`Firestore (${ko}): ${r}`,...t)}}function Yi(r,...e){if(Ja.logLevel<=nt.WARN){const t=e.map(c0);Ja.warn(`Firestore (${ko}): ${r}`,...t)}}function c0(r){if(typeof r=="string")return r;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(t){return JSON.stringify(t)})(r)}catch{return r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ce(r,e,t){let a="Unexpected state";typeof e=="string"?a=e:t=e,w_(r,a,t)}function w_(r,e,t){let a=`FIRESTORE (${ko}) INTERNAL ASSERTION FAILED: ${e} (ID: ${r.toString(16)})`;if(t!==void 0)try{a+=" CONTEXT: "+JSON.stringify(t)}catch{a+=" CONTEXT: "+t}throw Kn(a),new Error(a)}function ke(r,e,t,a){let l="Unexpected state";typeof t=="string"?l=t:a=t,r||w_(e,l,a)}function ze(r,e){return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ie={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class we extends Ro{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yr{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class m5{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(Rn.UNAUTHENTICATED)))}shutdown(){}}class p5{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class g5{constructor(e){this.t=e,this.currentUser=Rn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){ke(this.o===void 0,42304);let a=this.i;const l=p=>this.i!==a?(a=this.i,t(p)):Promise.resolve();let c=new Yr;this.o=()=>{this.i++,this.currentUser=this.u(),c.resolve(),c=new Yr,e.enqueueRetryable((()=>l(this.currentUser)))};const d=()=>{const p=c;e.enqueueRetryable((async()=>{await p.promise,await l(this.currentUser)}))},m=p=>{ge("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=p,this.o&&(this.auth.addAuthTokenListener(this.o),d())};this.t.onInit((p=>m(p))),setTimeout((()=>{if(!this.auth){const p=this.t.getImmediate({optional:!0});p?m(p):(ge("FirebaseAuthCredentialsProvider","Auth not yet detected"),c.resolve(),c=new Yr)}}),0),d()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((a=>this.i!==e?(ge("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):a?(ke(typeof a.accessToken=="string",31837,{l:a}),new __(a.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return ke(e===null||typeof e=="string",2055,{h:e}),new Rn(e)}}class x5{constructor(e,t,a){this.P=e,this.T=t,this.I=a,this.type="FirstParty",this.user=Rn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class y5{constructor(e,t,a){this.P=e,this.T=t,this.I=a}getToken(){return Promise.resolve(new x5(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(Rn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class l1{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class b5{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Jj(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){ke(this.o===void 0,3512);const a=c=>{c.error!=null&&ge("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${c.error.message}`);const d=c.token!==this.m;return this.m=c.token,ge("FirebaseAppCheckTokenProvider",`Received ${d?"new":"existing"} token.`),d?t(c.token):Promise.resolve()};this.o=c=>{e.enqueueRetryable((()=>a(c)))};const l=c=>{ge("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=c,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((c=>l(c))),setTimeout((()=>{if(!this.appCheck){const c=this.V.getImmediate({optional:!0});c?l(c):ge("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new l1(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(ke(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new l1(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v5(r){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(r);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let a=0;a<r;a++)t[a]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u0{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let a="";for(;a.length<20;){const l=v5(40);for(let c=0;c<l.length;++c)a.length<20&&l[c]<t&&(a+=e.charAt(l[c]%62))}return a}}function Le(r,e){return r<e?-1:r>e?1:0}function Tg(r,e){const t=Math.min(r.length,e.length);for(let a=0;a<t;a++){const l=r.charAt(a),c=e.charAt(a);if(l!==c)return rg(l)===rg(c)?Le(l,c):rg(l)?1:-1}return Le(r.length,e.length)}const w5=55296,_5=57343;function rg(r){const e=r.charCodeAt(0);return e>=w5&&e<=_5}function yo(r,e,t){return r.length===e.length&&r.every(((a,l)=>t(a,e[l])))}function N_(r){return r+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o1="__name__";class _r{constructor(e,t,a){t===void 0?t=0:t>e.length&&Ce(637,{offset:t,range:e.length}),a===void 0?a=e.length-t:a>e.length-t&&Ce(1746,{length:a,range:e.length-t}),this.segments=e,this.offset=t,this.len=a}get length(){return this.len}isEqual(e){return _r.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof _r?e.forEach((a=>{t.push(a)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,a=this.limit();t<a;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const a=Math.min(e.length,t.length);for(let l=0;l<a;l++){const c=_r.compareSegments(e.get(l),t.get(l));if(c!==0)return c}return Le(e.length,t.length)}static compareSegments(e,t){const a=_r.isNumericId(e),l=_r.isNumericId(t);return a&&!l?-1:!a&&l?1:a&&l?_r.extractNumericId(e).compare(_r.extractNumericId(t)):Tg(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Ga.fromString(e.substring(4,e.length-2))}}class dt extends _r{construct(e,t,a){return new dt(e,t,a)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const a of e){if(a.indexOf("//")>=0)throw new we(ie.INVALID_ARGUMENT,`Invalid segment (${a}). Paths must not contain // in them.`);t.push(...a.split("/").filter((l=>l.length>0)))}return new dt(t)}static emptyPath(){return new dt([])}}const N5=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ft extends _r{construct(e,t,a){return new Ft(e,t,a)}static isValidIdentifier(e){return N5.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ft.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===o1}static keyField(){return new Ft([o1])}static fromServerFormat(e){const t=[];let a="",l=0;const c=()=>{if(a.length===0)throw new we(ie.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(a),a=""};let d=!1;for(;l<e.length;){const m=e[l];if(m==="\\"){if(l+1===e.length)throw new we(ie.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const p=e[l+1];if(p!=="\\"&&p!=="."&&p!=="`")throw new we(ie.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);a+=p,l+=2}else m==="`"?(d=!d,l++):m!=="."||d?(a+=m,l++):(c(),l++)}if(c(),d)throw new we(ie.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Ft(t)}static emptyPath(){return new Ft([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Se{constructor(e){this.path=e}static fromPath(e){return new Se(dt.fromString(e))}static fromName(e){return new Se(dt.fromString(e).popFirst(5))}static empty(){return new Se(dt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&dt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return dt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Se(new dt(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function E_(r,e,t){if(!t)throw new we(ie.INVALID_ARGUMENT,`Function ${r}() cannot be called with an empty ${e}.`)}function E5(r,e,t,a){if(e===!0&&a===!0)throw new we(ie.INVALID_ARGUMENT,`${r} and ${t} cannot be used together.`)}function c1(r){if(!Se.isDocumentKey(r))throw new we(ie.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${r} has ${r.length}.`)}function u1(r){if(Se.isDocumentKey(r))throw new we(ie.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${r} has ${r.length}.`)}function S_(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}function vf(r){if(r===void 0)return"undefined";if(r===null)return"null";if(typeof r=="string")return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if(typeof r=="number"||typeof r=="boolean")return""+r;if(typeof r=="object"){if(r instanceof Array)return"an array";{const e=(function(a){return a.constructor?a.constructor.name:null})(r);return e?`a custom ${e} object`:"an object"}}return typeof r=="function"?"a function":Ce(12329,{type:typeof r})}function Ps(r,e){if("_delegate"in r&&(r=r._delegate),!(r instanceof e)){if(e.name===r.constructor.name)throw new we(ie.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=vf(r);throw new we(ie.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return r}function S5(r,e){if(e<=0)throw new we(ie.INVALID_ARGUMENT,`Function ${r}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function an(r,e){const t={typeString:r};return e&&(t.value=e),t}function Au(r,e){if(!S_(r))throw new we(ie.INVALID_ARGUMENT,"JSON must be an object");let t;for(const a in e)if(e[a]){const l=e[a].typeString,c="value"in e[a]?{value:e[a].value}:void 0;if(!(a in r)){t=`JSON missing required field: '${a}'`;break}const d=r[a];if(l&&typeof d!==l){t=`JSON field '${a}' must be a ${l}.`;break}if(c!==void 0&&d!==c.value){t=`Expected '${a}' field to equal '${c.value}'`;break}}if(t)throw new we(ie.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d1=-62135596800,h1=1e6;class xt{static now(){return xt.fromMillis(Date.now())}static fromDate(e){return xt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),a=Math.floor((e-1e3*t)*h1);return new xt(t,a)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new we(ie.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new we(ie.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<d1)throw new we(ie.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new we(ie.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/h1}_compareTo(e){return this.seconds===e.seconds?Le(this.nanoseconds,e.nanoseconds):Le(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:xt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Au(e,xt._jsonSchema))return new xt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-d1;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}xt._jsonSchemaVersion="firestore/timestamp/1.0",xt._jsonSchema={type:an("string",xt._jsonSchemaVersion),seconds:an("number"),nanoseconds:an("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ve{static fromTimestamp(e){return new Ve(e)}static min(){return new Ve(new xt(0,0))}static max(){return new Ve(new xt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cu=-1;class Gh{constructor(e,t,a,l){this.indexId=e,this.collectionGroup=t,this.fields=a,this.indexState=l}}function jg(r){return r.fields.find((e=>e.kind===2))}function Oi(r){return r.fields.filter((e=>e.kind!==2))}Gh.UNKNOWN_ID=-1;class Ah{constructor(e,t){this.fieldPath=e,this.kind=t}}class uu{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new uu(0,bs.min())}}function T5(r,e){const t=r.toTimestamp().seconds,a=r.toTimestamp().nanoseconds+1,l=Ve.fromTimestamp(a===1e9?new xt(t+1,0):new xt(t,a));return new bs(l,Se.empty(),e)}function T_(r){return new bs(r.readTime,r.key,cu)}class bs{constructor(e,t,a){this.readTime=e,this.documentKey=t,this.largestBatchId=a}static min(){return new bs(Ve.min(),Se.empty(),cu)}static max(){return new bs(Ve.max(),Se.empty(),cu)}}function d0(r,e){let t=r.readTime.compareTo(e.readTime);return t!==0?t:(t=Se.comparator(r.documentKey,e.documentKey),t!==0?t:Le(r.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j_="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class A_{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function il(r){if(r.code!==ie.FAILED_PRECONDITION||r.message!==j_)throw r;ge("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Ce(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new Y(((a,l)=>{this.nextCallback=c=>{this.wrapSuccess(e,c).next(a,l)},this.catchCallback=c=>{this.wrapFailure(t,c).next(a,l)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof Y?t:Y.resolve(t)}catch(t){return Y.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):Y.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):Y.reject(t)}static resolve(e){return new Y(((t,a)=>{t(e)}))}static reject(e){return new Y(((t,a)=>{a(e)}))}static waitFor(e){return new Y(((t,a)=>{let l=0,c=0,d=!1;e.forEach((m=>{++l,m.next((()=>{++c,d&&c===l&&t()}),(p=>a(p)))})),d=!0,c===l&&t()}))}static or(e){let t=Y.resolve(!1);for(const a of e)t=t.next((l=>l?Y.resolve(l):a()));return t}static forEach(e,t){const a=[];return e.forEach(((l,c)=>{a.push(t.call(this,l,c))})),this.waitFor(a)}static mapArray(e,t){return new Y(((a,l)=>{const c=e.length,d=new Array(c);let m=0;for(let p=0;p<c;p++){const x=p;t(e[x]).next((v=>{d[x]=v,++m,m===c&&a(d)}),(v=>l(v)))}}))}static doWhile(e,t){return new Y(((a,l)=>{const c=()=>{e()===!0?t().next((()=>{c()}),l):a()};c()}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xs="SimpleDb";class wf{static open(e,t,a,l){try{return new wf(t,e.transaction(l,a))}catch(c){throw new Xc(t,c)}}constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.S=new Yr,this.transaction.oncomplete=()=>{this.S.resolve()},this.transaction.onabort=()=>{t.error?this.S.reject(new Xc(e,t.error)):this.S.resolve()},this.transaction.onerror=a=>{const l=h0(a.target.error);this.S.reject(new Xc(e,l))}}get D(){return this.S.promise}abort(e){e&&this.S.reject(e),this.aborted||(ge(xs,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}C(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const t=this.transaction.objectStore(e);return new A5(t)}}class Qa{static delete(e){return ge(xs,"Removing database:",e),Li(n_().indexedDB.deleteDatabase(e)).toPromise()}static v(){if(!l_())return!1;if(Qa.F())return!0;const e=qh(),t=Qa.M(e),a=0<t&&t<10,l=C_(e),c=0<l&&l<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||a||c)}static F(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)==null?void 0:e.__PRIVATE_USE_MOCK_PERSISTENCE)==="YES"}static O(e,t){return e.store(t)}static M(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),a=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(a)}constructor(e,t,a){this.name=e,this.version=t,this.N=a,this.B=null,Qa.M(qh())===12.2&&Kn("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}async L(e){return this.db||(ge(xs,"Opening database:",this.name),this.db=await new Promise(((t,a)=>{const l=indexedDB.open(this.name,this.version);l.onsuccess=c=>{const d=c.target.result;t(d)},l.onblocked=()=>{a(new Xc(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},l.onerror=c=>{const d=c.target.error;d.name==="VersionError"?a(new we(ie.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):d.name==="InvalidStateError"?a(new we(ie.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+d)):a(new Xc(e,d))},l.onupgradeneeded=c=>{ge(xs,'Database "'+this.name+'" requires upgrade from version:',c.oldVersion);const d=c.target.result;this.N.k(d,l.transaction,c.oldVersion,this.version).next((()=>{ge(xs,"Database upgrade to version "+this.version+" complete")}))}}))),this.q&&(this.db.onversionchange=t=>this.q(t)),this.db}$(e){this.q=e,this.db&&(this.db.onversionchange=t=>e(t))}async runTransaction(e,t,a,l){const c=t==="readonly";let d=0;for(;;){++d;try{this.db=await this.L(e);const m=wf.open(this.db,e,c?"readonly":"readwrite",a),p=l(m).next((x=>(m.C(),x))).catch((x=>(m.abort(x),Y.reject(x)))).toPromise();return p.catch((()=>{})),await m.D,p}catch(m){const p=m,x=p.name!=="FirebaseError"&&d<3;if(ge(xs,"Transaction failed with error:",p.message,"Retrying:",x),this.close(),!x)return Promise.reject(p)}}}close(){this.db&&this.db.close(),this.db=void 0}}function C_(r){const e=r.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}class j5{constructor(e){this.U=e,this.K=!1,this.W=null}get isDone(){return this.K}get G(){return this.W}set cursor(e){this.U=e}done(){this.K=!0}j(e){this.W=e}delete(){return Li(this.U.delete())}}class Xc extends we{constructor(e,t){super(ie.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function ii(r){return r.name==="IndexedDbTransactionError"}class A5{constructor(e){this.store=e}put(e,t){let a;return t!==void 0?(ge(xs,"PUT",this.store.name,e,t),a=this.store.put(t,e)):(ge(xs,"PUT",this.store.name,"<auto-key>",e),a=this.store.put(e)),Li(a)}add(e){return ge(xs,"ADD",this.store.name,e,e),Li(this.store.add(e))}get(e){return Li(this.store.get(e)).next((t=>(t===void 0&&(t=null),ge(xs,"GET",this.store.name,e,t),t)))}delete(e){return ge(xs,"DELETE",this.store.name,e),Li(this.store.delete(e))}count(){return ge(xs,"COUNT",this.store.name),Li(this.store.count())}J(e,t){const a=this.options(e,t),l=a.index?this.store.index(a.index):this.store;if(typeof l.getAll=="function"){const c=l.getAll(a.range);return new Y(((d,m)=>{c.onerror=p=>{m(p.target.error)},c.onsuccess=p=>{d(p.target.result)}}))}{const c=this.cursor(a),d=[];return this.H(c,((m,p)=>{d.push(p)})).next((()=>d))}}Y(e,t){const a=this.store.getAll(e,t===null?void 0:t);return new Y(((l,c)=>{a.onerror=d=>{c(d.target.error)},a.onsuccess=d=>{l(d.target.result)}}))}Z(e,t){ge(xs,"DELETE ALL",this.store.name);const a=this.options(e,t);a.X=!1;const l=this.cursor(a);return this.H(l,((c,d,m)=>m.delete()))}ee(e,t){let a;t?a=e:(a={},t=e);const l=this.cursor(a);return this.H(l,t)}te(e){const t=this.cursor({});return new Y(((a,l)=>{t.onerror=c=>{const d=h0(c.target.error);l(d)},t.onsuccess=c=>{const d=c.target.result;d?e(d.primaryKey,d.value).next((m=>{m?d.continue():a()})):a()}}))}H(e,t){const a=[];return new Y(((l,c)=>{e.onerror=d=>{c(d.target.error)},e.onsuccess=d=>{const m=d.target.result;if(!m)return void l();const p=new j5(m),x=t(m.primaryKey,m.value,p);if(x instanceof Y){const v=x.catch((b=>(p.done(),Y.reject(b))));a.push(v)}p.isDone?l():p.G===null?m.continue():m.continue(p.G)}})).next((()=>Y.waitFor(a)))}options(e,t){let a;return e!==void 0&&(typeof e=="string"?a=e:t=e),{index:a,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const a=this.store.index(e.index);return e.X?a.openKeyCursor(e.range,t):a.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Li(r){return new Y(((e,t)=>{r.onsuccess=a=>{const l=a.target.result;e(l)},r.onerror=a=>{const l=h0(a.target.error);t(l)}}))}let f1=!1;function h0(r){const e=Qa.M(qh());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(r.message.indexOf(t)>=0){const a=new we("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return f1||(f1=!0,setTimeout((()=>{throw a}),0)),a}}return r}const Zc="IndexBackfiller";class C5{constructor(e,t){this.asyncQueue=e,this.ne=t,this.task=null}start(){this.re(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}re(e){ge(Zc,`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(async()=>{this.task=null;try{const t=await this.ne.ie();ge(Zc,`Documents written: ${t}`)}catch(t){ii(t)?ge(Zc,"Ignoring IndexedDB error during index backfill: ",t):await il(t)}await this.re(6e4)}))}}class I5{constructor(e,t){this.localStore=e,this.persistence=t}async ie(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(t=>this.se(t,e)))}se(e,t){const a=new Set;let l=t,c=!0;return Y.doWhile((()=>c===!0&&l>0),(()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((d=>{if(d!==null&&!a.has(d))return ge(Zc,`Processing collection: ${d}`),this.oe(e,d,l).next((m=>{l-=m,a.add(d)}));c=!1})))).next((()=>t-l))}oe(e,t,a){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next((l=>this.localStore.localDocuments.getNextDocuments(e,t,l,a).next((c=>{const d=c.changes;return this.localStore.indexManager.updateIndexEntries(e,d).next((()=>this._e(l,c))).next((m=>(ge(Zc,`Updating offset: ${m}`),this.localStore.indexManager.updateCollectionGroup(e,t,m)))).next((()=>d.size))}))))}_e(e,t){let a=e;return t.changes.forEach(((l,c)=>{const d=T_(c);d0(d,a)>0&&(a=d)})),new bs(a.readTime,a.documentKey,Math.max(t.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Os{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=a=>this.ae(a),this.ue=a=>t.writeSequenceNumber(a))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Os.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hi=-1;function _f(r){return r==null}function du(r){return r===0&&1/r==-1/0}function D5(r){return typeof r=="number"&&Number.isInteger(r)&&!du(r)&&r<=Number.MAX_SAFE_INTEGER&&r>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qh="";function zn(r){let e="";for(let t=0;t<r.length;t++)e.length>0&&(e=m1(e)),e=R5(r.get(t),e);return m1(e)}function R5(r,e){let t=e;const a=r.length;for(let l=0;l<a;l++){const c=r.charAt(l);switch(c){case"\0":t+="";break;case Qh:t+="";break;default:t+=c}}return t}function m1(r){return r+Qh+""}function Er(r){const e=r.length;if(ke(e>=2,64408,{path:r}),e===2)return ke(r.charAt(0)===Qh&&r.charAt(1)==="",56145,{path:r}),dt.emptyPath();const t=e-2,a=[];let l="";for(let c=0;c<e;){const d=r.indexOf(Qh,c);switch((d<0||d>t)&&Ce(50515,{path:r}),r.charAt(d+1)){case"":const m=r.substring(c,d);let p;l.length===0?p=m:(l+=m,p=l,l=""),a.push(p);break;case"":l+=r.substring(c,d),l+="\0";break;case"":l+=r.substring(c,d+1);break;default:Ce(61167,{path:r})}c=d+2}return new dt(a)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pi="remoteDocuments",Cu="owner",to="owner",hu="mutationQueues",k5="userId",Zs="mutations",p1="batchId",Fi="userMutationsIndex",g1=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ch(r,e){return[r,zn(e)]}function I_(r,e,t){return[r,zn(e),t]}const M5={},bo="documentMutations",Kh="remoteDocumentsV14",V5=["prefixPath","collectionGroup","readTime","documentId"],Ih="documentKeyIndex",O5=["prefixPath","collectionGroup","documentId"],D_="collectionGroupIndex",P5=["collectionGroup","readTime","prefixPath","documentId"],fu="remoteDocumentGlobal",Ag="remoteDocumentGlobalKey",vo="targets",R_="queryTargetsIndex",L5=["canonicalId","targetId"],wo="targetDocuments",z5=["targetId","path"],f0="documentTargetsIndex",U5=["path","targetId"],Yh="targetGlobalKey",$i="targetGlobal",mu="collectionParents",B5=["collectionId","parent"],_o="clientMetadata",q5="clientId",Nf="bundles",F5="bundleId",Ef="namedQueries",H5="name",m0="indexConfiguration",$5="indexId",Cg="collectionGroupIndex",G5="collectionGroup",Jc="indexState",Q5=["indexId","uid"],k_="sequenceNumberIndex",K5=["uid","sequenceNumber"],Wc="indexEntries",Y5=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],M_="documentKeyIndex",X5=["indexId","uid","orderedDocumentKey"],Sf="documentOverlays",Z5=["userId","collectionPath","documentId"],Ig="collectionPathOverlayIndex",J5=["userId","collectionPath","largestBatchId"],V_="collectionGroupOverlayIndex",W5=["userId","collectionGroup","largestBatchId"],p0="globals",eA="name",O_=[hu,Zs,bo,Pi,vo,Cu,$i,wo,_o,fu,mu,Nf,Ef],tA=[...O_,Sf],P_=[hu,Zs,bo,Kh,vo,Cu,$i,wo,_o,fu,mu,Nf,Ef,Sf],L_=P_,g0=[...L_,m0,Jc,Wc],nA=g0,z_=[...g0,p0],sA=z_;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dg extends A_{constructor(e,t){super(),this.le=e,this.currentSequenceNumber=t}}function xn(r,e){const t=ze(r);return Qa.O(t.le,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x1(r){let e=0;for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e++;return e}function li(r,e){for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e(t,r[t])}function U_(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zt{constructor(e,t){this.comparator=e,this.root=t||kn.EMPTY}insert(e,t){return new zt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,kn.BLACK,null,null))}remove(e){return new zt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,kn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const a=this.comparator(e,t.key);if(a===0)return t.value;a<0?t=t.left:a>0&&(t=t.right)}return null}indexOf(e){let t=0,a=this.root;for(;!a.isEmpty();){const l=this.comparator(e,a.key);if(l===0)return t+a.left.size;l<0?a=a.left:(t+=a.left.size+1,a=a.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,a)=>(e(t,a),!1)))}toString(){const e=[];return this.inorderTraversal(((t,a)=>(e.push(`${t}:${a}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new fh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new fh(this.root,e,this.comparator,!1)}getReverseIterator(){return new fh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new fh(this.root,e,this.comparator,!0)}}class fh{constructor(e,t,a,l){this.isReverse=l,this.nodeStack=[];let c=1;for(;!e.isEmpty();)if(c=t?a(e.key,t):1,t&&l&&(c*=-1),c<0)e=this.isReverse?e.left:e.right;else{if(c===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class kn{constructor(e,t,a,l,c){this.key=e,this.value=t,this.color=a??kn.RED,this.left=l??kn.EMPTY,this.right=c??kn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,a,l,c){return new kn(e??this.key,t??this.value,a??this.color,l??this.left,c??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,a){let l=this;const c=a(e,l.key);return l=c<0?l.copy(null,null,null,l.left.insert(e,t,a),null):c===0?l.copy(null,t,null,null,null):l.copy(null,null,null,null,l.right.insert(e,t,a)),l.fixUp()}removeMin(){if(this.left.isEmpty())return kn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let a,l=this;if(t(e,l.key)<0)l.left.isEmpty()||l.left.isRed()||l.left.left.isRed()||(l=l.moveRedLeft()),l=l.copy(null,null,null,l.left.remove(e,t),null);else{if(l.left.isRed()&&(l=l.rotateRight()),l.right.isEmpty()||l.right.isRed()||l.right.left.isRed()||(l=l.moveRedRight()),t(e,l.key)===0){if(l.right.isEmpty())return kn.EMPTY;a=l.right.min(),l=l.copy(a.key,a.value,null,null,l.right.removeMin())}l=l.copy(null,null,null,null,l.right.remove(e,t))}return l.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,kn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,kn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ce(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ce(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Ce(27949);return e+(this.isRed()?0:1)}}kn.EMPTY=null,kn.RED=!0,kn.BLACK=!1;kn.EMPTY=new class{constructor(){this.size=0}get key(){throw Ce(57766)}get value(){throw Ce(16141)}get color(){throw Ce(16727)}get left(){throw Ce(29726)}get right(){throw Ce(36894)}copy(e,t,a,l,c){return this}insert(e,t,a){return new kn(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bt{constructor(e){this.comparator=e,this.data=new zt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,a)=>(e(t),!1)))}forEachInRange(e,t){const a=this.data.getIteratorFrom(e[0]);for(;a.hasNext();){const l=a.getNext();if(this.comparator(l.key,e[1])>=0)return;t(l.key)}}forEachWhile(e,t){let a;for(a=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();a.hasNext();)if(!e(a.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new y1(this.data.getIterator())}getIteratorFrom(e){return new y1(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((a=>{t=t.add(a)})),t}isEqual(e){if(!(e instanceof bt)||this.size!==e.size)return!1;const t=this.data.getIterator(),a=e.data.getIterator();for(;t.hasNext();){const l=t.getNext().key,c=a.getNext().key;if(this.comparator(l,c)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new bt(this.comparator);return t.data=e,t}}class y1{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function no(r){return r.hasNext()?r.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rs{constructor(e){this.fields=e,e.sort(Ft.comparator)}static empty(){return new rs([])}unionWith(e){let t=new bt(Ft.comparator);for(const a of this.fields)t=t.add(a);for(const a of e)t=t.add(a);return new rs(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return yo(this.fields,e.fields,((t,a)=>t.isEqual(a)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B_ extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class on{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(l){try{return atob(l)}catch(c){throw typeof DOMException<"u"&&c instanceof DOMException?new B_("Invalid base64 string: "+c):c}})(e);return new on(t)}static fromUint8Array(e){const t=(function(l){let c="";for(let d=0;d<l.length;++d)c+=String.fromCharCode(l[d]);return c})(e);return new on(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const a=new Uint8Array(t.length);for(let l=0;l<t.length;l++)a[l]=t.charCodeAt(l);return a})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Le(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}on.EMPTY_BYTE_STRING=new on("");const rA=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Zr(r){if(ke(!!r,39018),typeof r=="string"){let e=0;const t=rA.exec(r);if(ke(!!t,46558,{timestamp:r}),t[1]){let l=t[1];l=(l+"000000000").substr(0,9),e=Number(l)}const a=new Date(r);return{seconds:Math.floor(a.getTime()/1e3),nanos:e}}return{seconds:Lt(r.seconds),nanos:Lt(r.nanos)}}function Lt(r){return typeof r=="number"?r:typeof r=="string"?Number(r):0}function Jr(r){return typeof r=="string"?on.fromBase64String(r):on.fromUint8Array(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q_="server_timestamp",F_="__type__",H_="__previous_value__",$_="__local_write_time__";function x0(r){var t,a;return((a=(((t=r==null?void 0:r.mapValue)==null?void 0:t.fields)||{})[F_])==null?void 0:a.stringValue)===q_}function Tf(r){const e=r.mapValue.fields[H_];return x0(e)?Tf(e):e}function pu(r){const e=Zr(r.mapValue.fields[$_].timestampValue);return new xt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aA{constructor(e,t,a,l,c,d,m,p,x,v){this.databaseId=e,this.appId=t,this.persistenceKey=a,this.host=l,this.ssl=c,this.forceLongPolling=d,this.autoDetectLongPolling=m,this.longPollingOptions=p,this.useFetchStreams=x,this.isUsingEmulator=v}}const Xh="(default)";class Xi{constructor(e,t){this.projectId=e,this.database=t||Xh}static empty(){return new Xi("","")}get isDefaultDatabase(){return this.database===Xh}isEqual(e){return e instanceof Xi&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y0="__type__",G_="__max__",Fa={mapValue:{fields:{__type__:{stringValue:G_}}}},b0="__vector__",No="value",Dh={nullValue:"NULL_VALUE"};function Wa(r){return"nullValue"in r?0:"booleanValue"in r?1:"integerValue"in r||"doubleValue"in r?2:"timestampValue"in r?3:"stringValue"in r?5:"bytesValue"in r?6:"referenceValue"in r?7:"geoPointValue"in r?8:"arrayValue"in r?9:"mapValue"in r?x0(r)?4:Q_(r)?9007199254740991:jf(r)?10:11:Ce(28295,{value:r})}function Ar(r,e){if(r===e)return!0;const t=Wa(r);if(t!==Wa(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return r.booleanValue===e.booleanValue;case 4:return pu(r).isEqual(pu(e));case 3:return(function(l,c){if(typeof l.timestampValue=="string"&&typeof c.timestampValue=="string"&&l.timestampValue.length===c.timestampValue.length)return l.timestampValue===c.timestampValue;const d=Zr(l.timestampValue),m=Zr(c.timestampValue);return d.seconds===m.seconds&&d.nanos===m.nanos})(r,e);case 5:return r.stringValue===e.stringValue;case 6:return(function(l,c){return Jr(l.bytesValue).isEqual(Jr(c.bytesValue))})(r,e);case 7:return r.referenceValue===e.referenceValue;case 8:return(function(l,c){return Lt(l.geoPointValue.latitude)===Lt(c.geoPointValue.latitude)&&Lt(l.geoPointValue.longitude)===Lt(c.geoPointValue.longitude)})(r,e);case 2:return(function(l,c){if("integerValue"in l&&"integerValue"in c)return Lt(l.integerValue)===Lt(c.integerValue);if("doubleValue"in l&&"doubleValue"in c){const d=Lt(l.doubleValue),m=Lt(c.doubleValue);return d===m?du(d)===du(m):isNaN(d)&&isNaN(m)}return!1})(r,e);case 9:return yo(r.arrayValue.values||[],e.arrayValue.values||[],Ar);case 10:case 11:return(function(l,c){const d=l.mapValue.fields||{},m=c.mapValue.fields||{};if(x1(d)!==x1(m))return!1;for(const p in d)if(d.hasOwnProperty(p)&&(m[p]===void 0||!Ar(d[p],m[p])))return!1;return!0})(r,e);default:return Ce(52216,{left:r})}}function gu(r,e){return(r.values||[]).find((t=>Ar(t,e)))!==void 0}function ei(r,e){if(r===e)return 0;const t=Wa(r),a=Wa(e);if(t!==a)return Le(t,a);switch(t){case 0:case 9007199254740991:return 0;case 1:return Le(r.booleanValue,e.booleanValue);case 2:return(function(c,d){const m=Lt(c.integerValue||c.doubleValue),p=Lt(d.integerValue||d.doubleValue);return m<p?-1:m>p?1:m===p?0:isNaN(m)?isNaN(p)?0:-1:1})(r,e);case 3:return b1(r.timestampValue,e.timestampValue);case 4:return b1(pu(r),pu(e));case 5:return Tg(r.stringValue,e.stringValue);case 6:return(function(c,d){const m=Jr(c),p=Jr(d);return m.compareTo(p)})(r.bytesValue,e.bytesValue);case 7:return(function(c,d){const m=c.split("/"),p=d.split("/");for(let x=0;x<m.length&&x<p.length;x++){const v=Le(m[x],p[x]);if(v!==0)return v}return Le(m.length,p.length)})(r.referenceValue,e.referenceValue);case 8:return(function(c,d){const m=Le(Lt(c.latitude),Lt(d.latitude));return m!==0?m:Le(Lt(c.longitude),Lt(d.longitude))})(r.geoPointValue,e.geoPointValue);case 9:return v1(r.arrayValue,e.arrayValue);case 10:return(function(c,d){var N,S,z,O;const m=c.fields||{},p=d.fields||{},x=(N=m[No])==null?void 0:N.arrayValue,v=(S=p[No])==null?void 0:S.arrayValue,b=Le(((z=x==null?void 0:x.values)==null?void 0:z.length)||0,((O=v==null?void 0:v.values)==null?void 0:O.length)||0);return b!==0?b:v1(x,v)})(r.mapValue,e.mapValue);case 11:return(function(c,d){if(c===Fa.mapValue&&d===Fa.mapValue)return 0;if(c===Fa.mapValue)return 1;if(d===Fa.mapValue)return-1;const m=c.fields||{},p=Object.keys(m),x=d.fields||{},v=Object.keys(x);p.sort(),v.sort();for(let b=0;b<p.length&&b<v.length;++b){const N=Tg(p[b],v[b]);if(N!==0)return N;const S=ei(m[p[b]],x[v[b]]);if(S!==0)return S}return Le(p.length,v.length)})(r.mapValue,e.mapValue);default:throw Ce(23264,{he:t})}}function b1(r,e){if(typeof r=="string"&&typeof e=="string"&&r.length===e.length)return Le(r,e);const t=Zr(r),a=Zr(e),l=Le(t.seconds,a.seconds);return l!==0?l:Le(t.nanos,a.nanos)}function v1(r,e){const t=r.values||[],a=e.values||[];for(let l=0;l<t.length&&l<a.length;++l){const c=ei(t[l],a[l]);if(c)return c}return Le(t.length,a.length)}function Eo(r){return Rg(r)}function Rg(r){return"nullValue"in r?"null":"booleanValue"in r?""+r.booleanValue:"integerValue"in r?""+r.integerValue:"doubleValue"in r?""+r.doubleValue:"timestampValue"in r?(function(t){const a=Zr(t);return`time(${a.seconds},${a.nanos})`})(r.timestampValue):"stringValue"in r?r.stringValue:"bytesValue"in r?(function(t){return Jr(t).toBase64()})(r.bytesValue):"referenceValue"in r?(function(t){return Se.fromName(t).toString()})(r.referenceValue):"geoPointValue"in r?(function(t){return`geo(${t.latitude},${t.longitude})`})(r.geoPointValue):"arrayValue"in r?(function(t){let a="[",l=!0;for(const c of t.values||[])l?l=!1:a+=",",a+=Rg(c);return a+"]"})(r.arrayValue):"mapValue"in r?(function(t){const a=Object.keys(t.fields||{}).sort();let l="{",c=!0;for(const d of a)c?c=!1:l+=",",l+=`${d}:${Rg(t.fields[d])}`;return l+"}"})(r.mapValue):Ce(61005,{value:r})}function Rh(r){switch(Wa(r)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Tf(r);return e?16+Rh(e):16;case 5:return 2*r.stringValue.length;case 6:return Jr(r.bytesValue).approximateByteSize();case 7:return r.referenceValue.length;case 9:return(function(a){return(a.values||[]).reduce(((l,c)=>l+Rh(c)),0)})(r.arrayValue);case 10:case 11:return(function(a){let l=0;return li(a.fields,((c,d)=>{l+=c.length+Rh(d)})),l})(r.mapValue);default:throw Ce(13486,{value:r})}}function xu(r,e){return{referenceValue:`projects/${r.projectId}/databases/${r.database}/documents/${e.path.canonicalString()}`}}function kg(r){return!!r&&"integerValue"in r}function yu(r){return!!r&&"arrayValue"in r}function w1(r){return!!r&&"nullValue"in r}function _1(r){return!!r&&"doubleValue"in r&&isNaN(Number(r.doubleValue))}function kh(r){return!!r&&"mapValue"in r}function jf(r){var t,a;return((a=(((t=r==null?void 0:r.mapValue)==null?void 0:t.fields)||{})[y0])==null?void 0:a.stringValue)===b0}function eu(r){if(r.geoPointValue)return{geoPointValue:{...r.geoPointValue}};if(r.timestampValue&&typeof r.timestampValue=="object")return{timestampValue:{...r.timestampValue}};if(r.mapValue){const e={mapValue:{fields:{}}};return li(r.mapValue.fields,((t,a)=>e.mapValue.fields[t]=eu(a))),e}if(r.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(r.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=eu(r.arrayValue.values[t]);return e}return{...r}}function Q_(r){return(((r.mapValue||{}).fields||{}).__type__||{}).stringValue===G_}const K_={mapValue:{fields:{[y0]:{stringValue:b0},[No]:{arrayValue:{}}}}};function iA(r){return"nullValue"in r?Dh:"booleanValue"in r?{booleanValue:!1}:"integerValue"in r||"doubleValue"in r?{doubleValue:NaN}:"timestampValue"in r?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in r?{stringValue:""}:"bytesValue"in r?{bytesValue:""}:"referenceValue"in r?xu(Xi.empty(),Se.empty()):"geoPointValue"in r?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in r?{arrayValue:{}}:"mapValue"in r?jf(r)?K_:{mapValue:{}}:Ce(35942,{value:r})}function lA(r){return"nullValue"in r?{booleanValue:!1}:"booleanValue"in r?{doubleValue:NaN}:"integerValue"in r||"doubleValue"in r?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in r?{stringValue:""}:"stringValue"in r?{bytesValue:""}:"bytesValue"in r?xu(Xi.empty(),Se.empty()):"referenceValue"in r?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in r?{arrayValue:{}}:"arrayValue"in r?K_:"mapValue"in r?jf(r)?{mapValue:{}}:Fa:Ce(61959,{value:r})}function N1(r,e){const t=ei(r.value,e.value);return t!==0?t:r.inclusive&&!e.inclusive?-1:!r.inclusive&&e.inclusive?1:0}function E1(r,e){const t=ei(r.value,e.value);return t!==0?t:r.inclusive&&!e.inclusive?1:!r.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ln{constructor(e){this.value=e}static empty(){return new Ln({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let a=0;a<e.length-1;++a)if(t=(t.mapValue.fields||{})[e.get(a)],!kh(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=eu(t)}setAll(e){let t=Ft.emptyPath(),a={},l=[];e.forEach(((d,m)=>{if(!t.isImmediateParentOf(m)){const p=this.getFieldsMap(t);this.applyChanges(p,a,l),a={},l=[],t=m.popLast()}d?a[m.lastSegment()]=eu(d):l.push(m.lastSegment())}));const c=this.getFieldsMap(t);this.applyChanges(c,a,l)}delete(e){const t=this.field(e.popLast());kh(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Ar(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let a=0;a<e.length;++a){let l=t.mapValue.fields[e.get(a)];kh(l)&&l.mapValue.fields||(l={mapValue:{fields:{}}},t.mapValue.fields[e.get(a)]=l),t=l}return t.mapValue.fields}applyChanges(e,t,a){li(t,((l,c)=>e[l]=c));for(const l of a)delete e[l]}clone(){return new Ln(eu(this.value))}}function Y_(r){const e=[];return li(r.fields,((t,a)=>{const l=new Ft([t]);if(kh(a)){const c=Y_(a.mapValue).fields;if(c.length===0)e.push(l);else for(const d of c)e.push(l.child(d))}else e.push(l)})),new rs(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gt{constructor(e,t,a,l,c,d,m){this.key=e,this.documentType=t,this.version=a,this.readTime=l,this.createTime=c,this.data=d,this.documentState=m}static newInvalidDocument(e){return new Gt(e,0,Ve.min(),Ve.min(),Ve.min(),Ln.empty(),0)}static newFoundDocument(e,t,a,l){return new Gt(e,1,t,Ve.min(),a,l,0)}static newNoDocument(e,t){return new Gt(e,2,t,Ve.min(),Ve.min(),Ln.empty(),0)}static newUnknownDocument(e,t){return new Gt(e,3,t,Ve.min(),Ve.min(),Ln.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Ve.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Ln.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Ln.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ve.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Gt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Gt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class So{constructor(e,t){this.position=e,this.inclusive=t}}function S1(r,e,t){let a=0;for(let l=0;l<r.position.length;l++){const c=e[l],d=r.position[l];if(c.field.isKeyField()?a=Se.comparator(Se.fromName(d.referenceValue),t.key):a=ei(d,t.data.field(c.field)),c.dir==="desc"&&(a*=-1),a!==0)break}return a}function T1(r,e){if(r===null)return e===null;if(e===null||r.inclusive!==e.inclusive||r.position.length!==e.position.length)return!1;for(let t=0;t<r.position.length;t++)if(!Ar(r.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bu{constructor(e,t="asc"){this.field=e,this.dir=t}}function oA(r,e){return r.dir===e.dir&&r.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X_{}class Je extends X_{constructor(e,t,a){super(),this.field=e,this.op=t,this.value=a}static create(e,t,a){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,a):new cA(e,t,a):t==="array-contains"?new hA(e,a):t==="in"?new n2(e,a):t==="not-in"?new fA(e,a):t==="array-contains-any"?new mA(e,a):new Je(e,t,a)}static createKeyFieldInFilter(e,t,a){return t==="in"?new uA(e,a):new dA(e,a)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(ei(t,this.value)):t!==null&&Wa(this.value)===Wa(t)&&this.matchesComparison(ei(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ce(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class yt extends X_{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new yt(e,t)}matches(e){return To(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function To(r){return r.op==="and"}function Mg(r){return r.op==="or"}function v0(r){return Z_(r)&&To(r)}function Z_(r){for(const e of r.filters)if(e instanceof yt)return!1;return!0}function Vg(r){if(r instanceof Je)return r.field.canonicalString()+r.op.toString()+Eo(r.value);if(v0(r))return r.filters.map((e=>Vg(e))).join(",");{const e=r.filters.map((t=>Vg(t))).join(",");return`${r.op}(${e})`}}function J_(r,e){return r instanceof Je?(function(a,l){return l instanceof Je&&a.op===l.op&&a.field.isEqual(l.field)&&Ar(a.value,l.value)})(r,e):r instanceof yt?(function(a,l){return l instanceof yt&&a.op===l.op&&a.filters.length===l.filters.length?a.filters.reduce(((c,d,m)=>c&&J_(d,l.filters[m])),!0):!1})(r,e):void Ce(19439)}function W_(r,e){const t=r.filters.concat(e);return yt.create(t,r.op)}function e2(r){return r instanceof Je?(function(t){return`${t.field.canonicalString()} ${t.op} ${Eo(t.value)}`})(r):r instanceof yt?(function(t){return t.op.toString()+" {"+t.getFilters().map(e2).join(" ,")+"}"})(r):"Filter"}class cA extends Je{constructor(e,t,a){super(e,t,a),this.key=Se.fromName(a.referenceValue)}matches(e){const t=Se.comparator(e.key,this.key);return this.matchesComparison(t)}}class uA extends Je{constructor(e,t){super(e,"in",t),this.keys=t2("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class dA extends Je{constructor(e,t){super(e,"not-in",t),this.keys=t2("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function t2(r,e){var t;return(((t=e.arrayValue)==null?void 0:t.values)||[]).map((a=>Se.fromName(a.referenceValue)))}class hA extends Je{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return yu(t)&&gu(t.arrayValue,this.value)}}class n2 extends Je{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&gu(this.value.arrayValue,t)}}class fA extends Je{constructor(e,t){super(e,"not-in",t)}matches(e){if(gu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!gu(this.value.arrayValue,t)}}class mA extends Je{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!yu(t)||!t.arrayValue.values)&&t.arrayValue.values.some((a=>gu(this.value.arrayValue,a)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pA{constructor(e,t=null,a=[],l=[],c=null,d=null,m=null){this.path=e,this.collectionGroup=t,this.orderBy=a,this.filters=l,this.limit=c,this.startAt=d,this.endAt=m,this.Te=null}}function Og(r,e=null,t=[],a=[],l=null,c=null,d=null){return new pA(r,e,t,a,l,c,d)}function Zi(r){const e=ze(r);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((a=>Vg(a))).join(","),t+="|ob:",t+=e.orderBy.map((a=>(function(c){return c.field.canonicalString()+c.dir})(a))).join(","),_f(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((a=>Eo(a))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((a=>Eo(a))).join(",")),e.Te=t}return e.Te}function Iu(r,e){if(r.limit!==e.limit||r.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<r.orderBy.length;t++)if(!oA(r.orderBy[t],e.orderBy[t]))return!1;if(r.filters.length!==e.filters.length)return!1;for(let t=0;t<r.filters.length;t++)if(!J_(r.filters[t],e.filters[t]))return!1;return r.collectionGroup===e.collectionGroup&&!!r.path.isEqual(e.path)&&!!T1(r.startAt,e.startAt)&&T1(r.endAt,e.endAt)}function Zh(r){return Se.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}function Jh(r,e){return r.filters.filter((t=>t instanceof Je&&t.field.isEqual(e)))}function j1(r,e,t){let a=Dh,l=!0;for(const c of Jh(r,e)){let d=Dh,m=!0;switch(c.op){case"<":case"<=":d=iA(c.value);break;case"==":case"in":case">=":d=c.value;break;case">":d=c.value,m=!1;break;case"!=":case"not-in":d=Dh}N1({value:a,inclusive:l},{value:d,inclusive:m})<0&&(a=d,l=m)}if(t!==null){for(let c=0;c<r.orderBy.length;++c)if(r.orderBy[c].field.isEqual(e)){const d=t.position[c];N1({value:a,inclusive:l},{value:d,inclusive:t.inclusive})<0&&(a=d,l=t.inclusive);break}}return{value:a,inclusive:l}}function A1(r,e,t){let a=Fa,l=!0;for(const c of Jh(r,e)){let d=Fa,m=!0;switch(c.op){case">=":case">":d=lA(c.value),m=!1;break;case"==":case"in":case"<=":d=c.value;break;case"<":d=c.value,m=!1;break;case"!=":case"not-in":d=Fa}E1({value:a,inclusive:l},{value:d,inclusive:m})>0&&(a=d,l=m)}if(t!==null){for(let c=0;c<r.orderBy.length;++c)if(r.orderBy[c].field.isEqual(e)){const d=t.position[c];E1({value:a,inclusive:l},{value:d,inclusive:t.inclusive})>0&&(a=d,l=t.inclusive);break}}return{value:a,inclusive:l}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mo{constructor(e,t=null,a=[],l=[],c=null,d="F",m=null,p=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=a,this.filters=l,this.limit=c,this.limitType=d,this.startAt=m,this.endAt=p,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function gA(r,e,t,a,l,c,d,m){return new Mo(r,e,t,a,l,c,d,m)}function Af(r){return new Mo(r)}function C1(r){return r.filters.length===0&&r.limit===null&&r.startAt==null&&r.endAt==null&&(r.explicitOrderBy.length===0||r.explicitOrderBy.length===1&&r.explicitOrderBy[0].field.isKeyField())}function s2(r){return r.collectionGroup!==null}function tu(r){const e=ze(r);if(e.Ie===null){e.Ie=[];const t=new Set;for(const c of e.explicitOrderBy)e.Ie.push(c),t.add(c.field.canonicalString());const a=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(d){let m=new bt(Ft.comparator);return d.filters.forEach((p=>{p.getFlattenedFilters().forEach((x=>{x.isInequality()&&(m=m.add(x.field))}))})),m})(e).forEach((c=>{t.has(c.canonicalString())||c.isKeyField()||e.Ie.push(new bu(c,a))})),t.has(Ft.keyField().canonicalString())||e.Ie.push(new bu(Ft.keyField(),a))}return e.Ie}function Ls(r){const e=ze(r);return e.Ee||(e.Ee=xA(e,tu(r))),e.Ee}function xA(r,e){if(r.limitType==="F")return Og(r.path,r.collectionGroup,e,r.filters,r.limit,r.startAt,r.endAt);{e=e.map((l=>{const c=l.dir==="desc"?"asc":"desc";return new bu(l.field,c)}));const t=r.endAt?new So(r.endAt.position,r.endAt.inclusive):null,a=r.startAt?new So(r.startAt.position,r.startAt.inclusive):null;return Og(r.path,r.collectionGroup,e,r.filters,r.limit,t,a)}}function Pg(r,e){const t=r.filters.concat([e]);return new Mo(r.path,r.collectionGroup,r.explicitOrderBy.slice(),t,r.limit,r.limitType,r.startAt,r.endAt)}function Wh(r,e,t){return new Mo(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),e,t,r.startAt,r.endAt)}function Cf(r,e){return Iu(Ls(r),Ls(e))&&r.limitType===e.limitType}function r2(r){return`${Zi(Ls(r))}|lt:${r.limitType}`}function uo(r){return`Query(target=${(function(t){let a=t.path.canonicalString();return t.collectionGroup!==null&&(a+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(a+=`, filters: [${t.filters.map((l=>e2(l))).join(", ")}]`),_f(t.limit)||(a+=", limit: "+t.limit),t.orderBy.length>0&&(a+=`, orderBy: [${t.orderBy.map((l=>(function(d){return`${d.field.canonicalString()} (${d.dir})`})(l))).join(", ")}]`),t.startAt&&(a+=", startAt: ",a+=t.startAt.inclusive?"b:":"a:",a+=t.startAt.position.map((l=>Eo(l))).join(",")),t.endAt&&(a+=", endAt: ",a+=t.endAt.inclusive?"a:":"b:",a+=t.endAt.position.map((l=>Eo(l))).join(",")),`Target(${a})`})(Ls(r))}; limitType=${r.limitType})`}function Du(r,e){return e.isFoundDocument()&&(function(a,l){const c=l.key.path;return a.collectionGroup!==null?l.key.hasCollectionId(a.collectionGroup)&&a.path.isPrefixOf(c):Se.isDocumentKey(a.path)?a.path.isEqual(c):a.path.isImmediateParentOf(c)})(r,e)&&(function(a,l){for(const c of tu(a))if(!c.field.isKeyField()&&l.data.field(c.field)===null)return!1;return!0})(r,e)&&(function(a,l){for(const c of a.filters)if(!c.matches(l))return!1;return!0})(r,e)&&(function(a,l){return!(a.startAt&&!(function(d,m,p){const x=S1(d,m,p);return d.inclusive?x<=0:x<0})(a.startAt,tu(a),l)||a.endAt&&!(function(d,m,p){const x=S1(d,m,p);return d.inclusive?x>=0:x>0})(a.endAt,tu(a),l))})(r,e)}function yA(r){return r.collectionGroup||(r.path.length%2==1?r.path.lastSegment():r.path.get(r.path.length-2))}function a2(r){return(e,t)=>{let a=!1;for(const l of tu(r)){const c=bA(l,e,t);if(c!==0)return c;a=a||l.field.isKeyField()}return 0}}function bA(r,e,t){const a=r.field.isKeyField()?Se.comparator(e.key,t.key):(function(c,d,m){const p=d.data.field(c),x=m.data.field(c);return p!==null&&x!==null?ei(p,x):Ce(42886)})(r.field,e,t);switch(r.dir){case"asc":return a;case"desc":return-1*a;default:return Ce(19790,{direction:r.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ta{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),a=this.inner[t];if(a!==void 0){for(const[l,c]of a)if(this.equalsFn(l,e))return c}}has(e){return this.get(e)!==void 0}set(e,t){const a=this.mapKeyFn(e),l=this.inner[a];if(l===void 0)return this.inner[a]=[[e,t]],void this.innerSize++;for(let c=0;c<l.length;c++)if(this.equalsFn(l[c][0],e))return void(l[c]=[e,t]);l.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),a=this.inner[t];if(a===void 0)return!1;for(let l=0;l<a.length;l++)if(this.equalsFn(a[l][0],e))return a.length===1?delete this.inner[t]:a.splice(l,1),this.innerSize--,!0;return!1}forEach(e){li(this.inner,((t,a)=>{for(const[l,c]of a)e(l,c)}))}isEmpty(){return U_(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vA=new zt(Se.comparator);function ys(){return vA}const i2=new zt(Se.comparator);function $c(...r){let e=i2;for(const t of r)e=e.insert(t.key,t);return e}function l2(r){let e=i2;return r.forEach(((t,a)=>e=e.insert(t,a.overlayedDocument))),e}function Sr(){return nu()}function o2(){return nu()}function nu(){return new ta((r=>r.toString()),((r,e)=>r.isEqual(e)))}const wA=new zt(Se.comparator),_A=new bt(Se.comparator);function Ge(...r){let e=_A;for(const t of r)e=e.add(t);return e}const NA=new bt(Le);function EA(){return NA}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w0(r,e){if(r.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:du(e)?"-0":e}}function c2(r){return{integerValue:""+r}}function u2(r,e){return D5(e)?c2(e):w0(r,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class If{constructor(){this._=void 0}}function SA(r,e,t){return r instanceof vu?(function(l,c){const d={fields:{[F_]:{stringValue:q_},[$_]:{timestampValue:{seconds:l.seconds,nanos:l.nanoseconds}}}};return c&&x0(c)&&(c=Tf(c)),c&&(d.fields[H_]=c),{mapValue:d}})(t,e):r instanceof jo?h2(r,e):r instanceof Ao?f2(r,e):(function(l,c){const d=d2(l,c),m=I1(d)+I1(l.Ae);return kg(d)&&kg(l.Ae)?c2(m):w0(l.serializer,m)})(r,e)}function TA(r,e,t){return r instanceof jo?h2(r,e):r instanceof Ao?f2(r,e):t}function d2(r,e){return r instanceof Co?(function(a){return kg(a)||(function(c){return!!c&&"doubleValue"in c})(a)})(e)?e:{integerValue:0}:null}class vu extends If{}class jo extends If{constructor(e){super(),this.elements=e}}function h2(r,e){const t=m2(e);for(const a of r.elements)t.some((l=>Ar(l,a)))||t.push(a);return{arrayValue:{values:t}}}class Ao extends If{constructor(e){super(),this.elements=e}}function f2(r,e){let t=m2(e);for(const a of r.elements)t=t.filter((l=>!Ar(l,a)));return{arrayValue:{values:t}}}class Co extends If{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function I1(r){return Lt(r.integerValue||r.doubleValue)}function m2(r){return yu(r)&&r.arrayValue.values?r.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p2{constructor(e,t){this.field=e,this.transform=t}}function jA(r,e){return r.field.isEqual(e.field)&&(function(a,l){return a instanceof jo&&l instanceof jo||a instanceof Ao&&l instanceof Ao?yo(a.elements,l.elements,Ar):a instanceof Co&&l instanceof Co?Ar(a.Ae,l.Ae):a instanceof vu&&l instanceof vu})(r.transform,e.transform)}class AA{constructor(e,t){this.version=e,this.transformResults=t}}class Sn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Sn}static exists(e){return new Sn(void 0,e)}static updateTime(e){return new Sn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Mh(r,e){return r.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(r.updateTime):r.exists===void 0||r.exists===e.isFoundDocument()}class Df{}function g2(r,e){if(!r.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return r.isNoDocument()?new Ru(r.key,Sn.none()):new Vo(r.key,r.data,Sn.none());{const t=r.data,a=Ln.empty();let l=new bt(Ft.comparator);for(let c of e.fields)if(!l.has(c)){let d=t.field(c);d===null&&c.length>1&&(c=c.popLast(),d=t.field(c)),d===null?a.delete(c):a.set(c,d),l=l.add(c)}return new na(r.key,a,new rs(l.toArray()),Sn.none())}}function CA(r,e,t){r instanceof Vo?(function(l,c,d){const m=l.value.clone(),p=R1(l.fieldTransforms,c,d.transformResults);m.setAll(p),c.convertToFoundDocument(d.version,m).setHasCommittedMutations()})(r,e,t):r instanceof na?(function(l,c,d){if(!Mh(l.precondition,c))return void c.convertToUnknownDocument(d.version);const m=R1(l.fieldTransforms,c,d.transformResults),p=c.data;p.setAll(x2(l)),p.setAll(m),c.convertToFoundDocument(d.version,p).setHasCommittedMutations()})(r,e,t):(function(l,c,d){c.convertToNoDocument(d.version).setHasCommittedMutations()})(0,e,t)}function su(r,e,t,a){return r instanceof Vo?(function(c,d,m,p){if(!Mh(c.precondition,d))return m;const x=c.value.clone(),v=k1(c.fieldTransforms,p,d);return x.setAll(v),d.convertToFoundDocument(d.version,x).setHasLocalMutations(),null})(r,e,t,a):r instanceof na?(function(c,d,m,p){if(!Mh(c.precondition,d))return m;const x=k1(c.fieldTransforms,p,d),v=d.data;return v.setAll(x2(c)),v.setAll(x),d.convertToFoundDocument(d.version,v).setHasLocalMutations(),m===null?null:m.unionWith(c.fieldMask.fields).unionWith(c.fieldTransforms.map((b=>b.field)))})(r,e,t,a):(function(c,d,m){return Mh(c.precondition,d)?(d.convertToNoDocument(d.version).setHasLocalMutations(),null):m})(r,e,t)}function IA(r,e){let t=null;for(const a of r.fieldTransforms){const l=e.data.field(a.field),c=d2(a.transform,l||null);c!=null&&(t===null&&(t=Ln.empty()),t.set(a.field,c))}return t||null}function D1(r,e){return r.type===e.type&&!!r.key.isEqual(e.key)&&!!r.precondition.isEqual(e.precondition)&&!!(function(a,l){return a===void 0&&l===void 0||!(!a||!l)&&yo(a,l,((c,d)=>jA(c,d)))})(r.fieldTransforms,e.fieldTransforms)&&(r.type===0?r.value.isEqual(e.value):r.type!==1||r.data.isEqual(e.data)&&r.fieldMask.isEqual(e.fieldMask))}class Vo extends Df{constructor(e,t,a,l=[]){super(),this.key=e,this.value=t,this.precondition=a,this.fieldTransforms=l,this.type=0}getFieldMask(){return null}}class na extends Df{constructor(e,t,a,l,c=[]){super(),this.key=e,this.data=t,this.fieldMask=a,this.precondition=l,this.fieldTransforms=c,this.type=1}getFieldMask(){return this.fieldMask}}function x2(r){const e=new Map;return r.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const a=r.data.field(t);e.set(t,a)}})),e}function R1(r,e,t){const a=new Map;ke(r.length===t.length,32656,{Re:t.length,Ve:r.length});for(let l=0;l<t.length;l++){const c=r[l],d=c.transform,m=e.data.field(c.field);a.set(c.field,TA(d,m,t[l]))}return a}function k1(r,e,t){const a=new Map;for(const l of r){const c=l.transform,d=t.data.field(l.field);a.set(l.field,SA(c,d,e))}return a}class Ru extends Df{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class y2 extends Df{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _0{constructor(e,t,a,l){this.batchId=e,this.localWriteTime=t,this.baseMutations=a,this.mutations=l}applyToRemoteDocument(e,t){const a=t.mutationResults;for(let l=0;l<this.mutations.length;l++){const c=this.mutations[l];c.key.isEqual(e.key)&&CA(c,e,a[l])}}applyToLocalView(e,t){for(const a of this.baseMutations)a.key.isEqual(e.key)&&(t=su(a,e,t,this.localWriteTime));for(const a of this.mutations)a.key.isEqual(e.key)&&(t=su(a,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const a=o2();return this.mutations.forEach((l=>{const c=e.get(l.key),d=c.overlayedDocument;let m=this.applyToLocalView(d,c.mutatedFields);m=t.has(l.key)?null:m;const p=g2(d,m);p!==null&&a.set(l.key,p),d.isValidDocument()||d.convertToNoDocument(Ve.min())})),a}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Ge())}isEqual(e){return this.batchId===e.batchId&&yo(this.mutations,e.mutations,((t,a)=>D1(t,a)))&&yo(this.baseMutations,e.baseMutations,((t,a)=>D1(t,a)))}}class N0{constructor(e,t,a,l){this.batch=e,this.commitVersion=t,this.mutationResults=a,this.docVersions=l}static from(e,t,a){ke(e.mutations.length===a.length,58842,{me:e.mutations.length,fe:a.length});let l=(function(){return wA})();const c=e.mutations;for(let d=0;d<c.length;d++)l=l.insert(c[d].key,a[d].version);return new N0(e,t,a,l)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E0{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DA{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var rn,tt;function RA(r){switch(r){case ie.OK:return Ce(64938);case ie.CANCELLED:case ie.UNKNOWN:case ie.DEADLINE_EXCEEDED:case ie.RESOURCE_EXHAUSTED:case ie.INTERNAL:case ie.UNAVAILABLE:case ie.UNAUTHENTICATED:return!1;case ie.INVALID_ARGUMENT:case ie.NOT_FOUND:case ie.ALREADY_EXISTS:case ie.PERMISSION_DENIED:case ie.FAILED_PRECONDITION:case ie.ABORTED:case ie.OUT_OF_RANGE:case ie.UNIMPLEMENTED:case ie.DATA_LOSS:return!0;default:return Ce(15467,{code:r})}}function b2(r){if(r===void 0)return Kn("GRPC error has no .code"),ie.UNKNOWN;switch(r){case rn.OK:return ie.OK;case rn.CANCELLED:return ie.CANCELLED;case rn.UNKNOWN:return ie.UNKNOWN;case rn.DEADLINE_EXCEEDED:return ie.DEADLINE_EXCEEDED;case rn.RESOURCE_EXHAUSTED:return ie.RESOURCE_EXHAUSTED;case rn.INTERNAL:return ie.INTERNAL;case rn.UNAVAILABLE:return ie.UNAVAILABLE;case rn.UNAUTHENTICATED:return ie.UNAUTHENTICATED;case rn.INVALID_ARGUMENT:return ie.INVALID_ARGUMENT;case rn.NOT_FOUND:return ie.NOT_FOUND;case rn.ALREADY_EXISTS:return ie.ALREADY_EXISTS;case rn.PERMISSION_DENIED:return ie.PERMISSION_DENIED;case rn.FAILED_PRECONDITION:return ie.FAILED_PRECONDITION;case rn.ABORTED:return ie.ABORTED;case rn.OUT_OF_RANGE:return ie.OUT_OF_RANGE;case rn.UNIMPLEMENTED:return ie.UNIMPLEMENTED;case rn.DATA_LOSS:return ie.DATA_LOSS;default:return Ce(39323,{code:r})}}(tt=rn||(rn={}))[tt.OK=0]="OK",tt[tt.CANCELLED=1]="CANCELLED",tt[tt.UNKNOWN=2]="UNKNOWN",tt[tt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",tt[tt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",tt[tt.NOT_FOUND=5]="NOT_FOUND",tt[tt.ALREADY_EXISTS=6]="ALREADY_EXISTS",tt[tt.PERMISSION_DENIED=7]="PERMISSION_DENIED",tt[tt.UNAUTHENTICATED=16]="UNAUTHENTICATED",tt[tt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",tt[tt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",tt[tt.ABORTED=10]="ABORTED",tt[tt.OUT_OF_RANGE=11]="OUT_OF_RANGE",tt[tt.UNIMPLEMENTED=12]="UNIMPLEMENTED",tt[tt.INTERNAL=13]="INTERNAL",tt[tt.UNAVAILABLE=14]="UNAVAILABLE",tt[tt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kA(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MA=new Ga([4294967295,4294967295],0);function M1(r){const e=kA().encode(r),t=new p_;return t.update(e),new Uint8Array(t.digest())}function V1(r){const e=new DataView(r.buffer),t=e.getUint32(0,!0),a=e.getUint32(4,!0),l=e.getUint32(8,!0),c=e.getUint32(12,!0);return[new Ga([t,a],0),new Ga([l,c],0)]}class S0{constructor(e,t,a){if(this.bitmap=e,this.padding=t,this.hashCount=a,t<0||t>=8)throw new Gc(`Invalid padding: ${t}`);if(a<0)throw new Gc(`Invalid hash count: ${a}`);if(e.length>0&&this.hashCount===0)throw new Gc(`Invalid hash count: ${a}`);if(e.length===0&&t!==0)throw new Gc(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=Ga.fromNumber(this.ge)}ye(e,t,a){let l=e.add(t.multiply(Ga.fromNumber(a)));return l.compare(MA)===1&&(l=new Ga([l.getBits(0),l.getBits(1)],0)),l.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=M1(e),[a,l]=V1(t);for(let c=0;c<this.hashCount;c++){const d=this.ye(a,l,c);if(!this.we(d))return!1}return!0}static create(e,t,a){const l=e%8==0?0:8-e%8,c=new Uint8Array(Math.ceil(e/8)),d=new S0(c,l,t);return a.forEach((m=>d.insert(m))),d}insert(e){if(this.ge===0)return;const t=M1(e),[a,l]=V1(t);for(let c=0;c<this.hashCount;c++){const d=this.ye(a,l,c);this.Se(d)}}Se(e){const t=Math.floor(e/8),a=e%8;this.bitmap[t]|=1<<a}}class Gc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rf{constructor(e,t,a,l,c){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=a,this.documentUpdates=l,this.resolvedLimboDocuments=c}static createSynthesizedRemoteEventForCurrentChange(e,t,a){const l=new Map;return l.set(e,ku.createSynthesizedTargetChangeForCurrentChange(e,t,a)),new Rf(Ve.min(),l,new zt(Le),ys(),Ge())}}class ku{constructor(e,t,a,l,c){this.resumeToken=e,this.current=t,this.addedDocuments=a,this.modifiedDocuments=l,this.removedDocuments=c}static createSynthesizedTargetChangeForCurrentChange(e,t,a){return new ku(a,t,Ge(),Ge(),Ge())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vh{constructor(e,t,a,l){this.be=e,this.removedTargetIds=t,this.key=a,this.De=l}}class v2{constructor(e,t){this.targetId=e,this.Ce=t}}class w2{constructor(e,t,a=on.EMPTY_BYTE_STRING,l=null){this.state=e,this.targetIds=t,this.resumeToken=a,this.cause=l}}class O1{constructor(){this.ve=0,this.Fe=P1(),this.Me=on.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Ge(),t=Ge(),a=Ge();return this.Fe.forEach(((l,c)=>{switch(c){case 0:e=e.add(l);break;case 2:t=t.add(l);break;case 1:a=a.add(l);break;default:Ce(38017,{changeType:c})}})),new ku(this.Me,this.xe,e,t,a)}qe(){this.Oe=!1,this.Fe=P1()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,ke(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class VA{constructor(e){this.Ge=e,this.ze=new Map,this.je=ys(),this.Je=mh(),this.He=mh(),this.Ye=new zt(Le)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const a=this.nt(t);switch(e.state){case 0:this.rt(t)&&a.Le(e.resumeToken);break;case 1:a.Ke(),a.Ne||a.qe(),a.Le(e.resumeToken);break;case 2:a.Ke(),a.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(a.We(),a.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),a.Le(e.resumeToken));break;default:Ce(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((a,l)=>{this.rt(l)&&t(l)}))}st(e){const t=e.targetId,a=e.Ce.count,l=this.ot(t);if(l){const c=l.target;if(Zh(c))if(a===0){const d=new Se(c.path);this.et(t,d,Gt.newNoDocument(d,Ve.min()))}else ke(a===1,20013,{expectedCount:a});else{const d=this._t(t);if(d!==a){const m=this.ut(e),p=m?this.ct(m,e,d):1;if(p!==0){this.it(t);const x=p===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,x)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:a="",padding:l=0},hashCount:c=0}=t;let d,m;try{d=Jr(a).toUint8Array()}catch(p){if(p instanceof B_)return Yi("Decoding the base64 bloom filter in existence filter failed ("+p.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw p}try{m=new S0(d,l,c)}catch(p){return Yi(p instanceof Gc?"BloomFilter error: ":"Applying bloom filter failed: ",p),null}return m.ge===0?null:m}ct(e,t,a){return t.Ce.count===a-this.Pt(e,t.targetId)?0:2}Pt(e,t){const a=this.Ge.getRemoteKeysForTarget(t);let l=0;return a.forEach((c=>{const d=this.Ge.ht(),m=`projects/${d.projectId}/databases/${d.database}/documents/${c.path.canonicalString()}`;e.mightContain(m)||(this.et(t,c,null),l++)})),l}Tt(e){const t=new Map;this.ze.forEach(((c,d)=>{const m=this.ot(d);if(m){if(c.current&&Zh(m.target)){const p=new Se(m.target.path);this.It(p).has(d)||this.Et(d,p)||this.et(d,p,Gt.newNoDocument(p,e))}c.Be&&(t.set(d,c.ke()),c.qe())}}));let a=Ge();this.He.forEach(((c,d)=>{let m=!0;d.forEachWhile((p=>{const x=this.ot(p);return!x||x.purpose==="TargetPurposeLimboResolution"||(m=!1,!1)})),m&&(a=a.add(c))})),this.je.forEach(((c,d)=>d.setReadTime(e)));const l=new Rf(e,t,this.Ye,this.je,a);return this.je=ys(),this.Je=mh(),this.He=mh(),this.Ye=new zt(Le),l}Xe(e,t){if(!this.rt(e))return;const a=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,a),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,a){if(!this.rt(e))return;const l=this.nt(e);this.Et(e,t)?l.Qe(t,1):l.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),a&&(this.je=this.je.insert(t,a))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new O1,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new bt(Le),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new bt(Le),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||ge("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new O1),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function mh(){return new zt(Se.comparator)}function P1(){return new zt(Se.comparator)}const OA={asc:"ASCENDING",desc:"DESCENDING"},PA={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},LA={and:"AND",or:"OR"};class zA{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Lg(r,e){return r.useProto3Json||_f(e)?e:{value:e}}function Io(r,e){return r.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function _2(r,e){return r.useProto3Json?e.toBase64():e.toUint8Array()}function UA(r,e){return Io(r,e.toTimestamp())}function Yn(r){return ke(!!r,49232),Ve.fromTimestamp((function(t){const a=Zr(t);return new xt(a.seconds,a.nanos)})(r))}function T0(r,e){return zg(r,e).canonicalString()}function zg(r,e){const t=(function(l){return new dt(["projects",l.projectId,"databases",l.database])})(r).child("documents");return e===void 0?t:t.child(e)}function N2(r){const e=dt.fromString(r);return ke(R2(e),10190,{key:e.toString()}),e}function ef(r,e){return T0(r.databaseId,e.path)}function Gi(r,e){const t=N2(e);if(t.get(1)!==r.databaseId.projectId)throw new we(ie.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+r.databaseId.projectId);if(t.get(3)!==r.databaseId.database)throw new we(ie.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+r.databaseId.database);return new Se(T2(t))}function E2(r,e){return T0(r.databaseId,e)}function S2(r){const e=N2(r);return e.length===4?dt.emptyPath():T2(e)}function Ug(r){return new dt(["projects",r.databaseId.projectId,"databases",r.databaseId.database]).canonicalString()}function T2(r){return ke(r.length>4&&r.get(4)==="documents",29091,{key:r.toString()}),r.popFirst(5)}function L1(r,e,t){return{name:ef(r,e),fields:t.value.mapValue.fields}}function BA(r,e,t){const a=Gi(r,e.name),l=Yn(e.updateTime),c=e.createTime?Yn(e.createTime):Ve.min(),d=new Ln({mapValue:{fields:e.fields}}),m=Gt.newFoundDocument(a,l,c,d);return t&&m.setHasCommittedMutations(),t?m.setHasCommittedMutations():m}function qA(r,e){let t;if("targetChange"in e){e.targetChange;const a=(function(x){return x==="NO_CHANGE"?0:x==="ADD"?1:x==="REMOVE"?2:x==="CURRENT"?3:x==="RESET"?4:Ce(39313,{state:x})})(e.targetChange.targetChangeType||"NO_CHANGE"),l=e.targetChange.targetIds||[],c=(function(x,v){return x.useProto3Json?(ke(v===void 0||typeof v=="string",58123),on.fromBase64String(v||"")):(ke(v===void 0||v instanceof Buffer||v instanceof Uint8Array,16193),on.fromUint8Array(v||new Uint8Array))})(r,e.targetChange.resumeToken),d=e.targetChange.cause,m=d&&(function(x){const v=x.code===void 0?ie.UNKNOWN:b2(x.code);return new we(v,x.message||"")})(d);t=new w2(a,l,c,m||null)}else if("documentChange"in e){e.documentChange;const a=e.documentChange;a.document,a.document.name,a.document.updateTime;const l=Gi(r,a.document.name),c=Yn(a.document.updateTime),d=a.document.createTime?Yn(a.document.createTime):Ve.min(),m=new Ln({mapValue:{fields:a.document.fields}}),p=Gt.newFoundDocument(l,c,d,m),x=a.targetIds||[],v=a.removedTargetIds||[];t=new Vh(x,v,p.key,p)}else if("documentDelete"in e){e.documentDelete;const a=e.documentDelete;a.document;const l=Gi(r,a.document),c=a.readTime?Yn(a.readTime):Ve.min(),d=Gt.newNoDocument(l,c),m=a.removedTargetIds||[];t=new Vh([],m,d.key,d)}else if("documentRemove"in e){e.documentRemove;const a=e.documentRemove;a.document;const l=Gi(r,a.document),c=a.removedTargetIds||[];t=new Vh([],c,l,null)}else{if(!("filter"in e))return Ce(11601,{Rt:e});{e.filter;const a=e.filter;a.targetId;const{count:l=0,unchangedNames:c}=a,d=new DA(l,c),m=a.targetId;t=new v2(m,d)}}return t}function tf(r,e){let t;if(e instanceof Vo)t={update:L1(r,e.key,e.value)};else if(e instanceof Ru)t={delete:ef(r,e.key)};else if(e instanceof na)t={update:L1(r,e.key,e.data),updateMask:KA(e.fieldMask)};else{if(!(e instanceof y2))return Ce(16599,{Vt:e.type});t={verify:ef(r,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((a=>(function(c,d){const m=d.transform;if(m instanceof vu)return{fieldPath:d.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(m instanceof jo)return{fieldPath:d.field.canonicalString(),appendMissingElements:{values:m.elements}};if(m instanceof Ao)return{fieldPath:d.field.canonicalString(),removeAllFromArray:{values:m.elements}};if(m instanceof Co)return{fieldPath:d.field.canonicalString(),increment:m.Ae};throw Ce(20930,{transform:d.transform})})(0,a)))),e.precondition.isNone||(t.currentDocument=(function(l,c){return c.updateTime!==void 0?{updateTime:UA(l,c.updateTime)}:c.exists!==void 0?{exists:c.exists}:Ce(27497)})(r,e.precondition)),t}function Bg(r,e){const t=e.currentDocument?(function(c){return c.updateTime!==void 0?Sn.updateTime(Yn(c.updateTime)):c.exists!==void 0?Sn.exists(c.exists):Sn.none()})(e.currentDocument):Sn.none(),a=e.updateTransforms?e.updateTransforms.map((l=>(function(d,m){let p=null;if("setToServerValue"in m)ke(m.setToServerValue==="REQUEST_TIME",16630,{proto:m}),p=new vu;else if("appendMissingElements"in m){const v=m.appendMissingElements.values||[];p=new jo(v)}else if("removeAllFromArray"in m){const v=m.removeAllFromArray.values||[];p=new Ao(v)}else"increment"in m?p=new Co(d,m.increment):Ce(16584,{proto:m});const x=Ft.fromServerFormat(m.fieldPath);return new p2(x,p)})(r,l))):[];if(e.update){e.update.name;const l=Gi(r,e.update.name),c=new Ln({mapValue:{fields:e.update.fields}});if(e.updateMask){const d=(function(p){const x=p.fieldPaths||[];return new rs(x.map((v=>Ft.fromServerFormat(v))))})(e.updateMask);return new na(l,c,d,t,a)}return new Vo(l,c,t,a)}if(e.delete){const l=Gi(r,e.delete);return new Ru(l,t)}if(e.verify){const l=Gi(r,e.verify);return new y2(l,t)}return Ce(1463,{proto:e})}function FA(r,e){return r&&r.length>0?(ke(e!==void 0,14353),r.map((t=>(function(l,c){let d=l.updateTime?Yn(l.updateTime):Yn(c);return d.isEqual(Ve.min())&&(d=Yn(c)),new AA(d,l.transformResults||[])})(t,e)))):[]}function j2(r,e){return{documents:[E2(r,e.path)]}}function A2(r,e){const t={structuredQuery:{}},a=e.path;let l;e.collectionGroup!==null?(l=a,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(l=a.popLast(),t.structuredQuery.from=[{collectionId:a.lastSegment()}]),t.parent=E2(r,l);const c=(function(x){if(x.length!==0)return D2(yt.create(x,"and"))})(e.filters);c&&(t.structuredQuery.where=c);const d=(function(x){if(x.length!==0)return x.map((v=>(function(N){return{field:ho(N.field),direction:$A(N.dir)}})(v)))})(e.orderBy);d&&(t.structuredQuery.orderBy=d);const m=Lg(r,e.limit);return m!==null&&(t.structuredQuery.limit=m),e.startAt&&(t.structuredQuery.startAt=(function(x){return{before:x.inclusive,values:x.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(x){return{before:!x.inclusive,values:x.position}})(e.endAt)),{ft:t,parent:l}}function C2(r){let e=S2(r.parent);const t=r.structuredQuery,a=t.from?t.from.length:0;let l=null;if(a>0){ke(a===1,65062);const v=t.from[0];v.allDescendants?l=v.collectionId:e=e.child(v.collectionId)}let c=[];t.where&&(c=(function(b){const N=I2(b);return N instanceof yt&&v0(N)?N.getFilters():[N]})(t.where));let d=[];t.orderBy&&(d=(function(b){return b.map((N=>(function(z){return new bu(fo(z.field),(function(P){switch(P){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(z.direction))})(N)))})(t.orderBy));let m=null;t.limit&&(m=(function(b){let N;return N=typeof b=="object"?b.value:b,_f(N)?null:N})(t.limit));let p=null;t.startAt&&(p=(function(b){const N=!!b.before,S=b.values||[];return new So(S,N)})(t.startAt));let x=null;return t.endAt&&(x=(function(b){const N=!b.before,S=b.values||[];return new So(S,N)})(t.endAt)),gA(e,l,d,c,m,"F",p,x)}function HA(r,e){const t=(function(l){switch(l){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ce(28987,{purpose:l})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function I2(r){return r.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const a=fo(t.unaryFilter.field);return Je.create(a,"==",{doubleValue:NaN});case"IS_NULL":const l=fo(t.unaryFilter.field);return Je.create(l,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const c=fo(t.unaryFilter.field);return Je.create(c,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const d=fo(t.unaryFilter.field);return Je.create(d,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ce(61313);default:return Ce(60726)}})(r):r.fieldFilter!==void 0?(function(t){return Je.create(fo(t.fieldFilter.field),(function(l){switch(l){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ce(58110);default:return Ce(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(r):r.compositeFilter!==void 0?(function(t){return yt.create(t.compositeFilter.filters.map((a=>I2(a))),(function(l){switch(l){case"AND":return"and";case"OR":return"or";default:return Ce(1026)}})(t.compositeFilter.op))})(r):Ce(30097,{filter:r})}function $A(r){return OA[r]}function GA(r){return PA[r]}function QA(r){return LA[r]}function ho(r){return{fieldPath:r.canonicalString()}}function fo(r){return Ft.fromServerFormat(r.fieldPath)}function D2(r){return r instanceof Je?(function(t){if(t.op==="=="){if(_1(t.value))return{unaryFilter:{field:ho(t.field),op:"IS_NAN"}};if(w1(t.value))return{unaryFilter:{field:ho(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(_1(t.value))return{unaryFilter:{field:ho(t.field),op:"IS_NOT_NAN"}};if(w1(t.value))return{unaryFilter:{field:ho(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ho(t.field),op:GA(t.op),value:t.value}}})(r):r instanceof yt?(function(t){const a=t.getFilters().map((l=>D2(l)));return a.length===1?a[0]:{compositeFilter:{op:QA(t.op),filters:a}}})(r):Ce(54877,{filter:r})}function KA(r){const e=[];return r.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function R2(r){return r.length>=4&&r.get(0)==="projects"&&r.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kr{constructor(e,t,a,l,c=Ve.min(),d=Ve.min(),m=on.EMPTY_BYTE_STRING,p=null){this.target=e,this.targetId=t,this.purpose=a,this.sequenceNumber=l,this.snapshotVersion=c,this.lastLimboFreeSnapshotVersion=d,this.resumeToken=m,this.expectedCount=p}withSequenceNumber(e){return new Kr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Kr(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Kr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Kr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k2{constructor(e){this.yt=e}}function YA(r,e){let t;if(e.document)t=BA(r.yt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const a=Se.fromSegments(e.noDocument.path),l=Wi(e.noDocument.readTime);t=Gt.newNoDocument(a,l),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return Ce(56709);{const a=Se.fromSegments(e.unknownDocument.path),l=Wi(e.unknownDocument.version);t=Gt.newUnknownDocument(a,l)}}return e.readTime&&t.setReadTime((function(l){const c=new xt(l[0],l[1]);return Ve.fromTimestamp(c)})(e.readTime)),t}function z1(r,e){const t=e.key,a={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:nf(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())a.document=(function(c,d){return{name:ef(c,d.key),fields:d.data.value.mapValue.fields,updateTime:Io(c,d.version.toTimestamp()),createTime:Io(c,d.createTime.toTimestamp())}})(r.yt,e);else if(e.isNoDocument())a.noDocument={path:t.path.toArray(),readTime:Ji(e.version)};else{if(!e.isUnknownDocument())return Ce(57904,{document:e});a.unknownDocument={path:t.path.toArray(),version:Ji(e.version)}}return a}function nf(r){const e=r.toTimestamp();return[e.seconds,e.nanoseconds]}function Ji(r){const e=r.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Wi(r){const e=new xt(r.seconds,r.nanoseconds);return Ve.fromTimestamp(e)}function zi(r,e){const t=(e.baseMutations||[]).map((c=>Bg(r.yt,c)));for(let c=0;c<e.mutations.length-1;++c){const d=e.mutations[c];if(c+1<e.mutations.length&&e.mutations[c+1].transform!==void 0){const m=e.mutations[c+1];d.updateTransforms=m.transform.fieldTransforms,e.mutations.splice(c+1,1),++c}}const a=e.mutations.map((c=>Bg(r.yt,c))),l=xt.fromMillis(e.localWriteTimeMs);return new _0(e.batchId,l,t,a)}function Qc(r){const e=Wi(r.readTime),t=r.lastLimboFreeSnapshotVersion!==void 0?Wi(r.lastLimboFreeSnapshotVersion):Ve.min();let a;return a=(function(c){return c.documents!==void 0})(r.query)?(function(c){const d=c.documents.length;return ke(d===1,1966,{count:d}),Ls(Af(S2(c.documents[0])))})(r.query):(function(c){return Ls(C2(c))})(r.query),new Kr(a,r.targetId,"TargetPurposeListen",r.lastListenSequenceNumber,e,t,on.fromBase64String(r.resumeToken))}function M2(r,e){const t=Ji(e.snapshotVersion),a=Ji(e.lastLimboFreeSnapshotVersion);let l;l=Zh(e.target)?j2(r.yt,e.target):A2(r.yt,e.target).ft;const c=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Zi(e.target),readTime:t,resumeToken:c,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:a,query:l}}function V2(r){const e=C2({parent:r.parent,structuredQuery:r.structuredQuery});return r.limitType==="LAST"?Wh(e,e.limit,"L"):e}function ag(r,e){return new E0(e.largestBatchId,Bg(r.yt,e.overlayMutation))}function U1(r,e){const t=e.path.lastSegment();return[r,zn(e.path.popLast()),t]}function B1(r,e,t,a){return{indexId:r,uid:e,sequenceNumber:t,readTime:Ji(a.readTime),documentKey:zn(a.documentKey.path),largestBatchId:a.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XA{getBundleMetadata(e,t){return q1(e).get(t).next((a=>{if(a)return(function(c){return{id:c.bundleId,createTime:Wi(c.createTime),version:c.version}})(a)}))}saveBundleMetadata(e,t){return q1(e).put((function(l){return{bundleId:l.id,createTime:Ji(Yn(l.createTime)),version:l.version}})(t))}getNamedQuery(e,t){return F1(e).get(t).next((a=>{if(a)return(function(c){return{name:c.name,query:V2(c.bundledQuery),readTime:Wi(c.readTime)}})(a)}))}saveNamedQuery(e,t){return F1(e).put((function(l){return{name:l.name,readTime:Ji(Yn(l.readTime)),bundledQuery:l.bundledQuery}})(t))}}function q1(r){return xn(r,Nf)}function F1(r){return xn(r,Ef)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kf{constructor(e,t){this.serializer=e,this.userId=t}static wt(e,t){const a=t.uid||"";return new kf(e,a)}getOverlay(e,t){return zc(e).get(U1(this.userId,t)).next((a=>a?ag(this.serializer,a):null))}getOverlays(e,t){const a=Sr();return Y.forEach(t,(l=>this.getOverlay(e,l).next((c=>{c!==null&&a.set(l,c)})))).next((()=>a))}saveOverlays(e,t,a){const l=[];return a.forEach(((c,d)=>{const m=new E0(t,d);l.push(this.St(e,m))})),Y.waitFor(l)}removeOverlaysForBatchId(e,t,a){const l=new Set;t.forEach((d=>l.add(zn(d.getCollectionPath()))));const c=[];return l.forEach((d=>{const m=IDBKeyRange.bound([this.userId,d,a],[this.userId,d,a+1],!1,!0);c.push(zc(e).Z(Ig,m))})),Y.waitFor(c)}getOverlaysForCollection(e,t,a){const l=Sr(),c=zn(t),d=IDBKeyRange.bound([this.userId,c,a],[this.userId,c,Number.POSITIVE_INFINITY],!0);return zc(e).J(Ig,d).next((m=>{for(const p of m){const x=ag(this.serializer,p);l.set(x.getKey(),x)}return l}))}getOverlaysForCollectionGroup(e,t,a,l){const c=Sr();let d;const m=IDBKeyRange.bound([this.userId,t,a],[this.userId,t,Number.POSITIVE_INFINITY],!0);return zc(e).ee({index:V_,range:m},((p,x,v)=>{const b=ag(this.serializer,x);c.size()<l||b.largestBatchId===d?(c.set(b.getKey(),b),d=b.largestBatchId):v.done()})).next((()=>c))}St(e,t){return zc(e).put((function(l,c,d){const[m,p,x]=U1(c,d.mutation.key);return{userId:c,collectionPath:p,documentId:x,collectionGroup:d.mutation.key.getCollectionGroup(),largestBatchId:d.largestBatchId,overlayMutation:tf(l.yt,d.mutation)}})(this.serializer,this.userId,t))}}function zc(r){return xn(r,Sf)}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZA{bt(e){return xn(e,p0)}getSessionToken(e){return this.bt(e).get("sessionToken").next((t=>{const a=t==null?void 0:t.value;return a?on.fromUint8Array(a):on.EMPTY_BYTE_STRING}))}setSessionToken(e,t){return this.bt(e).put({name:"sessionToken",value:t.toUint8Array()})}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ui{constructor(){}Dt(e,t){this.Ct(e,t),t.vt()}Ct(e,t){if("nullValue"in e)this.Ft(t,5);else if("booleanValue"in e)this.Ft(t,10),t.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(t,15),t.Mt(Lt(e.integerValue));else if("doubleValue"in e){const a=Lt(e.doubleValue);isNaN(a)?this.Ft(t,13):(this.Ft(t,15),du(a)?t.Mt(0):t.Mt(a))}else if("timestampValue"in e){let a=e.timestampValue;this.Ft(t,20),typeof a=="string"&&(a=Zr(a)),t.xt(`${a.seconds||""}`),t.Mt(a.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,t),this.Nt(t);else if("bytesValue"in e)this.Ft(t,30),t.Bt(Jr(e.bytesValue)),this.Nt(t);else if("referenceValue"in e)this.Lt(e.referenceValue,t);else if("geoPointValue"in e){const a=e.geoPointValue;this.Ft(t,45),t.Mt(a.latitude||0),t.Mt(a.longitude||0)}else"mapValue"in e?Q_(e)?this.Ft(t,Number.MAX_SAFE_INTEGER):jf(e)?this.kt(e.mapValue,t):(this.qt(e.mapValue,t),this.Nt(t)):"arrayValue"in e?(this.Qt(e.arrayValue,t),this.Nt(t)):Ce(19022,{$t:e})}Ot(e,t){this.Ft(t,25),this.Ut(e,t)}Ut(e,t){t.xt(e)}qt(e,t){const a=e.fields||{};this.Ft(t,55);for(const l of Object.keys(a))this.Ot(l,t),this.Ct(a[l],t)}kt(e,t){var d,m;const a=e.fields||{};this.Ft(t,53);const l=No,c=((m=(d=a[l].arrayValue)==null?void 0:d.values)==null?void 0:m.length)||0;this.Ft(t,15),t.Mt(Lt(c)),this.Ot(l,t),this.Ct(a[l],t)}Qt(e,t){const a=e.values||[];this.Ft(t,50);for(const l of a)this.Ct(l,t)}Lt(e,t){this.Ft(t,37),Se.fromName(e).path.forEach((a=>{this.Ft(t,60),this.Ut(a,t)}))}Ft(e,t){e.Mt(t)}Nt(e){e.Mt(2)}}Ui.Kt=new Ui;/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law | agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES | CONDITIONS OF ANY KIND, either express | implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const so=255;function JA(r){if(r===0)return 8;let e=0;return r>>4||(e+=4,r<<=4),r>>6||(e+=2,r<<=2),r>>7||(e+=1),e}function H1(r){const e=64-(function(a){let l=0;for(let c=0;c<8;++c){const d=JA(255&a[c]);if(l+=d,d!==8)break}return l})(r);return Math.ceil(e/8)}class WA{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Wt(e){const t=e[Symbol.iterator]();let a=t.next();for(;!a.done;)this.Gt(a.value),a=t.next();this.zt()}jt(e){const t=e[Symbol.iterator]();let a=t.next();for(;!a.done;)this.Jt(a.value),a=t.next();this.Ht()}Yt(e){for(const t of e){const a=t.charCodeAt(0);if(a<128)this.Gt(a);else if(a<2048)this.Gt(960|a>>>6),this.Gt(128|63&a);else if(t<"\uD800"||"\uDBFF"<t)this.Gt(480|a>>>12),this.Gt(128|63&a>>>6),this.Gt(128|63&a);else{const l=t.codePointAt(0);this.Gt(240|l>>>18),this.Gt(128|63&l>>>12),this.Gt(128|63&l>>>6),this.Gt(128|63&l)}}this.zt()}Zt(e){for(const t of e){const a=t.charCodeAt(0);if(a<128)this.Jt(a);else if(a<2048)this.Jt(960|a>>>6),this.Jt(128|63&a);else if(t<"\uD800"||"\uDBFF"<t)this.Jt(480|a>>>12),this.Jt(128|63&a>>>6),this.Jt(128|63&a);else{const l=t.codePointAt(0);this.Jt(240|l>>>18),this.Jt(128|63&l>>>12),this.Jt(128|63&l>>>6),this.Jt(128|63&l)}}this.Ht()}Xt(e){const t=this.en(e),a=H1(t);this.tn(1+a),this.buffer[this.position++]=255&a;for(let l=t.length-a;l<t.length;++l)this.buffer[this.position++]=255&t[l]}nn(e){const t=this.en(e),a=H1(t);this.tn(1+a),this.buffer[this.position++]=~(255&a);for(let l=t.length-a;l<t.length;++l)this.buffer[this.position++]=~(255&t[l])}rn(){this.sn(so),this.sn(255)}_n(){this.an(so),this.an(255)}reset(){this.position=0}seed(e){this.tn(e.length),this.buffer.set(e,this.position),this.position+=e.length}un(){return this.buffer.slice(0,this.position)}en(e){const t=(function(c){const d=new DataView(new ArrayBuffer(8));return d.setFloat64(0,c,!1),new Uint8Array(d.buffer)})(e),a=!!(128&t[0]);t[0]^=a?255:128;for(let l=1;l<t.length;++l)t[l]^=a?255:0;return t}Gt(e){const t=255&e;t===0?(this.sn(0),this.sn(255)):t===so?(this.sn(so),this.sn(0)):this.sn(t)}Jt(e){const t=255&e;t===0?(this.an(0),this.an(255)):t===so?(this.an(so),this.an(0)):this.an(e)}zt(){this.sn(0),this.sn(1)}Ht(){this.an(0),this.an(1)}sn(e){this.tn(1),this.buffer[this.position++]=e}an(e){this.tn(1),this.buffer[this.position++]=~e}tn(e){const t=e+this.position;if(t<=this.buffer.length)return;let a=2*this.buffer.length;a<t&&(a=t);const l=new Uint8Array(a);l.set(this.buffer),this.buffer=l}}class e4{constructor(e){this.cn=e}Bt(e){this.cn.Wt(e)}xt(e){this.cn.Yt(e)}Mt(e){this.cn.Xt(e)}vt(){this.cn.rn()}}class t4{constructor(e){this.cn=e}Bt(e){this.cn.jt(e)}xt(e){this.cn.Zt(e)}Mt(e){this.cn.nn(e)}vt(){this.cn._n()}}class Uc{constructor(){this.cn=new WA,this.ln=new e4(this.cn),this.hn=new t4(this.cn)}seed(e){this.cn.seed(e)}Pn(e){return e===0?this.ln:this.hn}un(){return this.cn.un()}reset(){this.cn.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bi{constructor(e,t,a,l){this.Tn=e,this.In=t,this.En=a,this.dn=l}An(){const e=this.dn.length,t=e===0||this.dn[e-1]===255?e+1:e,a=new Uint8Array(t);return a.set(this.dn,0),t!==e?a.set([0],this.dn.length):++a[a.length-1],new Bi(this.Tn,this.In,this.En,a)}Rn(e,t,a){return{indexId:this.Tn,uid:e,arrayValue:Oh(this.En),directionalValue:Oh(this.dn),orderedDocumentKey:Oh(t),documentKey:a.path.toArray()}}Vn(e,t,a){const l=this.Rn(e,t,a);return[l.indexId,l.uid,l.arrayValue,l.directionalValue,l.orderedDocumentKey,l.documentKey]}}function Oa(r,e){let t=r.Tn-e.Tn;return t!==0?t:(t=$1(r.En,e.En),t!==0?t:(t=$1(r.dn,e.dn),t!==0?t:Se.comparator(r.In,e.In)))}function $1(r,e){for(let t=0;t<r.length&&t<e.length;++t){const a=r[t]-e[t];if(a!==0)return a}return r.length-e.length}function Oh(r){return i_()?(function(t){let a="";for(let l=0;l<t.length;l++)a+=String.fromCharCode(t[l]);return a})(r):r}function G1(r){return typeof r!="string"?r:(function(t){const a=new Uint8Array(t.length);for(let l=0;l<t.length;l++)a[l]=t.charCodeAt(l);return a})(r)}class Q1{constructor(e){this.mn=new bt(((t,a)=>Ft.comparator(t.field,a.field))),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.fn=e.orderBy,this.gn=[];for(const t of e.filters){const a=t;a.isInequality()?this.mn=this.mn.add(a):this.gn.push(a)}}get pn(){return this.mn.size>1}yn(e){if(ke(e.collectionGroup===this.collectionId,49279),this.pn)return!1;const t=jg(e);if(t!==void 0&&!this.wn(t))return!1;const a=Oi(e);let l=new Set,c=0,d=0;for(;c<a.length&&this.wn(a[c]);++c)l=l.add(a[c].fieldPath.canonicalString());if(c===a.length)return!0;if(this.mn.size>0){const m=this.mn.getIterator().getNext();if(!l.has(m.field.canonicalString())){const p=a[c];if(!this.Sn(m,p)||!this.bn(this.fn[d++],p))return!1}++c}for(;c<a.length;++c){const m=a[c];if(d>=this.fn.length||!this.bn(this.fn[d++],m))return!1}return!0}Dn(){if(this.pn)return null;let e=new bt(Ft.comparator);const t=[];for(const a of this.gn)if(!a.field.isKeyField())if(a.op==="array-contains"||a.op==="array-contains-any")t.push(new Ah(a.field,2));else{if(e.has(a.field))continue;e=e.add(a.field),t.push(new Ah(a.field,0))}for(const a of this.fn)a.field.isKeyField()||e.has(a.field)||(e=e.add(a.field),t.push(new Ah(a.field,a.dir==="asc"?0:1)));return new Gh(Gh.UNKNOWN_ID,this.collectionId,t,uu.empty())}wn(e){for(const t of this.gn)if(this.Sn(t,e))return!0;return!1}Sn(e,t){if(e===void 0||!e.field.isEqual(t.fieldPath))return!1;const a=e.op==="array-contains"||e.op==="array-contains-any";return t.kind===2===a}bn(e,t){return!!e.field.isEqual(t.fieldPath)&&(t.kind===0&&e.dir==="asc"||t.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function O2(r){var t,a;if(ke(r instanceof Je||r instanceof yt,20012),r instanceof Je){if(r instanceof n2){const l=((a=(t=r.value.arrayValue)==null?void 0:t.values)==null?void 0:a.map((c=>Je.create(r.field,"==",c))))||[];return yt.create(l,"or")}return r}const e=r.filters.map((l=>O2(l)));return yt.create(e,r.op)}function n4(r){if(r.getFilters().length===0)return[];const e=Hg(O2(r));return ke(P2(e),7391),qg(e)||Fg(e)?[e]:e.getFilters()}function qg(r){return r instanceof Je}function Fg(r){return r instanceof yt&&v0(r)}function P2(r){return qg(r)||Fg(r)||(function(t){if(t instanceof yt&&Mg(t)){for(const a of t.getFilters())if(!qg(a)&&!Fg(a))return!1;return!0}return!1})(r)}function Hg(r){if(ke(r instanceof Je||r instanceof yt,34018),r instanceof Je)return r;if(r.filters.length===1)return Hg(r.filters[0]);const e=r.filters.map((a=>Hg(a)));let t=yt.create(e,r.op);return t=sf(t),P2(t)?t:(ke(t instanceof yt,64498),ke(To(t),40251),ke(t.filters.length>1,57927),t.filters.reduce(((a,l)=>j0(a,l))))}function j0(r,e){let t;return ke(r instanceof Je||r instanceof yt,38388),ke(e instanceof Je||e instanceof yt,25473),t=r instanceof Je?e instanceof Je?(function(l,c){return yt.create([l,c],"and")})(r,e):K1(r,e):e instanceof Je?K1(e,r):(function(l,c){if(ke(l.filters.length>0&&c.filters.length>0,48005),To(l)&&To(c))return W_(l,c.getFilters());const d=Mg(l)?l:c,m=Mg(l)?c:l,p=d.filters.map((x=>j0(x,m)));return yt.create(p,"or")})(r,e),sf(t)}function K1(r,e){if(To(e))return W_(e,r.getFilters());{const t=e.filters.map((a=>j0(r,a)));return yt.create(t,"or")}}function sf(r){if(ke(r instanceof Je||r instanceof yt,11850),r instanceof Je)return r;const e=r.getFilters();if(e.length===1)return sf(e[0]);if(Z_(r))return r;const t=e.map((l=>sf(l))),a=[];return t.forEach((l=>{l instanceof Je?a.push(l):l instanceof yt&&(l.op===r.op?a.push(...l.filters):a.push(l))})),a.length===1?a[0]:yt.create(a,r.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s4{constructor(){this.Cn=new A0}addToCollectionParentIndex(e,t){return this.Cn.add(t),Y.resolve()}getCollectionParents(e,t){return Y.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return Y.resolve()}deleteFieldIndex(e,t){return Y.resolve()}deleteAllFieldIndexes(e){return Y.resolve()}createTargetIndexes(e,t){return Y.resolve()}getDocumentsMatchingTarget(e,t){return Y.resolve(null)}getIndexType(e,t){return Y.resolve(0)}getFieldIndexes(e,t){return Y.resolve([])}getNextCollectionGroupToUpdate(e){return Y.resolve(null)}getMinOffset(e,t){return Y.resolve(bs.min())}getMinOffsetFromCollectionGroup(e,t){return Y.resolve(bs.min())}updateCollectionGroup(e,t,a){return Y.resolve()}updateIndexEntries(e,t){return Y.resolve()}}class A0{constructor(){this.index={}}add(e){const t=e.lastSegment(),a=e.popLast(),l=this.index[t]||new bt(dt.comparator),c=!l.has(a);return this.index[t]=l.add(a),c}has(e){const t=e.lastSegment(),a=e.popLast(),l=this.index[t];return l&&l.has(a)}getEntries(e){return(this.index[e]||new bt(dt.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y1="IndexedDbIndexManager",ph=new Uint8Array(0);class r4{constructor(e,t){this.databaseId=t,this.vn=new A0,this.Fn=new ta((a=>Zi(a)),((a,l)=>Iu(a,l))),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.vn.has(t)){const a=t.lastSegment(),l=t.popLast();e.addOnCommittedListener((()=>{this.vn.add(t)}));const c={collectionId:a,parent:zn(l)};return X1(e).put(c)}return Y.resolve()}getCollectionParents(e,t){const a=[],l=IDBKeyRange.bound([t,""],[N_(t),""],!1,!0);return X1(e).J(l).next((c=>{for(const d of c){if(d.collectionId!==t)break;a.push(Er(d.parent))}return a}))}addFieldIndex(e,t){const a=Bc(e),l=(function(m){return{indexId:m.indexId,collectionGroup:m.collectionGroup,fields:m.fields.map((p=>[p.fieldPath.canonicalString(),p.kind]))}})(t);delete l.indexId;const c=a.add(l);if(t.indexState){const d=ao(e);return c.next((m=>{d.put(B1(m,this.uid,t.indexState.sequenceNumber,t.indexState.offset))}))}return c.next()}deleteFieldIndex(e,t){const a=Bc(e),l=ao(e),c=ro(e);return a.delete(t.indexId).next((()=>l.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))).next((()=>c.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))))}deleteAllFieldIndexes(e){const t=Bc(e),a=ro(e),l=ao(e);return t.Z().next((()=>a.Z())).next((()=>l.Z()))}createTargetIndexes(e,t){return Y.forEach(this.Mn(t),(a=>this.getIndexType(e,a).next((l=>{if(l===0||l===1){const c=new Q1(a).Dn();if(c!=null)return this.addFieldIndex(e,c)}}))))}getDocumentsMatchingTarget(e,t){const a=ro(e);let l=!0;const c=new Map;return Y.forEach(this.Mn(t),(d=>this.xn(e,d).next((m=>{l&&(l=!!m),c.set(d,m)})))).next((()=>{if(l){let d=Ge();const m=[];return Y.forEach(c,((p,x)=>{ge(Y1,`Using index ${(function(M){return`id=${M.indexId}|cg=${M.collectionGroup}|f=${M.fields.map((F=>`${F.fieldPath}:${F.kind}`)).join(",")}`})(p)} to execute ${Zi(t)}`);const v=(function(M,F){const Z=jg(F);if(Z===void 0)return null;for(const te of Jh(M,Z.fieldPath))switch(te.op){case"array-contains-any":return te.value.arrayValue.values||[];case"array-contains":return[te.value]}return null})(x,p),b=(function(M,F){const Z=new Map;for(const te of Oi(F))for(const E of Jh(M,te.fieldPath))switch(E.op){case"==":case"in":Z.set(te.fieldPath.canonicalString(),E.value);break;case"not-in":case"!=":return Z.set(te.fieldPath.canonicalString(),E.value),Array.from(Z.values())}return null})(x,p),N=(function(M,F){const Z=[];let te=!0;for(const E of Oi(F)){const T=E.kind===0?j1(M,E.fieldPath,M.startAt):A1(M,E.fieldPath,M.startAt);Z.push(T.value),te&&(te=T.inclusive)}return new So(Z,te)})(x,p),S=(function(M,F){const Z=[];let te=!0;for(const E of Oi(F)){const T=E.kind===0?A1(M,E.fieldPath,M.endAt):j1(M,E.fieldPath,M.endAt);Z.push(T.value),te&&(te=T.inclusive)}return new So(Z,te)})(x,p),z=this.On(p,x,N),O=this.On(p,x,S),P=this.Nn(p,x,b),C=this.Bn(p.indexId,v,z,N.inclusive,O,S.inclusive,P);return Y.forEach(C,(L=>a.Y(L,t.limit).next((M=>{M.forEach((F=>{const Z=Se.fromSegments(F.documentKey);d.has(Z)||(d=d.add(Z),m.push(Z))}))}))))})).next((()=>m))}return Y.resolve(null)}))}Mn(e){let t=this.Fn.get(e);return t||(e.filters.length===0?t=[e]:t=n4(yt.create(e.filters,"and")).map((a=>Og(e.path,e.collectionGroup,e.orderBy,a.getFilters(),e.limit,e.startAt,e.endAt))),this.Fn.set(e,t),t)}Bn(e,t,a,l,c,d,m){const p=(t!=null?t.length:1)*Math.max(a.length,c.length),x=p/(t!=null?t.length:1),v=[];for(let b=0;b<p;++b){const N=t?this.Ln(t[b/x]):ph,S=this.kn(e,N,a[b%x],l),z=this.qn(e,N,c[b%x],d),O=m.map((P=>this.kn(e,N,P,!0)));v.push(...this.createRange(S,z,O))}return v}kn(e,t,a,l){const c=new Bi(e,Se.empty(),t,a);return l?c:c.An()}qn(e,t,a,l){const c=new Bi(e,Se.empty(),t,a);return l?c.An():c}xn(e,t){const a=new Q1(t),l=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,l).next((c=>{let d=null;for(const m of c)a.yn(m)&&(!d||m.fields.length>d.fields.length)&&(d=m);return d}))}getIndexType(e,t){let a=2;const l=this.Mn(t);return Y.forEach(l,(c=>this.xn(e,c).next((d=>{d?a!==0&&d.fields.length<(function(p){let x=new bt(Ft.comparator),v=!1;for(const b of p.filters)for(const N of b.getFlattenedFilters())N.field.isKeyField()||(N.op==="array-contains"||N.op==="array-contains-any"?v=!0:x=x.add(N.field));for(const b of p.orderBy)b.field.isKeyField()||(x=x.add(b.field));return x.size+(v?1:0)})(c)&&(a=1):a=0})))).next((()=>(function(d){return d.limit!==null})(t)&&l.length>1&&a===2?1:a))}Qn(e,t){const a=new Uc;for(const l of Oi(e)){const c=t.data.field(l.fieldPath);if(c==null)return null;const d=a.Pn(l.kind);Ui.Kt.Dt(c,d)}return a.un()}Ln(e){const t=new Uc;return Ui.Kt.Dt(e,t.Pn(0)),t.un()}$n(e,t){const a=new Uc;return Ui.Kt.Dt(xu(this.databaseId,t),a.Pn((function(c){const d=Oi(c);return d.length===0?0:d[d.length-1].kind})(e))),a.un()}Nn(e,t,a){if(a===null)return[];let l=[];l.push(new Uc);let c=0;for(const d of Oi(e)){const m=a[c++];for(const p of l)if(this.Un(t,d.fieldPath)&&yu(m))l=this.Kn(l,d,m);else{const x=p.Pn(d.kind);Ui.Kt.Dt(m,x)}}return this.Wn(l)}On(e,t,a){return this.Nn(e,t,a.position)}Wn(e){const t=[];for(let a=0;a<e.length;++a)t[a]=e[a].un();return t}Kn(e,t,a){const l=[...e],c=[];for(const d of a.arrayValue.values||[])for(const m of l){const p=new Uc;p.seed(m.un()),Ui.Kt.Dt(d,p.Pn(t.kind)),c.push(p)}return c}Un(e,t){return!!e.filters.find((a=>a instanceof Je&&a.field.isEqual(t)&&(a.op==="in"||a.op==="not-in")))}getFieldIndexes(e,t){const a=Bc(e),l=ao(e);return(t?a.J(Cg,IDBKeyRange.bound(t,t)):a.J()).next((c=>{const d=[];return Y.forEach(c,(m=>l.get([m.indexId,this.uid]).next((p=>{d.push((function(v,b){const N=b?new uu(b.sequenceNumber,new bs(Wi(b.readTime),new Se(Er(b.documentKey)),b.largestBatchId)):uu.empty(),S=v.fields.map((([z,O])=>new Ah(Ft.fromServerFormat(z),O)));return new Gh(v.indexId,v.collectionGroup,S,N)})(m,p))})))).next((()=>d))}))}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next((t=>t.length===0?null:(t.sort(((a,l)=>{const c=a.indexState.sequenceNumber-l.indexState.sequenceNumber;return c!==0?c:Le(a.collectionGroup,l.collectionGroup)})),t[0].collectionGroup)))}updateCollectionGroup(e,t,a){const l=Bc(e),c=ao(e);return this.Gn(e).next((d=>l.J(Cg,IDBKeyRange.bound(t,t)).next((m=>Y.forEach(m,(p=>c.put(B1(p.indexId,this.uid,d,a))))))))}updateIndexEntries(e,t){const a=new Map;return Y.forEach(t,((l,c)=>{const d=a.get(l.collectionGroup);return(d?Y.resolve(d):this.getFieldIndexes(e,l.collectionGroup)).next((m=>(a.set(l.collectionGroup,m),Y.forEach(m,(p=>this.zn(e,l,p).next((x=>{const v=this.jn(c,p);return x.isEqual(v)?Y.resolve():this.Jn(e,c,p,x,v)})))))))}))}Hn(e,t,a,l){return ro(e).put(l.Rn(this.uid,this.$n(a,t.key),t.key))}Yn(e,t,a,l){return ro(e).delete(l.Vn(this.uid,this.$n(a,t.key),t.key))}zn(e,t,a){const l=ro(e);let c=new bt(Oa);return l.ee({index:M_,range:IDBKeyRange.only([a.indexId,this.uid,Oh(this.$n(a,t))])},((d,m)=>{c=c.add(new Bi(a.indexId,t,G1(m.arrayValue),G1(m.directionalValue)))})).next((()=>c))}jn(e,t){let a=new bt(Oa);const l=this.Qn(t,e);if(l==null)return a;const c=jg(t);if(c!=null){const d=e.data.field(c.fieldPath);if(yu(d))for(const m of d.arrayValue.values||[])a=a.add(new Bi(t.indexId,e.key,this.Ln(m),l))}else a=a.add(new Bi(t.indexId,e.key,ph,l));return a}Jn(e,t,a,l,c){ge(Y1,"Updating index entries for document '%s'",t.key);const d=[];return(function(p,x,v,b,N){const S=p.getIterator(),z=x.getIterator();let O=no(S),P=no(z);for(;O||P;){let C=!1,L=!1;if(O&&P){const M=v(O,P);M<0?L=!0:M>0&&(C=!0)}else O!=null?L=!0:C=!0;C?(b(P),P=no(z)):L?(N(O),O=no(S)):(O=no(S),P=no(z))}})(l,c,Oa,(m=>{d.push(this.Hn(e,t,a,m))}),(m=>{d.push(this.Yn(e,t,a,m))})),Y.waitFor(d)}Gn(e){let t=1;return ao(e).ee({index:k_,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},((a,l,c)=>{c.done(),t=l.sequenceNumber+1})).next((()=>t))}createRange(e,t,a){a=a.sort(((d,m)=>Oa(d,m))).filter(((d,m,p)=>!m||Oa(d,p[m-1])!==0));const l=[];l.push(e);for(const d of a){const m=Oa(d,e),p=Oa(d,t);if(m===0)l[0]=e.An();else if(m>0&&p<0)l.push(d),l.push(d.An());else if(p>0)break}l.push(t);const c=[];for(let d=0;d<l.length;d+=2){if(this.Zn(l[d],l[d+1]))return[];const m=l[d].Vn(this.uid,ph,Se.empty()),p=l[d+1].Vn(this.uid,ph,Se.empty());c.push(IDBKeyRange.bound(m,p))}return c}Zn(e,t){return Oa(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(Z1)}getMinOffset(e,t){return Y.mapArray(this.Mn(t),(a=>this.xn(e,a).next((l=>l||Ce(44426))))).next(Z1)}}function X1(r){return xn(r,mu)}function ro(r){return xn(r,Wc)}function Bc(r){return xn(r,m0)}function ao(r){return xn(r,Jc)}function Z1(r){ke(r.length!==0,28825);let e=r[0].indexState.offset,t=e.largestBatchId;for(let a=1;a<r.length;a++){const l=r[a].indexState.offset;d0(l,e)<0&&(e=l),t<l.largestBatchId&&(t=l.largestBatchId)}return new bs(e.readTime,e.documentKey,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J1={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},L2=41943040;class Pn{static withCacheSize(e){return new Pn(e,Pn.DEFAULT_COLLECTION_PERCENTILE,Pn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,a){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function z2(r,e,t){const a=r.store(Zs),l=r.store(bo),c=[],d=IDBKeyRange.only(t.batchId);let m=0;const p=a.ee({range:d},((v,b,N)=>(m++,N.delete())));c.push(p.next((()=>{ke(m===1,47070,{batchId:t.batchId})})));const x=[];for(const v of t.mutations){const b=I_(e,v.key.path,t.batchId);c.push(l.delete(b)),x.push(v.key)}return Y.waitFor(c).next((()=>x))}function rf(r){if(!r)return 0;let e;if(r.document)e=r.document;else if(r.unknownDocument)e=r.unknownDocument;else{if(!r.noDocument)throw Ce(14731);e=r.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Pn.DEFAULT_COLLECTION_PERCENTILE=10,Pn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Pn.DEFAULT=new Pn(L2,Pn.DEFAULT_COLLECTION_PERCENTILE,Pn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Pn.DISABLED=new Pn(-1,0,0);class Mf{constructor(e,t,a,l){this.userId=e,this.serializer=t,this.indexManager=a,this.referenceDelegate=l,this.Xn={}}static wt(e,t,a,l){ke(e.uid!=="",64387);const c=e.isAuthenticated()?e.uid:"";return new Mf(c,t,a,l)}checkEmpty(e){let t=!0;const a=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Pa(e).ee({index:Fi,range:a},((l,c,d)=>{t=!1,d.done()})).next((()=>t))}addMutationBatch(e,t,a,l){const c=mo(e),d=Pa(e);return d.add({}).next((m=>{ke(typeof m=="number",49019);const p=new _0(m,t,a,l),x=(function(S,z,O){const P=O.baseMutations.map((L=>tf(S.yt,L))),C=O.mutations.map((L=>tf(S.yt,L)));return{userId:z,batchId:O.batchId,localWriteTimeMs:O.localWriteTime.toMillis(),baseMutations:P,mutations:C}})(this.serializer,this.userId,p),v=[];let b=new bt(((N,S)=>Le(N.canonicalString(),S.canonicalString())));for(const N of l){const S=I_(this.userId,N.key.path,m);b=b.add(N.key.path.popLast()),v.push(d.put(x)),v.push(c.put(S,M5))}return b.forEach((N=>{v.push(this.indexManager.addToCollectionParentIndex(e,N))})),e.addOnCommittedListener((()=>{this.Xn[m]=p.keys()})),Y.waitFor(v).next((()=>p))}))}lookupMutationBatch(e,t){return Pa(e).get(t).next((a=>a?(ke(a.userId===this.userId,48,"Unexpected user for mutation batch",{userId:a.userId,batchId:t}),zi(this.serializer,a)):null))}er(e,t){return this.Xn[t]?Y.resolve(this.Xn[t]):this.lookupMutationBatch(e,t).next((a=>{if(a){const l=a.keys();return this.Xn[t]=l,l}return null}))}getNextMutationBatchAfterBatchId(e,t){const a=t+1,l=IDBKeyRange.lowerBound([this.userId,a]);let c=null;return Pa(e).ee({index:Fi,range:l},((d,m,p)=>{m.userId===this.userId&&(ke(m.batchId>=a,47524,{tr:a}),c=zi(this.serializer,m)),p.done()})).next((()=>c))}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let a=Hi;return Pa(e).ee({index:Fi,range:t,reverse:!0},((l,c,d)=>{a=c.batchId,d.done()})).next((()=>a))}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,Hi],[this.userId,Number.POSITIVE_INFINITY]);return Pa(e).J(Fi,t).next((a=>a.map((l=>zi(this.serializer,l)))))}getAllMutationBatchesAffectingDocumentKey(e,t){const a=Ch(this.userId,t.path),l=IDBKeyRange.lowerBound(a),c=[];return mo(e).ee({range:l},((d,m,p)=>{const[x,v,b]=d,N=Er(v);if(x===this.userId&&t.path.isEqual(N))return Pa(e).get(b).next((S=>{if(!S)throw Ce(61480,{nr:d,batchId:b});ke(S.userId===this.userId,10503,"Unexpected user for mutation batch",{userId:S.userId,batchId:b}),c.push(zi(this.serializer,S))}));p.done()})).next((()=>c))}getAllMutationBatchesAffectingDocumentKeys(e,t){let a=new bt(Le);const l=[];return t.forEach((c=>{const d=Ch(this.userId,c.path),m=IDBKeyRange.lowerBound(d),p=mo(e).ee({range:m},((x,v,b)=>{const[N,S,z]=x,O=Er(S);N===this.userId&&c.path.isEqual(O)?a=a.add(z):b.done()}));l.push(p)})),Y.waitFor(l).next((()=>this.rr(e,a)))}getAllMutationBatchesAffectingQuery(e,t){const a=t.path,l=a.length+1,c=Ch(this.userId,a),d=IDBKeyRange.lowerBound(c);let m=new bt(Le);return mo(e).ee({range:d},((p,x,v)=>{const[b,N,S]=p,z=Er(N);b===this.userId&&a.isPrefixOf(z)?z.length===l&&(m=m.add(S)):v.done()})).next((()=>this.rr(e,m)))}rr(e,t){const a=[],l=[];return t.forEach((c=>{l.push(Pa(e).get(c).next((d=>{if(d===null)throw Ce(35274,{batchId:c});ke(d.userId===this.userId,9748,"Unexpected user for mutation batch",{userId:d.userId,batchId:c}),a.push(zi(this.serializer,d))})))})),Y.waitFor(l).next((()=>a))}removeMutationBatch(e,t){return z2(e.le,this.userId,t).next((a=>(e.addOnCommittedListener((()=>{this.ir(t.batchId)})),Y.forEach(a,(l=>this.referenceDelegate.markPotentiallyOrphaned(e,l))))))}ir(e){delete this.Xn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next((t=>{if(!t)return Y.resolve();const a=IDBKeyRange.lowerBound((function(d){return[d]})(this.userId)),l=[];return mo(e).ee({range:a},((c,d,m)=>{if(c[0]===this.userId){const p=Er(c[1]);l.push(p)}else m.done()})).next((()=>{ke(l.length===0,56720,{sr:l.map((c=>c.canonicalString()))})}))}))}containsKey(e,t){return U2(e,this.userId,t)}_r(e){return B2(e).get(this.userId).next((t=>t||{userId:this.userId,lastAcknowledgedBatchId:Hi,lastStreamToken:""}))}}function U2(r,e,t){const a=Ch(e,t.path),l=a[1],c=IDBKeyRange.lowerBound(a);let d=!1;return mo(r).ee({range:c,X:!0},((m,p,x)=>{const[v,b,N]=m;v===e&&b===l&&(d=!0),x.done()})).next((()=>d))}function Pa(r){return xn(r,Zs)}function mo(r){return xn(r,bo)}function B2(r){return xn(r,hu)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class el{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new el(0)}static cr(){return new el(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a4{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.lr(e).next((t=>{const a=new el(t.highestTargetId);return t.highestTargetId=a.next(),this.hr(e,t).next((()=>t.highestTargetId))}))}getLastRemoteSnapshotVersion(e){return this.lr(e).next((t=>Ve.fromTimestamp(new xt(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))))}getHighestSequenceNumber(e){return this.lr(e).next((t=>t.highestListenSequenceNumber))}setTargetsMetadata(e,t,a){return this.lr(e).next((l=>(l.highestListenSequenceNumber=t,a&&(l.lastRemoteSnapshotVersion=a.toTimestamp()),t>l.highestListenSequenceNumber&&(l.highestListenSequenceNumber=t),this.hr(e,l))))}addTargetData(e,t){return this.Pr(e,t).next((()=>this.lr(e).next((a=>(a.targetCount+=1,this.Tr(t,a),this.hr(e,a))))))}updateTargetData(e,t){return this.Pr(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next((()=>io(e).delete(t.targetId))).next((()=>this.lr(e))).next((a=>(ke(a.targetCount>0,8065),a.targetCount-=1,this.hr(e,a))))}removeTargets(e,t,a){let l=0;const c=[];return io(e).ee(((d,m)=>{const p=Qc(m);p.sequenceNumber<=t&&a.get(p.targetId)===null&&(l++,c.push(this.removeTargetData(e,p)))})).next((()=>Y.waitFor(c))).next((()=>l))}forEachTarget(e,t){return io(e).ee(((a,l)=>{const c=Qc(l);t(c)}))}lr(e){return W1(e).get(Yh).next((t=>(ke(t!==null,2888),t)))}hr(e,t){return W1(e).put(Yh,t)}Pr(e,t){return io(e).put(M2(this.serializer,t))}Tr(e,t){let a=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,a=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,a=!0),a}getTargetCount(e){return this.lr(e).next((t=>t.targetCount))}getTargetData(e,t){const a=Zi(t),l=IDBKeyRange.bound([a,Number.NEGATIVE_INFINITY],[a,Number.POSITIVE_INFINITY]);let c=null;return io(e).ee({range:l,index:R_},((d,m,p)=>{const x=Qc(m);Iu(t,x.target)&&(c=x,p.done())})).next((()=>c))}addMatchingKeys(e,t,a){const l=[],c=qa(e);return t.forEach((d=>{const m=zn(d.path);l.push(c.put({targetId:a,path:m})),l.push(this.referenceDelegate.addReference(e,a,d))})),Y.waitFor(l)}removeMatchingKeys(e,t,a){const l=qa(e);return Y.forEach(t,(c=>{const d=zn(c.path);return Y.waitFor([l.delete([a,d]),this.referenceDelegate.removeReference(e,a,c)])}))}removeMatchingKeysForTargetId(e,t){const a=qa(e),l=IDBKeyRange.bound([t],[t+1],!1,!0);return a.delete(l)}getMatchingKeysForTargetId(e,t){const a=IDBKeyRange.bound([t],[t+1],!1,!0),l=qa(e);let c=Ge();return l.ee({range:a,X:!0},((d,m,p)=>{const x=Er(d[1]),v=new Se(x);c=c.add(v)})).next((()=>c))}containsKey(e,t){const a=zn(t.path),l=IDBKeyRange.bound([a],[N_(a)],!1,!0);let c=0;return qa(e).ee({index:f0,X:!0,range:l},(([d,m],p,x)=>{d!==0&&(c++,x.done())})).next((()=>c>0))}At(e,t){return io(e).get(t).next((a=>a?Qc(a):null))}}function io(r){return xn(r,vo)}function W1(r){return xn(r,$i)}function qa(r){return xn(r,wo)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ew="LruGarbageCollector",i4=1048576;function tw([r,e],[t,a]){const l=Le(r,t);return l===0?Le(e,a):l}class l4{constructor(e){this.Ir=e,this.buffer=new bt(tw),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const a=this.buffer.last();tw(t,a)<0&&(this.buffer=this.buffer.delete(a).add(t))}}get maxValue(){return this.buffer.last()[0]}}class q2{constructor(e,t,a){this.garbageCollector=e,this.asyncQueue=t,this.localStore=a,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){ge(ew,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){ii(t)?ge(ew,"Ignoring IndexedDB error during garbage collection: ",t):await il(t)}await this.Vr(3e5)}))}}class o4{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next((a=>Math.floor(t/100*a)))}nthSequenceNumber(e,t){if(t===0)return Y.resolve(Os.ce);const a=new l4(t);return this.mr.forEachTarget(e,(l=>a.Ar(l.sequenceNumber))).next((()=>this.mr.pr(e,(l=>a.Ar(l))))).next((()=>a.maxValue))}removeTargets(e,t,a){return this.mr.removeTargets(e,t,a)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(ge("LruGarbageCollector","Garbage collection skipped; disabled"),Y.resolve(J1)):this.getCacheSize(e).next((a=>a<this.params.cacheSizeCollectionThreshold?(ge("LruGarbageCollector",`Garbage collection skipped; Cache size ${a} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),J1):this.yr(e,t)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let a,l,c,d,m,p,x;const v=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((b=>(b>this.params.maximumSequenceNumbersToCollect?(ge("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${b}`),l=this.params.maximumSequenceNumbersToCollect):l=b,d=Date.now(),this.nthSequenceNumber(e,l)))).next((b=>(a=b,m=Date.now(),this.removeTargets(e,a,t)))).next((b=>(c=b,p=Date.now(),this.removeOrphanedDocuments(e,a)))).next((b=>(x=Date.now(),co()<=nt.DEBUG&&ge("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${d-v}ms
	Determined least recently used ${l} in `+(m-d)+`ms
	Removed ${c} targets in `+(p-m)+`ms
	Removed ${b} documents in `+(x-p)+`ms
Total Duration: ${x-v}ms`),Y.resolve({didRun:!0,sequenceNumbersCollected:l,targetsRemoved:c,documentsRemoved:b}))))}}function F2(r,e){return new o4(r,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c4{constructor(e,t){this.db=e,this.garbageCollector=F2(this,t)}gr(e){const t=this.wr(e);return this.db.getTargetCache().getTargetCount(e).next((a=>t.next((l=>a+l))))}wr(e){let t=0;return this.pr(e,(a=>{t++})).next((()=>t))}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}pr(e,t){return this.Sr(e,((a,l)=>t(l)))}addReference(e,t,a){return gh(e,a)}removeReference(e,t,a){return gh(e,a)}removeTargets(e,t,a){return this.db.getTargetCache().removeTargets(e,t,a)}markPotentiallyOrphaned(e,t){return gh(e,t)}br(e,t){return(function(l,c){let d=!1;return B2(l).te((m=>U2(l,m,c).next((p=>(p&&(d=!0),Y.resolve(!p)))))).next((()=>d))})(e,t)}removeOrphanedDocuments(e,t){const a=this.db.getRemoteDocumentCache().newChangeBuffer(),l=[];let c=0;return this.Sr(e,((d,m)=>{if(m<=t){const p=this.br(e,d).next((x=>{if(!x)return c++,a.getEntry(e,d).next((()=>(a.removeEntry(d,Ve.min()),qa(e).delete((function(b){return[0,zn(b.path)]})(d)))))}));l.push(p)}})).next((()=>Y.waitFor(l))).next((()=>a.apply(e))).next((()=>c))}removeTarget(e,t){const a=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,a)}updateLimboDocument(e,t){return gh(e,t)}Sr(e,t){const a=qa(e);let l,c=Os.ce;return a.ee({index:f0},(([d,m],{path:p,sequenceNumber:x})=>{d===0?(c!==Os.ce&&t(new Se(Er(l)),c),c=x,l=p):c=Os.ce})).next((()=>{c!==Os.ce&&t(new Se(Er(l)),c)}))}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function gh(r,e){return qa(r).put((function(a,l){return{targetId:0,path:zn(a.path),sequenceNumber:l}})(e,r.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H2{constructor(){this.changes=new ta((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Gt.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const a=this.changes.get(t);return a!==void 0?Y.resolve(a):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u4{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,a){return Mi(e).put(a)}removeEntry(e,t,a){return Mi(e).delete((function(c,d){const m=c.path.toArray();return[m.slice(0,m.length-2),m[m.length-2],nf(d),m[m.length-1]]})(t,a))}updateMetadata(e,t){return this.getMetadata(e).next((a=>(a.byteSize+=t,this.Dr(e,a))))}getEntry(e,t){let a=Gt.newInvalidDocument(t);return Mi(e).ee({index:Ih,range:IDBKeyRange.only(qc(t))},((l,c)=>{a=this.Cr(t,c)})).next((()=>a))}vr(e,t){let a={size:0,document:Gt.newInvalidDocument(t)};return Mi(e).ee({index:Ih,range:IDBKeyRange.only(qc(t))},((l,c)=>{a={document:this.Cr(t,c),size:rf(c)}})).next((()=>a))}getEntries(e,t){let a=ys();return this.Fr(e,t,((l,c)=>{const d=this.Cr(l,c);a=a.insert(l,d)})).next((()=>a))}Mr(e,t){let a=ys(),l=new zt(Se.comparator);return this.Fr(e,t,((c,d)=>{const m=this.Cr(c,d);a=a.insert(c,m),l=l.insert(c,rf(d))})).next((()=>({documents:a,Or:l})))}Fr(e,t,a){if(t.isEmpty())return Y.resolve();let l=new bt(rw);t.forEach((p=>l=l.add(p)));const c=IDBKeyRange.bound(qc(l.first()),qc(l.last())),d=l.getIterator();let m=d.getNext();return Mi(e).ee({index:Ih,range:c},((p,x,v)=>{const b=Se.fromSegments([...x.prefixPath,x.collectionGroup,x.documentId]);for(;m&&rw(m,b)<0;)a(m,null),m=d.getNext();m&&m.isEqual(b)&&(a(m,x),m=d.hasNext()?d.getNext():null),m?v.j(qc(m)):v.done()})).next((()=>{for(;m;)a(m,null),m=d.hasNext()?d.getNext():null}))}getDocumentsMatchingQuery(e,t,a,l,c){const d=t.path,m=[d.popLast().toArray(),d.lastSegment(),nf(a.readTime),a.documentKey.path.isEmpty()?"":a.documentKey.path.lastSegment()],p=[d.popLast().toArray(),d.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Mi(e).J(IDBKeyRange.bound(m,p,!0)).next((x=>{c==null||c.incrementDocumentReadCount(x.length);let v=ys();for(const b of x){const N=this.Cr(Se.fromSegments(b.prefixPath.concat(b.collectionGroup,b.documentId)),b);N.isFoundDocument()&&(Du(t,N)||l.has(N.key))&&(v=v.insert(N.key,N))}return v}))}getAllFromCollectionGroup(e,t,a,l){let c=ys();const d=sw(t,a),m=sw(t,bs.max());return Mi(e).ee({index:D_,range:IDBKeyRange.bound(d,m,!0)},((p,x,v)=>{const b=this.Cr(Se.fromSegments(x.prefixPath.concat(x.collectionGroup,x.documentId)),x);c=c.insert(b.key,b),c.size===l&&v.done()})).next((()=>c))}newChangeBuffer(e){return new d4(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next((t=>t.byteSize))}getMetadata(e){return nw(e).get(Ag).next((t=>(ke(!!t,20021),t)))}Dr(e,t){return nw(e).put(Ag,t)}Cr(e,t){if(t){const a=YA(this.serializer,t);if(!(a.isNoDocument()&&a.version.isEqual(Ve.min())))return a}return Gt.newInvalidDocument(e)}}function $2(r){return new u4(r)}class d4 extends H2{constructor(e,t){super(),this.Nr=e,this.trackRemovals=t,this.Br=new ta((a=>a.toString()),((a,l)=>a.isEqual(l)))}applyChanges(e){const t=[];let a=0,l=new bt(((c,d)=>Le(c.canonicalString(),d.canonicalString())));return this.changes.forEach(((c,d)=>{const m=this.Br.get(c);if(t.push(this.Nr.removeEntry(e,c,m.readTime)),d.isValidDocument()){const p=z1(this.Nr.serializer,d);l=l.add(c.path.popLast());const x=rf(p);a+=x-m.size,t.push(this.Nr.addEntry(e,c,p))}else if(a-=m.size,this.trackRemovals){const p=z1(this.Nr.serializer,d.convertToNoDocument(Ve.min()));t.push(this.Nr.addEntry(e,c,p))}})),l.forEach((c=>{t.push(this.Nr.indexManager.addToCollectionParentIndex(e,c))})),t.push(this.Nr.updateMetadata(e,a)),Y.waitFor(t)}getFromCache(e,t){return this.Nr.vr(e,t).next((a=>(this.Br.set(t,{size:a.size,readTime:a.document.readTime}),a.document)))}getAllFromCache(e,t){return this.Nr.Mr(e,t).next((({documents:a,Or:l})=>(l.forEach(((c,d)=>{this.Br.set(c,{size:d,readTime:a.get(c).readTime})})),a)))}}function nw(r){return xn(r,fu)}function Mi(r){return xn(r,Kh)}function qc(r){const e=r.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function sw(r,e){const t=e.documentKey.path.toArray();return[r,nf(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function rw(r,e){const t=r.path.toArray(),a=e.path.toArray();let l=0;for(let c=0;c<t.length-2&&c<a.length-2;++c)if(l=Le(t[c],a[c]),l)return l;return l=Le(t.length,a.length),l||(l=Le(t[t.length-2],a[a.length-2]),l||Le(t[t.length-1],a[a.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h4{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G2{constructor(e,t,a,l){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=a,this.indexManager=l}getDocument(e,t){let a=null;return this.documentOverlayCache.getOverlay(e,t).next((l=>(a=l,this.remoteDocumentCache.getEntry(e,t)))).next((l=>(a!==null&&su(a.mutation,l,rs.empty(),xt.now()),l)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((a=>this.getLocalViewOfDocuments(e,a,Ge()).next((()=>a))))}getLocalViewOfDocuments(e,t,a=Ge()){const l=Sr();return this.populateOverlays(e,l,t).next((()=>this.computeViews(e,t,l,a).next((c=>{let d=$c();return c.forEach(((m,p)=>{d=d.insert(m,p.overlayedDocument)})),d}))))}getOverlayedDocuments(e,t){const a=Sr();return this.populateOverlays(e,a,t).next((()=>this.computeViews(e,t,a,Ge())))}populateOverlays(e,t,a){const l=[];return a.forEach((c=>{t.has(c)||l.push(c)})),this.documentOverlayCache.getOverlays(e,l).next((c=>{c.forEach(((d,m)=>{t.set(d,m)}))}))}computeViews(e,t,a,l){let c=ys();const d=nu(),m=(function(){return nu()})();return t.forEach(((p,x)=>{const v=a.get(x.key);l.has(x.key)&&(v===void 0||v.mutation instanceof na)?c=c.insert(x.key,x):v!==void 0?(d.set(x.key,v.mutation.getFieldMask()),su(v.mutation,x,v.mutation.getFieldMask(),xt.now())):d.set(x.key,rs.empty())})),this.recalculateAndSaveOverlays(e,c).next((p=>(p.forEach(((x,v)=>d.set(x,v))),t.forEach(((x,v)=>m.set(x,new h4(v,d.get(x)??null)))),m)))}recalculateAndSaveOverlays(e,t){const a=nu();let l=new zt(((d,m)=>d-m)),c=Ge();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((d=>{for(const m of d)m.keys().forEach((p=>{const x=t.get(p);if(x===null)return;let v=a.get(p)||rs.empty();v=m.applyToLocalView(x,v),a.set(p,v);const b=(l.get(m.batchId)||Ge()).add(p);l=l.insert(m.batchId,b)}))})).next((()=>{const d=[],m=l.getReverseIterator();for(;m.hasNext();){const p=m.getNext(),x=p.key,v=p.value,b=o2();v.forEach((N=>{if(!c.has(N)){const S=g2(t.get(N),a.get(N));S!==null&&b.set(N,S),c=c.add(N)}})),d.push(this.documentOverlayCache.saveOverlays(e,x,b))}return Y.waitFor(d)})).next((()=>a))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((a=>this.recalculateAndSaveOverlays(e,a)))}getDocumentsMatchingQuery(e,t,a,l){return(function(d){return Se.isDocumentKey(d.path)&&d.collectionGroup===null&&d.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):s2(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,a,l):this.getDocumentsMatchingCollectionQuery(e,t,a,l)}getNextDocuments(e,t,a,l){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,a,l).next((c=>{const d=l-c.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,a.largestBatchId,l-c.size):Y.resolve(Sr());let m=cu,p=c;return d.next((x=>Y.forEach(x,((v,b)=>(m<b.largestBatchId&&(m=b.largestBatchId),c.get(v)?Y.resolve():this.remoteDocumentCache.getEntry(e,v).next((N=>{p=p.insert(v,N)}))))).next((()=>this.populateOverlays(e,x,c))).next((()=>this.computeViews(e,p,x,Ge()))).next((v=>({batchId:m,changes:l2(v)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Se(t)).next((a=>{let l=$c();return a.isFoundDocument()&&(l=l.insert(a.key,a)),l}))}getDocumentsMatchingCollectionGroupQuery(e,t,a,l){const c=t.collectionGroup;let d=$c();return this.indexManager.getCollectionParents(e,c).next((m=>Y.forEach(m,(p=>{const x=(function(b,N){return new Mo(N,null,b.explicitOrderBy.slice(),b.filters.slice(),b.limit,b.limitType,b.startAt,b.endAt)})(t,p.child(c));return this.getDocumentsMatchingCollectionQuery(e,x,a,l).next((v=>{v.forEach(((b,N)=>{d=d.insert(b,N)}))}))})).next((()=>d))))}getDocumentsMatchingCollectionQuery(e,t,a,l){let c;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,a.largestBatchId).next((d=>(c=d,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,a,c,l)))).next((d=>{c.forEach(((p,x)=>{const v=x.getKey();d.get(v)===null&&(d=d.insert(v,Gt.newInvalidDocument(v)))}));let m=$c();return d.forEach(((p,x)=>{const v=c.get(p);v!==void 0&&su(v.mutation,x,rs.empty(),xt.now()),Du(t,x)&&(m=m.insert(p,x))})),m}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f4{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return Y.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,(function(l){return{id:l.id,version:l.version,createTime:Yn(l.createTime)}})(t)),Y.resolve()}getNamedQuery(e,t){return Y.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,(function(l){return{name:l.name,query:V2(l.bundledQuery),readTime:Yn(l.readTime)}})(t)),Y.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m4{constructor(){this.overlays=new zt(Se.comparator),this.qr=new Map}getOverlay(e,t){return Y.resolve(this.overlays.get(t))}getOverlays(e,t){const a=Sr();return Y.forEach(t,(l=>this.getOverlay(e,l).next((c=>{c!==null&&a.set(l,c)})))).next((()=>a))}saveOverlays(e,t,a){return a.forEach(((l,c)=>{this.St(e,t,c)})),Y.resolve()}removeOverlaysForBatchId(e,t,a){const l=this.qr.get(a);return l!==void 0&&(l.forEach((c=>this.overlays=this.overlays.remove(c))),this.qr.delete(a)),Y.resolve()}getOverlaysForCollection(e,t,a){const l=Sr(),c=t.length+1,d=new Se(t.child("")),m=this.overlays.getIteratorFrom(d);for(;m.hasNext();){const p=m.getNext().value,x=p.getKey();if(!t.isPrefixOf(x.path))break;x.path.length===c&&p.largestBatchId>a&&l.set(p.getKey(),p)}return Y.resolve(l)}getOverlaysForCollectionGroup(e,t,a,l){let c=new zt(((x,v)=>x-v));const d=this.overlays.getIterator();for(;d.hasNext();){const x=d.getNext().value;if(x.getKey().getCollectionGroup()===t&&x.largestBatchId>a){let v=c.get(x.largestBatchId);v===null&&(v=Sr(),c=c.insert(x.largestBatchId,v)),v.set(x.getKey(),x)}}const m=Sr(),p=c.getIterator();for(;p.hasNext()&&(p.getNext().value.forEach(((x,v)=>m.set(x,v))),!(m.size()>=l)););return Y.resolve(m)}St(e,t,a){const l=this.overlays.get(a.key);if(l!==null){const d=this.qr.get(l.largestBatchId).delete(a.key);this.qr.set(l.largestBatchId,d)}this.overlays=this.overlays.insert(a.key,new E0(t,a));let c=this.qr.get(t);c===void 0&&(c=Ge(),this.qr.set(t,c)),this.qr.set(t,c.add(a.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p4{constructor(){this.sessionToken=on.EMPTY_BYTE_STRING}getSessionToken(e){return Y.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,Y.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C0{constructor(){this.Qr=new bt(Nn.$r),this.Ur=new bt(Nn.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const a=new Nn(e,t);this.Qr=this.Qr.add(a),this.Ur=this.Ur.add(a)}Wr(e,t){e.forEach((a=>this.addReference(a,t)))}removeReference(e,t){this.Gr(new Nn(e,t))}zr(e,t){e.forEach((a=>this.removeReference(a,t)))}jr(e){const t=new Se(new dt([])),a=new Nn(t,e),l=new Nn(t,e+1),c=[];return this.Ur.forEachInRange([a,l],(d=>{this.Gr(d),c.push(d.key)})),c}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new Se(new dt([])),a=new Nn(t,e),l=new Nn(t,e+1);let c=Ge();return this.Ur.forEachInRange([a,l],(d=>{c=c.add(d.key)})),c}containsKey(e){const t=new Nn(e,0),a=this.Qr.firstAfterOrEqual(t);return a!==null&&e.isEqual(a.key)}}class Nn{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return Se.comparator(e.key,t.key)||Le(e.Yr,t.Yr)}static Kr(e,t){return Le(e.Yr,t.Yr)||Se.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g4{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new bt(Nn.$r)}checkEmpty(e){return Y.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,a,l){const c=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const d=new _0(c,t,a,l);this.mutationQueue.push(d);for(const m of l)this.Zr=this.Zr.add(new Nn(m.key,c)),this.indexManager.addToCollectionParentIndex(e,m.key.path.popLast());return Y.resolve(d)}lookupMutationBatch(e,t){return Y.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const a=t+1,l=this.ei(a),c=l<0?0:l;return Y.resolve(this.mutationQueue.length>c?this.mutationQueue[c]:null)}getHighestUnacknowledgedBatchId(){return Y.resolve(this.mutationQueue.length===0?Hi:this.tr-1)}getAllMutationBatches(e){return Y.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const a=new Nn(t,0),l=new Nn(t,Number.POSITIVE_INFINITY),c=[];return this.Zr.forEachInRange([a,l],(d=>{const m=this.Xr(d.Yr);c.push(m)})),Y.resolve(c)}getAllMutationBatchesAffectingDocumentKeys(e,t){let a=new bt(Le);return t.forEach((l=>{const c=new Nn(l,0),d=new Nn(l,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([c,d],(m=>{a=a.add(m.Yr)}))})),Y.resolve(this.ti(a))}getAllMutationBatchesAffectingQuery(e,t){const a=t.path,l=a.length+1;let c=a;Se.isDocumentKey(c)||(c=c.child(""));const d=new Nn(new Se(c),0);let m=new bt(Le);return this.Zr.forEachWhile((p=>{const x=p.key.path;return!!a.isPrefixOf(x)&&(x.length===l&&(m=m.add(p.Yr)),!0)}),d),Y.resolve(this.ti(m))}ti(e){const t=[];return e.forEach((a=>{const l=this.Xr(a);l!==null&&t.push(l)})),t}removeMutationBatch(e,t){ke(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let a=this.Zr;return Y.forEach(t.mutations,(l=>{const c=new Nn(l.key,t.batchId);return a=a.delete(c),this.referenceDelegate.markPotentiallyOrphaned(e,l.key)})).next((()=>{this.Zr=a}))}ir(e){}containsKey(e,t){const a=new Nn(t,0),l=this.Zr.firstAfterOrEqual(a);return Y.resolve(t.isEqual(l&&l.key))}performConsistencyCheck(e){return this.mutationQueue.length,Y.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x4{constructor(e){this.ri=e,this.docs=(function(){return new zt(Se.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const a=t.key,l=this.docs.get(a),c=l?l.size:0,d=this.ri(t);return this.docs=this.docs.insert(a,{document:t.mutableCopy(),size:d}),this.size+=d-c,this.indexManager.addToCollectionParentIndex(e,a.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const a=this.docs.get(t);return Y.resolve(a?a.document.mutableCopy():Gt.newInvalidDocument(t))}getEntries(e,t){let a=ys();return t.forEach((l=>{const c=this.docs.get(l);a=a.insert(l,c?c.document.mutableCopy():Gt.newInvalidDocument(l))})),Y.resolve(a)}getDocumentsMatchingQuery(e,t,a,l){let c=ys();const d=t.path,m=new Se(d.child("__id-9223372036854775808__")),p=this.docs.getIteratorFrom(m);for(;p.hasNext();){const{key:x,value:{document:v}}=p.getNext();if(!d.isPrefixOf(x.path))break;x.path.length>d.length+1||d0(T_(v),a)<=0||(l.has(v.key)||Du(t,v))&&(c=c.insert(v.key,v.mutableCopy()))}return Y.resolve(c)}getAllFromCollectionGroup(e,t,a,l){Ce(9500)}ii(e,t){return Y.forEach(this.docs,(a=>t(a)))}newChangeBuffer(e){return new y4(this)}getSize(e){return Y.resolve(this.size)}}class y4 extends H2{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach(((a,l)=>{l.isValidDocument()?t.push(this.Nr.addEntry(e,l)):this.Nr.removeEntry(a)})),Y.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b4{constructor(e){this.persistence=e,this.si=new ta((t=>Zi(t)),Iu),this.lastRemoteSnapshotVersion=Ve.min(),this.highestTargetId=0,this.oi=0,this._i=new C0,this.targetCount=0,this.ai=el.ur()}forEachTarget(e,t){return this.si.forEach(((a,l)=>t(l))),Y.resolve()}getLastRemoteSnapshotVersion(e){return Y.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Y.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),Y.resolve(this.highestTargetId)}setTargetsMetadata(e,t,a){return a&&(this.lastRemoteSnapshotVersion=a),t>this.oi&&(this.oi=t),Y.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new el(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,Y.resolve()}updateTargetData(e,t){return this.Pr(t),Y.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,Y.resolve()}removeTargets(e,t,a){let l=0;const c=[];return this.si.forEach(((d,m)=>{m.sequenceNumber<=t&&a.get(m.targetId)===null&&(this.si.delete(d),c.push(this.removeMatchingKeysForTargetId(e,m.targetId)),l++)})),Y.waitFor(c).next((()=>l))}getTargetCount(e){return Y.resolve(this.targetCount)}getTargetData(e,t){const a=this.si.get(t)||null;return Y.resolve(a)}addMatchingKeys(e,t,a){return this._i.Wr(t,a),Y.resolve()}removeMatchingKeys(e,t,a){this._i.zr(t,a);const l=this.persistence.referenceDelegate,c=[];return l&&t.forEach((d=>{c.push(l.markPotentiallyOrphaned(e,d))})),Y.waitFor(c)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),Y.resolve()}getMatchingKeysForTargetId(e,t){const a=this._i.Hr(t);return Y.resolve(a)}containsKey(e,t){return Y.resolve(this._i.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I0{constructor(e,t){this.ui={},this.overlays={},this.ci=new Os(0),this.li=!1,this.li=!0,this.hi=new p4,this.referenceDelegate=e(this),this.Pi=new b4(this),this.indexManager=new s4,this.remoteDocumentCache=(function(l){return new x4(l)})((a=>this.referenceDelegate.Ti(a))),this.serializer=new k2(t),this.Ii=new f4(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new m4,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let a=this.ui[e.toKey()];return a||(a=new g4(t,this.referenceDelegate),this.ui[e.toKey()]=a),a}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,a){ge("MemoryPersistence","Starting transaction:",e);const l=new v4(this.ci.next());return this.referenceDelegate.Ei(),a(l).next((c=>this.referenceDelegate.di(l).next((()=>c)))).toPromise().then((c=>(l.raiseOnCommittedEvent(),c)))}Ai(e,t){return Y.or(Object.values(this.ui).map((a=>()=>a.containsKey(e,t))))}}class v4 extends A_{constructor(e){super(),this.currentSequenceNumber=e}}class Vf{constructor(e){this.persistence=e,this.Ri=new C0,this.Vi=null}static mi(e){return new Vf(e)}get fi(){if(this.Vi)return this.Vi;throw Ce(60996)}addReference(e,t,a){return this.Ri.addReference(a,t),this.fi.delete(a.toString()),Y.resolve()}removeReference(e,t,a){return this.Ri.removeReference(a,t),this.fi.add(a.toString()),Y.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),Y.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach((l=>this.fi.add(l.toString())));const a=this.persistence.getTargetCache();return a.getMatchingKeysForTargetId(e,t.targetId).next((l=>{l.forEach((c=>this.fi.add(c.toString())))})).next((()=>a.removeTargetData(e,t)))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Y.forEach(this.fi,(a=>{const l=Se.fromPath(a);return this.gi(e,l).next((c=>{c||t.removeEntry(l,Ve.min())}))})).next((()=>(this.Vi=null,t.apply(e))))}updateLimboDocument(e,t){return this.gi(e,t).next((a=>{a?this.fi.delete(t.toString()):this.fi.add(t.toString())}))}Ti(e){return 0}gi(e,t){return Y.or([()=>Y.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class af{constructor(e,t){this.persistence=e,this.pi=new ta((a=>zn(a.path)),((a,l)=>a.isEqual(l))),this.garbageCollector=F2(this,t)}static mi(e,t){return new af(e,t)}Ei(){}di(e){return Y.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((a=>t.next((l=>a+l))))}wr(e){let t=0;return this.pr(e,(a=>{t++})).next((()=>t))}pr(e,t){return Y.forEach(this.pi,((a,l)=>this.br(e,a,l).next((c=>c?Y.resolve():t(l)))))}removeTargets(e,t,a){return this.persistence.getTargetCache().removeTargets(e,t,a)}removeOrphanedDocuments(e,t){let a=0;const l=this.persistence.getRemoteDocumentCache(),c=l.newChangeBuffer();return l.ii(e,(d=>this.br(e,d,t).next((m=>{m||(a++,c.removeEntry(d,Ve.min()))})))).next((()=>c.apply(e))).next((()=>a))}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),Y.resolve()}removeTarget(e,t){const a=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,a)}addReference(e,t,a){return this.pi.set(a,e.currentSequenceNumber),Y.resolve()}removeReference(e,t,a){return this.pi.set(a,e.currentSequenceNumber),Y.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),Y.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Rh(e.data.value)),t}br(e,t,a){return Y.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const l=this.pi.get(t);return Y.resolve(l!==void 0&&l>a)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w4{constructor(e){this.serializer=e}k(e,t,a,l){const c=new wf("createOrUpgrade",t);a<1&&l>=1&&((function(p){p.createObjectStore(Cu)})(e),(function(p){p.createObjectStore(hu,{keyPath:k5}),p.createObjectStore(Zs,{keyPath:p1,autoIncrement:!0}).createIndex(Fi,g1,{unique:!0}),p.createObjectStore(bo)})(e),aw(e),(function(p){p.createObjectStore(Pi)})(e));let d=Y.resolve();return a<3&&l>=3&&(a!==0&&((function(p){p.deleteObjectStore(wo),p.deleteObjectStore(vo),p.deleteObjectStore($i)})(e),aw(e)),d=d.next((()=>(function(p){const x=p.store($i),v={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Ve.min().toTimestamp(),targetCount:0};return x.put(Yh,v)})(c)))),a<4&&l>=4&&(a!==0&&(d=d.next((()=>(function(p,x){return x.store(Zs).J().next((b=>{p.deleteObjectStore(Zs),p.createObjectStore(Zs,{keyPath:p1,autoIncrement:!0}).createIndex(Fi,g1,{unique:!0});const N=x.store(Zs),S=b.map((z=>N.put(z)));return Y.waitFor(S)}))})(e,c)))),d=d.next((()=>{(function(p){p.createObjectStore(_o,{keyPath:q5})})(e)}))),a<5&&l>=5&&(d=d.next((()=>this.yi(c)))),a<6&&l>=6&&(d=d.next((()=>((function(p){p.createObjectStore(fu)})(e),this.wi(c))))),a<7&&l>=7&&(d=d.next((()=>this.Si(c)))),a<8&&l>=8&&(d=d.next((()=>this.bi(e,c)))),a<9&&l>=9&&(d=d.next((()=>{(function(p){p.objectStoreNames.contains("remoteDocumentChanges")&&p.deleteObjectStore("remoteDocumentChanges")})(e)}))),a<10&&l>=10&&(d=d.next((()=>this.Di(c)))),a<11&&l>=11&&(d=d.next((()=>{(function(p){p.createObjectStore(Nf,{keyPath:F5})})(e),(function(p){p.createObjectStore(Ef,{keyPath:H5})})(e)}))),a<12&&l>=12&&(d=d.next((()=>{(function(p){const x=p.createObjectStore(Sf,{keyPath:Z5});x.createIndex(Ig,J5,{unique:!1}),x.createIndex(V_,W5,{unique:!1})})(e)}))),a<13&&l>=13&&(d=d.next((()=>(function(p){const x=p.createObjectStore(Kh,{keyPath:V5});x.createIndex(Ih,O5),x.createIndex(D_,P5)})(e))).next((()=>this.Ci(e,c))).next((()=>e.deleteObjectStore(Pi)))),a<14&&l>=14&&(d=d.next((()=>this.Fi(e,c)))),a<15&&l>=15&&(d=d.next((()=>(function(p){p.createObjectStore(m0,{keyPath:$5,autoIncrement:!0}).createIndex(Cg,G5,{unique:!1}),p.createObjectStore(Jc,{keyPath:Q5}).createIndex(k_,K5,{unique:!1}),p.createObjectStore(Wc,{keyPath:Y5}).createIndex(M_,X5,{unique:!1})})(e)))),a<16&&l>=16&&(d=d.next((()=>{t.objectStore(Jc).clear()})).next((()=>{t.objectStore(Wc).clear()}))),a<17&&l>=17&&(d=d.next((()=>{(function(p){p.createObjectStore(p0,{keyPath:eA})})(e)}))),a<18&&l>=18&&i_()&&(d=d.next((()=>{t.objectStore(Jc).clear()})).next((()=>{t.objectStore(Wc).clear()}))),d}wi(e){let t=0;return e.store(Pi).ee(((a,l)=>{t+=rf(l)})).next((()=>{const a={byteSize:t};return e.store(fu).put(Ag,a)}))}yi(e){const t=e.store(hu),a=e.store(Zs);return t.J().next((l=>Y.forEach(l,(c=>{const d=IDBKeyRange.bound([c.userId,Hi],[c.userId,c.lastAcknowledgedBatchId]);return a.J(Fi,d).next((m=>Y.forEach(m,(p=>{ke(p.userId===c.userId,18650,"Cannot process batch from unexpected user",{batchId:p.batchId});const x=zi(this.serializer,p);return z2(e,c.userId,x).next((()=>{}))}))))}))))}Si(e){const t=e.store(wo),a=e.store(Pi);return e.store($i).get(Yh).next((l=>{const c=[];return a.ee(((d,m)=>{const p=new dt(d),x=(function(b){return[0,zn(b)]})(p);c.push(t.get(x).next((v=>v?Y.resolve():(b=>t.put({targetId:0,path:zn(b),sequenceNumber:l.highestListenSequenceNumber}))(p))))})).next((()=>Y.waitFor(c)))}))}bi(e,t){e.createObjectStore(mu,{keyPath:B5});const a=t.store(mu),l=new A0,c=d=>{if(l.add(d)){const m=d.lastSegment(),p=d.popLast();return a.put({collectionId:m,parent:zn(p)})}};return t.store(Pi).ee({X:!0},((d,m)=>{const p=new dt(d);return c(p.popLast())})).next((()=>t.store(bo).ee({X:!0},(([d,m,p],x)=>{const v=Er(m);return c(v.popLast())}))))}Di(e){const t=e.store(vo);return t.ee(((a,l)=>{const c=Qc(l),d=M2(this.serializer,c);return t.put(d)}))}Ci(e,t){const a=t.store(Pi),l=[];return a.ee(((c,d)=>{const m=t.store(Kh),p=(function(b){return b.document?new Se(dt.fromString(b.document.name).popFirst(5)):b.noDocument?Se.fromSegments(b.noDocument.path):b.unknownDocument?Se.fromSegments(b.unknownDocument.path):Ce(36783)})(d).path.toArray(),x={prefixPath:p.slice(0,p.length-2),collectionGroup:p[p.length-2],documentId:p[p.length-1],readTime:d.readTime||[0,0],unknownDocument:d.unknownDocument,noDocument:d.noDocument,document:d.document,hasCommittedMutations:!!d.hasCommittedMutations};l.push(m.put(x))})).next((()=>Y.waitFor(l)))}Fi(e,t){const a=t.store(Zs),l=$2(this.serializer),c=new I0(Vf.mi,this.serializer.yt);return a.J().next((d=>{const m=new Map;return d.forEach((p=>{let x=m.get(p.userId)??Ge();zi(this.serializer,p).keys().forEach((v=>x=x.add(v))),m.set(p.userId,x)})),Y.forEach(m,((p,x)=>{const v=new Rn(x),b=kf.wt(this.serializer,v),N=c.getIndexManager(v),S=Mf.wt(v,this.serializer,N,c.referenceDelegate);return new G2(l,S,b,N).recalculateAndSaveOverlaysForDocumentKeys(new Dg(t,Os.ce),p).next()}))}))}}function aw(r){r.createObjectStore(wo,{keyPath:z5}).createIndex(f0,U5,{unique:!0}),r.createObjectStore(vo,{keyPath:"targetId"}).createIndex(R_,L5,{unique:!0}),r.createObjectStore($i)}const La="IndexedDbPersistence",ig=18e5,lg=5e3,og="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",_4="main";class D0{constructor(e,t,a,l,c,d,m,p,x,v,b=18){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=a,this.Mi=c,this.window=d,this.document=m,this.xi=x,this.Oi=v,this.Ni=b,this.ci=null,this.li=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Bi=null,this.inForeground=!1,this.Li=null,this.ki=null,this.qi=Number.NEGATIVE_INFINITY,this.Qi=N=>Promise.resolve(),!D0.v())throw new we(ie.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new c4(this,l),this.$i=t+_4,this.serializer=new k2(p),this.Ui=new Qa(this.$i,this.Ni,new w4(this.serializer)),this.hi=new ZA,this.Pi=new a4(this.referenceDelegate,this.serializer),this.remoteDocumentCache=$2(this.serializer),this.Ii=new XA,this.window&&this.window.localStorage?this.Ki=this.window.localStorage:(this.Ki=null,v===!1&&Kn(La,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Wi().then((()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new we(ie.FAILED_PRECONDITION,og);return this.Gi(),this.zi(),this.ji(),this.runTransaction("getHighestListenSequenceNumber","readonly",(e=>this.Pi.getHighestSequenceNumber(e)))})).then((e=>{this.ci=new Os(e,this.xi)})).then((()=>{this.li=!0})).catch((e=>(this.Ui&&this.Ui.close(),Promise.reject(e))))}Ji(e){return this.Qi=async t=>{if(this.started)return e(t)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ui.$((async t=>{t.newVersion===null&&await e()}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.Mi.enqueueAndForget((async()=>{this.started&&await this.Wi()})))}Wi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(e=>xh(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next((()=>{if(this.isPrimary)return this.Hi(e).next((t=>{t||(this.isPrimary=!1,this.Mi.enqueueRetryable((()=>this.Qi(!1))))}))})).next((()=>this.Yi(e))).next((t=>this.isPrimary&&!t?this.Zi(e).next((()=>!1)):!!t&&this.Xi(e).next((()=>!0)))))).catch((e=>{if(ii(e))return ge(La,"Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return ge(La,"Releasing owner lease after error during lease refresh",e),!1})).then((e=>{this.isPrimary!==e&&this.Mi.enqueueRetryable((()=>this.Qi(e))),this.isPrimary=e}))}Hi(e){return Fc(e).get(to).next((t=>Y.resolve(this.es(t))))}ts(e){return xh(e).delete(this.clientId)}async ns(){if(this.isPrimary&&!this.rs(this.qi,ig)){this.qi=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(t=>{const a=xn(t,_o);return a.J().next((l=>{const c=this.ss(l,ig),d=l.filter((m=>c.indexOf(m)===-1));return Y.forEach(d,(m=>a.delete(m.clientId))).next((()=>d))}))})).catch((()=>[]));if(this.Ki)for(const t of e)this.Ki.removeItem(this._s(t.clientId))}}ji(){this.ki=this.Mi.enqueueAfterDelay("client_metadata_refresh",4e3,(()=>this.Wi().then((()=>this.ns())).then((()=>this.ji()))))}es(e){return!!e&&e.ownerId===this.clientId}Yi(e){return this.Oi?Y.resolve(!0):Fc(e).get(to).next((t=>{if(t!==null&&this.rs(t.leaseTimestampMs,lg)&&!this.us(t.ownerId)){if(this.es(t)&&this.networkEnabled)return!0;if(!this.es(t)){if(!t.allowTabSynchronization)throw new we(ie.FAILED_PRECONDITION,og);return!1}}return!(!this.networkEnabled||!this.inForeground)||xh(e).J().next((a=>this.ss(a,lg).find((l=>{if(this.clientId!==l.clientId){const c=!this.networkEnabled&&l.networkEnabled,d=!this.inForeground&&l.inForeground,m=this.networkEnabled===l.networkEnabled;if(c||d&&m)return!0}return!1}))===void 0))})).next((t=>(this.isPrimary!==t&&ge(La,`Client ${t?"is":"is not"} eligible for a primary lease.`),t)))}async shutdown(){this.li=!1,this.cs(),this.ki&&(this.ki.cancel(),this.ki=null),this.ls(),this.hs(),await this.Ui.runTransaction("shutdown","readwrite",[Cu,_o],(e=>{const t=new Dg(e,Os.ce);return this.Zi(t).next((()=>this.ts(t)))})),this.Ui.close(),this.Ps()}ss(e,t){return e.filter((a=>this.rs(a.updateTimeMs,t)&&!this.us(a.clientId)))}Ts(){return this.runTransaction("getActiveClients","readonly",(e=>xh(e).J().next((t=>this.ss(t,ig).map((a=>a.clientId))))))}get started(){return this.li}getGlobalsCache(){return this.hi}getMutationQueue(e,t){return Mf.wt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new r4(e,this.serializer.yt.databaseId)}getDocumentOverlayCache(e){return kf.wt(this.serializer,e)}getBundleCache(){return this.Ii}runTransaction(e,t,a){ge(La,"Starting transaction:",e);const l=t==="readonly"?"readonly":"readwrite",c=(function(p){return p===18?sA:p===17?z_:p===16?nA:p===15?g0:p===14?L_:p===13?P_:p===12?tA:p===11?O_:void Ce(60245)})(this.Ni);let d;return this.Ui.runTransaction(e,l,c,(m=>(d=new Dg(m,this.ci?this.ci.next():Os.ce),t==="readwrite-primary"?this.Hi(d).next((p=>!!p||this.Yi(d))).next((p=>{if(!p)throw Kn(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Mi.enqueueRetryable((()=>this.Qi(!1))),new we(ie.FAILED_PRECONDITION,j_);return a(d)})).next((p=>this.Xi(d).next((()=>p)))):this.Is(d).next((()=>a(d)))))).then((m=>(d.raiseOnCommittedEvent(),m)))}Is(e){return Fc(e).get(to).next((t=>{if(t!==null&&this.rs(t.leaseTimestampMs,lg)&&!this.us(t.ownerId)&&!this.es(t)&&!(this.Oi||this.allowTabSynchronization&&t.allowTabSynchronization))throw new we(ie.FAILED_PRECONDITION,og)}))}Xi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Fc(e).put(to,t)}static v(){return Qa.v()}Zi(e){const t=Fc(e);return t.get(to).next((a=>this.es(a)?(ge(La,"Releasing primary lease."),t.delete(to)):Y.resolve()))}rs(e,t){const a=Date.now();return!(e<a-t)&&(!(e>a)||(Kn(`Detected an update time that is in the future: ${e} > ${a}`),!1))}Gi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Li=()=>{this.Mi.enqueueAndForget((()=>(this.inForeground=this.document.visibilityState==="visible",this.Wi())))},this.document.addEventListener("visibilitychange",this.Li),this.inForeground=this.document.visibilityState==="visible")}ls(){this.Li&&(this.document.removeEventListener("visibilitychange",this.Li),this.Li=null)}zi(){var e;typeof((e=this.window)==null?void 0:e.addEventListener)=="function"&&(this.Bi=()=>{this.cs();const t=/(?:Version|Mobile)\/1[456]/;a_()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.Mi.enterRestrictedMode(!0),this.Mi.enqueueAndForget((()=>this.shutdown()))},this.window.addEventListener("pagehide",this.Bi))}hs(){this.Bi&&(this.window.removeEventListener("pagehide",this.Bi),this.Bi=null)}us(e){var t;try{const a=((t=this.Ki)==null?void 0:t.getItem(this._s(e)))!==null;return ge(La,`Client '${e}' ${a?"is":"is not"} zombied in LocalStorage`),a}catch(a){return Kn(La,"Failed to get zombied client id.",a),!1}}cs(){if(this.Ki)try{this.Ki.setItem(this._s(this.clientId),String(Date.now()))}catch(e){Kn("Failed to set zombie client id.",e)}}Ps(){if(this.Ki)try{this.Ki.removeItem(this._s(this.clientId))}catch{}}_s(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Fc(r){return xn(r,Cu)}function xh(r){return xn(r,_o)}function N4(r,e){let t=r.projectId;return r.isDefaultDatabase||(t+="."+r.database),"firestore/"+e+"/"+t+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R0{constructor(e,t,a,l){this.targetId=e,this.fromCache=t,this.Es=a,this.ds=l}static As(e,t){let a=Ge(),l=Ge();for(const c of t.docChanges)switch(c.type){case 0:a=a.add(c.doc.key);break;case 1:l=l.add(c.doc.key)}return new R0(e,t.fromCache,a,l)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E4{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q2{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return a_()?8:C_(qh())>0?6:4})()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,a,l){const c={result:null};return this.ys(e,t).next((d=>{c.result=d})).next((()=>{if(!c.result)return this.ws(e,t,l,a).next((d=>{c.result=d}))})).next((()=>{if(c.result)return;const d=new E4;return this.Ss(e,t,d).next((m=>{if(c.result=m,this.Vs)return this.bs(e,t,d,m.size)}))})).next((()=>c.result))}bs(e,t,a,l){return a.documentReadCount<this.fs?(co()<=nt.DEBUG&&ge("QueryEngine","SDK will not create cache indexes for query:",uo(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),Y.resolve()):(co()<=nt.DEBUG&&ge("QueryEngine","Query:",uo(t),"scans",a.documentReadCount,"local documents and returns",l,"documents as results."),a.documentReadCount>this.gs*l?(co()<=nt.DEBUG&&ge("QueryEngine","The SDK decides to create cache indexes for query:",uo(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Ls(t))):Y.resolve())}ys(e,t){if(C1(t))return Y.resolve(null);let a=Ls(t);return this.indexManager.getIndexType(e,a).next((l=>l===0?null:(t.limit!==null&&l===1&&(t=Wh(t,null,"F"),a=Ls(t)),this.indexManager.getDocumentsMatchingTarget(e,a).next((c=>{const d=Ge(...c);return this.ps.getDocuments(e,d).next((m=>this.indexManager.getMinOffset(e,a).next((p=>{const x=this.Ds(t,m);return this.Cs(t,x,d,p.readTime)?this.ys(e,Wh(t,null,"F")):this.vs(e,x,t,p)}))))})))))}ws(e,t,a,l){return C1(t)||l.isEqual(Ve.min())?Y.resolve(null):this.ps.getDocuments(e,a).next((c=>{const d=this.Ds(t,c);return this.Cs(t,d,a,l)?Y.resolve(null):(co()<=nt.DEBUG&&ge("QueryEngine","Re-using previous result from %s to execute query: %s",l.toString(),uo(t)),this.vs(e,d,t,T5(l,cu)).next((m=>m)))}))}Ds(e,t){let a=new bt(a2(e));return t.forEach(((l,c)=>{Du(e,c)&&(a=a.add(c))})),a}Cs(e,t,a,l){if(e.limit===null)return!1;if(a.size!==t.size)return!0;const c=e.limitType==="F"?t.last():t.first();return!!c&&(c.hasPendingWrites||c.version.compareTo(l)>0)}Ss(e,t,a){return co()<=nt.DEBUG&&ge("QueryEngine","Using full collection scan to execute query:",uo(t)),this.ps.getDocumentsMatchingQuery(e,t,bs.min(),a)}vs(e,t,a,l){return this.ps.getDocumentsMatchingQuery(e,a,l).next((c=>(t.forEach((d=>{c=c.insert(d.key,d)})),c)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k0="LocalStore",S4=3e8;class T4{constructor(e,t,a,l){this.persistence=e,this.Fs=t,this.serializer=l,this.Ms=new zt(Le),this.xs=new ta((c=>Zi(c)),Iu),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(a)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new G2(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ms)))}}function K2(r,e,t,a){return new T4(r,e,t,a)}async function Y2(r,e){const t=ze(r);return await t.persistence.runTransaction("Handle user change","readonly",(a=>{let l;return t.mutationQueue.getAllMutationBatches(a).next((c=>(l=c,t.Bs(e),t.mutationQueue.getAllMutationBatches(a)))).next((c=>{const d=[],m=[];let p=Ge();for(const x of l){d.push(x.batchId);for(const v of x.mutations)p=p.add(v.key)}for(const x of c){m.push(x.batchId);for(const v of x.mutations)p=p.add(v.key)}return t.localDocuments.getDocuments(a,p).next((x=>({Ls:x,removedBatchIds:d,addedBatchIds:m})))}))}))}function j4(r,e){const t=ze(r);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(a=>{const l=e.batch.keys(),c=t.Ns.newChangeBuffer({trackRemovals:!0});return(function(m,p,x,v){const b=x.batch,N=b.keys();let S=Y.resolve();return N.forEach((z=>{S=S.next((()=>v.getEntry(p,z))).next((O=>{const P=x.docVersions.get(z);ke(P!==null,48541),O.version.compareTo(P)<0&&(b.applyToRemoteDocument(O,x),O.isValidDocument()&&(O.setReadTime(x.commitVersion),v.addEntry(O)))}))})),S.next((()=>m.mutationQueue.removeMutationBatch(p,b)))})(t,a,e,c).next((()=>c.apply(a))).next((()=>t.mutationQueue.performConsistencyCheck(a))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(a,l,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(a,(function(m){let p=Ge();for(let x=0;x<m.mutationResults.length;++x)m.mutationResults[x].transformResults.length>0&&(p=p.add(m.batch.mutations[x].key));return p})(e)))).next((()=>t.localDocuments.getDocuments(a,l)))}))}function X2(r){const e=ze(r);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Pi.getLastRemoteSnapshotVersion(t)))}function A4(r,e){const t=ze(r),a=e.snapshotVersion;let l=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(c=>{const d=t.Ns.newChangeBuffer({trackRemovals:!0});l=t.Ms;const m=[];e.targetChanges.forEach(((v,b)=>{const N=l.get(b);if(!N)return;m.push(t.Pi.removeMatchingKeys(c,v.removedDocuments,b).next((()=>t.Pi.addMatchingKeys(c,v.addedDocuments,b))));let S=N.withSequenceNumber(c.currentSequenceNumber);e.targetMismatches.get(b)!==null?S=S.withResumeToken(on.EMPTY_BYTE_STRING,Ve.min()).withLastLimboFreeSnapshotVersion(Ve.min()):v.resumeToken.approximateByteSize()>0&&(S=S.withResumeToken(v.resumeToken,a)),l=l.insert(b,S),(function(O,P,C){return O.resumeToken.approximateByteSize()===0||P.snapshotVersion.toMicroseconds()-O.snapshotVersion.toMicroseconds()>=S4?!0:C.addedDocuments.size+C.modifiedDocuments.size+C.removedDocuments.size>0})(N,S,v)&&m.push(t.Pi.updateTargetData(c,S))}));let p=ys(),x=Ge();if(e.documentUpdates.forEach((v=>{e.resolvedLimboDocuments.has(v)&&m.push(t.persistence.referenceDelegate.updateLimboDocument(c,v))})),m.push(C4(c,d,e.documentUpdates).next((v=>{p=v.ks,x=v.qs}))),!a.isEqual(Ve.min())){const v=t.Pi.getLastRemoteSnapshotVersion(c).next((b=>t.Pi.setTargetsMetadata(c,c.currentSequenceNumber,a)));m.push(v)}return Y.waitFor(m).next((()=>d.apply(c))).next((()=>t.localDocuments.getLocalViewOfDocuments(c,p,x))).next((()=>p))})).then((c=>(t.Ms=l,c)))}function C4(r,e,t){let a=Ge(),l=Ge();return t.forEach((c=>a=a.add(c))),e.getEntries(r,a).next((c=>{let d=ys();return t.forEach(((m,p)=>{const x=c.get(m);p.isFoundDocument()!==x.isFoundDocument()&&(l=l.add(m)),p.isNoDocument()&&p.version.isEqual(Ve.min())?(e.removeEntry(m,p.readTime),d=d.insert(m,p)):!x.isValidDocument()||p.version.compareTo(x.version)>0||p.version.compareTo(x.version)===0&&x.hasPendingWrites?(e.addEntry(p),d=d.insert(m,p)):ge(k0,"Ignoring outdated watch update for ",m,". Current version:",x.version," Watch version:",p.version)})),{ks:d,qs:l}}))}function I4(r,e){const t=ze(r);return t.persistence.runTransaction("Get next mutation batch","readonly",(a=>(e===void 0&&(e=Hi),t.mutationQueue.getNextMutationBatchAfterBatchId(a,e))))}function D4(r,e){const t=ze(r);return t.persistence.runTransaction("Allocate target","readwrite",(a=>{let l;return t.Pi.getTargetData(a,e).next((c=>c?(l=c,Y.resolve(l)):t.Pi.allocateTargetId(a).next((d=>(l=new Kr(e,d,"TargetPurposeListen",a.currentSequenceNumber),t.Pi.addTargetData(a,l).next((()=>l)))))))})).then((a=>{const l=t.Ms.get(a.targetId);return(l===null||a.snapshotVersion.compareTo(l.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(a.targetId,a),t.xs.set(e,a.targetId)),a}))}async function $g(r,e,t){const a=ze(r),l=a.Ms.get(e),c=t?"readwrite":"readwrite-primary";try{t||await a.persistence.runTransaction("Release target",c,(d=>a.persistence.referenceDelegate.removeTarget(d,l)))}catch(d){if(!ii(d))throw d;ge(k0,`Failed to update sequence numbers for target ${e}: ${d}`)}a.Ms=a.Ms.remove(e),a.xs.delete(l.target)}function iw(r,e,t){const a=ze(r);let l=Ve.min(),c=Ge();return a.persistence.runTransaction("Execute query","readwrite",(d=>(function(p,x,v){const b=ze(p),N=b.xs.get(v);return N!==void 0?Y.resolve(b.Ms.get(N)):b.Pi.getTargetData(x,v)})(a,d,Ls(e)).next((m=>{if(m)return l=m.lastLimboFreeSnapshotVersion,a.Pi.getMatchingKeysForTargetId(d,m.targetId).next((p=>{c=p}))})).next((()=>a.Fs.getDocumentsMatchingQuery(d,e,t?l:Ve.min(),t?c:Ge()))).next((m=>(R4(a,yA(e),m),{documents:m,Qs:c})))))}function R4(r,e,t){let a=r.Os.get(e)||Ve.min();t.forEach(((l,c)=>{c.readTime.compareTo(a)>0&&(a=c.readTime)})),r.Os.set(e,a)}class lw{constructor(){this.activeTargetIds=EA()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Z2{constructor(){this.Mo=new lw,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,a){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,a){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new lw,Promise.resolve()}handleUserChange(e,t,a){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k4{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ow="ConnectivityMonitor";class cw{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){ge(ow,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){ge(ow,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let yh=null;function Gg(){return yh===null?yh=(function(){return 268435456+Math.round(2147483648*Math.random())})():yh++,"0x"+yh.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cg="RestConnection",M4={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class V4{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",a=encodeURIComponent(this.databaseId.projectId),l=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${a}/databases/${l}`,this.Wo=this.databaseId.database===Xh?`project_id=${a}`:`project_id=${a}&database_id=${l}`}Go(e,t,a,l,c){const d=Gg(),m=this.zo(e,t.toUriEncodedString());ge(cg,`Sending RPC '${e}' ${d}:`,m,a);const p={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(p,l,c);const{host:x}=new URL(m),v=l0(x);return this.Jo(e,m,p,a,v).then((b=>(ge(cg,`Received RPC '${e}' ${d}: `,b),b)),(b=>{throw Yi(cg,`RPC '${e}' ${d} failed with error: `,b,"url: ",m,"request:",a),b}))}Ho(e,t,a,l,c,d){return this.Go(e,t,a,l,c)}jo(e,t,a){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+ko})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((l,c)=>e[c]=l)),a&&a.headers.forEach(((l,c)=>e[c]=l))}zo(e,t){const a=M4[e];return`${this.Uo}/v1/${t}:${a}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O4{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const On="WebChannelConnection";class P4 extends V4{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,a,l,c){const d=Gg();return new Promise(((m,p)=>{const x=new g_;x.setWithCredentials(!0),x.listenOnce(x_.COMPLETE,(()=>{try{switch(x.getLastErrorCode()){case jh.NO_ERROR:const b=x.getResponseJson();ge(On,`XHR for RPC '${e}' ${d} received:`,JSON.stringify(b)),m(b);break;case jh.TIMEOUT:ge(On,`RPC '${e}' ${d} timed out`),p(new we(ie.DEADLINE_EXCEEDED,"Request time out"));break;case jh.HTTP_ERROR:const N=x.getStatus();if(ge(On,`RPC '${e}' ${d} failed with status:`,N,"response text:",x.getResponseText()),N>0){let S=x.getResponseJson();Array.isArray(S)&&(S=S[0]);const z=S==null?void 0:S.error;if(z&&z.status&&z.message){const O=(function(C){const L=C.toLowerCase().replace(/_/g,"-");return Object.values(ie).indexOf(L)>=0?L:ie.UNKNOWN})(z.status);p(new we(O,z.message))}else p(new we(ie.UNKNOWN,"Server responded with status "+x.getStatus()))}else p(new we(ie.UNAVAILABLE,"Connection failed."));break;default:Ce(9055,{l_:e,streamId:d,h_:x.getLastErrorCode(),P_:x.getLastError()})}}finally{ge(On,`RPC '${e}' ${d} completed.`)}}));const v=JSON.stringify(l);ge(On,`RPC '${e}' ${d} sending request:`,l),x.send(t,"POST",v,a,15)}))}T_(e,t,a){const l=Gg(),c=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],d=v_(),m=b_(),p={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},x=this.longPollingOptions.timeoutSeconds;x!==void 0&&(p.longPollingTimeout=Math.round(1e3*x)),this.useFetchStreams&&(p.useFetchStreams=!0),this.jo(p.initMessageHeaders,t,a),p.encodeInitMessageHeaders=!0;const v=c.join("");ge(On,`Creating RPC '${e}' stream ${l}: ${v}`,p);const b=d.createWebChannel(v,p);this.I_(b);let N=!1,S=!1;const z=new O4({Yo:P=>{S?ge(On,`Not sending because RPC '${e}' stream ${l} is closed:`,P):(N||(ge(On,`Opening RPC '${e}' stream ${l} transport.`),b.open(),N=!0),ge(On,`RPC '${e}' stream ${l} sending:`,P),b.send(P))},Zo:()=>b.close()}),O=(P,C,L)=>{P.listen(C,(M=>{try{L(M)}catch(F){setTimeout((()=>{throw F}),0)}}))};return O(b,Hc.EventType.OPEN,(()=>{S||(ge(On,`RPC '${e}' stream ${l} transport opened.`),z.o_())})),O(b,Hc.EventType.CLOSE,(()=>{S||(S=!0,ge(On,`RPC '${e}' stream ${l} transport closed`),z.a_(),this.E_(b))})),O(b,Hc.EventType.ERROR,(P=>{S||(S=!0,Yi(On,`RPC '${e}' stream ${l} transport errored. Name:`,P.name,"Message:",P.message),z.a_(new we(ie.UNAVAILABLE,"The operation could not be completed")))})),O(b,Hc.EventType.MESSAGE,(P=>{var C;if(!S){const L=P.data[0];ke(!!L,16349);const M=L,F=(M==null?void 0:M.error)||((C=M[0])==null?void 0:C.error);if(F){ge(On,`RPC '${e}' stream ${l} received error:`,F);const Z=F.status;let te=(function(k){const R=rn[k];if(R!==void 0)return b2(R)})(Z),E=F.message;te===void 0&&(te=ie.INTERNAL,E="Unknown error status: "+Z+" with message "+F.message),S=!0,z.a_(new we(te,E)),b.close()}else ge(On,`RPC '${e}' stream ${l} received:`,L),z.u_(L)}})),O(m,y_.STAT_EVENT,(P=>{P.stat===Sg.PROXY?ge(On,`RPC '${e}' stream ${l} detected buffering proxy`):P.stat===Sg.NOPROXY&&ge(On,`RPC '${e}' stream ${l} detected no buffering proxy`)})),setTimeout((()=>{z.__()}),0),z}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((t=>t===e))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function L4(){return typeof window<"u"?window:null}function Ph(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Of(r){return new zA(r,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J2{constructor(e,t,a=1e3,l=1.5,c=6e4){this.Mi=e,this.timerId=t,this.d_=a,this.A_=l,this.R_=c,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),a=Math.max(0,Date.now()-this.f_),l=Math.max(0,t-a);l>0&&ge("ExponentialBackoff",`Backing off for ${l} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${a} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,l,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uw="PersistentStream";class W2{constructor(e,t,a,l,c,d,m,p){this.Mi=e,this.S_=a,this.b_=l,this.connection=c,this.authCredentialsProvider=d,this.appCheckCredentialsProvider=m,this.listener=p,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new J2(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===ie.RESOURCE_EXHAUSTED?(Kn(t.toString()),Kn("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===ie.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([a,l])=>{this.D_===t&&this.G_(a,l)}),(a=>{e((()=>{const l=new we(ie.UNKNOWN,"Fetching auth token failed: "+a.message);return this.z_(l)}))}))}G_(e,t){const a=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo((()=>{a((()=>this.listener.Xo()))})),this.stream.t_((()=>{a((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((l=>{a((()=>this.z_(l)))})),this.stream.onMessage((l=>{a((()=>++this.F_==1?this.J_(l):this.onNext(l)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return ge(uw,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget((()=>this.D_===e?t():(ge(uw,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class z4 extends W2{constructor(e,t,a,l,c,d){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,a,l,d),this.serializer=c}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=qA(this.serializer,e),a=(function(c){if(!("targetChange"in c))return Ve.min();const d=c.targetChange;return d.targetIds&&d.targetIds.length?Ve.min():d.readTime?Yn(d.readTime):Ve.min()})(e);return this.listener.H_(t,a)}Y_(e){const t={};t.database=Ug(this.serializer),t.addTarget=(function(c,d){let m;const p=d.target;if(m=Zh(p)?{documents:j2(c,p)}:{query:A2(c,p).ft},m.targetId=d.targetId,d.resumeToken.approximateByteSize()>0){m.resumeToken=_2(c,d.resumeToken);const x=Lg(c,d.expectedCount);x!==null&&(m.expectedCount=x)}else if(d.snapshotVersion.compareTo(Ve.min())>0){m.readTime=Io(c,d.snapshotVersion.toTimestamp());const x=Lg(c,d.expectedCount);x!==null&&(m.expectedCount=x)}return m})(this.serializer,e);const a=HA(this.serializer,e);a&&(t.labels=a),this.q_(t)}Z_(e){const t={};t.database=Ug(this.serializer),t.removeTarget=e,this.q_(t)}}class U4 extends W2{constructor(e,t,a,l,c,d){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,a,l,d),this.serializer=c}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return ke(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,ke(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){ke(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=FA(e.writeResults,e.commitTime),a=Yn(e.commitTime);return this.listener.na(a,t)}ra(){const e={};e.database=Ug(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((a=>tf(this.serializer,a)))};this.q_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B4{}class q4 extends B4{constructor(e,t,a,l){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=a,this.serializer=l,this.ia=!1}sa(){if(this.ia)throw new we(ie.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,a,l){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,d])=>this.connection.Go(e,zg(t,a),l,c,d))).catch((c=>{throw c.name==="FirebaseError"?(c.code===ie.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new we(ie.UNKNOWN,c.toString())}))}Ho(e,t,a,l,c){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([d,m])=>this.connection.Ho(e,zg(t,a),l,d,m,c))).catch((d=>{throw d.name==="FirebaseError"?(d.code===ie.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),d):new we(ie.UNKNOWN,d.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class F4{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Kn(t),this.aa=!1):ge("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tl="RemoteStore";class H4{constructor(e,t,a,l,c){this.localStore=e,this.datastore=t,this.asyncQueue=a,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=c,this.Aa.Oo((d=>{a.enqueueAndForget((async()=>{ll(this)&&(ge(tl,"Restarting streams for network reachability change."),await(async function(p){const x=ze(p);x.Ea.add(4),await Mu(x),x.Ra.set("Unknown"),x.Ea.delete(4),await Pf(x)})(this))}))})),this.Ra=new F4(a,l)}}async function Pf(r){if(ll(r))for(const e of r.da)await e(!0)}async function Mu(r){for(const e of r.da)await e(!1)}function eN(r,e){const t=ze(r);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),P0(t)?O0(t):Oo(t).O_()&&V0(t,e))}function M0(r,e){const t=ze(r),a=Oo(t);t.Ia.delete(e),a.O_()&&tN(t,e),t.Ia.size===0&&(a.O_()?a.L_():ll(t)&&t.Ra.set("Unknown"))}function V0(r,e){if(r.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ve.min())>0){const t=r.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Oo(r).Y_(e)}function tN(r,e){r.Va.Ue(e),Oo(r).Z_(e)}function O0(r){r.Va=new VA({getRemoteKeysForTarget:e=>r.remoteSyncer.getRemoteKeysForTarget(e),At:e=>r.Ia.get(e)||null,ht:()=>r.datastore.serializer.databaseId}),Oo(r).start(),r.Ra.ua()}function P0(r){return ll(r)&&!Oo(r).x_()&&r.Ia.size>0}function ll(r){return ze(r).Ea.size===0}function nN(r){r.Va=void 0}async function $4(r){r.Ra.set("Online")}async function G4(r){r.Ia.forEach(((e,t)=>{V0(r,e)}))}async function Q4(r,e){nN(r),P0(r)?(r.Ra.ha(e),O0(r)):r.Ra.set("Unknown")}async function K4(r,e,t){if(r.Ra.set("Online"),e instanceof w2&&e.state===2&&e.cause)try{await(async function(l,c){const d=c.cause;for(const m of c.targetIds)l.Ia.has(m)&&(await l.remoteSyncer.rejectListen(m,d),l.Ia.delete(m),l.Va.removeTarget(m))})(r,e)}catch(a){ge(tl,"Failed to remove targets %s: %s ",e.targetIds.join(","),a),await lf(r,a)}else if(e instanceof Vh?r.Va.Ze(e):e instanceof v2?r.Va.st(e):r.Va.tt(e),!t.isEqual(Ve.min()))try{const a=await X2(r.localStore);t.compareTo(a)>=0&&await(function(c,d){const m=c.Va.Tt(d);return m.targetChanges.forEach(((p,x)=>{if(p.resumeToken.approximateByteSize()>0){const v=c.Ia.get(x);v&&c.Ia.set(x,v.withResumeToken(p.resumeToken,d))}})),m.targetMismatches.forEach(((p,x)=>{const v=c.Ia.get(p);if(!v)return;c.Ia.set(p,v.withResumeToken(on.EMPTY_BYTE_STRING,v.snapshotVersion)),tN(c,p);const b=new Kr(v.target,p,x,v.sequenceNumber);V0(c,b)})),c.remoteSyncer.applyRemoteEvent(m)})(r,t)}catch(a){ge(tl,"Failed to raise snapshot:",a),await lf(r,a)}}async function lf(r,e,t){if(!ii(e))throw e;r.Ea.add(1),await Mu(r),r.Ra.set("Offline"),t||(t=()=>X2(r.localStore)),r.asyncQueue.enqueueRetryable((async()=>{ge(tl,"Retrying IndexedDB access"),await t(),r.Ea.delete(1),await Pf(r)}))}function sN(r,e){return e().catch((t=>lf(r,t,e)))}async function Vu(r){const e=ze(r),t=ti(e);let a=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Hi;for(;Y4(e);)try{const l=await I4(e.localStore,a);if(l===null){e.Ta.length===0&&t.L_();break}a=l.batchId,X4(e,l)}catch(l){await lf(e,l)}rN(e)&&aN(e)}function Y4(r){return ll(r)&&r.Ta.length<10}function X4(r,e){r.Ta.push(e);const t=ti(r);t.O_()&&t.X_&&t.ea(e.mutations)}function rN(r){return ll(r)&&!ti(r).x_()&&r.Ta.length>0}function aN(r){ti(r).start()}async function Z4(r){ti(r).ra()}async function J4(r){const e=ti(r);for(const t of r.Ta)e.ea(t.mutations)}async function W4(r,e,t){const a=r.Ta.shift(),l=N0.from(a,e,t);await sN(r,(()=>r.remoteSyncer.applySuccessfulWrite(l))),await Vu(r)}async function e3(r,e){e&&ti(r).X_&&await(async function(a,l){if((function(d){return RA(d)&&d!==ie.ABORTED})(l.code)){const c=a.Ta.shift();ti(a).B_(),await sN(a,(()=>a.remoteSyncer.rejectFailedWrite(c.batchId,l))),await Vu(a)}})(r,e),rN(r)&&aN(r)}async function dw(r,e){const t=ze(r);t.asyncQueue.verifyOperationInProgress(),ge(tl,"RemoteStore received new credentials");const a=ll(t);t.Ea.add(3),await Mu(t),a&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await Pf(t)}async function t3(r,e){const t=ze(r);e?(t.Ea.delete(2),await Pf(t)):e||(t.Ea.add(2),await Mu(t),t.Ra.set("Unknown"))}function Oo(r){return r.ma||(r.ma=(function(t,a,l){const c=ze(t);return c.sa(),new z4(a,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,l)})(r.datastore,r.asyncQueue,{Xo:$4.bind(null,r),t_:G4.bind(null,r),r_:Q4.bind(null,r),H_:K4.bind(null,r)}),r.da.push((async e=>{e?(r.ma.B_(),P0(r)?O0(r):r.Ra.set("Unknown")):(await r.ma.stop(),nN(r))}))),r.ma}function ti(r){return r.fa||(r.fa=(function(t,a,l){const c=ze(t);return c.sa(),new U4(a,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,l)})(r.datastore,r.asyncQueue,{Xo:()=>Promise.resolve(),t_:Z4.bind(null,r),r_:e3.bind(null,r),ta:J4.bind(null,r),na:W4.bind(null,r)}),r.da.push((async e=>{e?(r.fa.B_(),await Vu(r)):(await r.fa.stop(),r.Ta.length>0&&(ge(tl,`Stopping write stream with ${r.Ta.length} pending writes`),r.Ta=[]))}))),r.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L0{constructor(e,t,a,l,c){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=a,this.op=l,this.removalCallback=c,this.deferred=new Yr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((d=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,a,l,c){const d=Date.now()+a,m=new L0(e,t,d,l,c);return m.start(a),m}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new we(ie.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function z0(r,e){if(Kn("AsyncQueue",`${e}: ${r}`),ii(r))return new we(ie.UNAVAILABLE,`${e}: ${r}`);throw r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class go{static emptySet(e){return new go(e.comparator)}constructor(e){this.comparator=e?(t,a)=>e(t,a)||Se.comparator(t.key,a.key):(t,a)=>Se.comparator(t.key,a.key),this.keyedMap=$c(),this.sortedSet=new zt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,a)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof go)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),a=e.sortedSet.getIterator();for(;t.hasNext();){const l=t.getNext().key,c=a.getNext().key;if(!l.isEqual(c))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const a=new go;return a.comparator=this.comparator,a.keyedMap=e,a.sortedSet=t,a}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hw{constructor(){this.ga=new zt(Se.comparator)}track(e){const t=e.doc.key,a=this.ga.get(t);a?e.type!==0&&a.type===3?this.ga=this.ga.insert(t,e):e.type===3&&a.type!==1?this.ga=this.ga.insert(t,{type:a.type,doc:e.doc}):e.type===2&&a.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&a.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&a.type===0?this.ga=this.ga.remove(t):e.type===1&&a.type===2?this.ga=this.ga.insert(t,{type:1,doc:a.doc}):e.type===0&&a.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):Ce(63341,{Rt:e,pa:a}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,a)=>{e.push(a)})),e}}class Do{constructor(e,t,a,l,c,d,m,p,x){this.query=e,this.docs=t,this.oldDocs=a,this.docChanges=l,this.mutatedKeys=c,this.fromCache=d,this.syncStateChanged=m,this.excludesMetadataChanges=p,this.hasCachedResults=x}static fromInitialDocuments(e,t,a,l,c){const d=[];return t.forEach((m=>{d.push({type:0,doc:m})})),new Do(e,t,go.emptySet(t),d,a,l,!0,!1,c)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Cf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,a=e.docChanges;if(t.length!==a.length)return!1;for(let l=0;l<t.length;l++)if(t[l].type!==a[l].type||!t[l].doc.isEqual(a[l].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n3{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class s3{constructor(){this.queries=fw(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,a){const l=ze(t),c=l.queries;l.queries=fw(),c.forEach(((d,m)=>{for(const p of m.Sa)p.onError(a)}))})(this,new we(ie.ABORTED,"Firestore shutting down"))}}function fw(){return new ta((r=>r2(r)),Cf)}async function iN(r,e){const t=ze(r);let a=3;const l=e.query;let c=t.queries.get(l);c?!c.ba()&&e.Da()&&(a=2):(c=new n3,a=e.Da()?0:1);try{switch(a){case 0:c.wa=await t.onListen(l,!0);break;case 1:c.wa=await t.onListen(l,!1);break;case 2:await t.onFirstRemoteStoreListen(l)}}catch(d){const m=z0(d,`Initialization of query '${uo(e.query)}' failed`);return void e.onError(m)}t.queries.set(l,c),c.Sa.push(e),e.va(t.onlineState),c.wa&&e.Fa(c.wa)&&U0(t)}async function lN(r,e){const t=ze(r),a=e.query;let l=3;const c=t.queries.get(a);if(c){const d=c.Sa.indexOf(e);d>=0&&(c.Sa.splice(d,1),c.Sa.length===0?l=e.Da()?0:1:!c.ba()&&e.Da()&&(l=2))}switch(l){case 0:return t.queries.delete(a),t.onUnlisten(a,!0);case 1:return t.queries.delete(a),t.onUnlisten(a,!1);case 2:return t.onLastRemoteStoreUnlisten(a);default:return}}function r3(r,e){const t=ze(r);let a=!1;for(const l of e){const c=l.query,d=t.queries.get(c);if(d){for(const m of d.Sa)m.Fa(l)&&(a=!0);d.wa=l}}a&&U0(t)}function a3(r,e,t){const a=ze(r),l=a.queries.get(e);if(l)for(const c of l.Sa)c.onError(t);a.queries.delete(e)}function U0(r){r.Ca.forEach((e=>{e.next()}))}var Qg,mw;(mw=Qg||(Qg={})).Ma="default",mw.Cache="cache";class oN{constructor(e,t,a){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=a||{}}Fa(e){if(!this.options.includeMetadataChanges){const a=[];for(const l of e.docChanges)l.type!==3&&a.push(l);e=new Do(e.query,e.docs,e.oldDocs,a,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const a=t!=="Offline";return(!this.options.qa||!a)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=Do.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Qg.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cN{constructor(e){this.key=e}}class uN{constructor(e){this.key=e}}class i3{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Ge(),this.mutatedKeys=Ge(),this.eu=a2(e),this.tu=new go(this.eu)}get nu(){return this.Ya}ru(e,t){const a=t?t.iu:new hw,l=t?t.tu:this.tu;let c=t?t.mutatedKeys:this.mutatedKeys,d=l,m=!1;const p=this.query.limitType==="F"&&l.size===this.query.limit?l.last():null,x=this.query.limitType==="L"&&l.size===this.query.limit?l.first():null;if(e.inorderTraversal(((v,b)=>{const N=l.get(v),S=Du(this.query,b)?b:null,z=!!N&&this.mutatedKeys.has(N.key),O=!!S&&(S.hasLocalMutations||this.mutatedKeys.has(S.key)&&S.hasCommittedMutations);let P=!1;N&&S?N.data.isEqual(S.data)?z!==O&&(a.track({type:3,doc:S}),P=!0):this.su(N,S)||(a.track({type:2,doc:S}),P=!0,(p&&this.eu(S,p)>0||x&&this.eu(S,x)<0)&&(m=!0)):!N&&S?(a.track({type:0,doc:S}),P=!0):N&&!S&&(a.track({type:1,doc:N}),P=!0,(p||x)&&(m=!0)),P&&(S?(d=d.add(S),c=O?c.add(v):c.delete(v)):(d=d.delete(v),c=c.delete(v)))})),this.query.limit!==null)for(;d.size>this.query.limit;){const v=this.query.limitType==="F"?d.last():d.first();d=d.delete(v.key),c=c.delete(v.key),a.track({type:1,doc:v})}return{tu:d,iu:a,Cs:m,mutatedKeys:c}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,a,l){const c=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const d=e.iu.ya();d.sort(((v,b)=>(function(S,z){const O=P=>{switch(P){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ce(20277,{Rt:P})}};return O(S)-O(z)})(v.type,b.type)||this.eu(v.doc,b.doc))),this.ou(a),l=l??!1;const m=t&&!l?this._u():[],p=this.Xa.size===0&&this.current&&!l?1:0,x=p!==this.Za;return this.Za=p,d.length!==0||x?{snapshot:new Do(this.query,e.tu,c,d,e.mutatedKeys,p===0,x,!1,!!a&&a.resumeToken.approximateByteSize()>0),au:m}:{au:m}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new hw,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Ya=this.Ya.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ya=this.Ya.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Ge(),this.tu.forEach((a=>{this.uu(a.key)&&(this.Xa=this.Xa.add(a.key))}));const t=[];return e.forEach((a=>{this.Xa.has(a)||t.push(new uN(a))})),this.Xa.forEach((a=>{e.has(a)||t.push(new cN(a))})),t}cu(e){this.Ya=e.Qs,this.Xa=Ge();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return Do.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const B0="SyncEngine";class l3{constructor(e,t,a){this.query=e,this.targetId=t,this.view=a}}class o3{constructor(e){this.key=e,this.hu=!1}}class c3{constructor(e,t,a,l,c,d){this.localStore=e,this.remoteStore=t,this.eventManager=a,this.sharedClientState=l,this.currentUser=c,this.maxConcurrentLimboResolutions=d,this.Pu={},this.Tu=new ta((m=>r2(m)),Cf),this.Iu=new Map,this.Eu=new Set,this.du=new zt(Se.comparator),this.Au=new Map,this.Ru=new C0,this.Vu={},this.mu=new Map,this.fu=el.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function u3(r,e,t=!0){const a=gN(r);let l;const c=a.Tu.get(e);return c?(a.sharedClientState.addLocalQueryTarget(c.targetId),l=c.view.lu()):l=await dN(a,e,t,!0),l}async function d3(r,e){const t=gN(r);await dN(t,e,!0,!1)}async function dN(r,e,t,a){const l=await D4(r.localStore,Ls(e)),c=l.targetId,d=r.sharedClientState.addLocalQueryTarget(c,t);let m;return a&&(m=await h3(r,e,c,d==="current",l.resumeToken)),r.isPrimaryClient&&t&&eN(r.remoteStore,l),m}async function h3(r,e,t,a,l){r.pu=(b,N,S)=>(async function(O,P,C,L){let M=P.view.ru(C);M.Cs&&(M=await iw(O.localStore,P.query,!1).then((({documents:E})=>P.view.ru(E,M))));const F=L&&L.targetChanges.get(P.targetId),Z=L&&L.targetMismatches.get(P.targetId)!=null,te=P.view.applyChanges(M,O.isPrimaryClient,F,Z);return gw(O,P.targetId,te.au),te.snapshot})(r,b,N,S);const c=await iw(r.localStore,e,!0),d=new i3(e,c.Qs),m=d.ru(c.documents),p=ku.createSynthesizedTargetChangeForCurrentChange(t,a&&r.onlineState!=="Offline",l),x=d.applyChanges(m,r.isPrimaryClient,p);gw(r,t,x.au);const v=new l3(e,t,d);return r.Tu.set(e,v),r.Iu.has(t)?r.Iu.get(t).push(e):r.Iu.set(t,[e]),x.snapshot}async function f3(r,e,t){const a=ze(r),l=a.Tu.get(e),c=a.Iu.get(l.targetId);if(c.length>1)return a.Iu.set(l.targetId,c.filter((d=>!Cf(d,e)))),void a.Tu.delete(e);a.isPrimaryClient?(a.sharedClientState.removeLocalQueryTarget(l.targetId),a.sharedClientState.isActiveQueryTarget(l.targetId)||await $g(a.localStore,l.targetId,!1).then((()=>{a.sharedClientState.clearQueryState(l.targetId),t&&M0(a.remoteStore,l.targetId),Kg(a,l.targetId)})).catch(il)):(Kg(a,l.targetId),await $g(a.localStore,l.targetId,!0))}async function m3(r,e){const t=ze(r),a=t.Tu.get(e),l=t.Iu.get(a.targetId);t.isPrimaryClient&&l.length===1&&(t.sharedClientState.removeLocalQueryTarget(a.targetId),M0(t.remoteStore,a.targetId))}async function p3(r,e,t){const a=xN(r);try{const l=await(function(d,m){const p=ze(d),x=xt.now(),v=m.reduce(((S,z)=>S.add(z.key)),Ge());let b,N;return p.persistence.runTransaction("Locally write mutations","readwrite",(S=>{let z=ys(),O=Ge();return p.Ns.getEntries(S,v).next((P=>{z=P,z.forEach(((C,L)=>{L.isValidDocument()||(O=O.add(C))}))})).next((()=>p.localDocuments.getOverlayedDocuments(S,z))).next((P=>{b=P;const C=[];for(const L of m){const M=IA(L,b.get(L.key).overlayedDocument);M!=null&&C.push(new na(L.key,M,Y_(M.value.mapValue),Sn.exists(!0)))}return p.mutationQueue.addMutationBatch(S,x,C,m)})).next((P=>{N=P;const C=P.applyToLocalDocumentSet(b,O);return p.documentOverlayCache.saveOverlays(S,P.batchId,C)}))})).then((()=>({batchId:N.batchId,changes:l2(b)})))})(a.localStore,e);a.sharedClientState.addPendingMutation(l.batchId),(function(d,m,p){let x=d.Vu[d.currentUser.toKey()];x||(x=new zt(Le)),x=x.insert(m,p),d.Vu[d.currentUser.toKey()]=x})(a,l.batchId,t),await Ou(a,l.changes),await Vu(a.remoteStore)}catch(l){const c=z0(l,"Failed to persist write");t.reject(c)}}async function hN(r,e){const t=ze(r);try{const a=await A4(t.localStore,e);e.targetChanges.forEach(((l,c)=>{const d=t.Au.get(c);d&&(ke(l.addedDocuments.size+l.modifiedDocuments.size+l.removedDocuments.size<=1,22616),l.addedDocuments.size>0?d.hu=!0:l.modifiedDocuments.size>0?ke(d.hu,14607):l.removedDocuments.size>0&&(ke(d.hu,42227),d.hu=!1))})),await Ou(t,a,e)}catch(a){await il(a)}}function pw(r,e,t){const a=ze(r);if(a.isPrimaryClient&&t===0||!a.isPrimaryClient&&t===1){const l=[];a.Tu.forEach(((c,d)=>{const m=d.view.va(e);m.snapshot&&l.push(m.snapshot)})),(function(d,m){const p=ze(d);p.onlineState=m;let x=!1;p.queries.forEach(((v,b)=>{for(const N of b.Sa)N.va(m)&&(x=!0)})),x&&U0(p)})(a.eventManager,e),l.length&&a.Pu.H_(l),a.onlineState=e,a.isPrimaryClient&&a.sharedClientState.setOnlineState(e)}}async function g3(r,e,t){const a=ze(r);a.sharedClientState.updateQueryState(e,"rejected",t);const l=a.Au.get(e),c=l&&l.key;if(c){let d=new zt(Se.comparator);d=d.insert(c,Gt.newNoDocument(c,Ve.min()));const m=Ge().add(c),p=new Rf(Ve.min(),new Map,new zt(Le),d,m);await hN(a,p),a.du=a.du.remove(c),a.Au.delete(e),q0(a)}else await $g(a.localStore,e,!1).then((()=>Kg(a,e,t))).catch(il)}async function x3(r,e){const t=ze(r),a=e.batch.batchId;try{const l=await j4(t.localStore,e);mN(t,a,null),fN(t,a),t.sharedClientState.updateMutationState(a,"acknowledged"),await Ou(t,l)}catch(l){await il(l)}}async function y3(r,e,t){const a=ze(r);try{const l=await(function(d,m){const p=ze(d);return p.persistence.runTransaction("Reject batch","readwrite-primary",(x=>{let v;return p.mutationQueue.lookupMutationBatch(x,m).next((b=>(ke(b!==null,37113),v=b.keys(),p.mutationQueue.removeMutationBatch(x,b)))).next((()=>p.mutationQueue.performConsistencyCheck(x))).next((()=>p.documentOverlayCache.removeOverlaysForBatchId(x,v,m))).next((()=>p.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(x,v))).next((()=>p.localDocuments.getDocuments(x,v)))}))})(a.localStore,e);mN(a,e,t),fN(a,e),a.sharedClientState.updateMutationState(e,"rejected",t),await Ou(a,l)}catch(l){await il(l)}}function fN(r,e){(r.mu.get(e)||[]).forEach((t=>{t.resolve()})),r.mu.delete(e)}function mN(r,e,t){const a=ze(r);let l=a.Vu[a.currentUser.toKey()];if(l){const c=l.get(e);c&&(t?c.reject(t):c.resolve(),l=l.remove(e)),a.Vu[a.currentUser.toKey()]=l}}function Kg(r,e,t=null){r.sharedClientState.removeLocalQueryTarget(e);for(const a of r.Iu.get(e))r.Tu.delete(a),t&&r.Pu.yu(a,t);r.Iu.delete(e),r.isPrimaryClient&&r.Ru.jr(e).forEach((a=>{r.Ru.containsKey(a)||pN(r,a)}))}function pN(r,e){r.Eu.delete(e.path.canonicalString());const t=r.du.get(e);t!==null&&(M0(r.remoteStore,t),r.du=r.du.remove(e),r.Au.delete(t),q0(r))}function gw(r,e,t){for(const a of t)a instanceof cN?(r.Ru.addReference(a.key,e),b3(r,a)):a instanceof uN?(ge(B0,"Document no longer in limbo: "+a.key),r.Ru.removeReference(a.key,e),r.Ru.containsKey(a.key)||pN(r,a.key)):Ce(19791,{wu:a})}function b3(r,e){const t=e.key,a=t.path.canonicalString();r.du.get(t)||r.Eu.has(a)||(ge(B0,"New document in limbo: "+t),r.Eu.add(a),q0(r))}function q0(r){for(;r.Eu.size>0&&r.du.size<r.maxConcurrentLimboResolutions;){const e=r.Eu.values().next().value;r.Eu.delete(e);const t=new Se(dt.fromString(e)),a=r.fu.next();r.Au.set(a,new o3(t)),r.du=r.du.insert(t,a),eN(r.remoteStore,new Kr(Ls(Af(t.path)),a,"TargetPurposeLimboResolution",Os.ce))}}async function Ou(r,e,t){const a=ze(r),l=[],c=[],d=[];a.Tu.isEmpty()||(a.Tu.forEach(((m,p)=>{d.push(a.pu(p,e,t).then((x=>{var v;if((x||t)&&a.isPrimaryClient){const b=x?!x.fromCache:(v=t==null?void 0:t.targetChanges.get(p.targetId))==null?void 0:v.current;a.sharedClientState.updateQueryState(p.targetId,b?"current":"not-current")}if(x){l.push(x);const b=R0.As(p.targetId,x);c.push(b)}})))})),await Promise.all(d),a.Pu.H_(l),await(async function(p,x){const v=ze(p);try{await v.persistence.runTransaction("notifyLocalViewChanges","readwrite",(b=>Y.forEach(x,(N=>Y.forEach(N.Es,(S=>v.persistence.referenceDelegate.addReference(b,N.targetId,S))).next((()=>Y.forEach(N.ds,(S=>v.persistence.referenceDelegate.removeReference(b,N.targetId,S)))))))))}catch(b){if(!ii(b))throw b;ge(k0,"Failed to update sequence numbers: "+b)}for(const b of x){const N=b.targetId;if(!b.fromCache){const S=v.Ms.get(N),z=S.snapshotVersion,O=S.withLastLimboFreeSnapshotVersion(z);v.Ms=v.Ms.insert(N,O)}}})(a.localStore,c))}async function v3(r,e){const t=ze(r);if(!t.currentUser.isEqual(e)){ge(B0,"User change. New user:",e.toKey());const a=await Y2(t.localStore,e);t.currentUser=e,(function(c,d){c.mu.forEach((m=>{m.forEach((p=>{p.reject(new we(ie.CANCELLED,d))}))})),c.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,a.removedBatchIds,a.addedBatchIds),await Ou(t,a.Ls)}}function w3(r,e){const t=ze(r),a=t.Au.get(e);if(a&&a.hu)return Ge().add(a.key);{let l=Ge();const c=t.Iu.get(e);if(!c)return l;for(const d of c){const m=t.Tu.get(d);l=l.unionWith(m.view.nu)}return l}}function gN(r){const e=ze(r);return e.remoteStore.remoteSyncer.applyRemoteEvent=hN.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=w3.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=g3.bind(null,e),e.Pu.H_=r3.bind(null,e.eventManager),e.Pu.yu=a3.bind(null,e.eventManager),e}function xN(r){const e=ze(r);return e.remoteStore.remoteSyncer.applySuccessfulWrite=x3.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=y3.bind(null,e),e}class wu{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Of(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return K2(this.persistence,new Q2,e.initialUser,this.serializer)}Cu(e){return new I0(Vf.mi,this.serializer)}Du(e){return new Z2}async terminate(){var e,t;(e=this.gcScheduler)==null||e.stop(),(t=this.indexBackfillerScheduler)==null||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}wu.provider={build:()=>new wu};class _3 extends wu{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){ke(this.persistence.referenceDelegate instanceof af,46915);const a=this.persistence.referenceDelegate.garbageCollector;return new q2(a,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?Pn.withCacheSize(this.cacheSizeBytes):Pn.DEFAULT;return new I0((a=>af.mi(a,t)),this.serializer)}}class N3 extends wu{constructor(e,t,a){super(),this.xu=e,this.cacheSizeBytes=t,this.forceOwnership=a,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.xu.initialize(this,e),await xN(this.xu.syncEngine),await Vu(this.xu.remoteStore),await this.persistence.Ji((()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve())))}vu(e){return K2(this.persistence,new Q2,e.initialUser,this.serializer)}Fu(e,t){const a=this.persistence.referenceDelegate.garbageCollector;return new q2(a,e.asyncQueue,t)}Mu(e,t){const a=new I5(t,this.persistence);return new C5(e.asyncQueue,a)}Cu(e){const t=N4(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),a=this.cacheSizeBytes!==void 0?Pn.withCacheSize(this.cacheSizeBytes):Pn.DEFAULT;return new D0(this.synchronizeTabs,t,e.clientId,a,e.asyncQueue,L4(),Ph(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Du(e){return new Z2}}class of{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=a=>pw(this.syncEngine,a,1),this.remoteStore.remoteSyncer.handleCredentialChange=v3.bind(null,this.syncEngine),await t3(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new s3})()}createDatastore(e){const t=Of(e.databaseInfo.databaseId),a=(function(c){return new P4(c)})(e.databaseInfo);return(function(c,d,m,p){return new q4(c,d,m,p)})(e.authCredentials,e.appCheckCredentials,a,t)}createRemoteStore(e){return(function(a,l,c,d,m){return new H4(a,l,c,d,m)})(this.localStore,this.datastore,e.asyncQueue,(t=>pw(this.syncEngine,t,0)),(function(){return cw.v()?new cw:new k4})())}createSyncEngine(e,t){return(function(l,c,d,m,p,x,v){const b=new c3(l,c,d,m,p,x);return v&&(b.gu=!0),b})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await(async function(l){const c=ze(l);ge(tl,"RemoteStore shutting down."),c.Ea.add(5),await Mu(c),c.Aa.shutdown(),c.Ra.set("Unknown")})(this.remoteStore),(e=this.datastore)==null||e.terminate(),(t=this.eventManager)==null||t.terminate()}}of.provider={build:()=>new of};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yN{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Kn("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ni="FirestoreClient";class E3{constructor(e,t,a,l,c){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=a,this.databaseInfo=l,this.user=Rn.UNAUTHENTICATED,this.clientId=u0.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=c,this.authCredentials.start(a,(async d=>{ge(ni,"Received user=",d.uid),await this.authCredentialListener(d),this.user=d})),this.appCheckCredentials.start(a,(d=>(ge(ni,"Received new app check token=",d),this.appCheckCredentialListener(d,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Yr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const a=z0(t,"Failed to shutdown persistence");e.reject(a)}})),e.promise}}async function ug(r,e){r.asyncQueue.verifyOperationInProgress(),ge(ni,"Initializing OfflineComponentProvider");const t=r.configuration;await e.initialize(t);let a=t.initialUser;r.setCredentialChangeListener((async l=>{a.isEqual(l)||(await Y2(e.localStore,l),a=l)})),e.persistence.setDatabaseDeletedListener((()=>r.terminate())),r._offlineComponents=e}async function xw(r,e){r.asyncQueue.verifyOperationInProgress();const t=await S3(r);ge(ni,"Initializing OnlineComponentProvider"),await e.initialize(t,r.configuration),r.setCredentialChangeListener((a=>dw(e.remoteStore,a))),r.setAppCheckTokenChangeListener(((a,l)=>dw(e.remoteStore,l))),r._onlineComponents=e}async function S3(r){if(!r._offlineComponents)if(r._uninitializedComponentsProvider){ge(ni,"Using user provided OfflineComponentProvider");try{await ug(r,r._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(l){return l.name==="FirebaseError"?l.code===ie.FAILED_PRECONDITION||l.code===ie.UNIMPLEMENTED:!(typeof DOMException<"u"&&l instanceof DOMException)||l.code===22||l.code===20||l.code===11})(t))throw t;Yi("Error using user provided cache. Falling back to memory cache: "+t),await ug(r,new wu)}}else ge(ni,"Using default OfflineComponentProvider"),await ug(r,new _3(void 0));return r._offlineComponents}async function bN(r){return r._onlineComponents||(r._uninitializedComponentsProvider?(ge(ni,"Using user provided OnlineComponentProvider"),await xw(r,r._uninitializedComponentsProvider._online)):(ge(ni,"Using default OnlineComponentProvider"),await xw(r,new of))),r._onlineComponents}function T3(r){return bN(r).then((e=>e.syncEngine))}async function Yg(r){const e=await bN(r),t=e.eventManager;return t.onListen=u3.bind(null,e.syncEngine),t.onUnlisten=f3.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=d3.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=m3.bind(null,e.syncEngine),t}function j3(r,e,t={}){const a=new Yr;return r.asyncQueue.enqueueAndForget((async()=>(function(c,d,m,p,x){const v=new yN({next:N=>{v.Nu(),d.enqueueAndForget((()=>lN(c,b))),N.fromCache&&p.source==="server"?x.reject(new we(ie.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):x.resolve(N)},error:N=>x.reject(N)}),b=new oN(m,v,{includeMetadataChanges:!0,qa:!0});return iN(c,b)})(await Yg(r),r.asyncQueue,e,t,a))),a.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vN(r){const e={};return r.timeoutSeconds!==void 0&&(e.timeoutSeconds=r.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yw=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wN="firestore.googleapis.com",bw=!0;class vw{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new we(ie.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=wN,this.ssl=bw}else this.host=e.host,this.ssl=e.ssl??bw;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=L2;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<i4)throw new we(ie.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}E5("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=vN(e.experimentalLongPollingOptions??{}),(function(a){if(a.timeoutSeconds!==void 0){if(isNaN(a.timeoutSeconds))throw new we(ie.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (must not be NaN)`);if(a.timeoutSeconds<5)throw new we(ie.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (minimum allowed value is 5)`);if(a.timeoutSeconds>30)throw new we(ie.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(a,l){return a.timeoutSeconds===l.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Lf{constructor(e,t,a,l){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=a,this._app=l,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new vw({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new we(ie.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new we(ie.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new vw(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(a){if(!a)return new m5;switch(a.type){case"firstParty":return new y5(a.sessionIndex||"0",a.iamToken||null,a.authTokenFactory||null);case"provider":return a.client;default:throw new we(ie.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const a=yw.get(t);a&&(ge("ComponentProvider","Removing Datastore"),yw.delete(t),a.terminate())})(this),Promise.resolve()}}function A3(r,e,t,a={}){var x;r=Ps(r,Lf);const l=l0(e),c=r._getSettings(),d={...c,emulatorOptions:r._getEmulatorOptions()},m=`${e}:${t}`;l&&(GT(`https://${m}`),XT("Firestore",!0)),c.host!==wN&&c.host!==m&&Yi("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const p={...c,host:m,ssl:l,emulatorOptions:a};if(!Fh(p,d)&&(r._setSettings(p),a.mockUserToken)){let v,b;if(typeof a.mockUserToken=="string")v=a.mockUserToken,b=Rn.MOCK_USER;else{v=QT(a.mockUserToken,(x=r._app)==null?void 0:x.options.projectId);const N=a.mockUserToken.sub||a.mockUserToken.user_id;if(!N)throw new we(ie.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");b=new Rn(N)}r._authCredentials=new p5(new __(v,b))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sa{constructor(e,t,a){this.converter=t,this._query=a,this.type="query",this.firestore=e}withConverter(e){return new sa(this.firestore,e,this._query)}}class ln{constructor(e,t,a){this.converter=t,this._key=a,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ka(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new ln(this.firestore,e,this._key)}toJSON(){return{type:ln._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,a){if(Au(t,ln._jsonSchema))return new ln(e,a||null,new Se(dt.fromString(t.referencePath)))}}ln._jsonSchemaVersion="firestore/documentReference/1.0",ln._jsonSchema={type:an("string",ln._jsonSchemaVersion),referencePath:an("string")};class Ka extends sa{constructor(e,t,a){super(e,t,Af(a)),this._path=a,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new ln(this.firestore,null,new Se(e))}withConverter(e){return new Ka(this.firestore,e,this._path)}}function pn(r,e,...t){if(r=zs(r),E_("collection","path",e),r instanceof Lf){const a=dt.fromString(e,...t);return u1(a),new Ka(r,null,a)}{if(!(r instanceof ln||r instanceof Ka))throw new we(ie.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const a=r._path.child(dt.fromString(e,...t));return u1(a),new Ka(r.firestore,null,a)}}function Xg(r,e,...t){if(r=zs(r),arguments.length===1&&(e=u0.newId()),E_("doc","path",e),r instanceof Lf){const a=dt.fromString(e,...t);return c1(a),new ln(r,null,new Se(a))}{if(!(r instanceof ln||r instanceof Ka))throw new we(ie.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const a=r._path.child(dt.fromString(e,...t));return c1(a),new ln(r.firestore,r instanceof Ka?r.converter:null,new Se(a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ww="AsyncQueue";class _w{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new J2(this,"async_queue_retry"),this._c=()=>{const a=Ph();a&&ge(ww,"Visibility state changed to "+a.visibilityState),this.M_.w_()},this.ac=e;const t=Ph();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=Ph();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new Yr;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!ii(e))throw e;ge(ww,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((a=>{throw this.nc=a,this.rc=!1,Kn("INTERNAL UNHANDLED ERROR: ",Nw(a)),a})).then((a=>(this.rc=!1,a))))));return this.ac=t,t}enqueueAfterDelay(e,t,a){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const l=L0.createAndSchedule(this,e,t,a,(c=>this.hc(c)));return this.tc.push(l),l}uc(){this.nc&&Ce(47125,{Pc:Nw(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,a)=>t.targetTimeMs-a.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function Nw(r){let e=r.message||"";return r.stack&&(e=r.stack.includes(r.message)?r.stack:r.message+`
`+r.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ew(r){return(function(t,a){if(typeof t!="object"||t===null)return!1;const l=t;for(const c of a)if(c in l&&typeof l[c]=="function")return!0;return!1})(r,["next","error","complete"])}class Wr extends Lf{constructor(e,t,a,l){super(e,t,a,l),this.type="firestore",this._queue=new _w,this._persistenceKey=(l==null?void 0:l.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new _w(e),this._firestoreClient=void 0,await e}}}function C3(r,e){const t=typeof r=="object"?r:n5(),a=typeof r=="string"?r:Xh,l=Zj(t,"firestore").getImmediate({identifier:a});if(!l._initialized){const c=HT("firestore");c&&A3(l,...c)}return l}function zf(r){if(r._terminated)throw new we(ie.FAILED_PRECONDITION,"The client has already been terminated.");return r._firestoreClient||_N(r),r._firestoreClient}function _N(r){var a,l,c;const e=r._freezeSettings(),t=(function(m,p,x,v){return new aA(m,p,x,v.host,v.ssl,v.experimentalForceLongPolling,v.experimentalAutoDetectLongPolling,vN(v.experimentalLongPollingOptions),v.useFetchStreams,v.isUsingEmulator)})(r._databaseId,((a=r._app)==null?void 0:a.options.appId)||"",r._persistenceKey,e);r._componentsProvider||(l=e.localCache)!=null&&l._offlineComponentProvider&&((c=e.localCache)!=null&&c._onlineComponentProvider)&&(r._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),r._firestoreClient=new E3(r._authCredentials,r._appCheckCredentials,r._queue,t,r._componentsProvider&&(function(m){const p=m==null?void 0:m._online.build();return{_offline:m==null?void 0:m._offline.build(p),_online:p}})(r._componentsProvider))}function I3(r,e){Yi("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=r._freezeSettings();return D3(r,of.provider,{build:a=>new N3(a,t.cacheSizeBytes,e==null?void 0:e.forceOwnership)}),Promise.resolve()}function D3(r,e,t){if((r=Ps(r,Wr))._firestoreClient||r._terminated)throw new we(ie.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(r._componentsProvider||r._getSettings().localCache)throw new we(ie.FAILED_PRECONDITION,"SDK cache is already specified.");r._componentsProvider={_online:e,_offline:t},_N(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vs{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Vs(on.fromBase64String(e))}catch(t){throw new we(ie.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Vs(on.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Vs._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Au(e,Vs._jsonSchema))return Vs.fromBase64String(e.bytes)}}Vs._jsonSchemaVersion="firestore/bytes/1.0",Vs._jsonSchema={type:an("string",Vs._jsonSchemaVersion),bytes:an("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pu{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new we(ie.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ft(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uf{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tr{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new we(ie.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new we(ie.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Le(this._lat,e._lat)||Le(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Tr._jsonSchemaVersion}}static fromJSON(e){if(Au(e,Tr._jsonSchema))return new Tr(e.latitude,e.longitude)}}Tr._jsonSchemaVersion="firestore/geoPoint/1.0",Tr._jsonSchema={type:an("string",Tr._jsonSchemaVersion),latitude:an("number"),longitude:an("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jr{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(a,l){if(a.length!==l.length)return!1;for(let c=0;c<a.length;++c)if(a[c]!==l[c])return!1;return!0})(this._values,e._values)}toJSON(){return{type:jr._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Au(e,jr._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new jr(e.vectorValues);throw new we(ie.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}jr._jsonSchemaVersion="firestore/vectorValue/1.0",jr._jsonSchema={type:an("string",jr._jsonSchemaVersion),vectorValues:an("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R3=/^__.*__$/;class k3{constructor(e,t,a){this.data=e,this.fieldMask=t,this.fieldTransforms=a}toMutation(e,t){return this.fieldMask!==null?new na(e,this.data,this.fieldMask,t,this.fieldTransforms):new Vo(e,this.data,t,this.fieldTransforms)}}class NN{constructor(e,t,a){this.data=e,this.fieldMask=t,this.fieldTransforms=a}toMutation(e,t){return new na(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function EN(r){switch(r){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ce(40011,{Ac:r})}}class F0{constructor(e,t,a,l,c,d){this.settings=e,this.databaseId=t,this.serializer=a,this.ignoreUndefinedProperties=l,c===void 0&&this.Rc(),this.fieldTransforms=c||[],this.fieldMask=d||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new F0({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var l;const t=(l=this.path)==null?void 0:l.child(e),a=this.Vc({path:t,fc:!1});return a.gc(e),a}yc(e){var l;const t=(l=this.path)==null?void 0:l.child(e),a=this.Vc({path:t,fc:!1});return a.Rc(),a}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return cf(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(EN(this.Ac)&&R3.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class M3{constructor(e,t,a){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=a||Of(e)}Cc(e,t,a,l=!1){return new F0({Ac:e,methodName:t,Dc:a,path:Ft.emptyPath(),fc:!1,bc:l},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Bf(r){const e=r._freezeSettings(),t=Of(r._databaseId);return new M3(r._databaseId,!!e.ignoreUndefinedProperties,t)}function SN(r,e,t,a,l,c={}){const d=r.Cc(c.merge||c.mergeFields?2:0,e,t,l);$0("Data must be an object, but it was:",d,a);const m=AN(a,d);let p,x;if(c.merge)p=new rs(d.fieldMask),x=d.fieldTransforms;else if(c.mergeFields){const v=[];for(const b of c.mergeFields){const N=Zg(e,b,t);if(!d.contains(N))throw new we(ie.INVALID_ARGUMENT,`Field '${N}' is specified in your field mask but missing from your input data.`);IN(v,N)||v.push(N)}p=new rs(v),x=d.fieldTransforms.filter((b=>p.covers(b.field)))}else p=null,x=d.fieldTransforms;return new k3(new Ln(m),p,x)}class qf extends Uf{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof qf}}class H0 extends Uf{constructor(e,t){super(e),this.Fc=t}_toFieldTransform(e){const t=new Co(e.serializer,u2(e.serializer,this.Fc));return new p2(e.path,t)}isEqual(e){return e instanceof H0&&this.Fc===e.Fc}}function TN(r,e,t,a){const l=r.Cc(1,e,t);$0("Data must be an object, but it was:",l,a);const c=[],d=Ln.empty();li(a,((p,x)=>{const v=G0(e,p,t);x=zs(x);const b=l.yc(v);if(x instanceof qf)c.push(v);else{const N=Lu(x,b);N!=null&&(c.push(v),d.set(v,N))}}));const m=new rs(c);return new NN(d,m,l.fieldTransforms)}function jN(r,e,t,a,l,c){const d=r.Cc(1,e,t),m=[Zg(e,a,t)],p=[l];if(c.length%2!=0)throw new we(ie.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let N=0;N<c.length;N+=2)m.push(Zg(e,c[N])),p.push(c[N+1]);const x=[],v=Ln.empty();for(let N=m.length-1;N>=0;--N)if(!IN(x,m[N])){const S=m[N];let z=p[N];z=zs(z);const O=d.yc(S);if(z instanceof qf)x.push(S);else{const P=Lu(z,O);P!=null&&(x.push(S),v.set(S,P))}}const b=new rs(x);return new NN(v,b,d.fieldTransforms)}function V3(r,e,t,a=!1){return Lu(t,r.Cc(a?4:3,e))}function Lu(r,e){if(CN(r=zs(r)))return $0("Unsupported field value:",e,r),AN(r,e);if(r instanceof Uf)return(function(a,l){if(!EN(l.Ac))throw l.Sc(`${a._methodName}() can only be used with update() and set()`);if(!l.path)throw l.Sc(`${a._methodName}() is not currently supported inside arrays`);const c=a._toFieldTransform(l);c&&l.fieldTransforms.push(c)})(r,e),null;if(r===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),r instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(a,l){const c=[];let d=0;for(const m of a){let p=Lu(m,l.wc(d));p==null&&(p={nullValue:"NULL_VALUE"}),c.push(p),d++}return{arrayValue:{values:c}}})(r,e)}return(function(a,l){if((a=zs(a))===null)return{nullValue:"NULL_VALUE"};if(typeof a=="number")return u2(l.serializer,a);if(typeof a=="boolean")return{booleanValue:a};if(typeof a=="string")return{stringValue:a};if(a instanceof Date){const c=xt.fromDate(a);return{timestampValue:Io(l.serializer,c)}}if(a instanceof xt){const c=new xt(a.seconds,1e3*Math.floor(a.nanoseconds/1e3));return{timestampValue:Io(l.serializer,c)}}if(a instanceof Tr)return{geoPointValue:{latitude:a.latitude,longitude:a.longitude}};if(a instanceof Vs)return{bytesValue:_2(l.serializer,a._byteString)};if(a instanceof ln){const c=l.databaseId,d=a.firestore._databaseId;if(!d.isEqual(c))throw l.Sc(`Document reference is for database ${d.projectId}/${d.database} but should be for database ${c.projectId}/${c.database}`);return{referenceValue:T0(a.firestore._databaseId||l.databaseId,a._key.path)}}if(a instanceof jr)return(function(d,m){return{mapValue:{fields:{[y0]:{stringValue:b0},[No]:{arrayValue:{values:d.toArray().map((x=>{if(typeof x!="number")throw m.Sc("VectorValues must only contain numeric values.");return w0(m.serializer,x)}))}}}}}})(a,l);throw l.Sc(`Unsupported field value: ${vf(a)}`)})(r,e)}function AN(r,e){const t={};return U_(r)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):li(r,((a,l)=>{const c=Lu(l,e.mc(a));c!=null&&(t[a]=c)})),{mapValue:{fields:t}}}function CN(r){return!(typeof r!="object"||r===null||r instanceof Array||r instanceof Date||r instanceof xt||r instanceof Tr||r instanceof Vs||r instanceof ln||r instanceof Uf||r instanceof jr)}function $0(r,e,t){if(!CN(t)||!S_(t)){const a=vf(t);throw a==="an object"?e.Sc(r+" a custom object"):e.Sc(r+" "+a)}}function Zg(r,e,t){if((e=zs(e))instanceof Pu)return e._internalPath;if(typeof e=="string")return G0(r,e);throw cf("Field path arguments must be of type string or ",r,!1,void 0,t)}const O3=new RegExp("[~\\*/\\[\\]]");function G0(r,e,t){if(e.search(O3)>=0)throw cf(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,r,!1,void 0,t);try{return new Pu(...e.split("."))._internalPath}catch{throw cf(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r,!1,void 0,t)}}function cf(r,e,t,a,l){const c=a&&!a.isEmpty(),d=l!==void 0;let m=`Function ${e}() called with invalid data`;t&&(m+=" (via `toFirestore()`)"),m+=". ";let p="";return(c||d)&&(p+=" (found",c&&(p+=` in field ${a}`),d&&(p+=` in document ${l}`),p+=")"),new we(ie.INVALID_ARGUMENT,m+r+p)}function IN(r,e){return r.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DN{constructor(e,t,a,l,c){this._firestore=e,this._userDataWriter=t,this._key=a,this._document=l,this._converter=c}get id(){return this._key.path.lastSegment()}get ref(){return new ln(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new P3(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Ff("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class P3 extends DN{data(){return super.data()}}function Ff(r,e){return typeof e=="string"?G0(r,e):e instanceof Pu?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RN(r){if(r.limitType==="L"&&r.explicitOrderBy.length===0)throw new we(ie.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Q0{}class K0 extends Q0{}function lo(r,e,...t){let a=[];e instanceof Q0&&a.push(e),a=a.concat(t),(function(c){const d=c.filter((p=>p instanceof Y0)).length,m=c.filter((p=>p instanceof Hf)).length;if(d>1||d>0&&m>0)throw new we(ie.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(a);for(const l of a)r=l._apply(r);return r}class Hf extends K0{constructor(e,t,a){super(),this._field=e,this._op=t,this._value=a,this.type="where"}static _create(e,t,a){return new Hf(e,t,a)}_apply(e){const t=this._parse(e);return kN(e._query,t),new sa(e.firestore,e.converter,Pg(e._query,t))}_parse(e){const t=Bf(e.firestore);return(function(c,d,m,p,x,v,b){let N;if(x.isKeyField()){if(v==="array-contains"||v==="array-contains-any")throw new we(ie.INVALID_ARGUMENT,`Invalid Query. You can't perform '${v}' queries on documentId().`);if(v==="in"||v==="not-in"){jw(b,v);const z=[];for(const O of b)z.push(Tw(p,c,O));N={arrayValue:{values:z}}}else N=Tw(p,c,b)}else v!=="in"&&v!=="not-in"&&v!=="array-contains-any"||jw(b,v),N=V3(m,d,b,v==="in"||v==="not-in");return Je.create(x,v,N)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function Sw(r,e,t){const a=e,l=Ff("where",r);return Hf._create(l,a,t)}class Y0 extends Q0{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Y0(e,t)}_parse(e){const t=this._queryConstraints.map((a=>a._parse(e))).filter((a=>a.getFilters().length>0));return t.length===1?t[0]:yt.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(l,c){let d=l;const m=c.getFlattenedFilters();for(const p of m)kN(d,p),d=Pg(d,p)})(e._query,t),new sa(e.firestore,e.converter,Pg(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class X0 extends K0{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new X0(e,t)}_apply(e){const t=(function(l,c,d){if(l.startAt!==null)throw new we(ie.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(l.endAt!==null)throw new we(ie.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new bu(c,d)})(e._query,this._field,this._direction);return new sa(e.firestore,e.converter,(function(l,c){const d=l.explicitOrderBy.concat([c]);return new Mo(l.path,l.collectionGroup,d,l.filters.slice(),l.limit,l.limitType,l.startAt,l.endAt)})(e._query,t))}}function bh(r,e="asc"){const t=e,a=Ff("orderBy",r);return X0._create(a,t)}class Z0 extends K0{constructor(e,t,a){super(),this.type=e,this._limit=t,this._limitType=a}static _create(e,t,a){return new Z0(e,t,a)}_apply(e){return new sa(e.firestore,e.converter,Wh(e._query,this._limit,this._limitType))}}function vh(r){return S5("limit",r),Z0._create("limit",r,"F")}function Tw(r,e,t){if(typeof(t=zs(t))=="string"){if(t==="")throw new we(ie.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!s2(e)&&t.indexOf("/")!==-1)throw new we(ie.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const a=e.path.child(dt.fromString(t));if(!Se.isDocumentKey(a))throw new we(ie.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${a}' is not because it has an odd number of segments (${a.length}).`);return xu(r,new Se(a))}if(t instanceof ln)return xu(r,t._key);throw new we(ie.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${vf(t)}.`)}function jw(r,e){if(!Array.isArray(r)||r.length===0)throw new we(ie.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function kN(r,e){const t=(function(l,c){for(const d of l)for(const m of d.getFlattenedFilters())if(c.indexOf(m.op)>=0)return m.op;return null})(r.filters,(function(l){switch(l){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new we(ie.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new we(ie.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class L3{convertValue(e,t="none"){switch(Wa(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Lt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Jr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Ce(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const a={};return li(e,((l,c)=>{a[l]=this.convertValue(c,t)})),a}convertVectorValue(e){var a,l,c;const t=(c=(l=(a=e.fields)==null?void 0:a[No].arrayValue)==null?void 0:l.values)==null?void 0:c.map((d=>Lt(d.doubleValue)));return new jr(t)}convertGeoPoint(e){return new Tr(Lt(e.latitude),Lt(e.longitude))}convertArray(e,t){return(e.values||[]).map((a=>this.convertValue(a,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const a=Tf(e);return a==null?null:this.convertValue(a,t);case"estimate":return this.convertTimestamp(pu(e));default:return null}}convertTimestamp(e){const t=Zr(e);return new xt(t.seconds,t.nanos)}convertDocumentKey(e,t){const a=dt.fromString(e);ke(R2(a),9688,{name:e});const l=new Xi(a.get(1),a.get(3)),c=new Se(a.popFirst(5));return l.isEqual(t)||Kn(`Document ${c} contains a document reference within a different database (${l.projectId}/${l.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MN(r,e,t){let a;return a=r?t&&(t.merge||t.mergeFields)?r.toFirestore(e,t):r.toFirestore(e):e,a}class Kc{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Qi extends DN{constructor(e,t,a,l,c,d){super(e,t,a,l,d),this._firestore=e,this._firestoreImpl=e,this.metadata=c}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Lh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const a=this._document.data.field(Ff("DocumentSnapshot.get",e));if(a!==null)return this._userDataWriter.convertValue(a,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new we(ie.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=Qi._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}Qi._jsonSchemaVersion="firestore/documentSnapshot/1.0",Qi._jsonSchema={type:an("string",Qi._jsonSchemaVersion),bundleSource:an("string","DocumentSnapshot"),bundleName:an("string"),bundle:an("string")};class Lh extends Qi{data(e={}){return super.data(e)}}class Ki{constructor(e,t,a,l){this._firestore=e,this._userDataWriter=t,this._snapshot=l,this.metadata=new Kc(l.hasPendingWrites,l.fromCache),this.query=a}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((a=>{e.call(t,new Lh(this._firestore,this._userDataWriter,a.key,a,new Kc(this._snapshot.mutatedKeys.has(a.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new we(ie.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(l,c){if(l._snapshot.oldDocs.isEmpty()){let d=0;return l._snapshot.docChanges.map((m=>{const p=new Lh(l._firestore,l._userDataWriter,m.doc.key,m.doc,new Kc(l._snapshot.mutatedKeys.has(m.doc.key),l._snapshot.fromCache),l.query.converter);return m.doc,{type:"added",doc:p,oldIndex:-1,newIndex:d++}}))}{let d=l._snapshot.oldDocs;return l._snapshot.docChanges.filter((m=>c||m.type!==3)).map((m=>{const p=new Lh(l._firestore,l._userDataWriter,m.doc.key,m.doc,new Kc(l._snapshot.mutatedKeys.has(m.doc.key),l._snapshot.fromCache),l.query.converter);let x=-1,v=-1;return m.type!==0&&(x=d.indexOf(m.doc.key),d=d.delete(m.doc.key)),m.type!==1&&(d=d.add(m.doc),v=d.indexOf(m.doc.key)),{type:z3(m.type),doc:p,oldIndex:x,newIndex:v}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new we(ie.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Ki._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=u0.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],a=[],l=[];return this.docs.forEach((c=>{c._document!==null&&(t.push(c._document),a.push(this._userDataWriter.convertObjectMap(c._document.data.value.mapValue.fields,"previous")),l.push(c.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function z3(r){switch(r){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ce(61501,{type:r})}}Ki._jsonSchemaVersion="firestore/querySnapshot/1.0",Ki._jsonSchema={type:an("string",Ki._jsonSchemaVersion),bundleSource:an("string","QuerySnapshot"),bundleName:an("string"),bundle:an("string")};class J0 extends L3{constructor(e){super(),this.firestore=e}convertBytes(e){return new Vs(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new ln(this.firestore,null,t)}}function wh(r){r=Ps(r,sa);const e=Ps(r.firestore,Wr),t=zf(e),a=new J0(e);return RN(r._query),j3(t,r._query).then((l=>new Ki(e,a,r,l)))}function wr(r,e,t,...a){r=Ps(r,ln);const l=Ps(r.firestore,Wr),c=Bf(l);let d;return d=typeof(e=zs(e))=="string"||e instanceof Pu?jN(c,"updateDoc",r._key,e,t,a):TN(c,"updateDoc",r._key,e),$f(l,[d.toMutation(r._key,Sn.exists(!0))])}function Aw(r){return $f(Ps(r.firestore,Wr),[new Ru(r._key,Sn.none())])}function za(r,e){const t=Ps(r.firestore,Wr),a=Xg(r),l=MN(r.converter,e);return $f(t,[SN(Bf(r.firestore),"addDoc",a._key,l,r.converter!==null,{}).toMutation(a._key,Sn.exists(!1))]).then((()=>a))}function Ua(r,...e){var p,x,v;r=zs(r);let t={includeMetadataChanges:!1,source:"default"},a=0;typeof e[a]!="object"||Ew(e[a])||(t=e[a++]);const l={includeMetadataChanges:t.includeMetadataChanges,source:t.source};if(Ew(e[a])){const b=e[a];e[a]=(p=b.next)==null?void 0:p.bind(b),e[a+1]=(x=b.error)==null?void 0:x.bind(b),e[a+2]=(v=b.complete)==null?void 0:v.bind(b)}let c,d,m;if(r instanceof ln)d=Ps(r.firestore,Wr),m=Af(r._key.path),c={next:b=>{e[a]&&e[a](U3(d,r,b))},error:e[a+1],complete:e[a+2]};else{const b=Ps(r,sa);d=Ps(b.firestore,Wr),m=b._query;const N=new J0(d);c={next:S=>{e[a]&&e[a](new Ki(d,N,b,S))},error:e[a+1],complete:e[a+2]},RN(r._query)}return(function(N,S,z,O){const P=new yN(O),C=new oN(S,P,z);return N.asyncQueue.enqueueAndForget((async()=>iN(await Yg(N),C))),()=>{P.Nu(),N.asyncQueue.enqueueAndForget((async()=>lN(await Yg(N),C)))}})(zf(d),m,l,c)}function $f(r,e){return(function(a,l){const c=new Yr;return a.asyncQueue.enqueueAndForget((async()=>p3(await T3(a),l,c))),c.promise})(zf(r),e)}function U3(r,e,t){const a=t.docs.get(e._key),l=new J0(r);return new Qi(r,l,e._key,a,new Kc(t.hasPendingWrites,t.fromCache),e.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B3{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Bf(e)}set(e,t,a){this._verifyNotCommitted();const l=dg(e,this._firestore),c=MN(l.converter,t,a),d=SN(this._dataReader,"WriteBatch.set",l._key,c,l.converter!==null,a);return this._mutations.push(d.toMutation(l._key,Sn.none())),this}update(e,t,a,...l){this._verifyNotCommitted();const c=dg(e,this._firestore);let d;return d=typeof(t=zs(t))=="string"||t instanceof Pu?jN(this._dataReader,"WriteBatch.update",c._key,t,a,l):TN(this._dataReader,"WriteBatch.update",c._key,t),this._mutations.push(d.toMutation(c._key,Sn.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=dg(e,this._firestore);return this._mutations=this._mutations.concat(new Ru(t._key,Sn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new we(ie.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function dg(r,e){if((r=zs(r)).firestore!==e)throw new we(ie.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return r}function _h(r){return new H0("increment",r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hg(r){return zf(r=Ps(r,Wr)),new B3(r,(e=>$f(r,e)))}(function(e,t=!0){(function(l){ko=l})(t5),$h(new lu("firestore",((a,{instanceIdentifier:l,options:c})=>{const d=a.getProvider("app").getImmediate(),m=new Wr(new g5(a.getProvider("auth-internal")),new b5(d,a.getProvider("app-check-internal")),(function(x,v){if(!Object.prototype.hasOwnProperty.apply(x.options,["projectId"]))throw new we(ie.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Xi(x.options.projectId,v)})(d,l),d);return c={useFetchStreams:t,...c},m._setSettings(c),m}),"PUBLIC").setMultipleInstances(!0)),po(a1,i1,e),po(a1,i1,"esm2020")})();var q3="firebase",F3="12.7.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */po(q3,F3,"app");const H3={apiKey:"AIzaSyDUjVFilOQsh_ykeqgAR1KKXrBYmg9HhDk",authDomain:"waterstationapp-2b2a2.firebaseapp.com",projectId:"waterstationapp-2b2a2",storageBucket:"waterstationapp-2b2a2.firebasestorage.app",messagingSenderId:"915279207762",appId:"1:915279207762:web:3e7d0ca7c91a214a91ae8b",measurementId:"G-EN0HD6FT1R"},$3=h_(H3),Ct=C3($3);f5("error");I3(Ct).catch(r=>{r.code=="failed-precondition"?console.warn("Persistence failed: Multiple tabs open"):r.code=="unimplemented"&&console.warn("Persistence not supported by this browser")});const VN=A.createContext(void 0),lt=()=>{const r=A.useContext(VN);if(!r)throw new Error("useData must be used within a DataProvider");return r},Jg=(r,e=new Set,t=0)=>{if(r===null||typeof r!="object")return r;if(t>200)return"[Max Depth Reached]";if(r instanceof Date)return r;if(typeof r.toDate=="function")try{return r.toDate().toISOString()}catch{return String(r)}if(e.has(r))return"[Circular]";e.add(r);let a;if(Array.isArray(r))a=r.map(l=>Jg(l,e,t+1));else{a={};for(const l in r)if(Object.prototype.hasOwnProperty.call(r,l)){if(l.startsWith("_")||l==="firestore"||l==="auth"||l==="app")continue;a[l]=Jg(r[l],e,t+1)}}return e.delete(r),a},G3=(r,e=2)=>{try{const t=Jg(r);return JSON.stringify(t,null,e)}catch(t){return console.error("SafeStringify Failed:",t),JSON.stringify({error:"Backup Failed",details:String(t)},null,e)}},Q3=({children:r})=>{const[e,t]=A.useState([]),[a,l]=A.useState([]),[c,d]=A.useState([]),[m,p]=A.useState([]),[x,v]=A.useState([]),[b,N]=A.useState([]),[S,z]=A.useState([]),[O,P]=A.useState({securityUsername:"admin",securityPassword:"password",securityEnabled:!1,lockedSections:[]}),[C,L]=A.useState(navigator.onLine),[M,F]=A.useState(!0),[Z,te]=A.useState(new Date),[E,T]=A.useState(!1),[k,R]=A.useState(""),D=A.useRef(!1);A.useEffect(()=>{const ae=()=>L(navigator.onLine);return window.addEventListener("online",ae),window.addEventListener("offline",ae),()=>{window.removeEventListener("online",ae),window.removeEventListener("offline",ae)}},[]),A.useEffect(()=>{localStorage.getItem("APP_RESET_PENDING")==="true"&&K()},[]),A.useEffect(()=>{const ae=Ua(pn(Ct,"items"),kt=>{const $e=kt.docs.map(vs=>({...vs.data(),id:vs.data().id}));t($e.sort((vs,Un)=>(vs.order||0)-(Un.order||0)))}),he=Ua(pn(Ct,"workers"),kt=>{l(kt.docs.map($e=>({...$e.data(),id:$e.data().id})))}),me=Ua(pn(Ct,"customers"),kt=>{d(kt.docs.map($e=>({...$e.data(),id:$e.data().id})))}),je=lo(pn(Ct,"sales"),bh("id","desc"),vh(1500)),Fe=Ua(je,kt=>{p(kt.docs.map($e=>({...$e.data(),id:$e.data().id})))}),st=lo(pn(Ct,"expenses"),bh("id","desc"),vh(1e3)),rt=Ua(st,kt=>{v(kt.docs.map($e=>({...$e.data(),id:$e.data().id})))}),Qe=lo(pn(Ct,"distribution"),bh("date","desc"),vh(365)),Bt=Ua(Qe,kt=>{N(kt.docs.map($e=>$e.data()))}),bn=lo(pn(Ct,"logs"),bh("fullDate","desc"),vh(500)),un=Ua(bn,kt=>{z(kt.docs.map($e=>({...$e.data(),id:$e.id})))}),Bs=Ua(Xg(Ct,"settings","security"),kt=>{if(kt.exists()){const $e=kt.data();P({securityUsername:$e.securityUsername||"admin",securityPassword:$e.securityPassword||"password",securityEnabled:$e.securityEnabled??!1,lockedSections:Array.isArray($e.lockedSections)?$e.lockedSections:[],unlockPin:$e.unlockPin||"7890780",adminPin:$e.adminPin||"7890790"})}});return()=>{ae(),he(),me(),Fe(),rt(),Bt(),un(),Bs()}},[]);const q=()=>F(ae=>!ae),V=async(ae,he)=>{const me=lo(pn(Ct,ae),Sw("id","==",he)),je=await wh(me);return je.empty?null:je.docs[0].ref},de=async ae=>{const he=lo(pn(Ct,"distribution"),Sw("date","==",ae)),me=await wh(he);return me.empty?null:me.docs[0].ref},xe=()=>{const ae=new Date,he=new Date(Z);return he.setHours(ae.getHours(),ae.getMinutes(),ae.getSeconds()),he.toISOString()},K=async()=>{T(!0),R("  ...");try{const ae=["sales","expenses","customers","distribution","logs"];for(const je of ae){R(`  ${je}...`);const Fe=await wh(pn(Ct,je)),st=hg(Ct);let rt=0;for(const Qe of Fe.docs)st.delete(Qe.ref),rt++,rt>=400&&(await st.commit(),rt=0);rt>0&&await st.commit()}R(" ...");const he=await wh(pn(Ct,"items")),me=hg(Ct);he.docs.forEach(je=>{me.update(je.ref,{stock:0})}),await me.commit(),localStorage.removeItem("APP_RESET_PENDING"),R("  .   ..."),setTimeout(()=>{window.location.reload()},2e3)}catch(ae){console.error(ae),R(" : "+ae.message),alert("  : "+ae.message),T(!1),localStorage.removeItem("APP_RESET_PENDING")}},G=async(ae,he)=>{try{const me=new Date(Z);me.setHours(new Date().getHours(),new Date().getMinutes()),await za(pn(Ct,"logs"),{action:ae,details:he,user:O.securityUsername,timestamp:me.toLocaleTimeString("en-US",{hour:"numeric",minute:"numeric",hour12:!0}),fullDate:me.toISOString()})}catch(me){console.error("Log error",me)}},pe=async()=>0;A.useEffect(()=>{if((m.length>0||x.length>0||b.length>0)&&!D.current){const he="AUTO_FIX_14_TO_6_DONE_V6",me=localStorage.getItem(he);D.current=!0,me||(console.log("Scheduling Auto-Fix for Date 14 -> 6..."),setTimeout(()=>{pe().then(je=>{localStorage.setItem(he,"true"),je>0&&alert(`   !

   ${je}    14    6 .`)}).catch(je=>{console.error("Auto fix execution error",je)})},3e3))}},[m,x,b]);const Ee=async(ae,he)=>0,Te=async ae=>{if(E)return;const he=e.length>0?Math.max(...e.map(Fe=>Fe.id))+1:1,je=e.reduce((Fe,st)=>Math.max(Fe,st.order||0),0)+1;await za(pn(Ct,"items"),{...ae,id:he,order:je}),G("",`   : ${ae.name}`)},U=async(ae,he)=>{if(E)return;const me=await V("items",ae);me&&await wr(me,he)},$=async ae=>{if(E)return;const he=await V("items",ae);he&&(await Aw(he),G("",`  ID: ${ae}`))},ue=async ae=>{const he=hg(Ct);let me=0;for(let je=0;je<ae.length;je++){const Fe=ae[je];if(Fe.order!==je){const st=await V("items",Fe.id);st&&(he.update(st,{order:je}),me++)}}me>0&&(await he.commit(),console.log(`Reordered ${me} items.`))},fe=async ae=>{if(E)return;const he=a.length>0?Math.max(...a.map(me=>me.id))+1:1;await za(pn(Ct,"workers"),{...ae,id:he}),G("",` : ${ae.name}`)},Ne=async(ae,he)=>{if(E)return;const me=await V("workers",ae);me&&await wr(me,he)},re=async ae=>{if(E)return;const he=await V("workers",ae);he&&(await Aw(he),G("",`  ID: ${ae}`))},Ie=async ae=>{if(E)return;const he=c.length>0?Math.max(...c.map(me=>me.id))+1:1;await za(pn(Ct,"customers"),{...ae,id:he,totalDebt:0,transactions:[]}),G("",`  : ${ae.name}`)},Oe=async(ae,he)=>{if(E)return;const me=await V("customers",ae);me&&await wr(me,he)},ye=async(ae,he,me)=>{var Fe,st;if(E)return;const je=await V("customers",ae);if(je){await wr(je,{totalDebt:_h(me),transactions:[he,...((Fe=c.find(Bt=>Bt.id===ae))==null?void 0:Fe.transactions)||[]]});const rt=((st=c.find(Bt=>Bt.id===ae))==null?void 0:st.name)||"Unknown";let Qe="";he.items.includes("")?Qe=" ":he.items.includes("")?Qe=" ":Qe=" ",G(Qe,` ${rt}: ${he.items} - : ${Math.abs(he.total)}`)}},De=async ae=>{if(E)return;const he=m.length>0?Math.max(...m.map(me=>me.id))+1:1;await za(pn(Ct,"sales"),{...ae,id:he});for(const me of ae.items){const je=e.find(Fe=>Fe.id===me.id);if(je&&je.category!=="filling"){const Fe=await V("items",me.id);if(Fe){const st=ae.isReturn?me.qty:-me.qty;await wr(Fe,{stock:_h(st)})}}}ae.isReturn&&G("",`  : ${Math.abs(ae.total)} (${ae.items.map(me=>me.name).join(", ")})`)},Dt=async ae=>{var me;if(E)return;const he=x.length>0?Math.max(...x.map(je=>je.id))+1:1;if(await za(pn(Ct,"expenses"),{...ae,id:he}),ae.type==="worker_withdraw"||ae.type==="worker_deduct"){const je=((me=a.find(st=>st.id===ae.workerId))==null?void 0:me.name)||"  ",Fe=ae.type==="worker_withdraw"?" ":" ";G(Fe,`${Fe}: ${ae.amount} .  ${je}. : ${ae.reason}`)}},Rt=async(ae,he)=>{if(E)return;const me=await V("expenses",ae);me&&await wr(me,he)},Ut=async(ae,he,me,je)=>{if(E)return;const Fe=await de(ae),st=xe();if(Fe){const Qe=b.find(Bt=>Bt.date===ae);if(Qe){const Bt=he==="outputs"?{...Qe.outputs}:{...Qe.returns};Bt[me]=(Bt[me]||0)+je,await wr(Fe,{[he]:Bt,fullDate:st})}}else{const Qe={date:ae,fullDate:st,outputs:{},returns:{},cash:0};he==="outputs"?Qe.outputs[me]=je:Qe.returns[me]=je,await za(pn(Ct,"distribution"),Qe)}const rt=await V("items",me);rt&&await wr(rt,{stock:_h(he==="outputs"?-je:je)})},St=async(ae,he)=>{if(E)return;const me=await de(ae),je=xe();me?await wr(me,{cash:_h(he),fullDate:je}):await za(pn(Ct,"distribution"),{date:ae,fullDate:je,outputs:{},returns:{},cash:he}),G("",`  : ${he}`)},cn=async ae=>{if(E)return;const he=Xg(Ct,"settings","security");await wr(he,ae),G("","   ")},yn=async()=>{if(!C){alert("       .");return}localStorage.setItem("APP_RESET_PENDING","true"),window.location.reload()},be=ae=>{alert("Restore from file is disabled when using Cloud Sync to prevent conflicts.")};return E?o.jsxs("div",{style:{position:"fixed",top:0,left:0,width:"100%",height:"100%",background:"#0f172a",color:"white",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",zIndex:9999,fontFamily:"Tajawal, sans-serif"},children:[o.jsx("div",{style:{width:"60px",height:"60px",border:"4px solid rgba(6,182,212,0.3)",borderTopColor:"#06b6d4",borderRadius:"50%",animation:"spin 1s linear infinite",marginBottom:"20px"}}),o.jsx("style",{children:"@keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }"}),o.jsx("h2",{style:{fontSize:"24px",fontWeight:"bold",marginBottom:"10px"},children:"  "}),o.jsx("p",{style:{opacity:.7,fontSize:"14px"},children:k}),o.jsx("div",{className:"mt-4 p-3 bg-red-500/10 rounded-lg text-xs text-red-200 border border-red-500/20 max-w-xs text-center",children:":      "})]}):o.jsx(VN.Provider,{value:{items:e,workers:a,customers:c,sales:m,expenses:x,distribution:b,security:O,logs:S,isOnline:C,isDarkMode:M,systemDate:Z,setSystemDate:te,toggleTheme:q,addItem:Te,updateItem:U,deleteItem:$,reorderItems:ue,addWorker:fe,updateWorker:Ne,deleteWorker:re,addCustomer:Ie,updateCustomer:Oe,addCustomerTransaction:ye,addSale:De,addExpense:Dt,updateExpense:Rt,updateDistribution:Ut,addDistributionCash:St,updateSecurity:cn,resetSystem:yn,restoreBackup:be,logAction:G,migrateDataDate:Ee,forceFix14to6:pe},children:r})};/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K3=r=>r.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Y3=r=>r.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,a)=>a?a.toUpperCase():t.toLowerCase()),Cw=r=>{const e=Y3(r);return e.charAt(0).toUpperCase()+e.slice(1)},ON=(...r)=>r.filter((e,t,a)=>!!e&&e.trim()!==""&&a.indexOf(e)===t).join(" ").trim(),X3=r=>{for(const e in r)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Z3={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J3=A.forwardRef(({color:r="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:a,className:l="",children:c,iconNode:d,...m},p)=>A.createElement("svg",{ref:p,...Z3,width:e,height:e,stroke:r,strokeWidth:a?Number(t)*24/Number(e):t,className:ON("lucide",l),...!c&&!X3(m)&&{"aria-hidden":"true"},...m},[...d.map(([x,v])=>A.createElement(x,v)),...Array.isArray(c)?c:[c]]));/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ve=(r,e)=>{const t=A.forwardRef(({className:a,...l},c)=>A.createElement(J3,{ref:c,iconNode:e,className:ON(`lucide-${K3(Cw(r))}`,`lucide-${r}`,a),...l}));return t.displayName=Cw(r),t};/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W3=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],eC=ve("activity",W3);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tC=[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]],PN=ve("archive",tC);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nC=[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]],sC=ve("arrow-down",nC);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rC=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],Qt=ve("arrow-right",rC);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aC=[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]],iC=ve("arrow-up-right",aC);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lC=[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]],oC=ve("arrow-up",lC);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cC=[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"2",key:"9lu3g6"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M6 12h.01M18 12h.01",key:"113zkx"}]],uf=ve("banknote",cC);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uC=[["path",{d:"M4.5 3h15",key:"c7n0jr"}],["path",{d:"M6 3v16a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2V3",key:"m1uhx7"}],["path",{d:"M6 14h12",key:"4cwo0f"}]],LN=ve("beaker",uC);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dC=[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]],hC=ve("calculator",dC);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fC=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 18h.01",key:"lrp35t"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M16 18h.01",key:"kzsmim"}]],mC=ve("calendar-days",fC);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pC=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],si=ve("calendar",pC);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gC=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],oi=ve("chart-column",gC);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xC=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],df=ve("check",xC);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yC=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],bC=ve("chevron-down",yC);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vC=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],zN=ve("chevron-left",vC);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wC=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],_C=ve("chevron-up",wC);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NC=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],EC=ve("circle-alert",NC);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SC=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 8v8",key:"napkw2"}],["path",{d:"m8 12 4 4 4-4",key:"k98ssh"}]],nl=ve("circle-arrow-down",SC);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TC=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m16 12-4-4-4 4",key:"177agl"}],["path",{d:"M12 16V8",key:"1sbj14"}]],sl=ve("circle-arrow-up",TC);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jC=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],UN=ve("circle-check-big",jC);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AC=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]],_u=ve("clipboard-list",AC);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CC=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],BN=ve("clock",CC);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IC=[["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M14 2v2",key:"6buw04"}],["path",{d:"M16 8a1 1 0 0 1 1 1v8a4 4 0 0 1-4 4H7a4 4 0 0 1-4-4V9a1 1 0 0 1 1-1h14a4 4 0 1 1 0 8h-1",key:"pwadti"}],["path",{d:"M6 2v2",key:"colzsn"}]],qN=ve("coffee",IC);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DC=[["circle",{cx:"8",cy:"8",r:"6",key:"3yglwk"}],["path",{d:"M18.09 10.37A6 6 0 1 1 10.34 18",key:"t5s6rm"}],["path",{d:"M7 6h1v4",key:"1obek4"}],["path",{d:"m16.71 13.88.7.71-2.82 2.82",key:"1rbuyh"}]],RC=ve("coins",DC);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kC=[["path",{d:"M22 7.7c0-.6-.4-1.2-.8-1.5l-6.3-3.9a1.72 1.72 0 0 0-1.7 0l-10.3 6c-.5.2-.9.8-.9 1.4v6.6c0 .5.4 1.2.8 1.5l6.3 3.9a1.72 1.72 0 0 0 1.7 0l10.3-6c.5-.3.9-1 .9-1.5Z",key:"1t2lqe"}],["path",{d:"M10 21.9V14L2.1 9.1",key:"o7czzq"}],["path",{d:"m10 14 11.9-6.9",key:"zm5e20"}],["path",{d:"M14 19.8v-8.1",key:"159ecu"}],["path",{d:"M18 17.5V9.4",key:"11uown"}]],FN=ve("container",kC);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MC=[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]],VC=ve("credit-card",MC);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OC=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5v14a9 3 0 0 0 18 0V5",key:"aqi0yr"}]],HN=ve("cylinder",OC);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PC=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]],$N=ve("database",PC);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LC=[["path",{d:"M12 22a7 7 0 0 0 7-7c0-2-1-3.9-3-5.5s-3.5-4-4-6.5c-.5 2.5-2 4.9-4 6.5C6 11.1 5 13 5 15a7 7 0 0 0 7 7z",key:"c7niix"}]],rl=ve("droplet",LC);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zC=[["path",{d:"M7 16.3c2.2 0 4-1.83 4-4.05 0-1.16-.57-2.26-1.71-3.19S7.29 6.75 7 5.3c-.29 1.45-1.14 2.84-2.29 3.76S3 11.1 3 12.25c0 2.22 1.8 4.05 4 4.05z",key:"1ptgy4"}],["path",{d:"M12.56 6.6A10.97 10.97 0 0 0 14 3.02c.5 2.5 2 4.9 4 6.5s3 3.5 3 5.5a6.98 6.98 0 0 1-11.91 4.97",key:"1sl1rz"}]],W0=ve("droplets",zC);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UC=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]],GN=ve("ellipsis",UC);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BC=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],qC=ve("eye",BC);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FC=[["path",{d:"M16 22h2a2 2 0 0 0 2-2V8a2.4 2.4 0 0 0-.706-1.706l-3.588-3.588A2.4 2.4 0 0 0 14 2H6a2 2 0 0 0-2 2v2.85",key:"ryk6xj"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M8 14v2.2l1.6 1",key:"6m4bie"}],["circle",{cx:"8",cy:"16",r:"6",key:"10v15b"}]],HC=ve("file-clock",FC);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $C=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],ol=ve("file-text",$C);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GC=[["path",{d:"M14 2v6a2 2 0 0 0 .245.96l5.51 10.08A2 2 0 0 1 18 22H6a2 2 0 0 1-1.755-2.96l5.51-10.08A2 2 0 0 0 10 8V2",key:"18mbvz"}],["path",{d:"M6.453 15h11.094",key:"3shlmq"}],["path",{d:"M8.5 2h7",key:"csnxdl"}]],QN=ve("flask-conical",GC);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QC=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],KC=ve("funnel",QC);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YC=[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]],XC=ve("gift",YC);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZC=[["path",{d:"M5.116 4.104A1 1 0 0 1 6.11 3h11.78a1 1 0 0 1 .994 1.105L17.19 20.21A2 2 0 0 1 15.2 22H8.8a2 2 0 0 1-2-1.79z",key:"p55z4y"}],["path",{d:"M6 12a5 5 0 0 1 6 0 5 5 0 0 0 6 0",key:"mjntcy"}]],KN=ve("glass-water",ZC);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JC=[["line",{x1:"22",x2:"2",y1:"12",y2:"12",key:"1y58io"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}],["line",{x1:"6",x2:"6.01",y1:"16",y2:"16",key:"sgf278"}],["line",{x1:"10",x2:"10.01",y1:"16",y2:"16",key:"1l4acy"}]],WC=ve("hard-drive",JC);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eI=[["path",{d:"M2 9.5a5.5 5.5 0 0 1 9.591-3.676.56.56 0 0 0 .818 0A5.49 5.49 0 0 1 22 9.5c0 2.29-1.5 4-3 5.5l-5.492 5.313a2 2 0 0 1-3 .019L5 15c-1.5-1.5-3-3.2-3-5.5",key:"mvr1a0"}]],Iw=ve("heart",eI);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tI=[["path",{d:"M2.586 17.414A2 2 0 0 0 2 18.828V21a1 1 0 0 0 1 1h3a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h1a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h.172a2 2 0 0 0 1.414-.586l.814-.814a6.5 6.5 0 1 0-4-4z",key:"1s6t7t"}],["circle",{cx:"16.5",cy:"7.5",r:".5",fill:"currentColor",key:"w0ekpg"}]],Gf=ve("key-round",tI);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nI=[["path",{d:"M3 5h.01",key:"18ugdj"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 19h.01",key:"noohij"}],["path",{d:"M8 5h13",key:"1pao27"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 19h13",key:"m83p4d"}]],YN=ve("list",nI);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sI=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 9.9-1",key:"1mm8w8"}]],Dw=ve("lock-open",sI);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rI=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],Ya=ve("lock",rI);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aI=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],iI=ve("log-out",aI);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lI=[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]],oI=ve("menu",lI);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cI=[["path",{d:"M8 2h8",key:"1ssgc1"}],["path",{d:"M9 2v2.789a4 4 0 0 1-.672 2.219l-.656.984A4 4 0 0 0 7 10.212V20a2 2 0 0 0 2 2h6a2 2 0 0 0 2-2v-9.789a4 4 0 0 0-.672-2.219l-.656-.984A4 4 0 0 1 15 4.788V2",key:"qtp12x"}],["path",{d:"M7 15a6.472 6.472 0 0 1 5 0 6.47 6.47 0 0 0 5 0",key:"ygeh44"}]],XN=ve("milk",cI);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uI=[["path",{d:"M5 12h14",key:"1ays0h"}]],ex=ve("minus",uI);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dI=[["path",{d:"m16 16 2 2 4-4",key:"gfu2re"}],["path",{d:"M21 10V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l2-1.14",key:"e7tb2h"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["line",{x1:"12",x2:"12",y1:"22",y2:"12",key:"a4e8g8"}]],ZN=ve("package-check",dI);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hI=[["path",{d:"M16 16h6",key:"100bgy"}],["path",{d:"M19 13v6",key:"85cyf1"}],["path",{d:"M21 10V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l2-1.14",key:"e7tb2h"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["line",{x1:"12",x2:"12",y1:"22",y2:"12",key:"a4e8g8"}]],JN=ve("package-plus",hI);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fI=[["path",{d:"M21 10V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l2-1.14",key:"e7tb2h"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["line",{x1:"12",x2:"12",y1:"22",y2:"12",key:"a4e8g8"}],["circle",{cx:"18.5",cy:"15.5",r:"2.5",key:"b5zd12"}],["path",{d:"M20.27 17.27 22 19",key:"1l4muz"}]],zu=ve("package-search",fI);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mI=[["path",{d:"M19 12H2",key:"pryw86"}],["path",{d:"M21.145 18.38A3.34 3.34 0 0 1 20 16.5a3.3 3.3 0 0 1-1.145 1.88c-.575.46-.855 1.02-.855 1.595A2 2 0 0 0 20 22a2 2 0 0 0 2-2.025c0-.58-.285-1.13-.855-1.595",key:"1nkol4"}],["path",{d:"m6 2 5 5",key:"1qb0ky"}],["path",{d:"m8.5 4.5 2.148-2.148a1.205 1.205 0 0 1 1.704 0l7.296 7.296a1.205 1.205 0 0 1 0 1.704l-7.592 7.592a3.615 3.615 0 0 1-5.112 0l-3.888-3.888a3.615 3.615 0 0 1 0-5.112L5.67 7.33",key:"1nk1rd"}]],WN=ve("paint-bucket",mI);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pI=[["path",{d:"M12 22a1 1 0 0 1 0-20 10 9 0 0 1 10 9 5 5 0 0 1-5 5h-2.25a1.75 1.75 0 0 0-1.4 2.8l.3.4a1.75 1.75 0 0 1-1.4 2.8z",key:"e79jfc"}],["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}]],gI=ve("palette",pI);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xI=[["path",{d:"M13 21h8",key:"1jsn5i"}],["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],cl=ve("pen-line",xI);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yI=[["line",{x1:"19",x2:"5",y1:"5",y2:"19",key:"1x9vlm"}],["circle",{cx:"6.5",cy:"6.5",r:"2.5",key:"4mh3h7"}],["circle",{cx:"17.5",cy:"17.5",r:"2.5",key:"1mdrzq"}]],bI=ve("percent",yI);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vI=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Xa=ve("plus",vI);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wI=[["path",{d:"M12 2v10",key:"mnfbl"}],["path",{d:"M18.4 6.6a9 9 0 1 1-12.77.04",key:"obofu9"}]],_I=ve("power",wI);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NI=[["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["path",{d:"M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6",key:"1itne7"}],["rect",{x:"6",y:"14",width:"12",height:"8",rx:"1",key:"1ue0tg"}]],eE=ve("printer",NI);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EI=[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1Z",key:"q3az6g"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17.5v-11",key:"1jc1ny"}]],hf=ve("receipt",EI);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SI=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],Qf=ve("rotate-ccw",SI);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TI=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],Js=ve("save",TI);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jI=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],tx=ve("search",jI);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AI=[["rect",{width:"20",height:"8",x:"2",y:"2",rx:"2",ry:"2",key:"ngkwjq"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",ry:"2",key:"iecqi9"}],["line",{x1:"6",x2:"6.01",y1:"6",y2:"6",key:"16zg32"}],["line",{x1:"6",x2:"6.01",y1:"18",y2:"18",key:"nzw8ys"}]],CI=ve("server",AI);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const II=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Wg=ve("settings",II);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DI=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],RI=ve("shield-check",DI);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kI=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],tE=ve("shield",kI);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MI=[["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}],["path",{d:"M3.103 6.034h17.794",key:"awc11p"}],["path",{d:"M3.4 5.467a2 2 0 0 0-.4 1.2V20a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6.667a2 2 0 0 0-.4-1.2l-2-2.667A2 2 0 0 0 17 2H7a2 2 0 0 0-1.6.8z",key:"o988cm"}]],is=ve("shopping-bag",MI);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VI=[["path",{d:"m4 4 2.5 2.5",key:"uv2vmf"}],["path",{d:"M13.5 6.5a4.95 4.95 0 0 0-7 7",key:"frdkwv"}],["path",{d:"M15 5 5 15",key:"1ag8rq"}],["path",{d:"M14 17v.01",key:"eokfpp"}],["path",{d:"M10 16v.01",key:"14uyyl"}],["path",{d:"M13 13v.01",key:"1v1k97"}],["path",{d:"M16 10v.01",key:"5169yg"}],["path",{d:"M11 20v.01",key:"cj92p8"}],["path",{d:"M17 14v.01",key:"11cswd"}],["path",{d:"M20 11v.01",key:"19e0od"}]],nE=ve("shower-head",VI);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OI=[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]],sE=ve("smartphone",OI);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PI=[["path",{d:"M5 3a2 2 0 0 0-2 2",key:"y57alp"}],["path",{d:"M19 3a2 2 0 0 1 2 2",key:"18rm91"}],["path",{d:"M21 19a2 2 0 0 1-2 2",key:"1j7049"}],["path",{d:"M5 21a2 2 0 0 1-2-2",key:"sbafld"}],["path",{d:"M9 3h1",key:"1yesri"}],["path",{d:"M9 21h1",key:"15o7lz"}],["path",{d:"M14 3h1",key:"1ec4yj"}],["path",{d:"M14 21h1",key:"v9vybs"}],["path",{d:"M3 9v1",key:"1r0deq"}],["path",{d:"M21 9v1",key:"mxsmne"}],["path",{d:"M3 14v1",key:"vnatye"}],["path",{d:"M21 14v1",key:"169vum"}]],rE=ve("square-dashed",PI);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LI=[["path",{d:"M15 21v-5a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v5",key:"slp6dd"}],["path",{d:"M17.774 10.31a1.12 1.12 0 0 0-1.549 0 2.5 2.5 0 0 1-3.451 0 1.12 1.12 0 0 0-1.548 0 2.5 2.5 0 0 1-3.452 0 1.12 1.12 0 0 0-1.549 0 2.5 2.5 0 0 1-3.77-3.248l2.889-4.184A2 2 0 0 1 7 2h10a2 2 0 0 1 1.653.873l2.895 4.192a2.5 2.5 0 0 1-3.774 3.244",key:"o0xfot"}],["path",{d:"M4 10.95V19a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8.05",key:"wn3emo"}]],aE=ve("store",LI);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zI=[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]],Rw=ve("tag",zI);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UI=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],ul=ve("trash-2",UI);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BI=[["path",{d:"M16 17h6v-6",key:"t6n2it"}],["path",{d:"m22 17-8.5-8.5-5 5L2 7",key:"x473p"}]],qI=ve("trending-down",BI);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FI=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],HI=ve("trending-up",FI);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $I=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],Kf=ve("triangle-alert",$I);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GI=[["path",{d:"M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2",key:"wrbu53"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["path",{d:"M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14",key:"lysw3i"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}]],al=ve("truck",GI);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QI=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],Nu=ve("user-plus",QI);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KI=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"17",x2:"22",y1:"8",y2:"13",key:"3nzzx3"}],["line",{x1:"22",x2:"17",y1:"8",y2:"13",key:"1swrse"}]],YI=ve("user-x",KI);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XI=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],nx=ve("user",XI);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZI=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],Za=ve("users",ZI);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JI=[["path",{d:"M19 7V4a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4h-3a2 2 0 0 0 0 4h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1",key:"18etb6"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1v-4",key:"xoc0q4"}]],Uu=ve("wallet",JI);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WI=[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}],["path",{d:"M5 12.859a10 10 0 0 1 5.17-2.69",key:"1dl1wf"}],["path",{d:"M19 12.859a10 10 0 0 0-2.007-1.523",key:"4k23kn"}],["path",{d:"M2 8.82a15 15 0 0 1 4.177-2.643",key:"1grhjp"}],["path",{d:"M22 8.82a15 15 0 0 0-11.288-3.764",key:"z3jwby"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],eD=ve("wifi-off",WI);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tD=[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]],nD=ve("wifi",tD);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sD=[["path",{d:"M8 22h8",key:"rmew8v"}],["path",{d:"M7 10h10",key:"1101jm"}],["path",{d:"M12 15v7",key:"t2xh3l"}],["path",{d:"M12 15a5 5 0 0 0 5-5c0-2-.5-4-2-8H9c-1.5 4-2 6-2 8a5 5 0 0 0 5 5Z",key:"10ffi3"}]],Eu=ve("wine",sD);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rD=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],dl=ve("x",rD);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aD=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],Nh=ve("zap",aD),iD=({onLogin:r})=>{const{security:e}=lt(),[t,a]=A.useState(""),[l,c]=A.useState(""),[d,m]=A.useState(!1),[p,x]=A.useState(!1),[v,b]=A.useState(!1),[N,S]=A.useState(!1);A.useEffect(()=>{S(!0)},[]);const z=O=>{O.preventDefault(),x(!0),m(!1),setTimeout(()=>{const P=t.trim().toLowerCase(),C=e.securityUsername.trim().toLowerCase();P===C&&l===e.securityPassword?r():(m(!0),x(!1),setTimeout(()=>m(!1),3e3))},600)};return o.jsxs("div",{className:"min-h-screen flex items-center justify-center relative p-4 overflow-hidden",children:[o.jsx("div",{className:"absolute inset-0 bg-[url('https://images.unsplash.com/photo-1518837695005-2083093ee35b?q=80&w=2070&auto=format&fit=crop')] bg-cover bg-center scale-105"}),o.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-slate-900/90 via-slate-800/85 to-blue-900/80 backdrop-blur-[4px]"}),o.jsxs("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[o.jsx("div",{className:"absolute top-1/4 left-1/4 w-64 h-64 bg-cyan-500/10 rounded-full blur-3xl animate-pulse"}),o.jsx("div",{className:"absolute bottom-1/4 right-1/4 w-96 h-96 bg-blue-600/10 rounded-full blur-3xl animate-pulse delay-1000"})]}),o.jsxs("div",{className:`glass-card w-full max-w-[360px] p-8 relative z-10 border border-white/10 shadow-[0_0_60px_rgba(0,0,0,0.4)] bg-black/20 backdrop-blur-xl rounded-3xl transition-all duration-1000 transform ${N?"translate-y-0 opacity-100":"translate-y-10 opacity-0"}`,children:[o.jsxs("div",{className:"flex flex-col items-center mb-8",children:[o.jsxs("div",{className:"relative group cursor-default",children:[o.jsx("div",{className:"absolute -inset-1 bg-gradient-to-tr from-cyan-400 to-blue-600 rounded-full blur opacity-20 group-hover:opacity-50 transition duration-500"}),o.jsx("div",{className:"relative w-24 h-24 rounded-full bg-slate-900/90 flex items-center justify-center overflow-hidden border-2 border-white/10 shadow-2xl ring-1 ring-white/5",children:v?o.jsx(W0,{className:"w-10 h-10 text-cyan-400"}):o.jsx("img",{src:"https://i.ibb.co/1JhVrjMq/1765715587638.png",alt:"Ajwan Logo",className:"w-full h-full object-cover opacity-90 hover:scale-110 transition-transform duration-700",onError:()=>b(!0)})})]}),o.jsx("h2",{className:"text-2xl font-bold text-white mt-4 font-['Amiri'] tracking-wide drop-shadow-md",children:"Welcome"})]}),o.jsxs("form",{onSubmit:z,className:"space-y-4",dir:"rtl",children:[o.jsxs("div",{className:"space-y-1 group",children:[o.jsx("label",{className:"text-xs text-cyan-100/60 mr-1 font-bold group-focus-within:text-cyan-400 transition-colors",children:" "}),o.jsxs("div",{className:"relative",children:[o.jsx("div",{className:"absolute inset-y-0 right-0 flex items-center pr-3.5 pointer-events-none",children:o.jsx(nx,{className:"w-5 h-5 text-white/30 group-focus-within:text-cyan-400 transition-colors"})}),o.jsx("input",{type:"text",value:t,onChange:O=>a(O.target.value),className:"w-full bg-white/5 border border-white/10 text-white rounded-xl py-3 pr-11 pl-4 focus:outline-none focus:bg-white/10 focus:border-cyan-500/50 focus:ring-1 focus:ring-cyan-500/20 transition-all text-sm font-medium placeholder-white/20",spellCheck:!1,placeholder:"  "})]})]}),o.jsxs("div",{className:"space-y-1 group",children:[o.jsx("label",{className:"text-xs text-cyan-100/60 mr-1 font-bold group-focus-within:text-cyan-400 transition-colors",children:" "}),o.jsxs("div",{className:"relative",children:[o.jsx("div",{className:"absolute inset-y-0 right-0 flex items-center pr-3.5 pointer-events-none",children:o.jsx(Gf,{className:"w-5 h-5 text-white/30 group-focus-within:text-cyan-400 transition-colors"})}),o.jsx("input",{type:"password",value:l,onChange:O=>c(O.target.value),className:"w-full bg-white/5 border border-white/10 text-white rounded-xl py-3 pr-11 pl-4 focus:outline-none focus:bg-white/10 focus:border-cyan-500/50 focus:ring-1 focus:ring-cyan-500/20 transition-all text-sm font-medium placeholder-white/20",placeholder:"  "})]})]}),o.jsxs("button",{type:"submit",disabled:p,className:`w-full py-3.5 mt-6 bg-gradient-to-r from-cyan-600 to-blue-600 hover:from-cyan-500 hover:to-blue-500 text-white font-bold rounded-xl active:scale-[0.98] transition-all duration-300 flex items-center justify-center gap-2 shadow-lg shadow-cyan-900/20 group relative overflow-hidden ${p?"cursor-not-allowed opacity-80":""}`,children:[o.jsx("span",{children:" "}),o.jsx(zN,{className:"w-4 h-4 group-hover:-translate-x-1 transition-transform"})]})]}),o.jsx("div",{className:`mt-4 overflow-hidden transition-all duration-300 ease-in-out ${d?"max-h-16 opacity-100":"max-h-0 opacity-0"}`,children:o.jsxs("div",{className:"bg-red-500/10 border border-red-500/20 rounded-xl p-3 flex items-center gap-3 text-red-200 text-xs font-bold animate-pulse",children:[o.jsx("div",{className:"p-1 bg-red-500/20 rounded-full",children:o.jsx(EC,{className:"w-4 h-4 text-red-400"})}),o.jsx("span",{children:"    "})]})})]}),o.jsxs("div",{className:"absolute bottom-6 text-white/10 text-[9px] font-mono tracking-widest flex items-center gap-2",children:[o.jsx(Ya,{className:"w-3 h-3 opacity-50"}),"SECURE SYSTEM V3.1"]})]})},It=({children:r,className:e="",variant:t="normal",...a})=>o.jsx("button",{className:`glass-btn px-4 py-2 rounded-xl text-sm font-bold flex items-center justify-center gap-2 ${t==="active"?"active text-cyan-300":"text-white/80 hover:text-white hover:bg-white/10"} ${t==="danger"?"bg-red-500/20 hover:bg-red-500/30 text-red-200":""} ${e}`,...a,children:r}),Mn=({isOpen:r,onClose:e,title:t,children:a,icon:l,maxWidth:c="max-w-md"})=>r?o.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/80 backdrop-blur-sm animate-fade-in",children:o.jsxs("div",{className:`glass-card w-full ${c} max-h-[90vh] flex flex-col relative`,children:[o.jsxs("div",{className:"p-4 border-b border-white/10 flex items-center justify-between shrink-0",children:[o.jsxs("h2",{className:"text-white font-bold text-lg flex items-center gap-2",children:[l,o.jsx("span",{children:t})]}),o.jsx("button",{onClick:e,className:"p-2 hover:bg-white/10 rounded-full text-white/70 hover:text-white transition-colors",children:o.jsx(dl,{className:"w-5 h-5"})})]}),o.jsx("div",{className:"flex-1 overflow-y-auto p-4 custom-scrollbar",children:a})]})}):null,ht=({className:r="",...e})=>o.jsx("input",{className:`input-glass w-full rounded-xl px-4 py-3 text-sm placeholder-white/30 focus:ring-2 focus:ring-cyan-500/50 ${r}`,...e}),Eh=({icon:r,label:e,colorClass:t,onClick:a,isLocked:l})=>o.jsxs("button",{onClick:a,disabled:l,className:`glass-btn p-3 rounded-2xl flex flex-col items-center justify-center gap-2 group min-h-[100px] relative ${l?"opacity-50 cursor-not-allowed":"hover:bg-white/5"}`,children:[o.jsx("div",{className:`p-2 rounded-full transition-colors border ${t}`,children:r}),o.jsx("span",{className:"text-white/90 font-medium text-sm text-center leading-tight",children:e}),l&&o.jsx("span",{className:"absolute top-2 left-2 text-xs",children:""})]}),lD=({onOpenSection:r,onLogout:e})=>{const{security:t,isOnline:a,isDarkMode:l,toggleTheme:c,items:d,workers:m,expenses:p,systemDate:x,setSystemDate:v,sales:b,distribution:N,customers:S}=lt(),[z,O]=A.useState(!1),[P,C]=A.useState(!1),[L,M]=A.useState(!1),[F,Z]=A.useState(0),te=de=>t&&Array.isArray(t.lockedSections)?t.securityEnabled&&t.lockedSections.includes(de):!1,E=A.useMemo(()=>{const de=new Date,xe=new Date(x);return de.toISOString().split("T")[0]!==xe.toISOString().split("T")[0]},[x]),T=A.useMemo(()=>{if(E)return null;const de=new Date,xe=new Intl.DateTimeFormat("ar-SA",{weekday:"long"}).format(de),K=de.toLocaleDateString("en-GB",{day:"2-digit",month:"2-digit",year:"numeric"});return`${xe} | ${K}`},[E]),k=A.useMemo(()=>{const xe=Math.min(F/250,1);return{opacity:1-xe,transform:`scale(${1-xe*.1}) translateY(${xe*10}px)`,filter:`blur(${xe*8}px)`,pointerEvents:xe>.5?"none":"auto",transition:"all 0.1s ease-out"}},[F]),R=A.useMemo(()=>{if(!E)return null;const de=x.toISOString().split("T")[0],xe=b.filter(ye=>ye.fullDate.startsWith(de)&&!ye.isReturn),K=b.filter(ye=>ye.fullDate.startsWith(de)&&ye.isReturn),G=p.filter(ye=>ye.fullDate.startsWith(de)),pe=N.find(ye=>ye.date===de),Ee=xe.filter(ye=>ye.paymentMethod==="cash").reduce((ye,De)=>ye+De.total,0),Te=xe.filter(ye=>ye.paymentMethod==="network").reduce((ye,De)=>ye+De.total,0),U=xe.filter(ye=>ye.paymentMethod==="ajal").reduce((ye,De)=>ye+De.total,0),$=Ee+Te,ue=K.reduce((ye,De)=>ye+Math.abs(De.total),0),fe=G.reduce((ye,De)=>ye+De.amount,0),Ne=pe?pe.cash:0,re=S.flatMap(ye=>ye.transactions).filter(ye=>(ye.items.includes("")||ye.total<0)&&ye.items!==""&&ye.date.includes(new Date(x).toLocaleDateString("en-US",{month:"numeric",day:"numeric",year:"numeric"}))).reduce((ye,De)=>ye+Math.abs(De.total),0),Ie=xe.length+K.length+G.length,Oe=$+Ne-(fe+ue+re);return{dateStr:de,totalSales:xe.reduce((ye,De)=>ye+De.total,0),cashSales:Ee,ajalSales:U,totalReturns:ue,totalExpenses:fe,totalDistCash:Ne,operationCount:Ie,netTotal:Oe}},[x,b,p,N,E,S]),D=()=>v(new Date),q=()=>{C(!1),v(new Date)},V=A.useMemo(()=>{const de=[];return a||de.push({id:"offline",type:"danger",title:" ",message:"    .      .",icon:o.jsx(Nh,{className:"w-5 h-5 text-red-50"})}),d.forEach(xe=>{xe.stock<=xe.warningLimit&&de.push({id:`stock-${xe.id}`,type:"warning",title:" ",message:`   "${xe.name}"  ${xe.stock} .`,icon:o.jsx(Kf,{className:"w-5 h-5 text-yellow-50"})})}),de},[d,a]);return o.jsxs("div",{className:"w-full max-w-md mx-auto p-4 h-screen flex flex-col overflow-y-auto custom-scrollbar",onScroll:de=>Z(de.currentTarget.scrollTop),children:[o.jsx("div",{className:"relative mb-6 z-0 transition-all duration-300 min-h-[260px]",style:k,children:o.jsxs("div",{className:"absolute inset-0 rounded-[2rem] overflow-hidden shadow-[0_20px_50px_-12px_rgba(0,0,0,0.5)] border border-white/10",children:[o.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-cyan-900 via-blue-900 to-slate-900"}),o.jsx("div",{className:"absolute inset-0 opacity-30 bg-[url('https://www.transparenttextures.com/patterns/pool-table.png')] bg-repeat animate-[pulse_8s_ease-in-out_infinite] mix-blend-overlay scale-150"}),o.jsxs("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[o.jsx("style",{children:`
                    @keyframes rise {
                        0% { bottom: -20px; transform: translateX(0); opacity: 0; }
                        50% { opacity: 1; }
                        100% { bottom: 100%; transform: translateX(-20px); opacity: 0; }
                    }
                    .bubble {
                        position: absolute;
                        bottom: -20px;
                        background: radial-gradient(circle at 30% 30%, rgba(255,255,255,0.8), rgba(255,255,255,0.1));
                        border-radius: 50%;
                        animation: rise infinite ease-in;
                        box-shadow: 0 0 10px rgba(255,255,255,0.2);
                    }
                `}),o.jsx("div",{className:"bubble w-4 h-4 left-[10%]",style:{animationDuration:"4s",animationDelay:"0s"}}),o.jsx("div",{className:"bubble w-6 h-6 left-[20%]",style:{animationDuration:"7s",animationDelay:"2s"}}),o.jsx("div",{className:"bubble w-3 h-3 left-[35%]",style:{animationDuration:"5s",animationDelay:"1s"}}),o.jsx("div",{className:"bubble w-8 h-8 left-[50%]",style:{animationDuration:"8s",animationDelay:"3s"}}),o.jsx("div",{className:"bubble w-5 h-5 left-[70%]",style:{animationDuration:"6s",animationDelay:"0.5s"}}),o.jsx("div",{className:"bubble w-2 h-2 left-[85%]",style:{animationDuration:"4.5s",animationDelay:"1.5s"}})]}),o.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-white/10 to-transparent backdrop-blur-[1px]"}),o.jsxs("div",{className:"relative z-10 h-full flex flex-col items-center justify-center p-6 text-white",children:[o.jsxs("div",{className:"relative mb-4 group",children:[o.jsx("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-36 h-36 border border-cyan-400/30 rounded-full animate-[ping_3s_cubic-bezier(0,0,0.2,1)_infinite]"}),o.jsx("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-32 h-32 border border-blue-400/30 rounded-full animate-[ping_3s_cubic-bezier(0,0,0.2,1)_infinite] delay-700"}),o.jsx("div",{className:"w-28 h-28 rounded-full flex items-center justify-center shadow-[0_0_40px_rgba(6,182,212,0.6)] relative z-10 bg-white border-4 border-white/20 overflow-hidden transform group-hover:scale-105 transition-transform duration-500",children:L?o.jsxs("div",{className:"w-full h-full bg-gradient-to-br from-white to-cyan-50 flex flex-col items-center justify-center relative overflow-hidden",children:[o.jsx("div",{className:"absolute inset-0 bg-[url('https://www.transparenttextures.com/patterns/cubes.png')] opacity-10"}),o.jsx(rl,{className:"w-12 h-12 text-cyan-500 fill-cyan-400/20 mb-1 relative z-10",strokeWidth:1.5}),o.jsx("span",{className:"font-['Amiri'] font-bold text-lg text-cyan-800 leading-none relative z-10",children:""})]}):o.jsx("img",{src:"https://i.ibb.co/1JhVrjMq/1765715587638.png",alt:"Ajwan Logo",className:"w-full h-full object-cover",onError:()=>M(!0)})})]}),o.jsxs("div",{className:"text-center space-y-1",children:[o.jsxs("h1",{className:"text-2xl font-bold font-['Tajawal'] tracking-wide drop-shadow-[0_2px_4px_rgba(0,0,0,0.5)]",children:["  ",o.jsx("span",{className:"text-cyan-300 animate-pulse",children:"."})]}),o.jsxs("div",{className:"flex flex-col items-center gap-1.5",children:[o.jsxs("div",{className:"inline-flex items-center gap-2 px-3 py-1 rounded-full bg-black/20 border border-white/10 backdrop-blur-sm",children:[o.jsx(Nh,{className:"w-3 h-3 text-yellow-400 fill-yellow-400 animate-pulse"}),o.jsx("span",{className:"text-xs font-mono tracking-wider text-cyan-100",children:t.securityUsername.toUpperCase()})]}),o.jsxs("div",{className:`inline-flex items-center gap-1.5 px-3 py-0.5 rounded-full border transition-colors ${a?"bg-emerald-500/20 border-emerald-500/30":"bg-red-500/20 border-red-500/30"}`,children:[o.jsx("div",{className:`w-1.5 h-1.5 rounded-full ${a?"bg-emerald-400 animate-pulse":"bg-red-400"}`}),o.jsx("span",{className:`text-[10px] font-bold ${a?"text-emerald-100":"text-red-100"}`,children:a?" ":" "})]})]})]}),o.jsxs("div",{className:"mt-5 flex items-center gap-3",children:[o.jsxs("button",{onClick:()=>O(!0),className:"group relative px-4 py-2 rounded-2xl bg-white/10 border border-white/20 hover:bg-white/20 transition-all flex items-center gap-2 overflow-hidden active:scale-95",children:[o.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-cyan-500/20 to-transparent opacity-0 group-hover:opacity-100 transition-opacity"}),o.jsxs("div",{className:"relative",children:[o.jsx(Nh,{className:"w-5 h-5 text-cyan-200"}),V.length>0&&o.jsx("span",{className:"absolute -top-2 -right-1 min-w-[18px] h-[18px] px-1 bg-red-600 rounded-full border-2 border-[#0f172a] flex items-center justify-center text-[9px] font-bold text-white animate-pulse shadow-lg",children:V.length})]}),o.jsx("span",{className:"text-xs font-bold text-cyan-100",children:""})]}),o.jsx("button",{onClick:c,className:"group relative p-2.5 rounded-2xl bg-white/10 border border-white/20 hover:bg-white/20 transition-all active:scale-95",children:o.jsx(Wg,{className:"w-5 h-5 text-white group-hover:rotate-45 transition-transform"})}),o.jsx("button",{onClick:e,className:"group relative p-2.5 rounded-2xl bg-white/10 border border-white/20 hover:bg-red-500/20 hover:border-red-500/30 transition-all active:scale-95",children:o.jsx(iI,{className:"w-5 h-5 text-red-300 group-hover:translate-x-1 transition-transform"})})]})]}),o.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-12 opacity-60",children:o.jsx("svg",{viewBox:"0 0 1440 320",className:"w-full h-full text-white/10 fill-current",children:o.jsx("path",{d:"M0,224L48,213.3C96,203,192,181,288,181.3C384,181,480,203,576,224C672,245,768,267,864,250.7C960,235,1056,181,1152,165.3C1248,149,1344,171,1392,181.3L1440,192L1440,320L1392,320C1344,320,1248,320,1152,320C1056,320,960,320,864,320C768,320,672,320,576,320C480,320,384,320,288,320C192,320,96,320,48,320L0,320Z"})})})]})}),o.jsx("div",{className:"relative z-10 mb-6",children:E?o.jsxs("div",{className:"bg-yellow-500/10 border border-yellow-500/20 rounded-xl p-3 flex flex-col gap-2 animate-fade-in",children:[o.jsxs("div",{className:"flex items-center gap-2 justify-center",children:[o.jsx(si,{className:"w-4 h-4 text-yellow-400"}),o.jsxs("p",{className:"text-xs font-bold text-yellow-300",children:[" : ",o.jsx("span",{dir:"ltr",children:x.toLocaleDateString()})]})]}),o.jsxs("div",{className:"flex gap-2 w-full",children:[o.jsx("button",{onClick:D,className:"flex-1 py-1.5 rounded-lg bg-white/5 text-[10px] text-white/70",children:""}),o.jsx("button",{onClick:()=>C(!0),className:"flex-1 py-1.5 rounded-lg bg-green-500/20 text-[10px] text-green-300",children:""})]})]}):o.jsxs("div",{className:"water-date-container rounded-xl p-3 flex items-center justify-center gap-2 relative overflow-hidden shadow-lg transform transition-transform hover:scale-[1.02] active:scale-95 duration-200 cursor-default",children:[o.jsx("div",{className:"absolute inset-0 opacity-20 bg-[url('https://www.transparenttextures.com/patterns/cubes.png')] mix-blend-overlay"}),o.jsx(mC,{className:"w-5 h-5 text-cyan-200 drop-shadow"}),o.jsx("span",{className:"text-sm font-bold text-white drop-shadow font-mono tracking-wider",children:T})]})}),o.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-6 relative z-10",children:[o.jsxs("button",{onClick:()=>r("sales-menu"),className:`glass-btn p-3 rounded-2xl flex flex-col items-center justify-center gap-2 col-span-2 min-h-[90px] group bg-gradient-to-r from-blue-600/20 to-cyan-600/20 border-white/10 hover:border-white/20 ${te("safary")&&te("filling")?"opacity-50":""}`,children:[o.jsx("div",{className:"p-3 bg-white/10 rounded-full group-hover:scale-110 transition-transform",children:o.jsx(aE,{className:"w-8 h-8 text-cyan-200 drop-shadow-md"})}),o.jsx("span",{className:"text-white font-bold text-lg",children:""}),o.jsxs("div",{className:"flex gap-2 text-[10px] text-white/50",children:[o.jsx("span",{children:""}),o.jsx("span",{children:""}),o.jsx("span",{children:""})]})]}),o.jsx(Eh,{icon:o.jsx("div",{className:"animate-float delay-200",children:o.jsx(Uu,{className:"w-5 h-5 text-red-300"})}),label:"",colorClass:"bg-red-500/10 border-red-500/20",onClick:()=>r("expenses"),isLocked:te("expenses")}),o.jsx(Eh,{icon:o.jsx("div",{className:"animate-float delay-300",children:o.jsx(_u,{className:"w-5 h-5 text-yellow-300"})}),label:"",colorClass:"bg-yellow-500/10 border-yellow-500/20",onClick:()=>r("ajal-menu"),isLocked:te("ajal")}),o.jsx(Eh,{icon:o.jsx("div",{className:"animate-float",children:o.jsx(zu,{className:"w-5 h-5 text-purple-300"})}),label:"",colorClass:"bg-purple-500/10 border-purple-500/20",onClick:()=>r("inventory"),isLocked:te("inventory")}),o.jsx(Eh,{icon:o.jsx("div",{className:"animate-float delay-100",children:o.jsx(al,{className:"w-5 h-5 text-green-300"})}),label:"",colorClass:"bg-green-500/10 border-green-500/20",onClick:()=>r("distribution"),isLocked:te("distribution")}),o.jsxs("button",{onClick:()=>r("reports"),className:`glass-btn p-3 rounded-2xl flex items-center justify-center gap-3 col-span-2 min-h-[70px] ${te("reports")?"opacity-50":"hover:bg-white/5"} active:scale-95 transition-all`,children:[o.jsx("div",{className:"p-2 bg-indigo-500/10 rounded-full border border-indigo-500/20 animate-float delay-200",children:o.jsx(oi,{className:"w-5 h-5 text-indigo-300"})}),o.jsx("span",{className:"text-white/90 font-medium",children:" "}),te("reports")&&o.jsx(Ya,{className:"w-4 h-4 ml-auto"})]}),o.jsxs("button",{onClick:()=>r("management-menu"),className:"glass-btn p-3 rounded-2xl flex items-center justify-center gap-3 col-span-2 min-h-[70px] hover:bg-gray-500/10 active:scale-95 transition-all",children:[o.jsx("div",{className:"p-2 bg-gray-500/10 rounded-full border border-gray-500/20 animate-float delay-100",children:o.jsx(Wg,{className:"w-5 h-5 text-gray-300"})}),o.jsx("span",{className:"text-white/90 font-medium",children:" "})]})]}),o.jsx("div",{className:"glass-card glass-shine py-10 px-6 rounded-3xl flex items-center justify-center border-t border-t-cyan-500/30 bg-gradient-to-b from-white/5 to-transparent mt-auto relative overflow-hidden z-10 mb-4",children:o.jsx("p",{className:"text-cyan-100/90 text-2xl font-['Amiri'] leading-loose drop-shadow-md relative z-10",children:"       "})}),o.jsx(Mn,{isOpen:P&&!!R,onClose:()=>C(!1),title:"  ",icon:o.jsx(Js,{className:"text-green-400"}),children:R&&o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"text-center bg-white/5 p-3 rounded-xl border border-white/10 mb-4",children:[o.jsx("p",{className:"text-xs text-white/60 mb-1",children:"   "}),o.jsx("p",{className:"text-lg font-bold text-white font-mono",dir:"ltr",children:R.dateStr}),o.jsx("p",{className:"text-[10px] text-yellow-300 mt-1",children:"      "})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[o.jsxs("div",{className:"glass-inner p-3 rounded-lg text-center",children:[o.jsx("p",{className:"text-[10px] text-white/50 mb-1",children:" "}),o.jsx("p",{className:"text-xl font-bold",children:R.operationCount})]}),o.jsxs("div",{className:`glass-inner p-3 rounded-lg text-center ${R.netTotal>=0?"border-green-500/30":"border-red-500/30"}`,children:[o.jsx("p",{className:"text-[10px] text-white/50 mb-1",children:"  ()"}),o.jsxs("p",{className:`text-xl font-bold ${R.netTotal>=0?"text-green-300":"text-red-300"}`,children:[R.netTotal," ."]})]})]}),o.jsxs("div",{className:"space-y-2 text-sm",children:[o.jsxs("div",{className:"flex justify-between items-center p-2 rounded bg-green-500/10 border border-green-500/10",children:[o.jsxs("span",{className:"flex items-center gap-2 text-green-200",children:[o.jsx(HI,{className:"w-4 h-4"}),"  ( + )"]}),o.jsx("span",{className:"font-bold",children:R.totalSales-R.ajalSales})]}),R.ajalSales>0&&o.jsxs("div",{className:"flex justify-between items-center p-2 rounded bg-yellow-500/10 border border-yellow-500/10",children:[o.jsxs("span",{className:"flex items-center gap-2 text-yellow-200",children:[o.jsx(_u,{className:"w-4 h-4"}),"   ()"]}),o.jsx("span",{className:"font-bold",children:R.ajalSales})]}),o.jsxs("div",{className:"flex justify-between items-center p-2 rounded bg-blue-500/10 border border-blue-500/10",children:[o.jsxs("span",{className:"flex items-center gap-2 text-blue-200",children:[o.jsx(uf,{className:"w-4 h-4"}),"  "]}),o.jsx("span",{className:"font-bold",children:R.totalDistCash})]}),o.jsxs("div",{className:"flex justify-between items-center p-2 rounded bg-red-500/10 border border-red-500/10",children:[o.jsxs("span",{className:"flex items-center gap-2 text-red-200",children:[o.jsx(qI,{className:"w-4 h-4"}),"  "]}),o.jsxs("span",{className:"font-bold text-red-300",children:["-",R.totalExpenses+R.totalReturns]})]})]}),o.jsxs("div",{className:"flex gap-2 pt-2",children:[o.jsx("button",{onClick:()=>C(!1),className:"flex-1 py-3 bg-white/5 hover:bg-white/10 rounded-xl text-xs",children:""}),o.jsxs(It,{onClick:q,className:"flex-1 bg-green-600/30 hover:bg-green-600/40 text-green-200",children:[o.jsx(df,{className:"w-4 h-4"}),"   "]})]})]})}),o.jsxs(Mn,{isOpen:z,onClose:()=>O(!1),title:" ",icon:o.jsx(Nh,{className:"text-yellow-400"}),maxWidth:"max-w-sm",children:[o.jsx("div",{className:"flex justify-end mb-2",children:o.jsxs("button",{className:"text-xs text-white/40 hover:text-white flex items-center gap-1 transition-colors",onClick:()=>O(!1),children:[o.jsx(ul,{className:"w-3 h-3"}),"  "]})}),o.jsx("div",{className:"space-y-3",children:V.length===0?o.jsxs("div",{className:"text-center py-12 px-4 rounded-3xl bg-white/5 border border-dashed border-white/10",children:[o.jsx(df,{className:"w-16 h-16 mx-auto mb-4 text-green-400/50"}),o.jsx("p",{className:"text-white/80 font-bold",children:"   "}),o.jsx("p",{className:"text-white/40 text-xs mt-1",children:"       !"})]}):V.map(de=>o.jsxs("div",{className:`relative overflow-hidden rounded-2xl p-4 flex items-start gap-4 transition-all hover:scale-[1.02] shadow-lg ${de.type==="danger"?"bg-gradient-to-br from-red-600/20 to-red-900/40 border border-red-500/30":de.type==="warning"?"bg-gradient-to-br from-yellow-600/20 to-yellow-900/40 border border-yellow-500/30":"bg-gradient-to-br from-blue-600/20 to-blue-900/40 border border-blue-500/30"}`,children:[o.jsx("div",{className:`absolute right-0 top-0 bottom-0 w-1 ${de.type==="danger"?"bg-red-500":de.type==="warning"?"bg-yellow-500":"bg-blue-500"}`}),o.jsx("div",{className:`p-3 rounded-full shrink-0 shadow-inner ${de.type==="danger"?"bg-red-500/30 text-red-200":de.type==="warning"?"bg-yellow-500/30 text-yellow-200":"bg-blue-500/30 text-blue-200"}`,children:de.icon}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("h4",{className:`font-bold text-sm mb-1 ${de.type==="danger"?"text-red-200":de.type==="warning"?"text-yellow-200":"text-blue-200"}`,children:de.title}),o.jsx("p",{className:"text-white/80 text-xs leading-relaxed font-light",children:de.message}),o.jsx("span",{className:"text-[10px] text-white/30 mt-2 block font-mono text-left",dir:"ltr",children:"Just now"})]})]},de.id))})]})]})},as=r=>{const e=new Date,t=new Date(r);return t.setHours(e.getHours(),e.getMinutes(),e.getSeconds()),t.toLocaleString("en-US",{hour:"numeric",minute:"numeric",hour12:!0,month:"numeric",day:"numeric",year:"numeric"})},ri=r=>{const e=new Date,t=new Date(r);return t.setHours(e.getHours(),e.getMinutes(),e.getSeconds()),t.toISOString()},Su=r=>{try{return new Date(r).toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0})}catch{return""}},ea=(r,e,t)=>{if(!r)return!1;try{const a=new Date(r),l=new Date(e);l.setHours(0,0,0,0);const c=new Date(t);return c.setHours(23,59,59,999),a>=l&&a<=c}catch{return!1}},oD=(r,e,t,a,l,c,d,m,p)=>{const x=window.open("","_blank","width=300,height=600");if(!x)return;const v=l?-c:c,b=`
        <!DOCTYPE html>
        <html lang="ar" dir="rtl">
        <head>
            <title> -   </title>
            <style>
                body { font-family: 'Courier New', monospace; margin: 0; padding: 10px; width: 58mm; font-size: 12px; color: black; background: white; }
                .header { text-align: center; margin-bottom: 10px; border-bottom: 1px dashed black; padding-bottom: 5px; }
                .title { font-size: 14px; font-weight: bold; margin: 0; }
                .meta { font-size: 10px; color: #333; margin-top: 5px; }
                .item { display: flex; justify-content: space-between; margin-bottom: 4px; font-size: 11px; }
                .divider { border-top: 1px dashed black; margin: 10px 0; }
                .total { display: flex; justify-content: space-between; font-weight: bold; font-size: 14px; margin-top: 5px; }
                .discount { display: flex; justify-content: space-between; font-size: 11px; margin-top: 2px; color: #555; }
                .return-badge { text-align: center; border: 1px solid black; padding: 2px; margin: 5px 0; font-weight: bold; }
                .footer { text-align: center; margin-top: 15px; font-size: 10px; }
                @media print { @page { margin: 0; } body { margin: 0; padding: 5px; } }
            </style>
        </head>
        <body>
            <div class="header">
                <h2 class="title">  </h2>
                <div class="meta">${m}</div>
                <div class="meta"> : ${e==="safary"?"":""}</div>
                ${t==="ajal"?`<div class="meta">: ${a}</div>`:""}
            </div>
            ${l?'<div class="return-badge">***   ***</div>':""}
            <div>
                ${r.map(N=>`
                    <div class="item">
                        <span>${N.name} (x${N.qty})</span>
                        <span>${l?"-":""}${N.total}</span>
                    </div>
                `).join("")}
            </div>
            <div class="divider"></div>
            ${p>0&&!l?`
            <div class="discount"><span> </span><span>${d}</span></div>
            <div class="discount"><span> </span><span>-${p}</span></div>
            <div class="divider"></div>`:""}
            <div class="total"><span></span><span>${v} .</span></div>
            <div class="footer"> <br> </div>
            <script>window.onload = function() { window.print(); }<\/script>
        </body>
        </html>
    `;x.document.write(b),x.document.close()},cD=(r,e,t,a)=>{const l=window.open("","_blank","width=800,height=600");if(!l)return;const c=`
        <!DOCTYPE html>
        <html lang="ar" dir="rtl">
        <head>
            <title>${r} - ${e}</title>
            <style>
                body { font-family: 'Tajawal', sans-serif; padding: 20px; }
                h1, h2 { text-align: center; margin: 5px 0; }
                table { width: 100%; border-collapse: collapse; margin-top: 20px; font-size: 12px; }
                th, td { border: 1px solid #ddd; padding: 8px; text-align: center; }
                th { background-color: #f2f2f2; }
                .header { text-align: center; margin-bottom: 20px; border-bottom: 2px solid #333; padding-bottom: 10px; }
                .summary { margin-top: 20px; text-align: left; font-size: 14px; font-weight: bold; }
                .footer { margin-top: 30px; font-size: 10px; text-align: center; color: #666; }
                @media print { @page { size: A4; margin: 10mm; } body { -webkit-print-color-adjust: exact; } }
            </style>
        </head>
        <body>
            <div class="header">
                <h1>  </h1>
                <h2>${r}</h2>
                <p> : ${e}</p>
            </div>
            <table>${t}</table>
            ${a}
            <div class="footer">      </div>
            <script>window.onload = function() { window.print(); }<\/script>
        </body>
        </html>
    `;l.document.write(c),l.document.close()},hl=(r,e,t,a)=>{const l=window.open("","_blank","width=800,height=600");if(!l)return;const c=`
        <!DOCTYPE html>
        <html lang="ar" dir="rtl">
        <head>
            <title>${r}</title>
            <style>
                body { font-family: 'Tajawal', sans-serif; padding: 20px; }
                .header { text-align: center; margin-bottom: 20px; border-bottom: 2px solid #333; padding-bottom: 10px; }
                h1 { margin: 0; font-size: 24px; }
                p { margin: 5px 0; font-size: 14px; }
                @media print { @page { size: A4; margin: 10mm; } }
            </style>
        </head>
        <body>
            <div class="header">
                <h1>  </h1>
                <h2>${r}</h2>
                <p>:  - ${e}</p>
            </div>
            ${a}
            <div style="margin-top: 30px; font-size: 10px; text-align: center; color: #666;">
                     ${new Date().toLocaleString("ar-EG")}
            </div>
            <script>window.onload = function() { window.print(); }<\/script>
        </body>
        </html>
    `;l.document.write(c),l.document.close()},uD=["",""," ","",""," "],dD=({icon:r,className:e,color:t})=>{const l={className:e,strokeWidth:1.5,style:t?{color:t}:{}};switch(r){case"bottle1":return o.jsx(Eu,{...l});case"bottle2":return o.jsx(XN,{...l});case"bottle3":return o.jsx(HN,{...l});case"bottle4":return o.jsx(nE,{...l});case"glass":return o.jsx(KN,{...l});case"beaker":return o.jsx(LN,{...l});case"flask":return o.jsx(QN,{...l});case"container":return o.jsx(FN,{...l});case"cup":return o.jsx(qN,{...l});case"gallon":return o.jsx(WN,{...l});case"carton":return o.jsx(rE,{...l});case"drops":return o.jsx(W0,{...l});case"tank":return o.jsx(PN,{...l});default:return o.jsx(Eu,{...l})}},kw=({isOpen:r,onClose:e,type:t})=>{const{items:a,addSale:l,customers:c,addCustomer:d,addCustomerTransaction:m,systemDate:p}=lt(),[x,v]=A.useState({}),[b,N]=A.useState("cash"),[S,z]=A.useState(""),[O,P]=A.useState(!1),[C,L]=A.useState(!1),[M,F]=A.useState(""),[Z,te]=A.useState(!1),[E,T]=A.useState(""),[k,R]=A.useState(""),[D,q]=A.useState(null);A.useEffect(()=>{O&&N("cash")},[O]);const V=a.filter(re=>re.category===t),de=Object.entries(x).map(([re,Ie])=>{const Oe=a.find(De=>De.id===parseInt(re)),ye=Number(Ie);return Oe?{id:Oe.id,name:Oe.name,qty:ye,price:Oe.price,total:Oe.price*ye}:null}).filter(re=>re!==null),xe=de.reduce((re,Ie)=>re+Ie.total,0),K=D!==null?D:xe,G=re=>{v(Ie=>({...Ie,[re]:(Ie[re]||0)+1})),q(null)},pe=re=>{v(Ie=>{const Oe=Ie[re]||0;if(Oe<=1){const{[re]:ye,...De}=Ie;return De}return{...Ie,[re]:Oe-1}}),q(null)},Ee=re=>{const{[re]:Ie,...Oe}=x;v(Oe),q(null)},Te=()=>{de.length!==0&&(F(K.toString()),L(!0))},U=()=>{const re=parseFloat(M);!isNaN(re)&&re>=0?re>xe?alert("         "):(q(re),L(!1)):alert("   ")},$=A.useMemo(()=>c.filter(re=>re.name.includes(E)),[c,E]),ue=re=>{z(re),te(!1),T("")},fe=()=>{if(de.length===0)return;const re=D!==null?xe-D:0;oD(de,t,b,S,O,K,xe,as(p),re)},Ne=()=>{if(de.length===0)return;if(b==="network"&&!k){alert("   ");return}if(b==="ajal"){if(!S.trim()){alert("   ");return}let ye=c.find(Dt=>Dt.name===S.trim()),De=ye==null?void 0:ye.id;if(!ye){const Dt={name:S.trim(),phone:"",color:"#3b82f6"};d(Dt),De=c.length>0?Math.max(...c.map(Ut=>Ut.id))+1:1}if(De){const Dt=O?-K:K,Rt={items:(O?": ":"")+de.map(Ut=>Ut.name).join(", "),qty:de.reduce((Ut,St)=>Ut+St.qty,0),total:Dt,date:as(p)};m(De,Rt,Dt)}}const re=Math.max(0,xe-K),Ie=O?-K:K,Oe={type:t,items:de,total:Ie,paymentMethod:b,date:as(p),fullDate:ri(p),discount:re>0?re:0,isReturn:O,...b==="ajal"?{customerName:S}:{},...b==="network"?{networkWallet:k}:{}};l(Oe),v({}),N("cash"),z(""),R(""),q(null),P(!1),e()};return o.jsxs(o.Fragment,{children:[o.jsxs(Mn,{isOpen:r,onClose:e,title:o.jsxs("div",{className:"flex items-center gap-2",children:[t==="safary"?" ":" ",O&&o.jsx("span",{className:"bg-red-500 text-white text-[10px] px-2 py-0.5 rounded-full animate-pulse",children:" "})]}),icon:t==="safary"?o.jsx(is,{className:"text-blue-400"}):o.jsx(rl,{className:"text-cyan-400"}),children:[o.jsxs("div",{className:"flex bg-black/20 p-1 rounded-xl mb-4 border border-white/5",children:[o.jsxs("button",{onClick:()=>P(!1),className:`flex-1 py-2 rounded-lg text-sm font-bold transition-all flex items-center justify-center gap-2 ${O?"text-white/50 hover:bg-white/5":"bg-green-600 text-white shadow-lg"}`,children:[o.jsx(is,{className:"w-4 h-4"}),""]}),o.jsxs("button",{onClick:()=>P(!0),className:`flex-1 py-2 rounded-lg text-sm font-bold transition-all flex items-center justify-center gap-2 ${O?"bg-red-600 text-white shadow-lg":"text-white/50 hover:bg-white/5"}`,children:[o.jsx(Qf,{className:"w-4 h-4"}),""]})]}),o.jsx("div",{className:"grid grid-cols-3 gap-3 mb-6",children:V.map(re=>o.jsxs("button",{onClick:()=>G(re.id),className:`glass-btn p-2 rounded-2xl flex flex-col items-center justify-center h-36 relative overflow-hidden group transition-all border ${O?"hover:bg-red-500/10 border-red-500/10":"hover:bg-white/10 border-white/5"}`,children:[o.jsx("div",{className:`mb-2 p-2 rounded-full transition-transform group-hover:scale-110 ${t==="safary"?"bg-blue-500/10":"bg-cyan-500/10"}`,style:{backgroundColor:re.iconColor?`${re.iconColor}15`:void 0},children:o.jsx(dD,{icon:re.icon,color:re.iconColor,className:`w-8 h-8 ${t==="safary"?"text-blue-300":"text-cyan-300"}`})}),o.jsx("span",{className:"text-white text-sm font-bold text-center z-10 leading-tight mb-1",children:re.name}),o.jsx("div",{className:"z-10 bg-black/30 px-2 py-0.5 rounded-md mb-1",children:o.jsxs("span",{className:"text-[10px] font-mono text-cyan-200",children:[re.price," ."]})}),t!=="filling"&&o.jsx("div",{className:"z-10 flex items-center gap-1",children:o.jsxs("span",{className:`text-[9px] font-mono ${re.stock<=re.warningLimit?"text-red-400":"text-white/40"}`,children:[re.stock," ",re.stock<=re.warningLimit&&"!"]})}),x[re.id]>0&&o.jsx("div",{className:`absolute top-2 right-2 text-white text-xs w-6 h-6 rounded-full flex items-center justify-center font-bold shadow-lg animate-bounce border border-white/20 ${O?"bg-red-500":"bg-green-500"}`,children:x[re.id]}),o.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/20 to-transparent pointer-events-none"})]},re.id))}),de.length>0&&o.jsxs("div",{className:`glass-card p-4 mb-4 animate-fade-in border ${O?"bg-red-500/5 border-red-500/20":"bg-white/5 border-white/10"}`,children:[o.jsxs("div",{className:"flex justify-between items-center mb-3 border-b border-white/10 pb-2",children:[o.jsx("span",{className:"text-white/70 text-sm",children:""}),o.jsxs("div",{className:"text-left",children:[D!==null&&o.jsx("span",{className:"block text-xs text-red-400 line-through decoration-red-500/50",children:xe}),o.jsxs("span",{className:`text-xl font-bold ${O?"text-red-300":D!==null?"text-yellow-300":"text-cyan-300"}`,children:[O?"-":"",K," ."]})]})]}),o.jsx("div",{className:"space-y-2 max-h-40 overflow-y-auto custom-scrollbar",children:de.map((re,Ie)=>o.jsxs("div",{className:"flex justify-between items-center text-xs bg-white/5 p-2 rounded-lg",children:[o.jsxs("div",{className:"flex flex-col",children:[o.jsx("span",{className:"text-white/80 font-bold",children:re.name}),o.jsxs("span",{className:"text-[10px] text-white/50",children:[re.price," ."]})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("span",{className:"text-cyan-300 font-bold w-12 text-center",children:re.total}),o.jsxs("div",{className:"flex items-center bg-black/20 rounded-lg p-0.5",children:[o.jsx("button",{onClick:()=>pe(re.id),className:"p-1 hover:bg-white/10 rounded text-white/70 hover:text-white transition-colors",children:o.jsx(ex,{className:"w-3 h-3"})}),o.jsx("span",{className:"w-6 text-center font-mono",children:re.qty}),o.jsx("button",{onClick:()=>G(re.id),className:"p-1 hover:bg-white/10 rounded text-white/70 hover:text-white transition-colors",children:o.jsx(Xa,{className:"w-3 h-3"})})]}),o.jsx("button",{onClick:()=>Ee(re.id),className:"p-1.5 text-red-400 hover:bg-red-500/10 rounded-lg transition-colors ml-1",children:o.jsx(ul,{className:"w-3 h-3"})})]})]},Ie))})]}),o.jsxs("div",{className:"space-y-3",children:[o.jsx("p",{className:"text-white/50 text-xs font-bold",children:" "}),o.jsxs("div",{className:`grid ${O?"grid-cols-1":"grid-cols-3"} gap-2`,children:[o.jsxs("button",{onClick:()=>N("cash"),className:`glass-btn p-3 rounded-xl flex flex-col items-center justify-center gap-1 ${b==="cash"?"active":""}`,children:[o.jsx(RC,{className:"w-5 h-5"}),o.jsx("span",{className:"text-xs",children:""})]}),!O&&o.jsxs(o.Fragment,{children:[o.jsxs("button",{onClick:()=>N("network"),className:`glass-btn p-3 rounded-xl flex flex-col items-center justify-center gap-1 ${b==="network"?"active":""}`,children:[o.jsx(VC,{className:"w-5 h-5"}),o.jsx("span",{className:"text-xs",children:""})]}),o.jsxs("button",{onClick:()=>N("ajal"),className:`glass-btn p-3 rounded-xl flex flex-col items-center justify-center gap-1 ${b==="ajal"?"active":""}`,children:[o.jsx(HC,{className:"w-5 h-5"}),o.jsx("span",{className:"text-xs",children:""})]})]})]}),b==="network"&&o.jsxs("div",{className:"p-3 bg-white/5 rounded-xl animate-fade-in",children:[o.jsxs("p",{className:"text-white/50 text-[10px] mb-2 flex items-center gap-1",children:[o.jsx(sE,{className:"w-3 h-3"}),"  "]}),o.jsx("div",{className:"grid grid-cols-3 gap-2",children:uD.map(re=>o.jsx("button",{onClick:()=>R(re),className:`py-2 px-1 rounded-lg text-[10px] font-bold border transition-all ${k===re?"bg-cyan-500/30 border-cyan-500 text-white":"bg-white/5 border-transparent text-white/60 hover:bg-white/10"}`,children:re},re))})]}),b==="ajal"&&o.jsxs("div",{className:"p-3 bg-white/5 rounded-xl animate-fade-in relative",children:[o.jsx("p",{className:"text-white/50 text-[10px] mb-2",children:" "}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx(ht,{value:S,onChange:re=>z(re.target.value),placeholder:" ...",className:"text-right"}),o.jsx("button",{onClick:()=>te(!0),className:"bg-pink-500/20 hover:bg-pink-500/40 border border-pink-500/30 text-pink-400 p-2 rounded-xl transition-colors",children:o.jsx(Iw,{className:"w-5 h-5"})})]})]}),o.jsxs("div",{className:"flex gap-2 mt-4",children:[o.jsx("button",{onClick:fe,disabled:de.length===0,className:"px-4 bg-white/10 hover:bg-white/20 text-white rounded-xl shadow-lg flex items-center justify-center disabled:opacity-50 disabled:cursor-not-allowed transition-all",children:o.jsx(eE,{className:"w-5 h-5"})}),o.jsx("button",{onClick:Te,disabled:de.length===0||O,className:`px-4 rounded-xl shadow-lg flex items-center justify-center disabled:opacity-50 disabled:cursor-not-allowed transition-all ${D?"bg-yellow-500/20 text-yellow-300 border border-yellow-500/50":"bg-white/10 hover:bg-white/20 text-white"}`,children:o.jsx(Rw,{className:"w-5 h-5"})}),o.jsxs("button",{onClick:Ne,disabled:de.length===0,className:`flex-1 py-3 font-bold rounded-xl shadow-lg flex items-center justify-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed transition-all text-white ${O?"bg-gradient-to-r from-red-600 to-red-500 hover:from-red-500 hover:to-red-400":"bg-gradient-to-r from-green-600 to-emerald-600 hover:from-green-500 hover:to-emerald-500"}`,children:[o.jsx(UN,{className:"w-5 h-5"}),o.jsx("span",{children:O?" ":" "})]})]})]})]}),o.jsx(Mn,{isOpen:C,onClose:()=>L(!1),title:"  /  ",icon:o.jsx(Rw,{className:"text-yellow-400"}),maxWidth:"max-w-xs",children:o.jsxs("div",{className:"text-center p-2",children:[o.jsxs("p",{className:"text-sm text-white/60 mb-2",children:[" : ",o.jsx("span",{className:"text-white font-bold",children:xe})]}),o.jsx(ht,{type:"number",value:M,onChange:re=>F(re.target.value),className:"text-center text-lg font-bold text-yellow-300 mb-4",autoFocus:!0}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx("button",{onClick:()=>L(!1),className:"flex-1 py-2 bg-white/10 rounded-lg text-xs",children:""}),o.jsx(It,{onClick:U,className:"flex-1 bg-yellow-500/20 text-yellow-200 hover:bg-yellow-500/30",children:" "})]})]})}),o.jsxs(Mn,{isOpen:Z,onClose:()=>te(!1),title:" ",icon:o.jsx(Iw,{className:"text-pink-400"}),children:[o.jsxs("div",{className:"mb-4 relative",children:[o.jsx(tx,{className:"absolute right-3 top-3 w-4 h-4 text-white/30"}),o.jsx(ht,{value:E,onChange:re=>T(re.target.value),placeholder:"  ...",className:"pr-9",autoFocus:!0})]}),o.jsx("div",{className:"space-y-2 max-h-60 overflow-y-auto custom-scrollbar",children:$.length===0?o.jsx("p",{className:"text-center text-white/40 py-4 text-sm",children:"    "}):$.map(re=>o.jsxs("div",{onClick:()=>ue(re.name),className:"flex items-center gap-3 p-3 rounded-xl bg-white/5 hover:bg-white/10 cursor-pointer border border-transparent hover:border-pink-500/30 transition-all",children:[o.jsx("div",{className:"w-8 h-8 rounded-full flex items-center justify-center font-bold text-white text-xs",style:{background:re.color},children:re.name.charAt(0)}),o.jsxs("div",{className:"text-right",children:[o.jsx("p",{className:"font-bold text-sm text-white/90",children:re.name}),o.jsxs("p",{className:"text-[10px] text-white/50",children:[": ",re.totalDebt," ."]})]})]},re.id))})]})]})},Nr=({title:r,description:e,icon:t,index:a,onClick:l,colorTheme:c,variant:d="default"})=>{const p={blue:{bg:"bg-gradient-to-br from-blue-600/20 to-blue-900/10",border:"border-blue-500/30 hover:border-blue-400/50",iconBg:"bg-blue-500/20",iconColor:"text-blue-300",descColor:"text-blue-100/60"},cyan:{bg:"bg-gradient-to-br from-cyan-600/20 to-cyan-900/10",border:"border-cyan-500/30 hover:border-cyan-400/50",iconBg:"bg-cyan-500/20",iconColor:"text-cyan-300",descColor:"text-cyan-100/60"},purple:{bg:"bg-gradient-to-br from-purple-600/20 to-pink-900/10",border:"border-purple-500/30 hover:border-purple-400/50",iconBg:"bg-purple-500/20",iconColor:"text-purple-300",descColor:"text-purple-100/60"}}[c],x=d==="compact";return o.jsxs("div",{onClick:l,className:`glass-card ${x?"p-4 rounded-2xl gap-4":"p-6 rounded-3xl gap-5"} transition-all cursor-pointer group border flex items-center relative overflow-hidden ${p.bg} ${p.border}`,children:[o.jsx("div",{className:`${x?"p-3 rounded-xl":"p-4 rounded-2xl"} transition-transform duration-300 group-hover:scale-110 ${p.iconBg} ${p.iconColor}`,children:ut.isValidElement(t)?ut.cloneElement(t,{className:x?"w-6 h-6":"w-8 h-8"}):t}),o.jsxs("div",{className:"flex-1 z-10",children:[o.jsxs("div",{className:"flex justify-between items-start",children:[o.jsx("h2",{className:`${x?"text-lg":"text-xl"} font-bold text-white mb-1`,children:r}),o.jsx("span",{className:`${x?"text-2xl top-3 left-3":"text-3xl top-4 left-4"} font-bold text-white/5 group-hover:text-white/10 transition-colors absolute font-mono`,children:a})]}),o.jsx("p",{className:`${x?"text-xs":"text-sm"} ${p.descColor}`,children:e})]})]})},hD=({onBack:r})=>{const{sales:e,systemDate:t}=lt(),[a,l]=A.useState("safary"),c=A.useMemo(()=>e.filter(m=>{const p=new Date(m.fullDate),x=p.getDate()===t.getDate()&&p.getMonth()===t.getMonth()&&p.getFullYear()===t.getFullYear(),v=a==="safary"?m.type==="safary":m.type==="filling";return x&&v}).sort((m,p)=>new Date(p.fullDate).getTime()-new Date(m.fullDate).getTime()),[e,t,a]),d=A.useMemo(()=>{const m=c.length,p=c.reduce((v,b)=>v+b.total,0),x=c.reduce((v,b)=>v+(b.discount||0),0);return{count:m,totalAmount:p,totalDiscount:x}},[c]);return o.jsxs("div",{className:"w-full max-w-md mx-auto p-4 h-screen flex flex-col overflow-y-auto custom-scrollbar animate-fade-in bg-gradient-to-b from-slate-900 via-slate-900 to-blue-900/20",children:[o.jsxs("div",{className:"flex items-center justify-between mb-6 pt-2",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("button",{onClick:r,className:"p-2.5 bg-white/5 hover:bg-white/10 border border-white/10 rounded-xl text-white transition-all active:scale-95",children:o.jsx(Qt,{className:"w-5 h-5"})}),o.jsxs("div",{children:[o.jsx("h1",{className:"text-lg font-bold text-white leading-tight",children:" "}),o.jsx("span",{className:"text-[10px] text-white/50 block",children:"  "})]})]}),o.jsxs("div",{className:"px-3 py-1.5 bg-gradient-to-r from-blue-600/20 to-cyan-600/20 border border-blue-500/30 rounded-lg flex items-center gap-2",children:[o.jsx(si,{className:"w-3 h-3 text-cyan-300"}),o.jsx("span",{className:"text-xs font-mono text-cyan-100",dir:"ltr",children:t.toLocaleDateString()})]})]}),o.jsxs("div",{className:"flex bg-black/20 p-1.5 rounded-2xl mb-5 border border-white/5 relative overflow-hidden",children:[o.jsxs("button",{onClick:()=>l("safary"),className:`flex-1 py-2.5 rounded-xl flex items-center justify-center gap-2 transition-all text-sm font-bold relative z-10 ${a==="safary"?"bg-gradient-to-r from-blue-600 to-blue-500 text-white shadow-lg shadow-blue-900/20":"text-white/60 hover:text-white hover:bg-white/5"}`,children:[o.jsx(is,{className:`w-4 h-4 ${a==="safary"?"text-white":"text-blue-400"}`})," "]}),o.jsxs("button",{onClick:()=>l("filling"),className:`flex-1 py-2.5 rounded-xl flex items-center justify-center gap-2 transition-all text-sm font-bold relative z-10 ${a==="filling"?"bg-gradient-to-r from-cyan-600 to-cyan-500 text-white shadow-lg shadow-cyan-900/20":"text-white/60 hover:text-white hover:bg-white/5"}`,children:[o.jsx(rl,{className:`w-4 h-4 ${a==="filling"?"text-white":"text-cyan-400"}`})," "]})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-5",children:[o.jsxs("div",{className:"glass-card p-4 flex flex-col justify-between bg-gradient-to-br from-white/5 to-white/[0.02] border border-white/10 relative overflow-hidden group",children:[o.jsx("div",{className:"absolute top-0 right-0 p-3 opacity-5 group-hover:opacity-10 transition-opacity",children:o.jsx(hf,{className:"w-16 h-16"})}),o.jsxs("span",{className:"text-xs text-white/60 font-medium flex items-center gap-1",children:[o.jsx(hf,{className:"w-3 h-3"})," "]}),o.jsx("span",{className:"text-3xl font-bold text-white mt-2 font-mono tracking-tight",children:d.count})]}),o.jsxs("div",{className:`glass-card p-4 flex flex-col justify-between border relative overflow-hidden ${d.totalAmount>=0?"bg-gradient-to-br from-emerald-600/10 to-emerald-900/5 border-emerald-500/20":"bg-gradient-to-br from-red-600/10 to-red-900/5 border-red-500/20"}`,children:[o.jsx("div",{className:"absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-transparent via-white/20 to-transparent opacity-50"}),o.jsxs("span",{className:`text-xs font-medium flex items-center gap-1 ${d.totalAmount>=0?"text-emerald-300":"text-red-300"}`,children:[o.jsx(Uu,{className:"w-3 h-3"})," "]}),o.jsxs("span",{className:"text-2xl font-bold text-white mt-2 flex items-baseline gap-1",children:[d.totalAmount.toLocaleString(),o.jsx("span",{className:"text-[10px] font-normal opacity-60",children:"."})]})]})]}),o.jsx("div",{className:"flex items-center justify-between mb-2 px-1",children:o.jsxs("h3",{className:"text-sm font-bold text-white/80 flex items-center gap-2",children:[o.jsx(KC,{className:"w-4 h-4 text-cyan-400"})," "]})}),o.jsx("div",{className:"flex-1 pb-4 min-h-0",children:o.jsxs("div",{className:"glass-card h-full flex flex-col border border-white/10 overflow-hidden bg-slate-900/40",children:[o.jsx("div",{className:"overflow-y-auto custom-scrollbar flex-1",children:o.jsxs("table",{className:"w-full text-xs text-right whitespace-nowrap",children:[o.jsx("thead",{className:"bg-slate-900/80 backdrop-blur-md text-white/60 font-bold sticky top-0 z-10 border-b border-white/10 shadow-sm",children:o.jsxs("tr",{children:[o.jsx("th",{className:"p-3 w-8 text-center",children:"#"}),o.jsx("th",{className:"p-3",children:""}),o.jsx("th",{className:"p-3 text-center",children:""}),o.jsx("th",{className:"p-3 text-center",children:""}),o.jsx("th",{className:"p-3 text-center",children:""}),o.jsx("th",{className:"p-3 text-center",children:""}),o.jsx("th",{className:"p-3 text-left",children:" "})]})}),o.jsx("tbody",{className:"divide-y divide-white/5",children:c.length===0?o.jsx("tr",{children:o.jsx("td",{colSpan:7,className:"text-center py-12 px-4",children:o.jsxs("div",{className:"flex flex-col items-center justify-center opacity-30",children:[o.jsx(is,{className:"w-12 h-12 mb-2"}),o.jsx("p",{className:"text-sm",children:"       "})]})})}):c.map((m,p)=>{const x=m.items.reduce((z,O)=>z+O.qty,0),v=m.items.map(z=>z.name).join(" + "),b=m.discount||0,N=Math.abs(m.total)+b,S=N>0&&b>0?Math.round(b/N*100):0;return o.jsxs("tr",{className:`hover:bg-white/5 transition-colors group ${m.isReturn?"bg-red-500/5":""}`,children:[o.jsx("td",{className:"p-3 text-center text-white/30 font-mono text-[10px]",children:p+1}),o.jsxs("td",{className:"p-3 font-bold text-white/90 max-w-[120px] truncate relative",children:[o.jsx("span",{title:v,children:v}),m.isReturn&&o.jsx("span",{className:"absolute -top-1 right-0 text-[8px] text-red-300 bg-red-900/40 px-1 rounded border border-red-500/20",children:""})]}),o.jsx("td",{className:"p-3 text-center font-mono text-white/70",children:x}),o.jsx("td",{className:`p-3 text-center font-bold font-mono ${m.isReturn?"text-red-300":"text-emerald-300"}`,children:m.total}),o.jsx("td",{className:"p-3 text-center",children:b>0?o.jsxs("div",{className:"flex flex-col items-center justify-center leading-none",children:[o.jsx("span",{className:"text-yellow-300 font-mono text-xs",children:b}),o.jsxs("span",{className:"text-[9px] text-white/40 font-mono mt-0.5",children:["%",S]})]}):o.jsx("span",{className:"text-white/20",children:"-"})}),o.jsx("td",{className:"p-3 text-center",children:o.jsx("span",{className:`px-2 py-0.5 rounded text-[9px] border ${m.paymentMethod==="cash"?"bg-emerald-500/10 text-emerald-200 border-emerald-500/20":m.paymentMethod==="network"?"bg-blue-500/10 text-blue-200 border-blue-500/20":"bg-yellow-500/10 text-yellow-200 border-yellow-500/20"}`,children:m.paymentMethod==="ajal"?"":m.paymentMethod==="network"?"":""})}),o.jsx("td",{className:"p-3 text-left",children:o.jsxs("div",{className:"flex flex-col items-end leading-tight",children:[o.jsx("span",{className:"text-white/80 font-mono text-xs",dir:"ltr",children:Su(m.fullDate)}),o.jsx("span",{className:"text-[9px] text-white/30 font-mono mt-0.5",dir:"ltr",children:new Date(m.fullDate).toLocaleDateString("en-GB")})]})})]},m.id)})})]})}),o.jsxs("div",{className:"p-2 bg-white/5 border-t border-white/10 text-[10px] text-center text-white/30",children:[" ",c.length," "]})]})})]})},fD=({onBack:r,onSelectSafary:e,onSelectFilling:t})=>{const[a,l]=A.useState("menu");return a==="stats"?o.jsx(hD,{onBack:()=>l("menu")}):o.jsxs("div",{className:"w-full max-w-md mx-auto p-4 h-screen flex flex-col overflow-y-auto custom-scrollbar animate-fade-in",children:[o.jsxs("div",{className:"flex items-center gap-4 mb-8 pt-4",children:[o.jsx("button",{onClick:r,className:"p-3 bg-white/10 hover:bg-white/20 rounded-full text-white transition-all active:scale-95",children:o.jsx(Qt,{className:"w-6 h-6"})}),o.jsxs("h1",{className:"text-2xl font-bold text-white flex items-center gap-2",children:[o.jsx(aE,{className:"w-8 h-8 text-cyan-300"}),o.jsx("span",{children:" "})]})]}),o.jsxs("div",{className:"flex-1 flex flex-col gap-4 pb-20",children:[o.jsx(Nr,{title:" ",description:"    ",icon:o.jsx(is,{className:"w-8 h-8"}),index:"01",colorTheme:"blue",onClick:e}),o.jsx(Nr,{title:" ",description:"    ",icon:o.jsx(rl,{className:"w-8 h-8"}),index:"02",colorTheme:"cyan",onClick:t}),o.jsx(Nr,{title:" ",description:"    ",icon:o.jsx(oi,{className:"w-8 h-8"}),index:"03",colorTheme:"purple",onClick:()=>l("stats")})]}),o.jsx("div",{className:"text-center text-white/30 text-xs font-['Amiri'] pb-4",children:"   "})]})},mD=()=>{const{expenses:r,addExpense:e,updateExpense:t,systemDate:a}=lt(),[l,c]=A.useState(""),[d,m]=A.useState(""),[p,x]=A.useState(null),[v,b]=A.useState(""),[N,S]=A.useState(""),z=()=>{!l||!d||(e({type:"general",amount:parseFloat(l),reason:d,date:as(a),fullDate:ri(a)}),c(""),m(""))},O=L=>{x(L.id),b(L.amount.toString()),S(L.reason)},P=()=>{p&&v&&(t(p,{amount:parseFloat(v),reason:N}),x(null))},C=r.filter(L=>{if(!L.fullDate)return!1;const M=L.fullDate.split("T")[0],F=a.toISOString().split("T")[0];return M===F&&L.type==="general"});return o.jsxs("div",{className:"space-y-4 animate-fade-in",children:[o.jsxs("div",{className:"glass-card p-3 bg-white/5 border border-white/5",children:[o.jsx("h3",{className:"text-xs font-bold text-white/70 mb-3",children:"   "}),o.jsx(ht,{type:"number",value:l,onChange:L=>c(L.target.value),placeholder:"",className:"mb-2"}),o.jsx(ht,{type:"text",value:d,onChange:L=>m(L.target.value),placeholder:" (  ...)",className:"mb-2"}),o.jsx(It,{onClick:z,className:"w-full bg-red-500/20 hover:bg-red-500/30 text-red-200",children:" "})]}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-xs text-white/50 mb-2",children:"  "}),o.jsx("div",{className:"space-y-2 max-h-60 overflow-y-auto custom-scrollbar",children:C.length===0?o.jsx("p",{className:"text-center text-white/30 text-xs py-4",children:"    "}):C.map(L=>o.jsx("div",{className:"flex justify-between items-center p-2 bg-white/5 rounded-lg text-sm border-b border-white/5 last:border-0",children:p===L.id?o.jsxs("div",{className:"flex-1 flex gap-1 items-center",children:[o.jsx("input",{value:N,onChange:M=>S(M.target.value),className:"bg-black/30 text-white rounded px-1 w-full text-xs py-1"}),o.jsx("input",{type:"number",value:v,onChange:M=>b(M.target.value),className:"bg-black/30 text-white rounded px-1 w-16 text-center text-xs py-1"}),o.jsx("button",{onClick:P,className:"text-green-400 p-1",children:o.jsx(Js,{className:"w-3 h-3"})}),o.jsx("button",{onClick:()=>x(null),className:"text-red-400 p-1",children:o.jsx(dl,{className:"w-3 h-3"})})]}):o.jsxs(o.Fragment,{children:[o.jsx("span",{children:L.reason}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("span",{className:"text-red-300 font-bold",children:L.amount}),o.jsx("button",{onClick:()=>O(L),className:"text-white/30 hover:text-white p-1",children:o.jsx(cl,{className:"w-3 h-3"})})]})]})},L.id))})]})]})},pD=()=>{const{items:r,addExpense:e,updateItem:t,systemDate:a}=lt(),[l,c]=A.useState(""),[d,m]=A.useState([]),[p,x]=A.useState(!1),v=as(a),b=A.useMemo(()=>r.filter(C=>C.category==="safary"),[r]),N=A.useMemo(()=>d.reduce((C,L)=>C+Number(L.qty||0)*Number(L.cost||0),0),[d]),S=C=>{d.find(L=>L.itemId===C.id)||m([...d,{itemId:C.id,name:C.name,qty:1,cost:0}])},z=(C,L,M)=>{if(M===""){const te=[...d];te[C]={...te[C],[L]:""},m(te);return}const F=parseFloat(M);if(isNaN(F)||F<0)return;const Z=[...d];Z[C]={...Z[C],[L]:M},m(Z)},O=C=>{const L=d.filter((M,F)=>F!==C);m(L)},P=()=>{if(d.length===0){alert("   ");return}if(!l.trim()){alert("   ");return}const C=d.map(M=>({...M,qty:Number(M.qty)||0,cost:Number(M.cost)||0})),L=C.reduce((M,F)=>M+F.qty*F.cost,0);e({type:"purchase",amount:L,reason:`   #${l} - (${d.length} )`,date:v,fullDate:ri(a)}),C.forEach(M=>{const F=r.find(Z=>Z.id===M.itemId);F&&t(M.itemId,{stock:F.stock+M.qty})}),m([]),c(""),alert("      ")};return o.jsxs("div",{className:"space-y-4 animate-fade-in",children:[o.jsx("div",{className:"glass-card p-4 bg-blue-500/5 border border-blue-500/10",children:o.jsxs("div",{className:"flex gap-3 mb-2",children:[o.jsxs("div",{className:"flex-1",children:[o.jsx("label",{className:"text-[10px] text-white/50 block mb-1",children:" "}),o.jsx(ht,{value:l,onChange:C=>c(C.target.value),placeholder:"  ...",className:"font-mono text-center font-bold"})]}),o.jsxs("div",{className:"flex-1",children:[o.jsx("label",{className:"text-[10px] text-white/50 block mb-1",children:""}),o.jsxs("div",{className:"w-full h-[46px] bg-white/5 border border-white/10 rounded-xl flex items-center justify-center gap-2 text-white/70 text-xs",children:[o.jsx(si,{className:"w-4 h-4"}),o.jsx("span",{dir:"ltr",children:a.toLocaleDateString()})]})]})]})}),o.jsxs("div",{className:"glass-card overflow-hidden",children:[o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"w-full text-xs",children:[o.jsx("thead",{className:"bg-white/10 text-white/60 border-b border-white/10",children:o.jsxs("tr",{children:[o.jsx("th",{className:"p-2 text-right",children:"#"}),o.jsx("th",{className:"p-2 text-right",children:""}),o.jsx("th",{className:"p-2 text-center w-20",children:""}),o.jsx("th",{className:"p-2 text-center w-24",children:" "}),o.jsx("th",{className:"p-2 text-center w-24",children:""}),o.jsx("th",{className:"p-2 w-10"})]})}),o.jsx("tbody",{className:"divide-y divide-white/5",children:d.length===0?o.jsx("tr",{children:o.jsx("td",{colSpan:6,className:"p-8 text-center text-white/30",children:"    "})}):d.map((C,L)=>o.jsxs("tr",{className:"hover:bg-white/5",children:[o.jsx("td",{className:"p-2 text-white/40 font-mono",children:L+1}),o.jsx("td",{className:"p-2 font-bold text-white",children:C.name}),o.jsx("td",{className:"p-2",children:o.jsx("input",{type:"number",value:C.qty,onChange:M=>z(L,"qty",M.target.value),onFocus:M=>M.target.select(),className:"w-full bg-black/30 rounded border border-white/10 text-center py-1 text-white font-bold focus:border-blue-500/50 outline-none"})}),o.jsx("td",{className:"p-2",children:o.jsx("input",{type:"number",value:C.cost,onChange:M=>z(L,"cost",M.target.value),onFocus:M=>M.target.select(),className:"w-full bg-black/30 rounded border border-white/10 text-center py-1 text-white focus:border-blue-500/50 outline-none"})}),o.jsx("td",{className:"p-2 text-center font-bold text-blue-300 font-mono",children:(Number(C.qty||0)*Number(C.cost||0)).toLocaleString()}),o.jsx("td",{className:"p-2 text-center",children:o.jsx("button",{onClick:()=>O(L),className:"text-red-400 hover:bg-red-500/20 p-1.5 rounded-lg transition-colors",children:o.jsx(ul,{className:"w-4 h-4"})})})]},C.itemId))})]})}),o.jsxs("div",{className:"p-3 bg-white/5 border-t border-white/10 flex items-center justify-between gap-4",children:[o.jsxs("button",{onClick:()=>x(!0),className:"flex items-center gap-2 px-4 py-2 bg-blue-500/20 hover:bg-blue-500/30 text-blue-200 rounded-xl text-xs font-bold transition-all border border-blue-500/20",children:[o.jsx(Xa,{className:"w-4 h-4"})," "]}),o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("span",{className:"text-xs text-white/50",children:" "}),o.jsxs("span",{className:"text-xl font-bold text-blue-300",children:[N.toLocaleString()," ",o.jsx("span",{className:"text-xs text-white/30",children:"."})]})]})]})]}),o.jsxs(It,{onClick:P,className:"w-full py-4 bg-green-600/30 hover:bg-green-600/40 text-green-200 font-bold text-sm",children:[o.jsx(Js,{className:"w-5 h-5"}),"   "]}),o.jsx(Mn,{isOpen:p,onClose:()=>x(!1),title:" ",icon:o.jsx(JN,{className:"text-blue-400"}),children:o.jsxs("div",{className:"bg-slate-900 rounded-xl shadow-inner h-[75vh] flex flex-col relative overflow-hidden",children:[o.jsxs("div",{className:"flex-1 overflow-y-auto custom-scrollbar p-2 pb-20",children:[o.jsx("div",{className:"grid grid-cols-2 gap-2",children:b.map(C=>{const L=d.some(M=>M.itemId===C.id);return o.jsxs("button",{onClick:()=>S(C),className:`p-3 rounded-xl border flex flex-col items-center gap-1 transition-all h-24 justify-center group shadow-md relative overflow-hidden ${L?"bg-green-500/10 border-green-500/50":"bg-slate-800 hover:bg-slate-700 border-white/5"}`,children:[L&&o.jsx("div",{className:"absolute top-1 right-1 bg-green-500 rounded-full p-0.5 animate-fade-in",children:o.jsx(df,{className:"w-3 h-3 text-white"})}),o.jsx(is,{className:`w-6 h-6 mb-1 transition-transform ${L?"text-green-400":"text-blue-400 group-hover:scale-110"}`}),o.jsx("span",{className:`text-sm font-bold ${L?"text-green-200":"text-white"}`,children:C.name}),o.jsxs("span",{className:"text-[10px] text-white/40",children:[": ",C.stock]})]},C.id)})}),b.length===0&&o.jsx("p",{className:"text-center text-white/30 py-10 text-xs",children:"    "})]}),o.jsx("div",{className:"absolute bottom-0 left-0 right-0 p-4 bg-gradient-to-t from-slate-900 via-slate-900/90 to-transparent",children:o.jsxs(It,{onClick:()=>x(!1),className:"w-full py-3 bg-blue-600 hover:bg-blue-500 text-white shadow-lg",children:["  (",d.length,")"]})})]})})]})},ff=(r,e,t)=>{let a=r.salary||0;const l=t.getMonth(),c=t.getFullYear(),d=new Date(c,l+1,0).getDate();if(r.status==="terminated"&&r.terminationDate){const b=new Date(r.terminationDate);if(b.getMonth()<l&&b.getFullYear()===c||b.getFullYear()<c)a=0;else if(b.getMonth()===l&&b.getFullYear()===c){const N=b.getDate();a=Math.floor(a/d*N)}}const m=e.filter(b=>{if(b.workerId!==r.id)return!1;const N=new Date(b.fullDate);return N.getMonth()===l&&N.getFullYear()===c&&(b.type==="worker_withdraw"||b.type==="worker_deduct"||b.type==="worker_bonus")}),p=m.filter(b=>b.type==="worker_withdraw").reduce((b,N)=>b+N.amount,0),x=m.filter(b=>b.type==="worker_deduct").reduce((b,N)=>b+N.amount,0),v=m.filter(b=>b.type==="worker_bonus").reduce((b,N)=>b+N.amount,0);return a+v-(p+x)},iE=(r,e,t,a,l)=>{const c=r.filter(C=>l(C.fullDate)),d=e.filter(C=>l(C.fullDate)),m=t.filter(C=>l(C.fullDate)),p=c.filter(C=>!C.isReturn),x=p.filter(C=>C.paymentMethod==="cash").reduce((C,L)=>C+L.total,0),v=p.filter(C=>C.paymentMethod==="network").reduce((C,L)=>C+L.total,0),b=m.reduce((C,L)=>C+L.cash,0),N=x+v+b,S=c.filter(C=>C.isReturn).reduce((C,L)=>C+Math.abs(L.total),0),z=d.filter(C=>C.type!=="worker_deduct").reduce((C,L)=>C+L.amount,0),O=a.flatMap(C=>C.transactions).filter(C=>(C.items.includes("")||C.total<0)&&l(C.date)&&C.items!=="").reduce((C,L)=>C+Math.abs(L.total),0),P=N-(S+z+O);return{filteredSales:c,filteredExpenses:d,filteredDistribution:m,cashSalesRevenue:x,networkSalesRevenue:v,distributionRevenue:b,totalRevenue:N,returnsTotal:S,actualExpenses:z,ajalDiscounts:O,netCashFlow:P}},gD=({onSelectWorker:r})=>{const{workers:e,expenses:t,systemDate:a}=lt(),l=e.filter(m=>m.status!=="terminated"),c=e.filter(m=>m.status==="terminated"),d=m=>{const p=ff(m,t,a);return o.jsxs("button",{onClick:()=>r(m.id),className:`glass-btn p-3 rounded-xl flex items-center justify-between hover:bg-white/10 relative overflow-hidden group border border-white/5 ${m.status==="terminated"?"opacity-60 bg-red-500/5":""}`,children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center font-bold border ${m.status==="terminated"?"bg-red-500/10 text-red-300 border-red-500/20":"bg-orange-500/10 text-orange-300 border-orange-500/20"}`,children:m.status==="terminated"?o.jsx(YI,{className:"w-5 h-5"}):m.name.charAt(0)}),o.jsxs("div",{className:"text-right",children:[o.jsx("span",{className:"font-bold text-sm text-white block",children:m.name}),o.jsx("span",{className:"text-[10px] text-white/50",children:m.role})]})]}),o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsxs("div",{className:"text-left",children:[o.jsx("span",{className:"block text-[10px] text-white/40",children:""}),o.jsx("span",{className:`text-xs font-bold ${p<0?"text-red-400":"text-green-400"}`,children:p})]}),o.jsx(zN,{className:"w-4 h-4 text-white/30 group-hover:-translate-x-1 transition-transform"})]})]},m.id)};return o.jsxs("div",{className:"flex flex-col gap-2 mb-4 animate-fade-in max-h-[60vh] overflow-y-auto custom-scrollbar",children:[l.map(d),c.length>0&&o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"flex items-center gap-2 my-2 opacity-50",children:[o.jsx("div",{className:"h-[1px] bg-white/20 flex-1"}),o.jsx("span",{className:"text-[10px] text-white/50",children:"  "}),o.jsx("div",{className:"h-[1px] bg-white/20 flex-1"})]}),c.map(d)]}),e.length===0&&o.jsx("p",{className:"text-center text-white/30 text-xs py-4",children:"   "})]})},xD=({workerId:r,onBack:e})=>{const{expenses:t,addExpense:a,updateExpense:l,workers:c,systemDate:d}=lt(),[m,p]=A.useState("withdraw"),[x,v]=A.useState(""),[b,N]=A.useState(""),[S,z]=A.useState(""),[O,P]=A.useState(null),[C,L]=A.useState(""),[M,F]=A.useState(""),Z=c.find(D=>D.id===r),te=()=>{if(!x||!r)return;let D="worker_withdraw";m==="deduct"&&(D="worker_deduct"),m==="bonus"&&(D="worker_bonus");let q=b;q||(m==="withdraw"?q="":m==="deduct"?q="":q=""),a({type:D,amount:parseFloat(x),reason:q,date:as(d),fullDate:ri(d),workerId:r}),v(""),N(""),z("")},E=()=>{if(!Z||!S)return;const D=parseFloat(S);if(!isNaN(D)){const q=Z.salary*D/100;v(Math.floor(q).toString())}},T=D=>{P(D.id),L(D.amount.toString()),F(D.reason)},k=()=>{O&&C&&(l(O,{amount:parseFloat(C),reason:M}),P(null))},R=t.filter(D=>{if(!D.fullDate)return!1;const q=D.fullDate.split("T")[0],V=d.toISOString().split("T")[0];return q===V&&D.type.startsWith("worker")&&D.workerId===r});return Z?o.jsxs("div",{className:"animate-fade-in",children:[o.jsxs("div",{className:"glass-card p-4 mb-4 bg-white/5 relative",children:[o.jsxs("div",{className:"flex items-center justify-between mb-6",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("button",{onClick:e,className:"p-2 bg-white/10 hover:bg-white/20 rounded-full text-white transition-all active:scale-95 border border-white/5",children:o.jsx(Qt,{className:"w-5 h-5"})}),o.jsxs("div",{children:[o.jsx("h3",{className:"font-bold text-lg text-white",children:Z.name}),o.jsx("p",{className:"text-[10px] text-white/50",children:Z.role})]})]}),o.jsxs("div",{className:"text-left",children:[o.jsx("span",{className:"text-[9px] text-white/40 block",children:" "}),o.jsx("span",{className:`font-bold text-xl ${ff(Z,t,d)<0?"text-red-400":"text-green-400"}`,children:ff(Z,t,d)})]})]}),o.jsxs("div",{className:"flex gap-2 mb-4 bg-black/20 p-1 rounded-xl",children:[o.jsxs("button",{onClick:()=>p("withdraw"),className:`flex-1 py-2 rounded-lg text-[10px] font-bold flex flex-col items-center gap-1 transition-colors ${m==="withdraw"?"bg-yellow-500/20 text-yellow-300 border border-yellow-500/30":"hover:bg-white/5 text-white/40"}`,children:[o.jsx(sl,{className:"w-4 h-4"})," "]}),o.jsxs("button",{onClick:()=>p("bonus"),className:`flex-1 py-2 rounded-lg text-[10px] font-bold flex flex-col items-center gap-1 transition-colors ${m==="bonus"?"bg-green-500/20 text-green-300 border border-green-500/30":"hover:bg-white/5 text-white/40"}`,children:[o.jsx(XC,{className:"w-4 h-4"})," "]}),o.jsxs("button",{onClick:()=>p("deduct"),className:`flex-1 py-2 rounded-lg text-[10px] font-bold flex flex-col items-center gap-1 transition-colors ${m==="deduct"?"bg-red-500/20 text-red-300 border border-red-500/30":"hover:bg-white/5 text-white/40"}`,children:[o.jsx(nl,{className:"w-4 h-4"})," "]})]}),o.jsxs("div",{className:"space-y-3 bg-white/5 p-3 rounded-xl border border-white/5",children:[m==="bonus"&&o.jsxs("div",{className:"flex gap-2 mb-1 animate-fade-in",children:[o.jsxs("div",{className:"flex-1 relative",children:[o.jsx(ht,{type:"number",value:S,onChange:D=>z(D.target.value),placeholder:" ",className:"text-center pr-8"}),o.jsx("span",{className:"absolute right-3 top-3 text-xs text-white/30",children:"%"})]}),o.jsx("button",{onClick:E,className:"bg-green-500/20 hover:bg-green-500/30 text-green-300 px-4 rounded-xl text-[10px] border border-green-500/30",children:""})]}),o.jsx(ht,{type:"number",value:x,onChange:D=>v(D.target.value),placeholder:"",autoFocus:!0,className:"text-center font-bold text-lg"}),o.jsx(ht,{type:"text",value:b,onChange:D=>N(D.target.value),placeholder:m==="bonus"?"  (:  )":" ()"}),o.jsxs(It,{onClick:te,className:`w-full py-3 ${m==="withdraw"?"bg-yellow-600/30 text-yellow-200":m==="bonus"?"bg-green-600/30 text-green-200":"bg-red-600/30 text-red-200"}`,children:[" ",m==="withdraw"?"":m==="bonus"?"":""]})]})]}),o.jsxs("div",{className:"border-t border-white/10 pt-4",children:[o.jsx("h3",{className:"text-xs text-white/50 mb-2",children:"  ( -  )"}),o.jsx("div",{className:"space-y-1 max-h-40 overflow-y-auto custom-scrollbar text-xs",children:R.length===0?o.jsx("p",{className:"text-center text-white/30 text-xs py-4",children:"   "}):R.map(D=>o.jsx("div",{className:"flex justify-between items-center p-2 bg-white/5 rounded border-b border-white/5 last:border-0",children:O===D.id?o.jsxs("div",{className:"flex-1 flex gap-1 items-center",children:[o.jsx("input",{value:M,onChange:q=>F(q.target.value),className:"bg-black/30 text-white rounded px-1 w-full text-xs py-1",placeholder:""}),o.jsx("input",{type:"number",value:C,onChange:q=>L(q.target.value),className:"bg-black/30 text-white rounded px-1 w-16 text-center text-xs py-1",placeholder:""}),o.jsx("button",{onClick:k,className:"text-green-400 p-1",children:o.jsx(Js,{className:"w-3 h-3"})}),o.jsx("button",{onClick:()=>P(null),className:"text-red-400 p-1",children:o.jsx(dl,{className:"w-3 h-3"})})]}):o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"flex flex-col",children:o.jsx("span",{className:"text-[10px] text-white/50",children:D.reason||(D.type==="worker_bonus"?"":D.type==="worker_withdraw"?"":"")})}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("span",{className:`
                                                ${D.type==="worker_withdraw"?"text-yellow-300":D.type==="worker_bonus"?"text-green-300":"text-red-300"}
                                            `,children:D.type==="worker_withdraw"?"":D.type==="worker_bonus"?"":""}),o.jsx("span",{className:"font-bold",children:D.amount}),o.jsx("button",{onClick:()=>T(D),className:"text-white/30 hover:text-white p-1",children:o.jsx(cl,{className:"w-3 h-3"})})]})]})},D.id))})]})]}):null},yD=()=>{const{workers:r,expenses:e,systemDate:t}=lt(),a=t.getMonth(),l=t.getFullYear(),c=A.useMemo(()=>{let d=0,m=0,p=0,x=0,v=0;return r.forEach(b=>{d+=b.salary;const N=e.filter(S=>{if(S.workerId!==b.id)return!1;const z=new Date(S.fullDate);return z.getMonth()===a&&z.getFullYear()===l});m+=N.filter(S=>S.type==="worker_withdraw").reduce((S,z)=>S+z.amount,0),p+=N.filter(S=>S.type==="worker_deduct").reduce((S,z)=>S+z.amount,0),x+=N.filter(S=>S.type==="worker_bonus").reduce((S,z)=>S+z.amount,0),v+=ff(b,e,t)}),{totalSalaries:d,totalWithdraws:m,totalDeductions:p,totalBonuses:x,totalRemaining:v}},[r,e,t]);return o.jsxs("div",{className:"animate-fade-in space-y-3",children:[o.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[o.jsxs("div",{className:"glass-card p-3 rounded-xl bg-green-500/5 border border-green-500/10 text-center",children:[o.jsx("span",{className:"text-[10px] text-green-300 block mb-1",children:"  ()"}),o.jsx("span",{className:"text-xl font-bold text-white",children:c.totalRemaining.toLocaleString()})]}),o.jsxs("div",{className:"glass-card p-3 rounded-xl bg-orange-500/5 border border-orange-500/10 text-center",children:[o.jsx("span",{className:"text-[10px] text-orange-300 block mb-1",children:" "}),o.jsx("span",{className:"text-xl font-bold text-white",children:c.totalWithdraws.toLocaleString()})]})]}),o.jsxs("div",{className:"glass-card p-4 rounded-xl space-y-3 bg-white/5",children:[o.jsx("h3",{className:"text-xs font-bold text-white/70 border-b border-white/10 pb-2",children:"  "}),o.jsxs("div",{className:"flex justify-between text-xs items-center p-2 rounded hover:bg-white/5 transition-colors",children:[o.jsx("span",{className:"text-white/50",children:"  "}),o.jsx("span",{className:"font-bold text-white",children:c.totalSalaries.toLocaleString()})]}),o.jsxs("div",{className:"flex justify-between text-xs items-center p-2 rounded bg-green-500/10 border border-green-500/10",children:[o.jsx("span",{className:"text-green-200",children:" "}),o.jsxs("span",{className:"font-bold text-green-300",children:["+",c.totalBonuses.toLocaleString()]})]}),o.jsxs("div",{className:"flex justify-between text-xs items-center p-2 rounded bg-red-500/10 border border-red-500/10",children:[o.jsx("span",{className:"text-red-200",children:"  ()"}),o.jsxs("span",{className:"font-bold text-red-300",children:["-",c.totalDeductions.toLocaleString()]})]})]})]})},bD=()=>{const[r,e]=A.useState("list"),[t,a]=A.useState(null),l=()=>o.jsxs("div",{className:"flex p-1 bg-white/5 rounded-xl mb-4 border border-white/5",children:[o.jsxs("button",{onClick:()=>e("list"),className:`flex-1 py-2 rounded-lg text-xs flex items-center justify-center gap-2 transition-all ${r==="list"?"bg-orange-500 text-white font-bold shadow":"text-white/60 hover:text-white"}`,children:[o.jsx(YN,{className:"w-3 h-3"})," "]}),o.jsx("div",{className:"w-[1px] bg-white/10 my-1"}),o.jsxs("button",{onClick:()=>e("stats"),className:`flex-1 py-2 rounded-lg text-xs flex items-center justify-center gap-2 transition-all ${r==="stats"?"bg-orange-500 text-white font-bold shadow":"text-white/60 hover:text-white"}`,children:[o.jsx(oi,{className:"w-3 h-3"}),""]})]});return o.jsxs("div",{className:"space-y-4",children:[!t&&l(),t?o.jsx(xD,{workerId:t,onBack:()=>a(null)}):r==="list"?o.jsx(gD,{onSelectWorker:a}):o.jsx(yD,{})]})},vD=({onBack:r})=>{const{systemDate:e}=lt(),[t,a]=A.useState("menu"),l=()=>{const c=t==="menu",d=c?" ":t==="general"?" ":t==="workers"?" ":"",m=c?Uu:t==="general"?uf:t==="workers"?Za:is,p=c||t==="general"?"text-red-300":t==="workers"?"text-orange-300":"text-blue-300";return o.jsxs("div",{className:"flex items-center gap-4 mb-6 pt-4",children:[o.jsx("button",{onClick:c?r:()=>a("menu"),className:"p-3 bg-white/10 hover:bg-white/20 rounded-full text-white transition-all active:scale-95",children:o.jsx(Qt,{className:"w-6 h-6"})}),o.jsxs("h1",{className:"text-2xl font-bold text-white flex items-center gap-2",children:[o.jsx(m,{className:`w-8 h-8 ${p}`}),o.jsx("span",{children:d})]})]})};return o.jsxs("div",{className:"w-full max-w-md mx-auto p-4 h-screen flex flex-col overflow-y-auto custom-scrollbar animate-fade-in",children:[l(),o.jsxs("div",{className:"text-center text-xs text-white/50 mb-6 -mt-2",children:[" : ",o.jsx("span",{className:"text-white font-bold",dir:"ltr",children:e.toLocaleDateString()})]}),o.jsx("div",{className:"flex-1 flex flex-col pb-20",children:t==="menu"?o.jsxs("div",{className:"flex flex-col gap-4",children:[o.jsxs("div",{className:"glass-card p-5 rounded-3xl bg-gradient-to-br from-red-600/20 to-red-900/10 border border-red-500/30 hover:border-red-400/50 transition-all cursor-pointer group flex items-center gap-4",onClick:()=>a("general"),children:[o.jsx("div",{className:"p-4 rounded-2xl bg-red-500/20 text-red-300 group-hover:scale-110 transition-transform duration-300",children:o.jsx(uf,{className:"w-8 h-8"})}),o.jsxs("div",{children:[o.jsx("h2",{className:"text-xl font-bold text-white mb-1",children:" "}),o.jsx("p",{className:"text-red-100/60 text-xs",children:"   "})]})]}),o.jsxs("div",{className:"glass-card p-5 rounded-3xl bg-gradient-to-br from-orange-600/20 to-orange-900/10 border border-orange-500/30 hover:border-orange-400/50 transition-all cursor-pointer group flex items-center gap-4",onClick:()=>a("workers"),children:[o.jsx("div",{className:"p-4 rounded-2xl bg-orange-500/20 text-orange-300 group-hover:scale-110 transition-transform duration-300",children:o.jsx(Za,{className:"w-8 h-8"})}),o.jsxs("div",{children:[o.jsx("h2",{className:"text-xl font-bold text-white mb-1",children:" "}),o.jsx("p",{className:"text-orange-100/60 text-xs",children:"  "})]})]}),o.jsxs("div",{className:"glass-card p-5 rounded-3xl bg-gradient-to-br from-blue-600/20 to-blue-900/10 border border-blue-500/30 hover:border-blue-400/50 transition-all cursor-pointer group flex items-center gap-4",onClick:()=>a("purchases"),children:[o.jsx("div",{className:"p-4 rounded-2xl bg-blue-500/20 text-blue-300 group-hover:scale-110 transition-transform duration-300",children:o.jsx(is,{className:"w-8 h-8"})}),o.jsxs("div",{children:[o.jsx("h2",{className:"text-xl font-bold text-white mb-1",children:""}),o.jsx("p",{className:"text-blue-100/60 text-xs",children:"    "})]})]})]}):o.jsxs("div",{className:"animate-fade-in",children:[t==="general"&&o.jsx(mD,{}),t==="workers"&&o.jsx(bD,{}),t==="purchases"&&o.jsx(pD,{})]})}),t==="menu"&&o.jsx("div",{className:"text-center text-white/30 text-xs font-['Amiri']",children:"   "})]})},wD=({onBack:r,onSelectGeneral:e,onSelectDistribution:t,onSelectStats:a})=>o.jsxs("div",{className:"w-full max-w-md mx-auto p-4 h-screen flex flex-col overflow-y-auto custom-scrollbar animate-fade-in",children:[o.jsxs("div",{className:"flex items-center gap-4 mb-8 pt-4",children:[o.jsx("button",{onClick:r,className:"p-3 bg-white/10 hover:bg-white/20 rounded-full text-white transition-all active:scale-95",children:o.jsx(Qt,{className:"w-6 h-6"})}),o.jsxs("h1",{className:"text-2xl font-bold text-white flex items-center gap-2",children:[o.jsx(_u,{className:"w-8 h-8 text-yellow-300"}),o.jsx("span",{children:" "})]})]}),o.jsxs("div",{className:"flex-1 flex flex-col gap-4 pb-20",children:[o.jsxs("div",{className:"glass-card p-5 rounded-3xl bg-gradient-to-br from-yellow-600/20 to-orange-900/10 border border-yellow-500/30 hover:border-yellow-400/50 transition-all cursor-pointer group flex items-center gap-4",onClick:e,children:[o.jsx("div",{className:"p-4 rounded-2xl bg-yellow-500/20 text-yellow-300 group-hover:scale-110 transition-transform duration-300",children:o.jsx(Za,{className:"w-8 h-8"})}),o.jsxs("div",{children:[o.jsx("h2",{className:"text-xl font-bold text-white mb-1",children:" "}),o.jsx("p",{className:"text-yellow-100/60 text-xs",children:"   ( )"})]})]}),o.jsxs("div",{className:"glass-card p-5 rounded-3xl bg-gradient-to-br from-blue-600/20 to-indigo-900/10 border border-blue-500/30 hover:border-blue-400/50 transition-all cursor-pointer group flex items-center gap-4",onClick:t,children:[o.jsx("div",{className:"p-4 rounded-2xl bg-blue-500/20 text-blue-300 group-hover:scale-110 transition-transform duration-300",children:o.jsx(al,{className:"w-8 h-8"})}),o.jsxs("div",{children:[o.jsx("h2",{className:"text-xl font-bold text-white mb-1",children:" "}),o.jsx("p",{className:"text-blue-100/60 text-xs",children:"   "})]})]}),o.jsxs("div",{className:"glass-card p-5 rounded-3xl bg-gradient-to-br from-purple-600/20 to-pink-900/10 border border-purple-500/30 hover:border-purple-400/50 transition-all cursor-pointer group flex items-center gap-4",onClick:a,children:[o.jsx("div",{className:"p-4 rounded-2xl bg-purple-500/20 text-purple-300 group-hover:scale-110 transition-transform duration-300",children:o.jsx(oi,{className:"w-8 h-8"})}),o.jsxs("div",{children:[o.jsx("h2",{className:"text-xl font-bold text-white mb-1",children:""}),o.jsx("p",{className:"text-purple-100/60 text-xs",children:"  "})]})]})]}),o.jsx("div",{className:"text-center text-white/30 text-xs font-['Amiri']",children:"  "})]}),_D=({mode:r,onBack:e})=>{const{customers:t,addCustomer:a,addCustomerTransaction:l,addSale:c,updateCustomer:d,deleteCustomer:m,items:p,systemDate:x}=lt(),[v,b]=A.useState("list"),[N,S]=A.useState(null),[z,O]=A.useState(null),[P,C]=A.useState(""),[L,M]=A.useState(""),[F,Z]=A.useState("date"),[te,E]=A.useState(!1),[T,k]=A.useState(!1),[R,D]=A.useState(""),[q,V]=A.useState(""),[de,xe]=A.useState(!1),[K,G]=A.useState("repay"),[pe,Ee]=A.useState(""),[Te,U]=A.useState(!1),[$,ue]=A.useState({}),fe=t.find(be=>be.id===N),Ne=A.useMemo(()=>{let be=t.filter(ae=>r==="general"?ae.type==="general"||!ae.type:ae.type==="distribution");return L&&(be=be.filter(ae=>ae.name.includes(L))),be.sort((ae,he)=>{if(F==="highest")return he.totalDebt-ae.totalDebt;if(F==="name")return ae.name.localeCompare(he.name);const me=je=>{var Fe;return(Fe=je.transactions)!=null&&Fe.length?new Date(je.transactions[0].date).getTime():0};return me(he)-me(ae)})},[t,r,L,F]),re=A.useMemo(()=>{const be=Ne.length,ae=Ne.reduce((he,me)=>he+me.totalDebt,0);return{count:be,totalDebt:ae}},[Ne]),Ie=be=>{S(be),b("details"),U(!1)},Oe=()=>{b("list"),S(null)},ye=(be,ae,he)=>{be.stopPropagation(),confirm(` !

      "${he}"
        .`)&&(m(ae),N===ae&&Oe())},De=()=>{R.trim()&&(a({name:R,phone:q,type:r,color:r==="distribution"?"#3b82f6":"#eab308"}),D(""),V(""),k(!1))},Dt=be=>{G(be),Ee(""),xe(!0)},Rt=()=>{if(!N||!fe)return;const be=parseFloat(pe);if(isNaN(be)||be<=0){alert("   ");return}l(N,{items:K==="repay"?"":"",total:-be,date:as(x)},-be),K==="repay"&&c({type:"ajal_payment",items:[{id:0,name:`  - ${fe.name}`,qty:1,price:be,total:be}],total:be,paymentMethod:"cash",date:as(x),fullDate:ri(x),customerId:fe.id,customerName:fe.name}),xe(!1),Ee("")},Ut=be=>{const ae=p.filter(me=>me.category==="safary"),he={};return ae.forEach(me=>{var Fe;const je=(Fe=be.specialPrices)==null?void 0:Fe[me.id];he[me.id]={qty:0,price:je!==void 0?je:me.price}}),he},St=()=>{fe&&(ue(Ut(fe)),U(!0))},cn=(be,ae,he)=>{const me=parseFloat(he);isNaN(me)||me<0||ue(je=>({...je,[be]:{...je[be],[ae]:me}}))},yn=()=>{if(!fe)return;const be=[];let ae=0,he=0;const me={...fe.specialPrices||{}};let je=!1;if(Object.entries($).forEach(([st,rt])=>{const Qe=rt,Bt=parseInt(st);if(Qe.qty>0){const bn=p.find(un=>un.id===Bt);bn&&(be.push({id:Bt,name:bn.name,qty:Qe.qty,price:Qe.price,total:Qe.qty*Qe.price}),ae+=Qe.qty*Qe.price,he+=Qe.qty,Qe.price!==bn.price&&(me[Bt]=Qe.price,je=!0))}}),be.length===0){alert("     ");return}c({type:"safary",items:be,total:ae,paymentMethod:"ajal",date:as(x),fullDate:ri(x),customerId:fe.id,customerName:fe.name,isReturn:!1});const Fe=be.map(st=>`${st.name} (${st.qty})`).join(", ");l(fe.id,{items:Fe,qty:he,total:ae,date:as(x)},ae),je&&d(fe.id,{specialPrices:me}),U(!1),ue({})};return o.jsxs("div",{className:"w-full max-w-md mx-auto p-4 h-screen flex flex-col overflow-y-auto custom-scrollbar animate-fade-in",children:[o.jsxs("div",{className:"flex items-center gap-4 mb-4 pt-2",children:[o.jsx("button",{onClick:v==="details"?Oe:e,className:"p-3 bg-white/10 hover:bg-white/20 rounded-full text-white transition-all active:scale-95",children:o.jsx(Qt,{className:"w-5 h-5"})}),o.jsxs("h1",{className:"text-xl font-bold text-white flex items-center gap-2",children:[r==="distribution"?o.jsx(al,{className:"w-6 h-6 text-blue-300"}):o.jsx(Za,{className:"w-6 h-6 text-yellow-300"}),o.jsx("span",{children:v==="details"&&fe?fe.name:r==="distribution"?" ":" "})]})]}),v==="list"&&o.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-6",children:[o.jsxs("div",{className:"glass-card p-3 flex flex-col items-center justify-center gap-1 bg-gradient-to-br from-white/5 to-white/10 border-white/10",children:[o.jsxs("div",{className:"flex items-center gap-2 text-white/60 text-xs",children:[o.jsx(Za,{className:"w-3 h-3"}),o.jsx("span",{children:" "})]}),o.jsx("span",{className:"text-2xl font-bold text-white",children:re.count})]}),o.jsxs("div",{className:"glass-card p-3 flex flex-col items-center justify-center gap-1 bg-gradient-to-br from-red-500/10 to-red-900/10 border-red-500/20",children:[o.jsxs("div",{className:"flex items-center gap-2 text-red-300/80 text-xs",children:[o.jsx(Uu,{className:"w-3 h-3"}),o.jsx("span",{children:" "})]}),o.jsxs("span",{className:"text-2xl font-bold text-red-200",children:[re.totalDebt.toLocaleString()," ",o.jsx("span",{className:"text-[10px]",children:"."})]})]})]}),v==="list"&&o.jsxs("div",{className:"flex-1 flex flex-col",children:[o.jsxs("div",{className:"flex gap-2 mb-4",children:[o.jsxs("div",{className:"relative flex-1",children:[o.jsx(tx,{className:"absolute right-3 top-2.5 w-4 h-4 text-white/30"}),o.jsx("input",{type:"text",value:L,onChange:be=>M(be.target.value),placeholder:"  ...",className:"w-full bg-white/5 border border-white/10 rounded-xl py-2 pr-9 pl-3 text-sm text-white placeholder-white/30 focus:outline-none focus:border-white/30"})]}),o.jsxs("div",{className:"relative",children:[o.jsx("button",{onClick:()=>E(!te),className:"h-full px-3 bg-white/5 border border-white/10 rounded-xl text-white/70 hover:text-white",children:o.jsx(GN,{className:"w-5 h-5"})}),te&&o.jsxs("div",{className:"absolute top-full left-0 mt-2 w-40 bg-slate-800 border border-white/10 rounded-xl shadow-xl z-50 overflow-hidden animate-fade-in",children:[o.jsx("button",{onClick:()=>{Z("highest"),E(!1)},className:"w-full text-right px-4 py-2 text-xs hover:bg-white/5 text-white",children:" "}),o.jsx("button",{onClick:()=>{Z("date"),E(!1)},className:"w-full text-right px-4 py-2 text-xs hover:bg-white/5 text-white",children:" "}),o.jsx("button",{onClick:()=>{Z("name"),E(!1)},className:"w-full text-right px-4 py-2 text-xs hover:bg-white/5 text-white",children:" "})]})]}),o.jsx("button",{onClick:()=>k(!0),className:"px-3 bg-green-500/20 hover:bg-green-500/30 text-green-300 border border-green-500/30 rounded-xl",children:o.jsx(Nu,{className:"w-5 h-5"})})]}),o.jsx("div",{className:"space-y-2 pb-20",children:Ne.length===0?o.jsx("div",{className:"text-center py-10 text-white/30 border border-dashed border-white/10 rounded-2xl",children:"     "}):Ne.map(be=>{var ae;return o.jsxs("div",{onClick:()=>Ie(be.id),className:"glass-btn p-4 rounded-xl flex items-center justify-between group hover:bg-white/10 cursor-pointer border border-white/5",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"w-10 h-10 rounded-full flex items-center justify-center font-bold text-white text-sm",style:{background:be.color||(r==="distribution"?"#3b82f6":"#eab308")},children:be.name.charAt(0)}),o.jsxs("div",{className:"text-right",children:[z===be.id?o.jsxs("div",{className:"flex items-center gap-1",onClick:he=>he.stopPropagation(),children:[o.jsx("input",{value:P,onChange:he=>C(he.target.value),className:"bg-black/50 text-white text-xs rounded px-1 py-1 w-24",autoFocus:!0}),o.jsx("button",{onClick:he=>{he.stopPropagation(),d(be.id,{name:P}),O(null)},className:"text-green-400",children:o.jsx(Js,{className:"w-3 h-3"})})]}):o.jsx("h3",{className:"font-bold text-sm text-white",children:be.name}),o.jsxs("p",{className:"text-[10px] text-white/50",children:[be.transactions.length,"    : ",((ae=be.transactions[0])==null?void 0:ae.date.split(" ")[0])||"-"]})]})]}),o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("span",{className:"font-bold text-yellow-400 font-mono text-sm",children:be.totalDebt}),o.jsxs("div",{className:"flex flex-col gap-1",children:[o.jsx("button",{onClick:he=>{he.stopPropagation(),O(be.id),C(be.name)},className:"p-1.5 hover:bg-white/10 text-white/30 hover:text-white rounded-lg transition-colors",children:o.jsx(cl,{className:"w-4 h-4"})}),o.jsx("button",{onClick:he=>ye(he,be.id,be.name),className:"p-1.5 hover:bg-red-500/20 text-red-400/50 hover:text-red-400 rounded-lg transition-colors",title:" ",children:o.jsx(ul,{className:"w-4 h-4"})})]})]})]},be.id)})})]}),v==="details"&&fe&&o.jsx("div",{className:"flex-1 flex flex-col animate-fade-in pb-20",children:Te?o.jsxs("div",{className:"animate-fade-in flex-1 flex flex-col",children:[o.jsxs("div",{className:"glass-card p-4 bg-yellow-500/5 border border-yellow-500/10 mb-4 flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"text-lg font-bold text-yellow-300 mb-1",children:" "}),o.jsx("p",{className:"text-xs text-white/50",children:"   "})]}),o.jsx("button",{onClick:()=>U(!1),className:"text-white/50 hover:text-white",children:o.jsx(dl,{className:"w-5 h-5"})})]}),o.jsx("div",{className:"space-y-3 overflow-y-auto custom-scrollbar mb-4 flex-1",children:p.filter(be=>be.category==="safary").map(be=>{const ae=$[be.id]||{qty:0,price:be.price},he=ae.qty>0;return o.jsxs("div",{className:`p-3 rounded-xl border transition-all ${he?"bg-white/10 border-yellow-500/50":"bg-white/5 border-transparent"}`,children:[o.jsxs("div",{className:"flex justify-between items-center mb-2",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("span",{className:"font-bold text-sm",children:be.name}),be.stock<=be.warningLimit&&o.jsx(Kf,{className:"w-3 h-3 text-red-400"})]}),o.jsxs("span",{className:"text-[10px] text-white/40",children:[": ",be.stock]})]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsxs("div",{className:"flex-1",children:[o.jsx("label",{className:"text-[9px] text-white/40 block mb-1",children:""}),o.jsxs("div",{className:"flex items-center",children:[o.jsx("button",{onClick:()=>cn(be.id,"qty",Math.max(0,ae.qty-1).toString()),className:"p-2 bg-white/5 hover:bg-white/10 rounded-r-lg border border-white/10",children:o.jsx(ex,{className:"w-3 h-3"})}),o.jsx("input",{type:"number",className:"w-full bg-black/30 border-y border-white/10 text-center py-1.5 text-sm font-bold focus:outline-none",value:ae.qty,onChange:me=>cn(be.id,"qty",me.target.value)}),o.jsx("button",{onClick:()=>cn(be.id,"qty",(ae.qty+1).toString()),className:"p-2 bg-white/5 hover:bg-white/10 rounded-l-lg border border-white/10",children:o.jsx(Xa,{className:"w-3 h-3"})})]})]}),o.jsxs("div",{className:"w-24",children:[o.jsx("label",{className:"text-[9px] text-white/40 block mb-1",children:" ()"}),o.jsx("input",{type:"number",className:`w-full bg-black/30 border rounded-lg text-center py-1.5 text-sm ${ae.price!==be.price?"text-yellow-300 border-yellow-500/30":"text-white border-white/10"}`,value:ae.price,onChange:me=>cn(be.id,"price",me.target.value)})]})]})]},be.id)})}),o.jsxs("div",{className:"glass-card p-3 bg-white/5 flex justify-between items-center mb-4",children:[o.jsx("span",{className:"text-xs text-white/50",children:" "}),o.jsxs("span",{className:"text-xl font-bold text-white",children:[Object.values($).reduce((be,ae)=>be+ae.qty*ae.price,0)," ",o.jsx("span",{className:"text-xs text-yellow-500",children:"."})]})]}),o.jsx(It,{onClick:yn,className:"w-full py-4 bg-green-600/30 hover:bg-green-600/40 text-green-200",children:"   "})]}):o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"glass-card p-6 rounded-3xl mb-6 text-center bg-white/5 relative overflow-hidden",children:[o.jsx("div",{className:"absolute top-0 right-0 p-4 opacity-5",children:r==="distribution"?o.jsx(al,{className:"w-32 h-32"}):o.jsx(Za,{className:"w-32 h-32"})}),o.jsx("p",{className:"text-white/50 text-sm mb-1 relative z-10",children:"  "}),o.jsx("h1",{className:"text-5xl font-bold text-red-400 mb-6 relative z-10 tracking-tight font-mono",children:fe.totalDebt}),o.jsxs("div",{className:"grid grid-cols-2 gap-3 relative z-10",children:[o.jsxs("button",{onClick:()=>Dt("repay"),className:"glass-btn p-4 rounded-2xl bg-green-500/10 hover:bg-green-500/20 text-green-300 border-green-500/30 flex flex-col items-center justify-center gap-1",children:[o.jsx(nl,{className:"w-5 h-5"}),o.jsx("span",{className:"text-xs font-bold",children:" "})]}),o.jsxs("button",{onClick:()=>Dt("discount"),className:"glass-btn p-4 rounded-2xl bg-blue-500/10 hover:bg-blue-500/20 text-blue-300 border-blue-500/30 flex flex-col items-center justify-center gap-1",children:[o.jsx(sl,{className:"w-5 h-5"}),o.jsx("span",{className:"text-xs font-bold",children:"  "})]})]}),r==="distribution"&&o.jsxs("button",{onClick:St,className:"w-full mt-3 glass-btn p-3 rounded-xl bg-gradient-to-r from-yellow-600/20 to-orange-600/20 border-yellow-500/30 flex justify-center items-center gap-2 relative z-10",children:[o.jsx(ZN,{className:"w-4 h-4 text-yellow-200"}),o.jsx("span",{className:"font-bold text-sm text-yellow-100",children:"   ()"})]})]}),o.jsxs("h3",{className:"font-bold mb-3 text-sm text-white/70 flex items-center gap-2",children:[o.jsx(_u,{className:"w-4 h-4"}),"  "]}),o.jsx("div",{className:"space-y-2 text-sm overflow-y-auto custom-scrollbar flex-1",children:[...fe.transactions].reverse().map((be,ae)=>o.jsxs("div",{className:"glass-inner p-3 rounded-xl flex justify-between items-center bg-white/5 border border-white/5",children:[o.jsxs("div",{children:[o.jsx("span",{className:"block font-bold text-white/90",children:be.items}),o.jsx("span",{className:"text-white/40 text-[10px] font-mono",dir:"ltr",children:be.date})]}),o.jsx("span",{className:`font-bold ${be.total>0?"text-red-300":"text-green-300"}`,children:Math.abs(be.total)})]},ae))})]})}),o.jsx(Mn,{isOpen:T,onClose:()=>k(!1),title:` ${r==="distribution"?"":""} `,icon:o.jsx(Nu,{className:"text-green-400"}),maxWidth:"max-w-xs",children:o.jsxs("div",{className:"space-y-3 p-2",children:[o.jsx(ht,{value:R,onChange:be=>D(be.target.value),placeholder:"",autoFocus:!0}),o.jsx(ht,{value:q,onChange:be=>V(be.target.value),placeholder:"  ()"}),o.jsx(It,{onClick:De,className:"w-full bg-green-600/20 text-green-200",children:""})]})}),o.jsx(Mn,{isOpen:de,onClose:()=>xe(!1),title:K==="repay"?" ":"  ",icon:K==="repay"?o.jsx(nl,{className:"text-green-400"}):o.jsx(sl,{className:"text-blue-400"}),maxWidth:"max-w-xs",children:o.jsxs("div",{className:"text-center p-2",children:[o.jsx("p",{className:"text-sm text-white/60 mb-4",children:K==="repay"?"    ":"    "}),o.jsx(ht,{type:"number",value:pe,onChange:be=>Ee(be.target.value),placeholder:"",className:"text-center text-lg font-bold text-white mb-4",autoFocus:!0}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx("button",{onClick:()=>xe(!1),className:"flex-1 py-2 bg-white/10 rounded-lg text-xs hover:bg-white/20",children:""}),o.jsx(It,{onClick:Rt,className:`flex-1 ${K==="repay"?"bg-green-600/30 text-green-200":"bg-blue-600/30 text-blue-200"}`,children:""})]})]})})]})},ND=({mode:r,onSelectCustomer:e,onQuickWithdrawal:t})=>{const{customers:a,addCustomer:l,updateCustomer:c}=lt(),[d,m]=A.useState(!1),[p,x]=A.useState(""),[v,b]=A.useState(""),[N,S]=A.useState("date"),[z,O]=A.useState(!1),[P,C]=A.useState(null),[L,M]=A.useState(""),F=A.useMemo(()=>{let E=a;return r==="distribution"?E=a.filter(T=>T.type==="distribution"):r==="general"&&(E=a.filter(T=>T.type==="general"||!T.type)),E.sort((T,k)=>{if(N==="highest")return k.totalDebt-T.totalDebt;if(N==="name")return T.name.localeCompare(k.name);const R=D=>!D.transactions||D.transactions.length===0?0:new Date(D.transactions[0].date).getTime();return R(k)-R(T)})},[a,r,N]),Z=()=>{p.trim()&&(l({name:p,phone:v,type:r,color:r==="distribution"?"#3b82f6":"#eab308"}),x(""),b(""),m(!1))},te=E=>{c(E.id,{name:L}),C(null)};return o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"flex justify-between items-center mb-4",children:[o.jsxs("div",{className:"flex gap-2",children:[o.jsxs("button",{onClick:()=>m(!0),className:`px-3 py-1.5 rounded-lg flex items-center gap-1 text-xs font-bold transition-all ${r==="distribution"?"bg-blue-500/20 text-blue-200 hover:bg-blue-500/30":"bg-yellow-500/20 text-yellow-200 hover:bg-yellow-500/30"}`,children:[o.jsx(Nu,{className:"w-4 h-4"}),"  "]}),o.jsxs("div",{className:"relative",children:[o.jsxs("button",{onClick:()=>O(!z),className:"px-3 py-1.5 bg-white/5 hover:bg-white/10 rounded-lg text-white/70 flex items-center gap-1 text-xs",children:[o.jsx(GN,{className:"w-4 h-4"})," "]}),z&&o.jsxs("div",{className:"absolute top-full right-0 mt-2 w-40 bg-slate-800 border border-white/10 rounded-xl shadow-xl z-50 overflow-hidden animate-fade-in",children:[o.jsx("button",{onClick:()=>{S("highest"),O(!1)},className:`w-full text-right px-4 py-2 text-xs hover:bg-white/5 ${N==="highest"?"text-cyan-300 font-bold":""}`,children:" "}),o.jsx("button",{onClick:()=>{S("date"),O(!1)},className:`w-full text-right px-4 py-2 text-xs hover:bg-white/5 ${N==="date"?"text-cyan-300 font-bold":""}`,children:" "}),o.jsx("button",{onClick:()=>{S("name"),O(!1)},className:`w-full text-right px-4 py-2 text-xs hover:bg-white/5 ${N==="name"?"text-cyan-300 font-bold":""}`,children:" "})]})]})]}),o.jsxs("span",{className:"text-[10px] text-white/30",children:[F.length," "]})]}),o.jsx("div",{className:"space-y-2 max-h-[60vh] overflow-y-auto custom-scrollbar",children:F.length===0?o.jsx("div",{className:"text-center py-8 text-white/30 border border-dashed border-white/10 rounded-xl",children:"     "}):F.map(E=>o.jsxs("div",{onClick:()=>e(E.id),className:"glass-btn p-3 rounded-xl flex items-center justify-between group hover:bg-white/10",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"w-10 h-10 rounded-full flex items-center justify-center font-bold text-white text-sm relative",style:{background:E.color||(r==="distribution"?"#3b82f6":"#eab308")},children:E.name.charAt(0)}),o.jsxs("div",{className:"text-right",children:[o.jsx("h3",{className:"font-bold text-sm text-white",children:E.name}),o.jsxs("p",{className:"text-[10px] text-white/50",children:[E.transactions.length," "]})]})]}),o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsxs("span",{className:"font-bold text-yellow-400",children:[E.totalDebt," ."]}),r==="distribution"&&t&&o.jsx("button",{onClick:T=>{T.stopPropagation(),t(E)},className:"p-2 bg-blue-500/20 hover:bg-blue-500/40 text-blue-300 rounded-lg transition-colors",title:" ",children:o.jsx(JN,{className:"w-4 h-4"})}),o.jsx("button",{onClick:T=>{T.stopPropagation(),C(E.id),M(E.name)},className:"p-2 hover:bg-white/10 text-white/30 hover:text-white rounded-lg",children:o.jsx(cl,{className:"w-4 h-4"})})]}),P===E.id&&o.jsxs("div",{className:"absolute inset-0 bg-slate-800 flex items-center gap-2 px-2 z-10",onClick:T=>T.stopPropagation(),children:[o.jsx(ht,{value:L,onChange:T=>M(T.target.value),className:"h-10 text-sm",autoFocus:!0}),o.jsx("button",{onClick:()=>te(E),className:"bg-green-500/20 text-green-300 p-2 rounded-lg",children:o.jsx(Js,{className:"w-4 h-4"})}),o.jsx("button",{onClick:()=>C(null),className:"bg-white/10 text-white p-2 rounded-lg",children:o.jsx(dl,{className:"w-4 h-4"})})]})]},E.id))}),o.jsx(Mn,{isOpen:d,onClose:()=>m(!1),title:` ${r==="distribution"?"":""} `,icon:o.jsx(Nu,{className:"text-green-400"}),maxWidth:"max-w-xs",children:o.jsxs("div",{className:"space-y-3 p-2",children:[o.jsx(ht,{value:p,onChange:E=>x(E.target.value),placeholder:"",autoFocus:!0}),o.jsx(ht,{value:v,onChange:E=>b(E.target.value),placeholder:"  ()"}),o.jsx(It,{onClick:Z,className:"w-full bg-green-600/20 text-green-200",children:""})]})})]})},ED=({customer:r,onBack:e,initialWithdrawal:t=!1})=>{const{addCustomerTransaction:a,addSale:l,updateCustomer:c,items:d,systemDate:m}=lt(),[p,x]=A.useState(t),[v,b]=A.useState({}),[N,S]=A.useState(!1),[z,O]=A.useState("repay"),[P,C]=A.useState(""),L=E=>{O(E),C(""),S(!0)},M=()=>{const E=parseFloat(P);if(isNaN(E)||E<=0){alert("   ");return}a(r.id,{items:z==="repay"?"":"",total:-E,date:as(m)},-E),z==="repay"&&l({type:"ajal_payment",items:[{id:0,name:`  - ${r.name}`,qty:1,price:E,total:E}],total:E,paymentMethod:"cash",date:as(m),fullDate:ri(m),customerId:r.id,customerName:r.name}),S(!1)},F=()=>{const E=d.filter(k=>k.category==="safary"),T={};return E.forEach(k=>{var D;const R=(D=r.specialPrices)==null?void 0:D[k.id];T[k.id]={qty:0,price:R!==void 0?R:k.price}}),T};ut.useEffect(()=>{p&&Object.keys(v).length===0&&b(F())},[p]);const Z=(E,T,k)=>{const R=parseFloat(k);isNaN(R)||R<0||b(D=>({...D,[E]:{...D[E],[T]:R}}))},te=()=>{const E=[];let T=0,k=0;const R={...r.specialPrices||{}};let D=!1;if(Object.entries(v).forEach(([V,de])=>{const xe=de,K=parseInt(V);if(xe.qty>0){const G=d.find(pe=>pe.id===K);G&&(E.push({id:K,name:G.name,qty:xe.qty,price:xe.price,total:xe.qty*xe.price}),T+=xe.qty*xe.price,k+=xe.qty,xe.price!==G.price&&(R[K]=xe.price,D=!0))}}),E.length===0){alert("     ");return}l({type:"safary",items:E,total:T,paymentMethod:"ajal",date:as(m),fullDate:ri(m),customerId:r.id,customerName:r.name,isReturn:!1});const q=E.map(V=>`${V.name} (${V.qty})`).join(", ");a(r.id,{items:q,qty:k,total:T,date:as(m)},T),D&&c(r.id,{specialPrices:R}),x(!1),b({})};return p?o.jsxs("div",{className:"animate-fade-in",children:[o.jsxs("button",{onClick:()=>x(!1),className:"mb-4 w-full py-3 rounded-xl bg-white/10 hover:bg-white/20 flex items-center justify-center gap-2 transition-all font-bold text-white text-sm border border-white/5",children:[o.jsx(Qt,{className:"w-4 h-4"}),"  "]}),o.jsx("div",{className:"space-y-3 max-h-[50vh] overflow-y-auto custom-scrollbar mb-4",children:d.filter(E=>E.category==="safary").map(E=>{const T=v[E.id]||{qty:0,price:E.price},k=T.qty>0;return o.jsxs("div",{className:`p-3 rounded-xl border transition-all ${k?"bg-white/10 border-blue-500/50":"bg-white/5 border-transparent"}`,children:[o.jsxs("div",{className:"flex justify-between items-center mb-2",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("span",{className:"font-bold text-sm",children:E.name}),E.stock<=E.warningLimit&&o.jsx(Kf,{className:"w-3 h-3 text-red-400"})]}),o.jsxs("span",{className:"text-[10px] text-white/40",children:[": ",E.stock]})]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsxs("div",{className:"flex-1",children:[o.jsx("label",{className:"text-[9px] text-white/40 block mb-1",children:""}),o.jsxs("div",{className:"flex items-center",children:[o.jsx("button",{onClick:()=>Z(E.id,"qty",Math.max(0,T.qty-1).toString()),className:"p-2 bg-white/5 hover:bg-white/10 rounded-r-lg border border-white/10",children:o.jsx(ex,{className:"w-3 h-3"})}),o.jsx("input",{type:"number",className:"w-full bg-black/30 border-y border-white/10 text-center py-1.5 text-sm font-bold focus:outline-none",value:T.qty,onChange:R=>Z(E.id,"qty",R.target.value)}),o.jsx("button",{onClick:()=>Z(E.id,"qty",(T.qty+1).toString()),className:"p-2 bg-white/5 hover:bg-white/10 rounded-l-lg border border-white/10",children:o.jsx(Xa,{className:"w-3 h-3"})})]})]}),o.jsxs("div",{className:"w-24",children:[o.jsx("label",{className:"text-[9px] text-white/40 block mb-1",children:" ()"}),o.jsx("input",{type:"number",className:`w-full bg-black/30 border rounded-lg text-center py-1.5 text-sm ${T.price!==E.price?"text-yellow-300 border-yellow-500/30":"text-white border-white/10"}`,value:T.price,onChange:R=>Z(E.id,"price",R.target.value)})]})]})]},E.id)})}),o.jsx(It,{onClick:te,className:"w-full py-4 bg-blue-600/30 hover:bg-blue-600/40 text-blue-200",children:"   "})]}):o.jsxs("div",{className:"animate-fade-in",children:[o.jsxs("button",{onClick:e,className:"mb-4 w-full py-3 rounded-xl bg-white/10 hover:bg-white/20 flex items-center justify-center gap-2 transition-all font-bold text-white text-sm border border-white/5",children:[o.jsx(Qt,{className:"w-4 h-4"}),"  "]}),o.jsxs("div",{className:"glass-card p-4 rounded-xl mb-6 text-center bg-white/5 relative overflow-hidden",children:[o.jsx("div",{className:"absolute top-0 right-0 p-2 opacity-10",children:r.type==="distribution"?o.jsx(al,{className:"w-24 h-24"}):o.jsx(Za,{className:"w-24 h-24"})}),o.jsx("h2",{className:"font-bold text-xl mb-1 relative z-10",children:r.name}),o.jsx("p",{className:"text-white/50 text-sm mb-1 relative z-10",children:" "}),o.jsx("h1",{className:"text-4xl font-bold text-red-400 mb-4 relative z-10",children:r.totalDebt}),o.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-3 relative z-10",children:[o.jsxs("button",{onClick:()=>L("repay"),className:"glass-btn p-3 rounded-xl bg-green-500/10 hover:bg-green-500/20 text-green-300 border-green-500/30 flex justify-center items-center gap-2",children:[o.jsx(nl,{className:"w-4 h-4"})," "]}),o.jsxs("button",{onClick:()=>L("discount"),className:"glass-btn p-3 rounded-xl bg-blue-500/10 hover:bg-blue-500/20 text-blue-300 border-blue-500/30 flex justify-center items-center gap-2",children:[o.jsx(sl,{className:"w-4 h-4"})," "]})]}),r.type==="distribution"&&o.jsxs("button",{onClick:()=>x(!0),className:"w-full glass-btn p-4 rounded-xl bg-gradient-to-r from-blue-600/30 to-cyan-600/30 hover:from-blue-600/40 hover:to-cyan-600/40 text-cyan-200 border-blue-500/30 flex justify-center items-center gap-2 shadow-lg animate-pulse relative z-10",children:[o.jsx(ZN,{className:"w-5 h-5"}),o.jsx("span",{className:"font-bold",children:"  ()"})]})]}),o.jsx("h3",{className:"font-bold mb-3 text-sm text-white/70",children:" "}),o.jsx("div",{className:"space-y-2 text-sm max-h-60 overflow-y-auto custom-scrollbar",children:[...r.transactions].reverse().map((E,T)=>o.jsxs("div",{className:"glass-inner p-2 rounded flex justify-between items-center bg-white/5",children:[o.jsxs("div",{children:[o.jsx("span",{className:"block font-bold",children:E.items}),o.jsx("span",{className:"text-white/40 text-[10px]",children:E.date})]}),o.jsx("span",{className:E.total>0?"text-red-300":"text-green-300",children:Math.abs(E.total)})]},T))}),o.jsx(Mn,{isOpen:N,onClose:()=>S(!1),title:z==="repay"?" ":"  ",icon:z==="repay"?o.jsx(nl,{className:"text-green-400"}):o.jsx(sl,{className:"text-blue-400"}),maxWidth:"max-w-xs",children:o.jsxs("div",{className:"text-center p-2",children:[o.jsx("p",{className:"text-sm text-white/60 mb-4",children:z==="repay"?"    ":"    "}),o.jsx(ht,{type:"number",value:P,onChange:E=>C(E.target.value),placeholder:"",className:"text-center text-lg font-bold text-white mb-4",autoFocus:!0}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx("button",{onClick:()=>S(!1),className:"flex-1 py-2 bg-white/10 rounded-lg text-xs hover:bg-white/20",children:""}),o.jsx(It,{onClick:M,className:`flex-1 ${z==="repay"?"bg-green-600/30 text-green-200":"bg-blue-600/30 text-blue-200"}`,children:""})]})]})})]})},SD=()=>{const{customers:r}=lt(),e=r.reduce((t,a)=>t+a.totalDebt,0);return o.jsxs("div",{className:"animate-fade-in space-y-4",children:[o.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[o.jsxs("div",{className:"glass-card p-4 text-center bg-white/5",children:[o.jsx("p",{className:"text-xs text-white/50 mb-1",children:" "}),o.jsx("p",{className:"text-2xl font-bold text-white",children:r.length})]}),o.jsxs("div",{className:"glass-card p-4 text-center bg-red-500/10 border border-red-500/20",children:[o.jsx("p",{className:"text-xs text-red-300 mb-1",children:" "}),o.jsx("p",{className:"text-2xl font-bold text-white",children:e.toLocaleString()})]})]}),o.jsx("div",{className:"glass-card overflow-hidden",children:o.jsxs("table",{className:"w-full text-xs text-right",children:[o.jsx("thead",{className:"bg-white/10 text-white/60",children:o.jsxs("tr",{children:[o.jsx("th",{className:"p-3",children:""}),o.jsx("th",{className:"p-3",children:""}),o.jsx("th",{className:"p-3",children:""})]})}),o.jsx("tbody",{className:"divide-y divide-white/5",children:r.map(t=>o.jsxs("tr",{children:[o.jsx("td",{className:"p-3 font-bold",children:t.name}),o.jsx("td",{className:"p-3 opacity-60",children:t.type==="distribution"?"":""}),o.jsx("td",{className:"p-3 text-red-300 font-bold",children:t.totalDebt})]},t.id))})]})})]})},TD=({isOpen:r,onClose:e,mode:t})=>{const{customers:a}=lt(),[l,c]=A.useState(null),[d,m]=A.useState(!1),p=()=>t==="distribution"?" ":t==="stats"?" ":" ",x=()=>t==="distribution"?o.jsx(al,{className:"text-blue-400"}):t==="stats"?o.jsx(oi,{className:"text-purple-400"}):o.jsx(Za,{className:"text-yellow-400"}),v=N=>{c(N),m(!1)},b=N=>{c(N.id),m(!0)};return o.jsx(Mn,{isOpen:r,onClose:e,title:p(),icon:x(),maxWidth:"max-w-lg",children:t==="stats"?o.jsx(SD,{}):l===null?o.jsx(ND,{mode:t,onSelectCustomer:v,onQuickWithdrawal:b}):o.jsx(ED,{customer:a.find(N=>N.id===l),onBack:()=>c(null),initialWithdrawal:d})})},jD=({isOpen:r,onClose:e})=>{const{items:t,updateItem:a,systemDate:l,sales:c,security:d}=lt(),[m,p]=A.useState(null),[x,v]=A.useState(""),[b,N]=A.useState(!1),[S,z]=A.useState(!1),[O,P]=A.useState(""),[C,L]=A.useState(null),M=t.filter(R=>R.category!=="filling"),F=A.useMemo(()=>M.map(R=>{let D=0,q=0;return c.forEach(V=>{const de=V.items.find(xe=>xe.id===R.id);de&&(V.isReturn?(D-=de.qty,q-=de.total):(D+=de.qty,q+=de.total))}),{...R,soldQty:D,revenue:q}}).sort((R,D)=>D.revenue-R.revenue),[M,c]),Z=R=>{L(R),z(!0)},te=()=>{const R=d.adminPin||"7890790";O===R&&C?(p(C.id),v(C.stock.toString()),z(!1),P(""),L(null)):(alert("   "),P(""))},E=()=>{if(m!==null){const R=parseInt(x);isNaN(R)||a(m,{stock:R}),p(null),v("")}},T=M.reduce((R,D)=>R+D.stock*D.price,0),k=()=>{const R=l.toLocaleDateString("ar-EG");let D="",q="",V="";if(b){D="   ( )";const de=F.reduce((K,G)=>K+G.revenue,0);q=`<thead><tr><th width="10%">#</th><th width="40%"> </th><th width="25%"> </th><th width="25%"></th></tr></thead><tbody>${F.map((K,G)=>`
                <tr><td>${G+1}</td><td style="text-align: right; font-weight: bold;">${K.name}</td><td>${K.soldQty}</td><td style="font-weight: bold;">${K.revenue.toLocaleString()}</td></tr>
            `).join("")}</tbody><tfoot><tr style="background-color: #eee; font-weight: bold;"><td colspan="3"> </td><td>${de.toLocaleString()}</td></tr></tfoot>`}else D="  ",q=`<thead><tr><th width="5%">#</th><th width="35%"> </th><th width="20%"></th><th width="20%"> </th><th width="20%"></th></tr></thead><tbody>${M.map((xe,K)=>`
                <tr><td>${K+1}</td><td style="text-align: right; font-weight: bold;">${xe.name}</td><td>${xe.stock}</td><td>${xe.price}</td><td style="font-weight: bold;">${(xe.stock*xe.price).toLocaleString()}</td></tr>
            `).join("")}</tbody><tfoot><tr style="background-color: #eee; font-weight: bold;"><td colspan="2"></td><td>${M.reduce((xe,K)=>xe+K.stock,0)}</td><td>-</td><td>${T.toLocaleString()}</td></tr></tfoot>`,V=`<div class="summary"><p>   : ${T.toLocaleString()}  </p></div>`;cD(D,R,q,V)};return o.jsxs(o.Fragment,{children:[o.jsxs(Mn,{isOpen:r,onClose:e,title:"",icon:o.jsx(zu,{className:"text-purple-400"}),children:[o.jsxs("div",{className:"flex justify-between items-center mb-4 gap-2",children:[!b&&o.jsxs("div",{className:"glass-card px-4 py-2 bg-purple-500/5 border border-purple-500/20 text-center flex-1",children:[o.jsx("p",{className:"text-xs text-purple-300",children:"  ()"}),o.jsxs("p",{className:"text-xl font-bold text-white",children:[T.toLocaleString()," ."]})]}),o.jsxs("button",{onClick:()=>N(!b),className:`p-3 rounded-xl text-white border transition-colors flex flex-col items-center justify-center gap-1 min-w-[80px] ${b?"bg-indigo-500/20 border-indigo-500/40 text-indigo-300":"bg-white/5 hover:bg-white/10 border-white/10"}`,children:[b?o.jsx(YN,{className:"w-5 h-5"}):o.jsx(oi,{className:"w-5 h-5"}),o.jsx("span",{className:"text-[10px]",children:b?"":""})]}),o.jsxs("button",{onClick:k,className:"p-3 bg-white/5 hover:bg-white/10 rounded-xl text-white border border-white/10 transition-colors flex flex-col items-center justify-center gap-1 min-w-[80px]",children:[o.jsx(eE,{className:"w-5 h-5 text-white/70"}),o.jsx("span",{className:"text-[10px]",children:" PDF"})]})]}),o.jsx("div",{className:"space-y-2",children:M.map(R=>o.jsxs("div",{className:`p-3 rounded-lg grid grid-cols-4 gap-2 items-center text-center ${R.stock<=R.warningLimit?"bg-red-500/10 border border-red-500/30":"bg-white/5"}`,children:[o.jsx("span",{className:"text-xs font-bold",children:R.name}),m===R.id?o.jsx("input",{type:"number",value:x,onChange:D=>v(D.target.value),className:"w-16 bg-black/40 rounded text-center text-sm",autoFocus:!0}):o.jsx("span",{className:"font-mono text-lg",children:R.stock}),o.jsx("span",{className:"text-xs text-green-300/70 font-mono",children:(R.stock*R.price).toLocaleString()}),m===R.id?o.jsx("button",{onClick:E,className:"text-green-400 mx-auto",children:o.jsx(Js,{className:"w-4 h-4"})}):o.jsx("button",{onClick:()=>Z(R),className:"text-white/50 hover:text-white mx-auto",children:o.jsx(cl,{className:"w-4 h-4"})})]},R.id))})]}),o.jsx(Mn,{isOpen:S,onClose:()=>{z(!1),P(""),L(null)},title:" ",icon:o.jsx(Ya,{className:"text-red-400"}),maxWidth:"max-w-xs",children:o.jsxs("div",{className:"text-center py-4",children:[o.jsx("p",{className:"text-sm text-white/60 mb-4",children:"     "}),o.jsx(ht,{type:"password",value:O,onChange:R=>P(R.target.value),placeholder:" ",className:"text-center text-lg font-mono mb-4",autoFocus:!0}),o.jsx(It,{onClick:te,className:"w-full bg-red-600/30 hover:bg-red-600/40 text-red-200",children:""})]})})]})},AD=({onBack:r})=>{const{items:e,updateDistribution:t,addDistributionCash:a,distribution:l,systemDate:c}=lt(),[d,m]=A.useState("out"),[p,x]=A.useState([]),[v,b]=A.useState({}),[N,S]=A.useState({}),[z,O]=A.useState(""),[P,C]=A.useState(!1),L=c.toISOString().split("T")[0],M=l.find(G=>G.date===L);A.useEffect(()=>{const G=localStorage.getItem("DISTRIBUTION_CONFIG_V2");if(G)try{x(JSON.parse(G))}catch(pe){console.error("Failed to parse distribution config",pe)}b({}),S({}),O("")},[]);const F=A.useMemo(()=>{const G=new Set(p.map(pe=>pe.id));return e.filter(pe=>pe.category==="safary"&&!G.has(pe.id))},[e,p]),Z=G=>{x(pe=>[...pe,{id:G.id,customPrice:G.price}])},te=G=>{x(pe=>pe.filter(Ee=>Ee.id!==G))},E=(G,pe)=>{const Ee=parseFloat(pe);isNaN(Ee)||Ee<0||x(Te=>Te.map(U=>U.id===G?{...U,customPrice:Ee}:U))},T=()=>p.reduce((G,pe)=>{const Ee=parseInt(v[pe.id]||"0")||0;return G+Ee*pe.customPrice},0),k=()=>{let G=!1;Object.entries(v).forEach(([pe,Ee])=>{const Te=parseInt(Ee),U=parseInt(pe);Te>0&&(t(L,"outputs",U,Te),G=!0)}),localStorage.setItem("DISTRIBUTION_CONFIG_V2",JSON.stringify(p)),G?(b({}),alert("     .      .")):(alert("    .     ."),localStorage.setItem("DISTRIBUTION_CONFIG_V2",JSON.stringify(p)))},R=G=>{var pe;return((pe=M==null?void 0:M.outputs)==null?void 0:pe[G])||0},q=p.reduce((G,pe)=>{const Ee=R(pe.id),Te=parseInt(N[pe.id]||"0")||0,U=Math.max(0,Ee-Te);return G+U*pe.customPrice},0),V=parseFloat(z)||0,de=V-q,xe=()=>{let G=!1;Object.entries(N).forEach(([pe,Ee])=>{const Te=parseInt(Ee),U=parseInt(pe);Te>0&&(t(L,"returns",U,Te),G=!0)}),V>0&&a(L,V),G||V>0?(S({}),O(""),alert("     ")):alert("   ")},K=G=>{if(!G)return"-";try{return new Date(G).toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0})}catch{return"-"}};return o.jsxs("div",{className:"w-full max-w-md mx-auto p-4 h-screen flex flex-col overflow-y-auto custom-scrollbar animate-fade-in bg-gradient-to-b from-slate-900 via-slate-900 to-green-900/20",children:[o.jsxs("div",{className:"flex items-center justify-between mb-6 pt-2",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("button",{onClick:r,className:"p-2.5 bg-white/5 hover:bg-white/10 border border-white/10 rounded-xl text-white transition-all active:scale-95",children:o.jsx(Qt,{className:"w-5 h-5"})}),o.jsxs("div",{children:[o.jsx("h1",{className:"text-lg font-bold text-white leading-tight",children:" "}),o.jsx("span",{className:"text-[10px] text-white/50 block",children:"   "})]})]}),o.jsxs("div",{className:"px-3 py-1.5 bg-gradient-to-r from-green-600/20 to-emerald-600/20 border border-green-500/30 rounded-lg flex items-center gap-2",children:[o.jsx(si,{className:"w-3 h-3 text-green-300"}),o.jsx("span",{className:"text-xs font-mono text-green-100",dir:"ltr",children:c.toLocaleDateString()})]})]}),o.jsxs("div",{className:"flex gap-2 mb-4 bg-black/20 p-1.5 rounded-2xl border border-white/5",children:[o.jsxs("button",{onClick:()=>m("out"),className:`flex-1 py-3 rounded-xl text-xs font-bold flex items-center justify-center gap-2 transition-all ${d==="out"?"bg-gradient-to-r from-red-600/80 to-red-500/80 text-white shadow-lg":"text-white/60 hover:text-white hover:bg-white/5"}`,children:[o.jsx(oC,{className:"w-4 h-4"})," "]}),o.jsxs("button",{onClick:()=>m("in"),className:`flex-1 py-3 rounded-xl text-xs font-bold flex items-center justify-center gap-2 transition-all ${d==="in"?"bg-gradient-to-r from-green-600/80 to-green-500/80 text-white shadow-lg":"text-white/60 hover:text-white hover:bg-white/5"}`,children:[o.jsx(sC,{className:"w-4 h-4"})," "]}),o.jsxs("button",{onClick:()=>m("stats"),className:`flex-1 py-3 rounded-xl text-xs font-bold flex items-center justify-center gap-2 transition-all ${d==="stats"?"bg-gradient-to-r from-blue-600/80 to-blue-500/80 text-white shadow-lg":"text-white/60 hover:text-white hover:bg-white/5"}`,children:[o.jsx(oi,{className:"w-4 h-4"})," "]})]}),d==="out"&&o.jsxs("div",{className:"animate-fade-in flex flex-col flex-1 pb-4",children:[o.jsxs("button",{onClick:()=>C(!0),className:"mb-3 w-full py-3 bg-blue-500/10 hover:bg-blue-500/20 text-blue-300 border border-blue-500/30 rounded-xl text-xs font-bold flex items-center justify-center gap-2 transition-all border-dashed",children:[o.jsx(Xa,{className:"w-4 h-4"}),"    ( )"]}),o.jsxs("div",{className:"flex-1 overflow-hidden glass-card border border-white/10 flex flex-col mb-4",children:[o.jsxs("div",{className:"grid grid-cols-12 gap-2 bg-white/10 text-white/70 p-3 text-xs font-bold text-center border-b border-white/10",children:[o.jsx("div",{className:"col-span-4 text-right pr-2",children:""}),o.jsx("div",{className:"col-span-2",children:""}),o.jsx("div",{className:"col-span-3",children:" "}),o.jsx("div",{className:"col-span-2",children:""}),o.jsx("div",{className:"col-span-1"})]}),o.jsx("div",{className:"overflow-y-auto custom-scrollbar flex-1 p-2 space-y-1",children:p.length===0?o.jsx("div",{className:"text-center py-10 text-white/30 text-sm",children:' .  "  " .'}):p.map(G=>{const pe=e.find(Te=>Te.id===G.id);if(!pe)return null;const Ee=parseInt(v[G.id]||"0")||0;return o.jsxs("div",{className:`grid grid-cols-12 gap-2 items-center p-2 rounded-lg transition-colors ${Ee>0?"bg-red-500/10 border border-red-500/20":"bg-white/5 hover:bg-white/10"}`,children:[o.jsx("div",{className:"col-span-4 text-right font-bold text-sm text-white pr-2 truncate",children:pe.name}),o.jsx("div",{className:"col-span-2 text-center font-mono text-xs text-white/60",children:pe.stock}),o.jsx("div",{className:"col-span-3",children:o.jsx("input",{type:"number",value:G.customPrice,onChange:Te=>E(G.id,Te.target.value),className:"w-full text-center bg-black/30 border border-white/10 rounded py-1 text-yellow-300 font-mono text-xs focus:border-yellow-500/50 outline-none"})}),o.jsx("div",{className:"col-span-2",children:o.jsx("input",{type:"number",value:v[G.id]||"",onChange:Te=>b(U=>({...U,[G.id]:Te.target.value})),placeholder:"0",className:`w-full text-center py-1 rounded text-sm font-bold focus:outline-none transition-all ${Ee>0?"bg-red-500/20 text-red-200 ring-1 ring-red-500/50":"bg-black/30 text-white placeholder-white/20"}`})}),o.jsx("div",{className:"col-span-1 text-center",children:o.jsx("button",{onClick:()=>te(G.id),className:"text-red-400 hover:text-red-300 p-1",children:o.jsx(ul,{className:"w-4 h-4"})})})]},G.id)})})]}),o.jsxs("div",{className:"p-4 glass-card bg-red-500/5 border border-red-500/10 flex justify-between items-center sticky bottom-0",children:[o.jsxs("div",{className:"flex flex-col",children:[o.jsx("span",{className:"text-xs text-red-300 mb-1",children:"  ( )"}),o.jsxs("span",{className:"text-2xl font-bold text-white",children:[T().toLocaleString()," ",o.jsx("span",{className:"text-sm font-normal opacity-60",children:"."})]})]}),o.jsxs(It,{onClick:k,className:"px-8 py-3 bg-red-600/30 hover:bg-red-600/40 text-red-100 border-red-500/30",children:[o.jsx(Js,{className:"w-5 h-5 ml-2"})," "]})]})]}),d==="in"&&o.jsxs("div",{className:"animate-fade-in flex flex-col flex-1 pb-4",children:[o.jsxs("div",{className:"flex-1 overflow-hidden glass-card border border-white/10 flex flex-col mb-4",children:[o.jsxs("div",{className:"grid grid-cols-12 gap-2 bg-white/10 text-white/70 p-3 text-xs font-bold text-center border-b border-white/10 sticky top-0",children:[o.jsx("div",{className:"col-span-4 text-right pr-2",children:""}),o.jsx("div",{className:"col-span-2",children:" "}),o.jsx("div",{className:"col-span-2",children:""}),o.jsx("div",{className:"col-span-2",children:" ()"}),o.jsx("div",{className:"col-span-2",children:""})]}),o.jsx("div",{className:"overflow-y-auto custom-scrollbar flex-1 p-2 space-y-1",children:p.map(G=>{const pe=e.find(ue=>ue.id===G.id);if(!pe)return null;const Ee=R(G.id),Te=parseInt(N[G.id]||"0")||0,U=Math.max(0,Ee-Te),$=Te>0;return o.jsxs("div",{className:`grid grid-cols-12 gap-2 items-center p-2 rounded-lg transition-colors border ${$?"bg-green-500/10 border-green-500/20":"bg-white/5 border-transparent hover:bg-white/10"}`,children:[o.jsx("div",{className:"col-span-4 text-right font-bold text-sm text-white pr-2 truncate",children:pe.name}),o.jsx("div",{className:"col-span-2 text-center font-mono text-xs text-yellow-300 font-bold bg-yellow-500/10 rounded py-1",children:Ee}),o.jsx("div",{className:"col-span-2 text-center font-mono text-xs text-white/50",children:G.customPrice}),o.jsx("div",{className:"col-span-2",children:o.jsx("input",{type:"number",value:N[G.id]||"",onChange:ue=>S(fe=>({...fe,[G.id]:ue.target.value})),placeholder:"0",className:`w-full text-center py-1 rounded text-sm font-bold focus:outline-none transition-all ${$?"bg-green-500/20 text-green-200 ring-1 ring-green-500/50":"bg-black/30 text-white placeholder-white/20"}`})}),o.jsx("div",{className:"col-span-2 text-center font-mono text-xs text-blue-300 bg-blue-500/10 rounded py-1",children:U})]},G.id)})})]}),o.jsxs("div",{className:"glass-card p-4 bg-gradient-to-br from-slate-800 to-slate-900 border border-white/10",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-3 pb-2 border-b border-white/10",children:[o.jsx(hC,{className:"w-4 h-4 text-green-400"}),o.jsx("h3",{className:"text-sm font-bold text-white",children:"  ()"})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[o.jsxs("div",{className:"bg-white/5 rounded-xl p-3 border border-white/5 text-center",children:[o.jsx("span",{className:"block text-[10px] text-white/50 mb-1",children:"  ()"}),o.jsx("span",{className:"block text-xl font-bold text-blue-300 font-mono tracking-wider",children:q.toLocaleString()})]}),o.jsxs("div",{className:"bg-white/5 rounded-xl p-3 border border-white/5",children:[o.jsx("label",{className:"block text-[10px] text-white/50 mb-1 text-center",children:"  ()"}),o.jsx(ht,{type:"number",value:z,onChange:G=>O(G.target.value),className:"text-center font-bold text-lg h-8 bg-black/40 border-white/20 focus:border-green-500",placeholder:" ..."})]})]}),z&&o.jsxs("div",{className:`flex justify-between items-center p-3 rounded-xl mb-4 border ${de===0?"bg-green-500/10 border-green-500/30":de>0?"bg-blue-500/10 border-blue-500/30":"bg-red-500/10 border-red-500/30"}`,children:[o.jsx("span",{className:"text-xs font-bold text-white/80",children:" :"}),o.jsxs("div",{className:"flex items-center gap-2",children:[de===0&&o.jsx(UN,{className:"w-4 h-4 text-green-400"}),de!==0&&o.jsx(Kf,{className:`w-4 h-4 ${de>0?"text-blue-400":"text-red-400"}`}),o.jsxs("span",{className:`font-bold text-lg font-mono ${de===0?"text-green-400":de>0?"text-blue-400":"text-red-400"}`,dir:"ltr",children:[de>0?"+":"",de.toLocaleString()]}),o.jsx("span",{className:"text-[10px] opacity-70",children:de===0?"()":de>0?"()":"()"})]})]}),o.jsxs(It,{onClick:xe,className:"w-full py-3 bg-green-600/30 hover:bg-green-600/40 text-green-100 border-green-500/30",children:[o.jsx(Js,{className:"w-4 h-4 ml-2"}),"   "]})]})]}),d==="stats"&&o.jsxs("div",{className:"animate-fade-in flex flex-col flex-1 pb-4",children:[o.jsxs("div",{className:"mb-4 p-4 bg-white/5 rounded-xl border border-white/10 flex justify-between items-center",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"text-sm font-bold text-white",children:"  "}),o.jsx("p",{className:"text-[10px] text-white/50",children:L})]}),o.jsxs("div",{className:"text-center",children:[o.jsx("span",{className:"block text-[10px] text-white/50",children:" "}),o.jsxs("span",{className:"text-xl font-bold text-green-400",children:[(M==null?void 0:M.cash)||0," ."]})]})]}),o.jsx("div",{className:"flex-1 overflow-hidden glass-card border border-white/10",children:o.jsxs("table",{className:"w-full text-xs text-right whitespace-nowrap",children:[o.jsx("thead",{className:"bg-white/10 text-white/60 sticky top-0 backdrop-blur-md",children:o.jsxs("tr",{children:[o.jsx("th",{className:"p-3 w-8",children:"#"}),o.jsx("th",{className:"p-3",children:""}),o.jsx("th",{className:"p-3 text-center",children:""}),o.jsx("th",{className:"p-3 text-center text-red-300",children:""}),o.jsx("th",{className:"p-3 text-center text-green-300",children:""}),o.jsx("th",{className:"p-3 text-center",children:""}),o.jsx("th",{className:"p-3 text-left",children:" "})]})}),o.jsxs("tbody",{className:"divide-y divide-white/5",children:[p.map((G,pe)=>{var $;const Ee=e.find(ue=>ue.id===G.id);if(!Ee)return null;const Te=R(G.id),U=(($=M==null?void 0:M.returns)==null?void 0:$[G.id])||0;return Te===0&&U===0?null:o.jsxs("tr",{className:"hover:bg-white/5",children:[o.jsx("td",{className:"p-3 text-white/30",children:pe+1}),o.jsx("td",{className:"p-3 font-bold text-white",children:Ee.name}),o.jsx("td",{className:"p-3 text-center font-mono text-yellow-500/80",children:G.customPrice}),o.jsx("td",{className:"p-3 text-center font-mono text-red-300 font-bold",children:Te}),o.jsx("td",{className:"p-3 text-center font-mono text-green-300 font-bold",children:U}),o.jsx("td",{className:"p-3 text-center font-mono text-white/90",children:Te-U}),o.jsxs("td",{className:"p-3 text-left text-white/50 text-[10px]",children:[o.jsxs("div",{className:"flex items-center justify-end gap-1",children:[o.jsx("span",{dir:"ltr",children:K(M==null?void 0:M.fullDate)}),o.jsx(BN,{className:"w-3 h-3 text-white/30"})]}),o.jsx("div",{className:"text-[8px] opacity-60 text-right pr-4",dir:"ltr",children:M==null?void 0:M.date})]})]},G.id)}),(!M||Object.keys(M.outputs||{}).length===0)&&o.jsx("tr",{children:o.jsx("td",{colSpan:7,className:"text-center py-10 text-white/30",children:"    "})})]})]})})]}),o.jsxs(Mn,{isOpen:P,onClose:()=>C(!1),title:"  ",icon:o.jsx(tx,{className:"text-blue-400"}),maxWidth:"max-w-sm",children:[o.jsx("div",{className:"space-y-2 p-2 max-h-[60vh] overflow-y-auto custom-scrollbar",children:F.length===0?o.jsx("p",{className:"text-center text-white/30 py-4 text-xs",children:"    "}):F.map(G=>o.jsxs("button",{onClick:()=>Z(G),className:"w-full glass-btn p-3 rounded-xl flex justify-between items-center text-xs hover:bg-white/10 group",children:[o.jsx("span",{className:"font-bold",children:G.name}),o.jsx("span",{className:"text-white/50 group-hover:text-green-300 text-[10px]",children:" +"})]},G.id))}),o.jsx("div",{className:"p-2",children:o.jsx(It,{onClick:()=>C(!1),className:"w-full bg-white/10 text-xs",children:""})})]})]})},CD=()=>{const{isOnline:r,sales:e,customers:t,expenses:a,items:l,systemDate:c}=lt();return o.jsxs("div",{className:"space-y-4 animate-fade-in",children:[o.jsxs("div",{className:`glass-card p-4 flex items-center justify-between border ${r?"bg-emerald-500/10 border-emerald-500/30":"bg-red-500/10 border-red-500/30"}`,children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:`p-2 rounded-full ${r?"bg-emerald-500/20 text-emerald-300":"bg-red-500/20 text-red-300"}`,children:r?o.jsx(nD,{className:"w-5 h-5"}):o.jsx(eD,{className:"w-5 h-5"})}),o.jsxs("div",{children:[o.jsx("h3",{className:`font-bold ${r?"text-emerald-300":"text-red-300"}`,children:r?"  (Online)":"   (Offline)"}),o.jsx("p",{className:"text-xs text-white/50",children:r?"     ":"    "})]})]}),o.jsx("div",{className:`w-3 h-3 rounded-full shadow-lg ${r?"bg-emerald-400 animate-pulse":"bg-red-500"}`})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[o.jsxs("div",{className:"glass-card p-3 bg-white/5",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-2 text-white/60",children:[o.jsx(WC,{className:"w-4 h-4"}),o.jsx("span",{className:"text-xs",children:" "})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-2 text-center",children:[o.jsxs("div",{className:"bg-black/20 rounded p-1",children:[o.jsx("span",{className:"block text-[10px] text-white/40",children:""}),o.jsx("span",{className:"font-bold text-cyan-300",children:e.length})]}),o.jsxs("div",{className:"bg-black/20 rounded p-1",children:[o.jsx("span",{className:"block text-[10px] text-white/40",children:""}),o.jsx("span",{className:"font-bold text-yellow-300",children:t.length})]}),o.jsxs("div",{className:"bg-black/20 rounded p-1",children:[o.jsx("span",{className:"block text-[10px] text-white/40",children:""}),o.jsx("span",{className:"font-bold text-red-300",children:a.length})]}),o.jsxs("div",{className:"bg-black/20 rounded p-1",children:[o.jsx("span",{className:"block text-[10px] text-white/40",children:""}),o.jsx("span",{className:"font-bold text-purple-300",children:l.length})]})]})]}),o.jsxs("div",{className:"glass-card p-3 bg-white/5 flex flex-col justify-center space-y-3",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"p-2 rounded-full bg-blue-500/10 text-blue-300",children:o.jsx(BN,{className:"w-4 h-4"})}),o.jsxs("div",{children:[o.jsx("span",{className:"text-[10px] text-white/50 block",children:" "}),o.jsx("span",{className:"font-mono text-xs font-bold",dir:"ltr",children:c.toLocaleDateString()})]})]}),o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"p-2 rounded-full bg-orange-500/10 text-orange-300",children:o.jsx(CI,{className:"w-4 h-4"})}),o.jsxs("div",{children:[o.jsx("span",{className:"text-[10px] text-white/50 block",children:""}),o.jsx("span",{className:"font-mono text-xs font-bold",children:"v3.1 (Stable)"})]})]})]})]})]})},ID=()=>{const{workers:r,addWorker:e,updateWorker:t,deleteWorker:a}=lt(),[l,c]=A.useState(""),[d,m]=A.useState(""),[p,x]=A.useState(""),[v,b]=A.useState("active"),[N,S]=A.useState(""),[z,O]=A.useState(null),P=()=>{if(l&&d){const M=parseFloat(p)||0,F={name:l,role:d,salary:M,status:v};v==="terminated"?F.terminationDate=N||new Date().toISOString().split("T")[0]:F.terminationDate=null,z!==null?(t(z,F),O(null)):e(F),c(""),m(""),x(""),b("active"),S("")}},C=M=>{var F;O(M.id),c(M.name),m(M.role),x(((F=M.salary)==null?void 0:F.toString())||""),b(M.status||"active"),S(M.terminationDate||"")},L=()=>{O(null),c(""),m(""),x(""),b("active"),S("")};return o.jsxs("div",{className:"space-y-4 animate-fade-in",children:[o.jsxs("div",{className:`glass-inner p-3 rounded-xl border ${z?"border-yellow-500/20 bg-yellow-500/5":"border-orange-500/20 bg-orange-500/5"}`,children:[z&&o.jsxs("div",{className:"flex justify-between items-center mb-2",children:[o.jsx("span",{className:"text-xs text-yellow-300",children:"  "}),o.jsx("button",{onClick:L,className:"text-white/50 hover:text-white",children:o.jsx(dl,{className:"w-4 h-4"})})]}),o.jsx(ht,{value:l,onChange:M=>c(M.target.value),placeholder:" ",className:"mb-2"}),o.jsx(ht,{value:d,onChange:M=>m(M.target.value),placeholder:"",className:"mb-2"}),o.jsx(ht,{type:"number",value:p,onChange:M=>x(M.target.value),placeholder:" ",className:"mb-2"}),o.jsxs("div",{className:"mb-3 bg-black/20 p-2 rounded-lg",children:[o.jsx("label",{className:"text-xs text-white/50 mb-1 block",children:" "}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx("button",{onClick:()=>b("active"),className:`flex-1 py-1 rounded text-xs transition-colors ${v==="active"?"bg-green-500/30 text-green-200":"bg-white/5 text-white/40"}`,children:"  "}),o.jsx("button",{onClick:()=>b("terminated"),className:`flex-1 py-1 rounded text-xs transition-colors ${v==="terminated"?"bg-red-500/30 text-red-200":"bg-white/5 text-white/40"}`,children:" / "})]}),v==="terminated"&&o.jsxs("div",{className:"mt-2 animate-fade-in",children:[o.jsx("label",{className:"text-xs text-red-300 mb-1 block",children:"   "}),o.jsx(ht,{type:"date",value:N,onChange:M=>S(M.target.value),className:"text-center"}),o.jsx("p",{className:"text-[10px] text-white/40 mt-1",children:"          ."})]})]}),o.jsxs(It,{onClick:P,className:`w-full ${z?"bg-yellow-500/20 text-yellow-200":"bg-orange-500/20 text-orange-200"}`,children:[z?o.jsx(Js,{className:"w-4 h-4"}):o.jsx(Nu,{className:"w-4 h-4"}),z?" ":" "]})]}),o.jsx("div",{className:"space-y-2",children:r.map(M=>o.jsxs("div",{className:`flex justify-between items-center bg-white/5 p-3 rounded-lg border-b border-white/5 last:border-0 relative overflow-hidden ${M.status==="terminated"?"opacity-75 grayscale-[0.5]":""}`,children:[M.status==="terminated"&&o.jsx("div",{className:"absolute right-0 top-0 bottom-0 w-1 bg-red-500"}),o.jsxs("div",{children:[o.jsxs("p",{className:"font-bold text-sm flex items-center gap-2",children:[M.name,M.status==="terminated"&&o.jsx("span",{className:"text-[9px] bg-red-500/20 text-red-200 px-1.5 py-0.5 rounded",children:""})]}),o.jsxs("p",{className:"text-xs text-white/50",children:[M.role," | : ",M.salary||0]}),M.status==="terminated"&&M.terminationDate&&o.jsxs("p",{className:"text-[10px] text-red-300 mt-0.5",children:[" : ",M.terminationDate]})]}),o.jsx("div",{className:"text-left flex flex-col items-end gap-1",children:o.jsxs("div",{className:"flex gap-2 mb-1",children:[o.jsx("button",{onClick:()=>C(M),className:"text-yellow-400 hover:text-yellow-300 p-1 bg-yellow-500/10 rounded",children:o.jsx(cl,{className:"w-4 h-4"})}),o.jsx("button",{onClick:()=>a(M.id),className:"text-red-400 hover:text-red-300 p-1 bg-red-500/10 rounded",children:o.jsx(ul,{className:"w-4 h-4"})})]})})]},M.id))})]})},DD=()=>{const{logs:r}=lt();return o.jsxs("div",{className:"space-y-4 animate-fade-in",children:[o.jsx("div",{className:"glass-card p-3 bg-white/5 border border-white/10 mb-2",children:o.jsxs("div",{className:"flex items-center gap-2 text-white/70",children:[o.jsx(tE,{className:"w-5 h-5 text-cyan-400"}),o.jsx("p",{className:"text-xs",children:"     "})]})}),o.jsx("div",{className:"space-y-2 max-h-[60vh] overflow-y-auto custom-scrollbar",children:r.length===0?o.jsx("div",{className:"text-center py-8 text-white/40",children:o.jsx("p",{children:"   "})}):r.map(e=>o.jsxs("div",{className:"glass-inner p-3 rounded-lg border border-white/5 hover:border-white/10 transition-colors",children:[o.jsxs("div",{className:"flex justify-between items-start mb-1",children:[o.jsx("span",{className:`text-[10px] px-2 py-0.5 rounded font-bold ${e.action===""?"bg-red-500/20 text-red-300":e.action===""?"bg-yellow-500/20 text-yellow-300":e.action===""?"bg-pink-500/20 text-pink-300":"bg-blue-500/20 text-blue-300"}`,children:e.action}),o.jsx("span",{className:"text-[10px] text-white/40 font-mono",dir:"ltr",children:e.timestamp})]}),o.jsx("p",{className:"text-xs text-white/90 font-medium mb-1",children:e.details}),o.jsxs("div",{className:"flex justify-between items-center text-[10px] text-white/50 border-t border-white/5 pt-1 mt-1",children:[o.jsxs("span",{className:"flex items-center gap-1",children:[o.jsx(nx,{className:"w-3 h-3"})," ",e.user]}),o.jsx("span",{className:"font-mono",children:new Date(e.fullDate).toLocaleDateString()})]})]},e.id))})]})};function RD(){for(var r=arguments.length,e=new Array(r),t=0;t<r;t++)e[t]=arguments[t];return A.useMemo(()=>a=>{e.forEach(l=>l(a))},e)}const Yf=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function Po(r){const e=Object.prototype.toString.call(r);return e==="[object Window]"||e==="[object global]"}function sx(r){return"nodeType"in r}function Xn(r){var e,t;return r?Po(r)?r:sx(r)&&(e=(t=r.ownerDocument)==null?void 0:t.defaultView)!=null?e:window:window}function rx(r){const{Document:e}=Xn(r);return r instanceof e}function Bu(r){return Po(r)?!1:r instanceof Xn(r).HTMLElement}function lE(r){return r instanceof Xn(r).SVGElement}function Lo(r){return r?Po(r)?r.document:sx(r)?rx(r)?r:Bu(r)||lE(r)?r.ownerDocument:document:document:document}const Us=Yf?A.useLayoutEffect:A.useEffect;function Xf(r){const e=A.useRef(r);return Us(()=>{e.current=r}),A.useCallback(function(){for(var t=arguments.length,a=new Array(t),l=0;l<t;l++)a[l]=arguments[l];return e.current==null?void 0:e.current(...a)},[])}function kD(){const r=A.useRef(null),e=A.useCallback((a,l)=>{r.current=setInterval(a,l)},[]),t=A.useCallback(()=>{r.current!==null&&(clearInterval(r.current),r.current=null)},[]);return[e,t]}function Tu(r,e){e===void 0&&(e=[r]);const t=A.useRef(r);return Us(()=>{t.current!==r&&(t.current=r)},e),t}function qu(r,e){const t=A.useRef();return A.useMemo(()=>{const a=r(t.current);return t.current=a,a},[...e])}function mf(r){const e=Xf(r),t=A.useRef(null),a=A.useCallback(l=>{l!==t.current&&(e==null||e(l,t.current)),t.current=l},[]);return[t,a]}function pf(r){const e=A.useRef();return A.useEffect(()=>{e.current=r},[r]),e.current}let fg={};function Fu(r,e){return A.useMemo(()=>{if(e)return e;const t=fg[r]==null?0:fg[r]+1;return fg[r]=t,r+"-"+t},[r,e])}function oE(r){return function(e){for(var t=arguments.length,a=new Array(t>1?t-1:0),l=1;l<t;l++)a[l-1]=arguments[l];return a.reduce((c,d)=>{const m=Object.entries(d);for(const[p,x]of m){const v=c[p];v!=null&&(c[p]=v+r*x)}return c},{...e})}}const xo=oE(1),gf=oE(-1);function MD(r){return"clientX"in r&&"clientY"in r}function Zf(r){if(!r)return!1;const{KeyboardEvent:e}=Xn(r.target);return e&&r instanceof e}function VD(r){if(!r)return!1;const{TouchEvent:e}=Xn(r.target);return e&&r instanceof e}function xf(r){if(VD(r)){if(r.touches&&r.touches.length){const{clientX:e,clientY:t}=r.touches[0];return{x:e,y:t}}else if(r.changedTouches&&r.changedTouches.length){const{clientX:e,clientY:t}=r.changedTouches[0];return{x:e,y:t}}}return MD(r)?{x:r.clientX,y:r.clientY}:null}const ai=Object.freeze({Translate:{toString(r){if(!r)return;const{x:e,y:t}=r;return"translate3d("+(e?Math.round(e):0)+"px, "+(t?Math.round(t):0)+"px, 0)"}},Scale:{toString(r){if(!r)return;const{scaleX:e,scaleY:t}=r;return"scaleX("+e+") scaleY("+t+")"}},Transform:{toString(r){if(r)return[ai.Translate.toString(r),ai.Scale.toString(r)].join(" ")}},Transition:{toString(r){let{property:e,duration:t,easing:a}=r;return e+" "+t+"ms "+a}}}),Mw="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function OD(r){return r.matches(Mw)?r:r.querySelector(Mw)}const PD={display:"none"};function LD(r){let{id:e,value:t}=r;return ut.createElement("div",{id:e,style:PD},t)}function zD(r){let{id:e,announcement:t,ariaLiveType:a="assertive"}=r;const l={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return ut.createElement("div",{id:e,style:l,role:"status","aria-live":a,"aria-atomic":!0},t)}function UD(){const[r,e]=A.useState("");return{announce:A.useCallback(a=>{a!=null&&e(a)},[]),announcement:r}}const cE=A.createContext(null);function BD(r){const e=A.useContext(cE);A.useEffect(()=>{if(!e)throw new Error("useDndMonitor must be used within a children of <DndContext>");return e(r)},[r,e])}function qD(){const[r]=A.useState(()=>new Set),e=A.useCallback(a=>(r.add(a),()=>r.delete(a)),[r]);return[A.useCallback(a=>{let{type:l,event:c}=a;r.forEach(d=>{var m;return(m=d[l])==null?void 0:m.call(d,c)})},[r]),e]}const FD={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},HD={onDragStart(r){let{active:e}=r;return"Picked up draggable item "+e.id+"."},onDragOver(r){let{active:e,over:t}=r;return t?"Draggable item "+e.id+" was moved over droppable area "+t.id+".":"Draggable item "+e.id+" is no longer over a droppable area."},onDragEnd(r){let{active:e,over:t}=r;return t?"Draggable item "+e.id+" was dropped over droppable area "+t.id:"Draggable item "+e.id+" was dropped."},onDragCancel(r){let{active:e}=r;return"Dragging was cancelled. Draggable item "+e.id+" was dropped."}};function $D(r){let{announcements:e=HD,container:t,hiddenTextDescribedById:a,screenReaderInstructions:l=FD}=r;const{announce:c,announcement:d}=UD(),m=Fu("DndLiveRegion"),[p,x]=A.useState(!1);if(A.useEffect(()=>{x(!0)},[]),BD(A.useMemo(()=>({onDragStart(b){let{active:N}=b;c(e.onDragStart({active:N}))},onDragMove(b){let{active:N,over:S}=b;e.onDragMove&&c(e.onDragMove({active:N,over:S}))},onDragOver(b){let{active:N,over:S}=b;c(e.onDragOver({active:N,over:S}))},onDragEnd(b){let{active:N,over:S}=b;c(e.onDragEnd({active:N,over:S}))},onDragCancel(b){let{active:N,over:S}=b;c(e.onDragCancel({active:N,over:S}))}}),[c,e])),!p)return null;const v=ut.createElement(ut.Fragment,null,ut.createElement(LD,{id:a,value:l.draggable}),ut.createElement(zD,{id:m,announcement:d}));return t?oo.createPortal(v,t):v}var gn;(function(r){r.DragStart="dragStart",r.DragMove="dragMove",r.DragEnd="dragEnd",r.DragCancel="dragCancel",r.DragOver="dragOver",r.RegisterDroppable="registerDroppable",r.SetDroppableDisabled="setDroppableDisabled",r.UnregisterDroppable="unregisterDroppable"})(gn||(gn={}));function yf(){}function Vw(r,e){return A.useMemo(()=>({sensor:r,options:e??{}}),[r,e])}function GD(){for(var r=arguments.length,e=new Array(r),t=0;t<r;t++)e[t]=arguments[t];return A.useMemo(()=>[...e].filter(a=>a!=null),[...e])}const Ws=Object.freeze({x:0,y:0});function QD(r,e){return Math.sqrt(Math.pow(r.x-e.x,2)+Math.pow(r.y-e.y,2))}function KD(r,e){const t=xf(r);if(!t)return"0 0";const a={x:(t.x-e.left)/e.width*100,y:(t.y-e.top)/e.height*100};return a.x+"% "+a.y+"%"}function YD(r,e){let{data:{value:t}}=r,{data:{value:a}}=e;return t-a}function XD(r,e){let{data:{value:t}}=r,{data:{value:a}}=e;return a-t}function ZD(r,e){if(!r||r.length===0)return null;const[t]=r;return t[e]}function Ow(r,e,t){return e===void 0&&(e=r.left),t===void 0&&(t=r.top),{x:e+r.width*.5,y:t+r.height*.5}}const JD=r=>{let{collisionRect:e,droppableRects:t,droppableContainers:a}=r;const l=Ow(e,e.left,e.top),c=[];for(const d of a){const{id:m}=d,p=t.get(m);if(p){const x=QD(Ow(p),l);c.push({id:m,data:{droppableContainer:d,value:x}})}}return c.sort(YD)};function WD(r,e){const t=Math.max(e.top,r.top),a=Math.max(e.left,r.left),l=Math.min(e.left+e.width,r.left+r.width),c=Math.min(e.top+e.height,r.top+r.height),d=l-a,m=c-t;if(a<l&&t<c){const p=e.width*e.height,x=r.width*r.height,v=d*m,b=v/(p+x-v);return Number(b.toFixed(4))}return 0}const eR=r=>{let{collisionRect:e,droppableRects:t,droppableContainers:a}=r;const l=[];for(const c of a){const{id:d}=c,m=t.get(d);if(m){const p=WD(m,e);p>0&&l.push({id:d,data:{droppableContainer:c,value:p}})}}return l.sort(XD)};function tR(r,e,t){return{...r,scaleX:e&&t?e.width/t.width:1,scaleY:e&&t?e.height/t.height:1}}function uE(r,e){return r&&e?{x:r.left-e.left,y:r.top-e.top}:Ws}function nR(r){return function(t){for(var a=arguments.length,l=new Array(a>1?a-1:0),c=1;c<a;c++)l[c-1]=arguments[c];return l.reduce((d,m)=>({...d,top:d.top+r*m.y,bottom:d.bottom+r*m.y,left:d.left+r*m.x,right:d.right+r*m.x}),{...t})}}const sR=nR(1);function dE(r){if(r.startsWith("matrix3d(")){const e=r.slice(9,-1).split(/, /);return{x:+e[12],y:+e[13],scaleX:+e[0],scaleY:+e[5]}}else if(r.startsWith("matrix(")){const e=r.slice(7,-1).split(/, /);return{x:+e[4],y:+e[5],scaleX:+e[0],scaleY:+e[3]}}return null}function rR(r,e,t){const a=dE(e);if(!a)return r;const{scaleX:l,scaleY:c,x:d,y:m}=a,p=r.left-d-(1-l)*parseFloat(t),x=r.top-m-(1-c)*parseFloat(t.slice(t.indexOf(" ")+1)),v=l?r.width/l:r.width,b=c?r.height/c:r.height;return{width:v,height:b,top:x,right:p+v,bottom:x+b,left:p}}const aR={ignoreTransform:!1};function zo(r,e){e===void 0&&(e=aR);let t=r.getBoundingClientRect();if(e.ignoreTransform){const{transform:x,transformOrigin:v}=Xn(r).getComputedStyle(r);x&&(t=rR(t,x,v))}const{top:a,left:l,width:c,height:d,bottom:m,right:p}=t;return{top:a,left:l,width:c,height:d,bottom:m,right:p}}function Pw(r){return zo(r,{ignoreTransform:!0})}function iR(r){const e=r.innerWidth,t=r.innerHeight;return{top:0,left:0,right:e,bottom:t,width:e,height:t}}function lR(r,e){return e===void 0&&(e=Xn(r).getComputedStyle(r)),e.position==="fixed"}function oR(r,e){e===void 0&&(e=Xn(r).getComputedStyle(r));const t=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(l=>{const c=e[l];return typeof c=="string"?t.test(c):!1})}function ax(r,e){const t=[];function a(l){if(e!=null&&t.length>=e||!l)return t;if(rx(l)&&l.scrollingElement!=null&&!t.includes(l.scrollingElement))return t.push(l.scrollingElement),t;if(!Bu(l)||lE(l)||t.includes(l))return t;const c=Xn(r).getComputedStyle(l);return l!==r&&oR(l,c)&&t.push(l),lR(l,c)?t:a(l.parentNode)}return r?a(r):t}function hE(r){const[e]=ax(r,1);return e??null}function mg(r){return!Yf||!r?null:Po(r)?r:sx(r)?rx(r)||r===Lo(r).scrollingElement?window:Bu(r)?r:null:null}function fE(r){return Po(r)?r.scrollX:r.scrollLeft}function mE(r){return Po(r)?r.scrollY:r.scrollTop}function e0(r){return{x:fE(r),y:mE(r)}}var En;(function(r){r[r.Forward=1]="Forward",r[r.Backward=-1]="Backward"})(En||(En={}));function pE(r){return!Yf||!r?!1:r===document.scrollingElement}function gE(r){const e={x:0,y:0},t=pE(r)?{height:window.innerHeight,width:window.innerWidth}:{height:r.clientHeight,width:r.clientWidth},a={x:r.scrollWidth-t.width,y:r.scrollHeight-t.height},l=r.scrollTop<=e.y,c=r.scrollLeft<=e.x,d=r.scrollTop>=a.y,m=r.scrollLeft>=a.x;return{isTop:l,isLeft:c,isBottom:d,isRight:m,maxScroll:a,minScroll:e}}const cR={x:.2,y:.2};function uR(r,e,t,a,l){let{top:c,left:d,right:m,bottom:p}=t;a===void 0&&(a=10),l===void 0&&(l=cR);const{isTop:x,isBottom:v,isLeft:b,isRight:N}=gE(r),S={x:0,y:0},z={x:0,y:0},O={height:e.height*l.y,width:e.width*l.x};return!x&&c<=e.top+O.height?(S.y=En.Backward,z.y=a*Math.abs((e.top+O.height-c)/O.height)):!v&&p>=e.bottom-O.height&&(S.y=En.Forward,z.y=a*Math.abs((e.bottom-O.height-p)/O.height)),!N&&m>=e.right-O.width?(S.x=En.Forward,z.x=a*Math.abs((e.right-O.width-m)/O.width)):!b&&d<=e.left+O.width&&(S.x=En.Backward,z.x=a*Math.abs((e.left+O.width-d)/O.width)),{direction:S,speed:z}}function dR(r){if(r===document.scrollingElement){const{innerWidth:c,innerHeight:d}=window;return{top:0,left:0,right:c,bottom:d,width:c,height:d}}const{top:e,left:t,right:a,bottom:l}=r.getBoundingClientRect();return{top:e,left:t,right:a,bottom:l,width:r.clientWidth,height:r.clientHeight}}function xE(r){return r.reduce((e,t)=>xo(e,e0(t)),Ws)}function hR(r){return r.reduce((e,t)=>e+fE(t),0)}function fR(r){return r.reduce((e,t)=>e+mE(t),0)}function yE(r,e){if(e===void 0&&(e=zo),!r)return;const{top:t,left:a,bottom:l,right:c}=e(r);hE(r)&&(l<=0||c<=0||t>=window.innerHeight||a>=window.innerWidth)&&r.scrollIntoView({block:"center",inline:"center"})}const mR=[["x",["left","right"],hR],["y",["top","bottom"],fR]];class ix{constructor(e,t){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const a=ax(t),l=xE(a);this.rect={...e},this.width=e.width,this.height=e.height;for(const[c,d,m]of mR)for(const p of d)Object.defineProperty(this,p,{get:()=>{const x=m(a),v=l[c]-x;return this.rect[p]+v},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class ru{constructor(e){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(t=>{var a;return(a=this.target)==null?void 0:a.removeEventListener(...t)})},this.target=e}add(e,t,a){var l;(l=this.target)==null||l.addEventListener(e,t,a),this.listeners.push([e,t,a])}}function pR(r){const{EventTarget:e}=Xn(r);return r instanceof e?r:Lo(r)}function pg(r,e){const t=Math.abs(r.x),a=Math.abs(r.y);return typeof e=="number"?Math.sqrt(t**2+a**2)>e:"x"in e&&"y"in e?t>e.x&&a>e.y:"x"in e?t>e.x:"y"in e?a>e.y:!1}var Ms;(function(r){r.Click="click",r.DragStart="dragstart",r.Keydown="keydown",r.ContextMenu="contextmenu",r.Resize="resize",r.SelectionChange="selectionchange",r.VisibilityChange="visibilitychange"})(Ms||(Ms={}));function Lw(r){r.preventDefault()}function gR(r){r.stopPropagation()}var ft;(function(r){r.Space="Space",r.Down="ArrowDown",r.Right="ArrowRight",r.Left="ArrowLeft",r.Up="ArrowUp",r.Esc="Escape",r.Enter="Enter"})(ft||(ft={}));const bE={start:[ft.Space,ft.Enter],cancel:[ft.Esc],end:[ft.Space,ft.Enter]},xR=(r,e)=>{let{currentCoordinates:t}=e;switch(r.code){case ft.Right:return{...t,x:t.x+25};case ft.Left:return{...t,x:t.x-25};case ft.Down:return{...t,y:t.y+25};case ft.Up:return{...t,y:t.y-25}}};class vE{constructor(e){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=e;const{event:{target:t}}=e;this.props=e,this.listeners=new ru(Lo(t)),this.windowListeners=new ru(Xn(t)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(Ms.Resize,this.handleCancel),this.windowListeners.add(Ms.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(Ms.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:e,onStart:t}=this.props,a=e.node.current;a&&yE(a),t(Ws)}handleKeyDown(e){if(Zf(e)){const{active:t,context:a,options:l}=this.props,{keyboardCodes:c=bE,coordinateGetter:d=xR,scrollBehavior:m="smooth"}=l,{code:p}=e;if(c.end.includes(p)){this.handleEnd(e);return}if(c.cancel.includes(p)){this.handleCancel(e);return}const{collisionRect:x}=a.current,v=x?{x:x.left,y:x.top}:Ws;this.referenceCoordinates||(this.referenceCoordinates=v);const b=d(e,{active:t,context:a.current,currentCoordinates:v});if(b){const N=gf(b,v),S={x:0,y:0},{scrollableAncestors:z}=a.current;for(const O of z){const P=e.code,{isTop:C,isRight:L,isLeft:M,isBottom:F,maxScroll:Z,minScroll:te}=gE(O),E=dR(O),T={x:Math.min(P===ft.Right?E.right-E.width/2:E.right,Math.max(P===ft.Right?E.left:E.left+E.width/2,b.x)),y:Math.min(P===ft.Down?E.bottom-E.height/2:E.bottom,Math.max(P===ft.Down?E.top:E.top+E.height/2,b.y))},k=P===ft.Right&&!L||P===ft.Left&&!M,R=P===ft.Down&&!F||P===ft.Up&&!C;if(k&&T.x!==b.x){const D=O.scrollLeft+N.x,q=P===ft.Right&&D<=Z.x||P===ft.Left&&D>=te.x;if(q&&!N.y){O.scrollTo({left:D,behavior:m});return}q?S.x=O.scrollLeft-D:S.x=P===ft.Right?O.scrollLeft-Z.x:O.scrollLeft-te.x,S.x&&O.scrollBy({left:-S.x,behavior:m});break}else if(R&&T.y!==b.y){const D=O.scrollTop+N.y,q=P===ft.Down&&D<=Z.y||P===ft.Up&&D>=te.y;if(q&&!N.x){O.scrollTo({top:D,behavior:m});return}q?S.y=O.scrollTop-D:S.y=P===ft.Down?O.scrollTop-Z.y:O.scrollTop-te.y,S.y&&O.scrollBy({top:-S.y,behavior:m});break}}this.handleMove(e,xo(gf(b,this.referenceCoordinates),S))}}}handleMove(e,t){const{onMove:a}=this.props;e.preventDefault(),a(t)}handleEnd(e){const{onEnd:t}=this.props;e.preventDefault(),this.detach(),t()}handleCancel(e){const{onCancel:t}=this.props;e.preventDefault(),this.detach(),t()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}vE.activators=[{eventName:"onKeyDown",handler:(r,e,t)=>{let{keyboardCodes:a=bE,onActivation:l}=e,{active:c}=t;const{code:d}=r.nativeEvent;if(a.start.includes(d)){const m=c.activatorNode.current;return m&&r.target!==m?!1:(r.preventDefault(),l==null||l({event:r.nativeEvent}),!0)}return!1}}];function zw(r){return!!(r&&"distance"in r)}function Uw(r){return!!(r&&"delay"in r)}class lx{constructor(e,t,a){var l;a===void 0&&(a=pR(e.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=e,this.events=t;const{event:c}=e,{target:d}=c;this.props=e,this.events=t,this.document=Lo(d),this.documentListeners=new ru(this.document),this.listeners=new ru(a),this.windowListeners=new ru(Xn(d)),this.initialCoordinates=(l=xf(c))!=null?l:Ws,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:e,props:{options:{activationConstraint:t,bypassActivationConstraint:a}}}=this;if(this.listeners.add(e.move.name,this.handleMove,{passive:!1}),this.listeners.add(e.end.name,this.handleEnd),this.windowListeners.add(Ms.Resize,this.handleCancel),this.windowListeners.add(Ms.DragStart,Lw),this.windowListeners.add(Ms.VisibilityChange,this.handleCancel),this.windowListeners.add(Ms.ContextMenu,Lw),this.documentListeners.add(Ms.Keydown,this.handleKeydown),t){if(a!=null&&a({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(Uw(t)){this.timeoutId=setTimeout(this.handleStart,t.delay);return}if(zw(t))return}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handleStart(){const{initialCoordinates:e}=this,{onStart:t}=this.props;e&&(this.activated=!0,this.documentListeners.add(Ms.Click,gR,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(Ms.SelectionChange,this.removeTextSelection),t(e))}handleMove(e){var t;const{activated:a,initialCoordinates:l,props:c}=this,{onMove:d,options:{activationConstraint:m}}=c;if(!l)return;const p=(t=xf(e))!=null?t:Ws,x=gf(l,p);if(!a&&m){if(zw(m)){if(m.tolerance!=null&&pg(x,m.tolerance))return this.handleCancel();if(pg(x,m.distance))return this.handleStart()}return Uw(m)&&pg(x,m.tolerance)?this.handleCancel():void 0}e.cancelable&&e.preventDefault(),d(p)}handleEnd(){const{onEnd:e}=this.props;this.detach(),e()}handleCancel(){const{onCancel:e}=this.props;this.detach(),e()}handleKeydown(e){e.code===ft.Esc&&this.handleCancel()}removeTextSelection(){var e;(e=this.document.getSelection())==null||e.removeAllRanges()}}const yR={move:{name:"pointermove"},end:{name:"pointerup"}};class wE extends lx{constructor(e){const{event:t}=e,a=Lo(t.target);super(e,yR,a)}}wE.activators=[{eventName:"onPointerDown",handler:(r,e)=>{let{nativeEvent:t}=r,{onActivation:a}=e;return!t.isPrimary||t.button!==0?!1:(a==null||a({event:t}),!0)}}];const bR={move:{name:"mousemove"},end:{name:"mouseup"}};var t0;(function(r){r[r.RightClick=2]="RightClick"})(t0||(t0={}));class _E extends lx{constructor(e){super(e,bR,Lo(e.event.target))}}_E.activators=[{eventName:"onMouseDown",handler:(r,e)=>{let{nativeEvent:t}=r,{onActivation:a}=e;return t.button===t0.RightClick?!1:(a==null||a({event:t}),!0)}}];const gg={move:{name:"touchmove"},end:{name:"touchend"}};class NE extends lx{constructor(e){super(e,gg)}static setup(){return window.addEventListener(gg.move.name,e,{capture:!1,passive:!1}),function(){window.removeEventListener(gg.move.name,e)};function e(){}}}NE.activators=[{eventName:"onTouchStart",handler:(r,e)=>{let{nativeEvent:t}=r,{onActivation:a}=e;const{touches:l}=t;return l.length>1?!1:(a==null||a({event:t}),!0)}}];var au;(function(r){r[r.Pointer=0]="Pointer",r[r.DraggableRect=1]="DraggableRect"})(au||(au={}));var bf;(function(r){r[r.TreeOrder=0]="TreeOrder",r[r.ReversedTreeOrder=1]="ReversedTreeOrder"})(bf||(bf={}));function vR(r){let{acceleration:e,activator:t=au.Pointer,canScroll:a,draggingRect:l,enabled:c,interval:d=5,order:m=bf.TreeOrder,pointerCoordinates:p,scrollableAncestors:x,scrollableAncestorRects:v,delta:b,threshold:N}=r;const S=_R({delta:b,disabled:!c}),[z,O]=kD(),P=A.useRef({x:0,y:0}),C=A.useRef({x:0,y:0}),L=A.useMemo(()=>{switch(t){case au.Pointer:return p?{top:p.y,bottom:p.y,left:p.x,right:p.x}:null;case au.DraggableRect:return l}},[t,l,p]),M=A.useRef(null),F=A.useCallback(()=>{const te=M.current;if(!te)return;const E=P.current.x*C.current.x,T=P.current.y*C.current.y;te.scrollBy(E,T)},[]),Z=A.useMemo(()=>m===bf.TreeOrder?[...x].reverse():x,[m,x]);A.useEffect(()=>{if(!c||!x.length||!L){O();return}for(const te of Z){if((a==null?void 0:a(te))===!1)continue;const E=x.indexOf(te),T=v[E];if(!T)continue;const{direction:k,speed:R}=uR(te,T,L,e,N);for(const D of["x","y"])S[D][k[D]]||(R[D]=0,k[D]=0);if(R.x>0||R.y>0){O(),M.current=te,z(F,d),P.current=R,C.current=k;return}}P.current={x:0,y:0},C.current={x:0,y:0},O()},[e,F,a,O,c,d,JSON.stringify(L),JSON.stringify(S),z,x,Z,v,JSON.stringify(N)])}const wR={x:{[En.Backward]:!1,[En.Forward]:!1},y:{[En.Backward]:!1,[En.Forward]:!1}};function _R(r){let{delta:e,disabled:t}=r;const a=pf(e);return qu(l=>{if(t||!a||!l)return wR;const c={x:Math.sign(e.x-a.x),y:Math.sign(e.y-a.y)};return{x:{[En.Backward]:l.x[En.Backward]||c.x===-1,[En.Forward]:l.x[En.Forward]||c.x===1},y:{[En.Backward]:l.y[En.Backward]||c.y===-1,[En.Forward]:l.y[En.Forward]||c.y===1}}},[t,e,a])}function NR(r,e){const t=e!==null?r.get(e):void 0,a=t?t.node.current:null;return qu(l=>{var c;return e===null?null:(c=a??l)!=null?c:null},[a,e])}function ER(r,e){return A.useMemo(()=>r.reduce((t,a)=>{const{sensor:l}=a,c=l.activators.map(d=>({eventName:d.eventName,handler:e(d.handler,a)}));return[...t,...c]},[]),[r,e])}var ju;(function(r){r[r.Always=0]="Always",r[r.BeforeDragging=1]="BeforeDragging",r[r.WhileDragging=2]="WhileDragging"})(ju||(ju={}));var n0;(function(r){r.Optimized="optimized"})(n0||(n0={}));const Bw=new Map;function SR(r,e){let{dragging:t,dependencies:a,config:l}=e;const[c,d]=A.useState(null),{frequency:m,measure:p,strategy:x}=l,v=A.useRef(r),b=P(),N=Tu(b),S=A.useCallback(function(C){C===void 0&&(C=[]),!N.current&&d(L=>L===null?C:L.concat(C.filter(M=>!L.includes(M))))},[N]),z=A.useRef(null),O=qu(C=>{if(b&&!t)return Bw;if(!C||C===Bw||v.current!==r||c!=null){const L=new Map;for(let M of r){if(!M)continue;if(c&&c.length>0&&!c.includes(M.id)&&M.rect.current){L.set(M.id,M.rect.current);continue}const F=M.node.current,Z=F?new ix(p(F),F):null;M.rect.current=Z,Z&&L.set(M.id,Z)}return L}return C},[r,c,t,b,p]);return A.useEffect(()=>{v.current=r},[r]),A.useEffect(()=>{b||S()},[t,b]),A.useEffect(()=>{c&&c.length>0&&d(null)},[JSON.stringify(c)]),A.useEffect(()=>{b||typeof m!="number"||z.current!==null||(z.current=setTimeout(()=>{S(),z.current=null},m))},[m,b,S,...a]),{droppableRects:O,measureDroppableContainers:S,measuringScheduled:c!=null};function P(){switch(x){case ju.Always:return!1;case ju.BeforeDragging:return t;default:return!t}}}function ox(r,e){return qu(t=>r?t||(typeof e=="function"?e(r):r):null,[e,r])}function TR(r,e){return ox(r,e)}function jR(r){let{callback:e,disabled:t}=r;const a=Xf(e),l=A.useMemo(()=>{if(t||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:c}=window;return new c(a)},[a,t]);return A.useEffect(()=>()=>l==null?void 0:l.disconnect(),[l]),l}function Jf(r){let{callback:e,disabled:t}=r;const a=Xf(e),l=A.useMemo(()=>{if(t||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:c}=window;return new c(a)},[t]);return A.useEffect(()=>()=>l==null?void 0:l.disconnect(),[l]),l}function AR(r){return new ix(zo(r),r)}function qw(r,e,t){e===void 0&&(e=AR);const[a,l]=A.useReducer(m,null),c=jR({callback(p){if(r)for(const x of p){const{type:v,target:b}=x;if(v==="childList"&&b instanceof HTMLElement&&b.contains(r)){l();break}}}}),d=Jf({callback:l});return Us(()=>{l(),r?(d==null||d.observe(r),c==null||c.observe(document.body,{childList:!0,subtree:!0})):(d==null||d.disconnect(),c==null||c.disconnect())},[r]),a;function m(p){if(!r)return null;if(r.isConnected===!1){var x;return(x=p??t)!=null?x:null}const v=e(r);return JSON.stringify(p)===JSON.stringify(v)?p:v}}function CR(r){const e=ox(r);return uE(r,e)}const Fw=[];function IR(r){const e=A.useRef(r),t=qu(a=>r?a&&a!==Fw&&r&&e.current&&r.parentNode===e.current.parentNode?a:ax(r):Fw,[r]);return A.useEffect(()=>{e.current=r},[r]),t}function DR(r){const[e,t]=A.useState(null),a=A.useRef(r),l=A.useCallback(c=>{const d=mg(c.target);d&&t(m=>m?(m.set(d,e0(d)),new Map(m)):null)},[]);return A.useEffect(()=>{const c=a.current;if(r!==c){d(c);const m=r.map(p=>{const x=mg(p);return x?(x.addEventListener("scroll",l,{passive:!0}),[x,e0(x)]):null}).filter(p=>p!=null);t(m.length?new Map(m):null),a.current=r}return()=>{d(r),d(c)};function d(m){m.forEach(p=>{const x=mg(p);x==null||x.removeEventListener("scroll",l)})}},[l,r]),A.useMemo(()=>r.length?e?Array.from(e.values()).reduce((c,d)=>xo(c,d),Ws):xE(r):Ws,[r,e])}function Hw(r,e){e===void 0&&(e=[]);const t=A.useRef(null);return A.useEffect(()=>{t.current=null},e),A.useEffect(()=>{const a=r!==Ws;a&&!t.current&&(t.current=r),!a&&t.current&&(t.current=null)},[r]),t.current?gf(r,t.current):Ws}function RR(r){A.useEffect(()=>{if(!Yf)return;const e=r.map(t=>{let{sensor:a}=t;return a.setup==null?void 0:a.setup()});return()=>{for(const t of e)t==null||t()}},r.map(e=>{let{sensor:t}=e;return t}))}function kR(r,e){return A.useMemo(()=>r.reduce((t,a)=>{let{eventName:l,handler:c}=a;return t[l]=d=>{c(d,e)},t},{}),[r,e])}function EE(r){return A.useMemo(()=>r?iR(r):null,[r])}const xg=[];function MR(r,e){e===void 0&&(e=zo);const[t]=r,a=EE(t?Xn(t):null),[l,c]=A.useReducer(m,xg),d=Jf({callback:c});return r.length>0&&l===xg&&c(),Us(()=>{r.length?r.forEach(p=>d==null?void 0:d.observe(p)):(d==null||d.disconnect(),c())},[r]),l;function m(){return r.length?r.map(p=>pE(p)?a:new ix(e(p),p)):xg}}function SE(r){if(!r)return null;if(r.children.length>1)return r;const e=r.children[0];return Bu(e)?e:r}function VR(r){let{measure:e}=r;const[t,a]=A.useState(null),l=A.useCallback(x=>{for(const{target:v}of x)if(Bu(v)){a(b=>{const N=e(v);return b?{...b,width:N.width,height:N.height}:N});break}},[e]),c=Jf({callback:l}),d=A.useCallback(x=>{const v=SE(x);c==null||c.disconnect(),v&&(c==null||c.observe(v)),a(v?e(v):null)},[e,c]),[m,p]=mf(d);return A.useMemo(()=>({nodeRef:m,rect:t,setRef:p}),[t,m,p])}const OR=[{sensor:wE,options:{}},{sensor:vE,options:{}}],PR={current:{}},zh={draggable:{measure:Pw},droppable:{measure:Pw,strategy:ju.WhileDragging,frequency:n0.Optimized},dragOverlay:{measure:zo}};class iu extends Map{get(e){var t;return e!=null&&(t=super.get(e))!=null?t:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(e=>{let{disabled:t}=e;return!t})}getNodeFor(e){var t,a;return(t=(a=this.get(e))==null?void 0:a.node.current)!=null?t:void 0}}const LR={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new iu,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:yf},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:zh,measureDroppableContainers:yf,windowRect:null,measuringScheduled:!1},TE={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:yf,draggableNodes:new Map,over:null,measureDroppableContainers:yf},Hu=A.createContext(TE),jE=A.createContext(LR);function zR(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new iu}}}function UR(r,e){switch(e.type){case gn.DragStart:return{...r,draggable:{...r.draggable,initialCoordinates:e.initialCoordinates,active:e.active}};case gn.DragMove:return r.draggable.active?{...r,draggable:{...r.draggable,translate:{x:e.coordinates.x-r.draggable.initialCoordinates.x,y:e.coordinates.y-r.draggable.initialCoordinates.y}}}:r;case gn.DragEnd:case gn.DragCancel:return{...r,draggable:{...r.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case gn.RegisterDroppable:{const{element:t}=e,{id:a}=t,l=new iu(r.droppable.containers);return l.set(a,t),{...r,droppable:{...r.droppable,containers:l}}}case gn.SetDroppableDisabled:{const{id:t,key:a,disabled:l}=e,c=r.droppable.containers.get(t);if(!c||a!==c.key)return r;const d=new iu(r.droppable.containers);return d.set(t,{...c,disabled:l}),{...r,droppable:{...r.droppable,containers:d}}}case gn.UnregisterDroppable:{const{id:t,key:a}=e,l=r.droppable.containers.get(t);if(!l||a!==l.key)return r;const c=new iu(r.droppable.containers);return c.delete(t),{...r,droppable:{...r.droppable,containers:c}}}default:return r}}function BR(r){let{disabled:e}=r;const{active:t,activatorEvent:a,draggableNodes:l}=A.useContext(Hu),c=pf(a),d=pf(t==null?void 0:t.id);return A.useEffect(()=>{if(!e&&!a&&c&&d!=null){if(!Zf(c)||document.activeElement===c.target)return;const m=l.get(d);if(!m)return;const{activatorNode:p,node:x}=m;if(!p.current&&!x.current)return;requestAnimationFrame(()=>{for(const v of[p.current,x.current]){if(!v)continue;const b=OD(v);if(b){b.focus();break}}})}},[a,e,l,d,c]),null}function AE(r,e){let{transform:t,...a}=e;return r!=null&&r.length?r.reduce((l,c)=>c({transform:l,...a}),t):t}function qR(r){return A.useMemo(()=>({draggable:{...zh.draggable,...r==null?void 0:r.draggable},droppable:{...zh.droppable,...r==null?void 0:r.droppable},dragOverlay:{...zh.dragOverlay,...r==null?void 0:r.dragOverlay}}),[r==null?void 0:r.draggable,r==null?void 0:r.droppable,r==null?void 0:r.dragOverlay])}function FR(r){let{activeNode:e,measure:t,initialRect:a,config:l=!0}=r;const c=A.useRef(!1),{x:d,y:m}=typeof l=="boolean"?{x:l,y:l}:l;Us(()=>{if(!d&&!m||!e){c.current=!1;return}if(c.current||!a)return;const x=e==null?void 0:e.node.current;if(!x||x.isConnected===!1)return;const v=t(x),b=uE(v,a);if(d||(b.x=0),m||(b.y=0),c.current=!0,Math.abs(b.x)>0||Math.abs(b.y)>0){const N=hE(x);N&&N.scrollBy({top:b.y,left:b.x})}},[e,d,m,a,t])}const Wf=A.createContext({...Ws,scaleX:1,scaleY:1});var Ba;(function(r){r[r.Uninitialized=0]="Uninitialized",r[r.Initializing=1]="Initializing",r[r.Initialized=2]="Initialized"})(Ba||(Ba={}));const HR=A.memo(function(e){var t,a,l,c;let{id:d,accessibility:m,autoScroll:p=!0,children:x,sensors:v=OR,collisionDetection:b=eR,measuring:N,modifiers:S,...z}=e;const O=A.useReducer(UR,void 0,zR),[P,C]=O,[L,M]=qD(),[F,Z]=A.useState(Ba.Uninitialized),te=F===Ba.Initialized,{draggable:{active:E,nodes:T,translate:k},droppable:{containers:R}}=P,D=E?T.get(E):null,q=A.useRef({initial:null,translated:null}),V=A.useMemo(()=>{var Tt;return E!=null?{id:E,data:(Tt=D==null?void 0:D.data)!=null?Tt:PR,rect:q}:null},[E,D]),de=A.useRef(null),[xe,K]=A.useState(null),[G,pe]=A.useState(null),Ee=Tu(z,Object.values(z)),Te=Fu("DndDescribedBy",d),U=A.useMemo(()=>R.getEnabled(),[R]),$=qR(N),{droppableRects:ue,measureDroppableContainers:fe,measuringScheduled:Ne}=SR(U,{dragging:te,dependencies:[k.x,k.y],config:$.droppable}),re=NR(T,E),Ie=A.useMemo(()=>G?xf(G):null,[G]),Oe=ws(),ye=TR(re,$.draggable.measure);FR({activeNode:E?T.get(E):null,config:Oe.layoutShiftCompensation,initialRect:ye,measure:$.draggable.measure});const De=qw(re,$.draggable.measure,ye),Dt=qw(re?re.parentElement:null),Rt=A.useRef({activatorEvent:null,active:null,activeNode:re,collisionRect:null,collisions:null,droppableRects:ue,draggableNodes:T,draggingNode:null,draggingNodeRect:null,droppableContainers:R,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),Ut=R.getNodeFor((t=Rt.current.over)==null?void 0:t.id),St=VR({measure:$.dragOverlay.measure}),cn=(a=St.nodeRef.current)!=null?a:re,yn=te?(l=St.rect)!=null?l:De:null,be=!!(St.nodeRef.current&&St.rect),ae=CR(be?null:De),he=EE(cn?Xn(cn):null),me=IR(te?Ut??re:null),je=MR(me),Fe=AE(S,{transform:{x:k.x-ae.x,y:k.y-ae.y,scaleX:1,scaleY:1},activatorEvent:G,active:V,activeNodeRect:De,containerNodeRect:Dt,draggingNodeRect:yn,over:Rt.current.over,overlayNodeRect:St.rect,scrollableAncestors:me,scrollableAncestorRects:je,windowRect:he}),st=Ie?xo(Ie,k):null,rt=DR(me),Qe=Hw(rt),Bt=Hw(rt,[De]),bn=xo(Fe,Qe),un=yn?sR(yn,Fe):null,Bs=V&&un?b({active:V,collisionRect:un,droppableRects:ue,droppableContainers:U,pointerCoordinates:st}):null,kt=ZD(Bs,"id"),[$e,vs]=A.useState(null),Un=be?Fe:xo(Fe,Bt),dn=tR(Un,(c=$e==null?void 0:$e.rect)!=null?c:null,De),Bn=A.useCallback((Tt,et)=>{let{sensor:Mt,options:hn}=et;if(de.current==null)return;const Vt=T.get(de.current);if(!Vt)return;const qn=Tt.nativeEvent,Fn=new Mt({active:de.current,activeNode:Vt,event:qn,options:hn,context:Rt,onStart(fn){const Cr=de.current;if(Cr==null)return;const ls=T.get(Cr);if(!ls)return;const{onDragStart:er}=Ee.current,tr={active:{id:Cr,data:ls.data,rect:q}};oo.unstable_batchedUpdates(()=>{er==null||er(tr),Z(Ba.Initializing),C({type:gn.DragStart,initialCoordinates:fn,active:Cr}),L({type:"onDragStart",event:tr})})},onMove(fn){C({type:gn.DragMove,coordinates:fn})},onEnd:Tn(gn.DragEnd),onCancel:Tn(gn.DragCancel)});oo.unstable_batchedUpdates(()=>{K(Fn),pe(Tt.nativeEvent)});function Tn(fn){return async function(){const{active:ls,collisions:er,over:tr,scrollAdjustedTranslate:nr}=Rt.current;let Hn=null;if(ls&&nr){const{cancelDrop:sr}=Ee.current;Hn={activatorEvent:qn,active:ls,collisions:er,delta:nr,over:tr},fn===gn.DragEnd&&typeof sr=="function"&&await Promise.resolve(sr(Hn))&&(fn=gn.DragCancel)}de.current=null,oo.unstable_batchedUpdates(()=>{C({type:fn}),Z(Ba.Uninitialized),vs(null),K(null),pe(null);const sr=fn===gn.DragEnd?"onDragEnd":"onDragCancel";if(Hn){const $n=Ee.current[sr];$n==null||$n(Hn),L({type:sr,event:Hn})}})}}},[T]),qt=A.useCallback((Tt,et)=>(Mt,hn)=>{const Vt=Mt.nativeEvent,qn=T.get(hn);if(de.current!==null||!qn||Vt.dndKit||Vt.defaultPrevented)return;const Fn={active:qn};Tt(Mt,et.options,Fn)===!0&&(Vt.dndKit={capturedBy:et.sensor},de.current=hn,Bn(Mt,et))},[T,Bn]),ci=ER(v,qt);RR(v),Us(()=>{De&&F===Ba.Initializing&&Z(Ba.Initialized)},[De,F]),A.useEffect(()=>{const{onDragMove:Tt}=Ee.current,{active:et,activatorEvent:Mt,collisions:hn,over:Vt}=Rt.current;if(!et||!Mt)return;const qn={active:et,activatorEvent:Mt,collisions:hn,delta:{x:bn.x,y:bn.y},over:Vt};oo.unstable_batchedUpdates(()=>{Tt==null||Tt(qn),L({type:"onDragMove",event:qn})})},[bn.x,bn.y]),A.useEffect(()=>{const{active:Tt,activatorEvent:et,collisions:Mt,droppableContainers:hn,scrollAdjustedTranslate:Vt}=Rt.current;if(!Tt||de.current==null||!et||!Vt)return;const{onDragOver:qn}=Ee.current,Fn=hn.get(kt),Tn=Fn&&Fn.rect.current?{id:Fn.id,rect:Fn.rect.current,data:Fn.data,disabled:Fn.disabled}:null,fn={active:Tt,activatorEvent:et,collisions:Mt,delta:{x:Vt.x,y:Vt.y},over:Tn};oo.unstable_batchedUpdates(()=>{vs(Tn),qn==null||qn(fn),L({type:"onDragOver",event:fn})})},[kt]),Us(()=>{Rt.current={activatorEvent:G,active:V,activeNode:re,collisionRect:un,collisions:Bs,droppableRects:ue,draggableNodes:T,draggingNode:cn,draggingNodeRect:yn,droppableContainers:R,over:$e,scrollableAncestors:me,scrollAdjustedTranslate:bn},q.current={initial:yn,translated:un}},[V,re,Bs,un,T,cn,yn,ue,R,$e,me,bn]),vR({...Oe,delta:k,draggingRect:un,pointerCoordinates:st,scrollableAncestors:me,scrollableAncestorRects:je});const ra=A.useMemo(()=>({active:V,activeNode:re,activeNodeRect:De,activatorEvent:G,collisions:Bs,containerNodeRect:Dt,dragOverlay:St,draggableNodes:T,droppableContainers:R,droppableRects:ue,over:$e,measureDroppableContainers:fe,scrollableAncestors:me,scrollableAncestorRects:je,measuringConfiguration:$,measuringScheduled:Ne,windowRect:he}),[V,re,De,G,Bs,Dt,St,T,R,ue,$e,fe,me,je,$,Ne,he]),ml=A.useMemo(()=>({activatorEvent:G,activators:ci,active:V,activeNodeRect:De,ariaDescribedById:{draggable:Te},dispatch:C,draggableNodes:T,over:$e,measureDroppableContainers:fe}),[G,ci,V,De,C,Te,T,$e,fe]);return ut.createElement(cE.Provider,{value:M},ut.createElement(Hu.Provider,{value:ml},ut.createElement(jE.Provider,{value:ra},ut.createElement(Wf.Provider,{value:dn},x)),ut.createElement(BR,{disabled:(m==null?void 0:m.restoreFocus)===!1})),ut.createElement($D,{...m,hiddenTextDescribedById:Te}));function ws(){const Tt=(xe==null?void 0:xe.autoScrollEnabled)===!1,et=typeof p=="object"?p.enabled===!1:p===!1,Mt=te&&!Tt&&!et;return typeof p=="object"?{...p,enabled:Mt}:{enabled:Mt}}}),$R=A.createContext(null),$w="button",GR="Droppable";function QR(r){let{id:e,data:t,disabled:a=!1,attributes:l}=r;const c=Fu(GR),{activators:d,activatorEvent:m,active:p,activeNodeRect:x,ariaDescribedById:v,draggableNodes:b,over:N}=A.useContext(Hu),{role:S=$w,roleDescription:z="draggable",tabIndex:O=0}=l??{},P=(p==null?void 0:p.id)===e,C=A.useContext(P?Wf:$R),[L,M]=mf(),[F,Z]=mf(),te=kR(d,e),E=Tu(t);Us(()=>(b.set(e,{id:e,key:c,node:L,activatorNode:F,data:E}),()=>{const k=b.get(e);k&&k.key===c&&b.delete(e)}),[b,e]);const T=A.useMemo(()=>({role:S,tabIndex:O,"aria-disabled":a,"aria-pressed":P&&S===$w?!0:void 0,"aria-roledescription":z,"aria-describedby":v.draggable}),[a,S,O,P,z,v.draggable]);return{active:p,activatorEvent:m,activeNodeRect:x,attributes:T,isDragging:P,listeners:a?void 0:te,node:L,over:N,setNodeRef:M,setActivatorNodeRef:Z,transform:C}}function CE(){return A.useContext(jE)}const KR="Droppable",YR={timeout:25};function XR(r){let{data:e,disabled:t=!1,id:a,resizeObserverConfig:l}=r;const c=Fu(KR),{active:d,dispatch:m,over:p,measureDroppableContainers:x}=A.useContext(Hu),v=A.useRef({disabled:t}),b=A.useRef(!1),N=A.useRef(null),S=A.useRef(null),{disabled:z,updateMeasurementsFor:O,timeout:P}={...YR,...l},C=Tu(O??a),L=A.useCallback(()=>{if(!b.current){b.current=!0;return}S.current!=null&&clearTimeout(S.current),S.current=setTimeout(()=>{x(Array.isArray(C.current)?C.current:[C.current]),S.current=null},P)},[P]),M=Jf({callback:L,disabled:z||!d}),F=A.useCallback((T,k)=>{M&&(k&&(M.unobserve(k),b.current=!1),T&&M.observe(T))},[M]),[Z,te]=mf(F),E=Tu(e);return A.useEffect(()=>{!M||!Z.current||(M.disconnect(),b.current=!1,M.observe(Z.current))},[Z,M]),Us(()=>(m({type:gn.RegisterDroppable,element:{id:a,key:c,disabled:t,node:Z,rect:N,data:E}}),()=>m({type:gn.UnregisterDroppable,key:c,id:a})),[a]),A.useEffect(()=>{t!==v.current.disabled&&(m({type:gn.SetDroppableDisabled,id:a,key:c,disabled:t}),v.current.disabled=t)},[a,c,t,m]),{active:d,rect:N,isOver:(p==null?void 0:p.id)===a,node:Z,over:p,setNodeRef:te}}function ZR(r){let{animation:e,children:t}=r;const[a,l]=A.useState(null),[c,d]=A.useState(null),m=pf(t);return!t&&!a&&m&&l(m),Us(()=>{if(!c)return;const p=a==null?void 0:a.key,x=a==null?void 0:a.props.id;if(p==null||x==null){l(null);return}Promise.resolve(e(x,c)).then(()=>{l(null)})},[e,a,c]),ut.createElement(ut.Fragment,null,t,a?A.cloneElement(a,{ref:d}):null)}const JR={x:0,y:0,scaleX:1,scaleY:1};function WR(r){let{children:e}=r;return ut.createElement(Hu.Provider,{value:TE},ut.createElement(Wf.Provider,{value:JR},e))}const e6={position:"fixed",touchAction:"none"},t6=r=>Zf(r)?"transform 250ms ease":void 0,n6=A.forwardRef((r,e)=>{let{as:t,activatorEvent:a,adjustScale:l,children:c,className:d,rect:m,style:p,transform:x,transition:v=t6}=r;if(!m)return null;const b=l?x:{...x,scaleX:1,scaleY:1},N={...e6,width:m.width,height:m.height,top:m.top,left:m.left,transform:ai.Transform.toString(b),transformOrigin:l&&a?KD(a,m):void 0,transition:typeof v=="function"?v(a):v,...p};return ut.createElement(t,{className:d,style:N,ref:e},c)}),IE=r=>e=>{let{active:t,dragOverlay:a}=e;const l={},{styles:c,className:d}=r;if(c!=null&&c.active)for(const[m,p]of Object.entries(c.active))p!==void 0&&(l[m]=t.node.style.getPropertyValue(m),t.node.style.setProperty(m,p));if(c!=null&&c.dragOverlay)for(const[m,p]of Object.entries(c.dragOverlay))p!==void 0&&a.node.style.setProperty(m,p);return d!=null&&d.active&&t.node.classList.add(d.active),d!=null&&d.dragOverlay&&a.node.classList.add(d.dragOverlay),function(){for(const[p,x]of Object.entries(l))t.node.style.setProperty(p,x);d!=null&&d.active&&t.node.classList.remove(d.active)}},s6=r=>{let{transform:{initial:e,final:t}}=r;return[{transform:ai.Transform.toString(e)},{transform:ai.Transform.toString(t)}]},r6={duration:250,easing:"ease",keyframes:s6,sideEffects:IE({styles:{active:{opacity:"0"}}})};function a6(r){let{config:e,draggableNodes:t,droppableContainers:a,measuringConfiguration:l}=r;return Xf((c,d)=>{if(e===null)return;const m=t.get(c);if(!m)return;const p=m.node.current;if(!p)return;const x=SE(d);if(!x)return;const{transform:v}=Xn(d).getComputedStyle(d),b=dE(v);if(!b)return;const N=typeof e=="function"?e:i6(e);return yE(p,l.draggable.measure),N({active:{id:c,data:m.data,node:p,rect:l.draggable.measure(p)},draggableNodes:t,dragOverlay:{node:d,rect:l.dragOverlay.measure(x)},droppableContainers:a,measuringConfiguration:l,transform:b})})}function i6(r){const{duration:e,easing:t,sideEffects:a,keyframes:l}={...r6,...r};return c=>{let{active:d,dragOverlay:m,transform:p,...x}=c;if(!e)return;const v={x:m.rect.left-d.rect.left,y:m.rect.top-d.rect.top},b={scaleX:p.scaleX!==1?d.rect.width*p.scaleX/m.rect.width:1,scaleY:p.scaleY!==1?d.rect.height*p.scaleY/m.rect.height:1},N={x:p.x-v.x,y:p.y-v.y,...b},S=l({...x,active:d,dragOverlay:m,transform:{initial:p,final:N}}),[z]=S,O=S[S.length-1];if(JSON.stringify(z)===JSON.stringify(O))return;const P=a==null?void 0:a({active:d,dragOverlay:m,...x}),C=m.node.animate(S,{duration:e,easing:t,fill:"forwards"});return new Promise(L=>{C.onfinish=()=>{P==null||P(),L()}})}}let Gw=0;function l6(r){return A.useMemo(()=>{if(r!=null)return Gw++,Gw},[r])}const o6=ut.memo(r=>{let{adjustScale:e=!1,children:t,dropAnimation:a,style:l,transition:c,modifiers:d,wrapperElement:m="div",className:p,zIndex:x=999}=r;const{activatorEvent:v,active:b,activeNodeRect:N,containerNodeRect:S,draggableNodes:z,droppableContainers:O,dragOverlay:P,over:C,measuringConfiguration:L,scrollableAncestors:M,scrollableAncestorRects:F,windowRect:Z}=CE(),te=A.useContext(Wf),E=l6(b==null?void 0:b.id),T=AE(d,{activatorEvent:v,active:b,activeNodeRect:N,containerNodeRect:S,draggingNodeRect:P.rect,over:C,overlayNodeRect:P.rect,scrollableAncestors:M,scrollableAncestorRects:F,transform:te,windowRect:Z}),k=ox(N),R=a6({config:a,draggableNodes:z,droppableContainers:O,measuringConfiguration:L}),D=k?P.setRef:void 0;return ut.createElement(WR,null,ut.createElement(ZR,{animation:R},b&&E?ut.createElement(n6,{key:E,id:b.id,ref:D,as:m,activatorEvent:v,adjustScale:e,className:p,transition:c,rect:k,style:{zIndex:x,...l},transform:T},t):null))});function cx(r,e,t){const a=r.slice();return a.splice(t<0?a.length+t:t,0,a.splice(e,1)[0]),a}function c6(r,e){return r.reduce((t,a,l)=>{const c=e.get(a);return c&&(t[l]=c),t},Array(r.length))}function Sh(r){return r!==null&&r>=0}function u6(r,e){if(r===e)return!0;if(r.length!==e.length)return!1;for(let t=0;t<r.length;t++)if(r[t]!==e[t])return!1;return!0}function d6(r){return typeof r=="boolean"?{draggable:r,droppable:r}:r}const ux=r=>{let{rects:e,activeIndex:t,overIndex:a,index:l}=r;const c=cx(e,a,t),d=e[l],m=c[l];return!m||!d?null:{x:m.left-d.left,y:m.top-d.top,scaleX:m.width/d.width,scaleY:m.height/d.height}},DE="Sortable",RE=ut.createContext({activeIndex:-1,containerId:DE,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:ux,disabled:{draggable:!1,droppable:!1}});function h6(r){let{children:e,id:t,items:a,strategy:l=ux,disabled:c=!1}=r;const{active:d,dragOverlay:m,droppableRects:p,over:x,measureDroppableContainers:v}=CE(),b=Fu(DE,t),N=m.rect!==null,S=A.useMemo(()=>a.map(te=>typeof te=="object"&&"id"in te?te.id:te),[a]),z=d!=null,O=d?S.indexOf(d.id):-1,P=x?S.indexOf(x.id):-1,C=A.useRef(S),L=!u6(S,C.current),M=P!==-1&&O===-1||L,F=d6(c);Us(()=>{L&&z&&v(S)},[L,S,z,v]),A.useEffect(()=>{C.current=S},[S]);const Z=A.useMemo(()=>({activeIndex:O,containerId:b,disabled:F,disableTransforms:M,items:S,overIndex:P,useDragOverlay:N,sortedRects:c6(S,p),strategy:l}),[O,b,F.draggable,F.droppable,M,S,P,p,N,l]);return ut.createElement(RE.Provider,{value:Z},e)}const f6=r=>{let{id:e,items:t,activeIndex:a,overIndex:l}=r;return cx(t,a,l).indexOf(e)},m6=r=>{let{containerId:e,isSorting:t,wasDragging:a,index:l,items:c,newIndex:d,previousItems:m,previousContainerId:p,transition:x}=r;return!x||!a||m!==c&&l===d?!1:t?!0:d!==l&&e===p},p6={duration:200,easing:"ease"},kE="transform",g6=ai.Transition.toString({property:kE,duration:0,easing:"linear"}),x6={roleDescription:"sortable"};function y6(r){let{disabled:e,index:t,node:a,rect:l}=r;const[c,d]=A.useState(null),m=A.useRef(t);return Us(()=>{if(!e&&t!==m.current&&a.current){const p=l.current;if(p){const x=zo(a.current,{ignoreTransform:!0}),v={x:p.left-x.left,y:p.top-x.top,scaleX:p.width/x.width,scaleY:p.height/x.height};(v.x||v.y)&&d(v)}}t!==m.current&&(m.current=t)},[e,t,a,l]),A.useEffect(()=>{c&&d(null)},[c]),c}function b6(r){let{animateLayoutChanges:e=m6,attributes:t,disabled:a,data:l,getNewIndex:c=f6,id:d,strategy:m,resizeObserverConfig:p,transition:x=p6}=r;const{items:v,containerId:b,activeIndex:N,disabled:S,disableTransforms:z,sortedRects:O,overIndex:P,useDragOverlay:C,strategy:L}=A.useContext(RE),M=v6(a,S),F=v.indexOf(d),Z=A.useMemo(()=>({sortable:{containerId:b,index:F,items:v},...l}),[b,l,F,v]),te=A.useMemo(()=>v.slice(v.indexOf(d)),[v,d]),{rect:E,node:T,isOver:k,setNodeRef:R}=XR({id:d,data:Z,disabled:M.droppable,resizeObserverConfig:{updateMeasurementsFor:te,...p}}),{active:D,activatorEvent:q,activeNodeRect:V,attributes:de,setNodeRef:xe,listeners:K,isDragging:G,over:pe,setActivatorNodeRef:Ee,transform:Te}=QR({id:d,data:Z,attributes:{...x6,...t},disabled:M.draggable}),U=RD(R,xe),$=!!D,ue=$&&!z&&Sh(N)&&Sh(P),fe=!C&&G,Ne=fe&&ue?Te:null,Ie=ue?Ne??(m??L)({rects:O,activeNodeRect:V,activeIndex:N,overIndex:P,index:F}):null,Oe=Sh(N)&&Sh(P)?c({id:d,items:v,activeIndex:N,overIndex:P}):F,ye=D==null?void 0:D.id,De=A.useRef({activeId:ye,items:v,newIndex:Oe,containerId:b}),Dt=v!==De.current.items,Rt=e({active:D,containerId:b,isDragging:G,isSorting:$,id:d,index:F,items:v,newIndex:De.current.newIndex,previousItems:De.current.items,previousContainerId:De.current.containerId,transition:x,wasDragging:De.current.activeId!=null}),Ut=y6({disabled:!Rt,index:F,node:T,rect:E});return A.useEffect(()=>{$&&De.current.newIndex!==Oe&&(De.current.newIndex=Oe),b!==De.current.containerId&&(De.current.containerId=b),v!==De.current.items&&(De.current.items=v)},[$,Oe,b,v]),A.useEffect(()=>{if(ye===De.current.activeId)return;if(ye&&!De.current.activeId){De.current.activeId=ye;return}const cn=setTimeout(()=>{De.current.activeId=ye},50);return()=>clearTimeout(cn)},[ye]),{active:D,activeIndex:N,attributes:de,data:Z,rect:E,index:F,newIndex:Oe,items:v,isOver:k,isSorting:$,isDragging:G,listeners:K,node:T,overIndex:P,over:pe,setNodeRef:U,setActivatorNodeRef:Ee,setDroppableNodeRef:R,setDraggableNodeRef:xe,transform:Ut??Ie,transition:St()};function St(){if(Ut||Dt&&De.current.newIndex===F)return g6;if(!(fe&&!Zf(q)||!x)&&($||Rt))return ai.Transition.toString({...x,property:kE})}}function v6(r,e){var t,a;return typeof r=="boolean"?{draggable:r,droppable:!1}:{draggable:(t=r==null?void 0:r.draggable)!=null?t:e.draggable,droppable:(a=r==null?void 0:r.droppable)!=null?a:e.droppable}}ft.Down,ft.Right,ft.Up,ft.Left;const s0=[{id:"bottle1",component:o.jsx(Eu,{className:"w-6 h-6"}),label:""},{id:"bottle2",component:o.jsx(XN,{className:"w-6 h-6"}),label:""},{id:"bottle3",component:o.jsx(HN,{className:"w-6 h-6"}),label:""},{id:"bottle4",component:o.jsx(nE,{className:"w-6 h-6"}),label:""},{id:"glass",component:o.jsx(KN,{className:"w-6 h-6"}),label:""},{id:"beaker",component:o.jsx(LN,{className:"w-6 h-6"}),label:" "},{id:"flask",component:o.jsx(QN,{className:"w-6 h-6"}),label:" "},{id:"container",component:o.jsx(FN,{className:"w-6 h-6"}),label:""},{id:"cup",component:o.jsx(qN,{className:"w-6 h-6"}),label:""},{id:"gallon",component:o.jsx(WN,{className:"w-6 h-6"}),label:""},{id:"carton",component:o.jsx(rE,{className:"w-6 h-6"}),label:""},{id:"drops",component:o.jsx(W0,{className:"w-6 h-6"}),label:""},{id:"tank",component:o.jsx(PN,{className:"w-6 h-6"}),label:" "}],w6=["#3b82f6","#06b6d4","#0ea5e9","#6366f1","#2dd4bf","#ef4444","#eab308","#a855f7","#10b981","#ffffff"],_6=({item:r,activeTab:e,onClick:t,deleteItem:a,onMoveUp:l,onMoveDown:c,isFirst:d,isLast:m})=>{var O;const{attributes:p,listeners:x,setNodeRef:v,transform:b,transition:N,isDragging:S}=b6({id:r.id}),z={transform:ai.Transform.toString(b),transition:N,opacity:S?.3:1,zIndex:S?999:"auto"};return o.jsxs("div",{ref:v,style:z,...p,...x,onClick:t,className:"glass-card p-2 pt-3 rounded-2xl flex flex-col items-center gap-2 relative group hover:bg-white/10 transition-colors cursor-pointer border border-white/5 min-h-[140px] touch-manipulation select-none",children:[o.jsx("div",{className:"w-12 h-12 rounded-full flex items-center justify-center shadow-lg transition-transform group-hover:scale-110 mb-1 pointer-events-none",style:{backgroundColor:`${r.iconColor||"#3b82f6"}20`,border:`1px solid ${r.iconColor||"#3b82f6"}40`},children:ut.cloneElement(((O=s0.find(P=>P.id===(r.icon||"bottle1")))==null?void 0:O.component)||o.jsx(Eu,{className:"w-6 h-6"}),{style:{color:r.iconColor||"inherit"},className:"w-6 h-6"})}),o.jsxs("div",{className:"text-center w-full pointer-events-none",children:[o.jsx("h3",{className:"font-bold text-[11px] text-white truncate w-full mb-1 px-1",children:r.name}),o.jsxs("span",{className:`text-[10px] px-2 py-0.5 rounded font-mono font-bold ${e==="safary"?"bg-blue-500/10 text-blue-200":"bg-cyan-500/10 text-cyan-200"}`,children:[r.price," ."]})]}),e==="safary"&&r.stock<=r.warningLimit&&o.jsx("span",{className:"absolute top-2 left-1/2 -translate-x-1/2 w-2 h-2 rounded-full bg-red-500 animate-pulse shadow-[0_0_8px_rgba(239,68,68,0.6)] z-20"}),o.jsx("button",{onClick:P=>{P.stopPropagation(),confirm(" ")&&a(r.id)},className:"absolute top-1 left-1 p-1.5 bg-red-500/10 hover:bg-red-500/30 text-red-400 rounded-full transition-colors opacity-0 group-hover:opacity-100 z-10",onPointerDown:P=>P.stopPropagation(),onTouchStart:P=>P.stopPropagation(),children:o.jsx(ul,{className:"w-3 h-3"})}),o.jsxs("div",{className:"absolute top-1 right-1 flex flex-col gap-1 z-10 opacity-60 group-hover:opacity-100 transition-opacity",children:[!d&&o.jsx("button",{onClick:l,className:"p-1 bg-white/5 hover:bg-white/20 text-white rounded-md transition-colors",onPointerDown:P=>P.stopPropagation(),onTouchStart:P=>P.stopPropagation(),children:o.jsx(_C,{className:"w-3 h-3"})}),!m&&o.jsx("button",{onClick:c,className:"p-1 bg-white/5 hover:bg-white/20 text-white rounded-md transition-colors",onPointerDown:P=>P.stopPropagation(),onTouchStart:P=>P.stopPropagation(),children:o.jsx(bC,{className:"w-3 h-3"})})]})]})},N6=()=>{var U;const{items:r,addItem:e,updateItem:t,deleteItem:a,reorderItems:l}=lt(),[c,d]=A.useState("safary"),[m,p]=A.useState(!1),[x,v]=A.useState([]),[b,N]=A.useState(null),[S,z]=A.useState(""),[O,P]=A.useState(""),[C,L]=A.useState("safary"),[M,F]=A.useState(""),[Z,te]=A.useState("bottle1"),[E,T]=A.useState("#3b82f6"),[k,R]=A.useState(null);A.useEffect(()=>{v(r.filter($=>$.category===c))},[r,c]);const D=GD(Vw(_E,{activationConstraint:{distance:10}}),Vw(NE,{activationConstraint:{delay:200,tolerance:8}})),q=$=>{N($.active.id),navigator.vibrate&&navigator.vibrate(100)},V=$=>{const{active:ue,over:fe}=$;fe&&ue.id!==fe.id&&v(Ne=>{const re=Ne.findIndex(ye=>ye.id===ue.id),Ie=Ne.findIndex(ye=>ye.id===fe.id),Oe=cx(Ne,re,Ie);return l(Oe),Oe}),N(null)},de=($,ue,fe)=>{fe.stopPropagation();const Ne=[...x];if(ue==="up"&&$>0)[Ne[$],Ne[$-1]]=[Ne[$-1],Ne[$]];else if(ue==="down"&&$<Ne.length-1)[Ne[$],Ne[$+1]]=[Ne[$+1],Ne[$]];else return;v(Ne),l(Ne),navigator.vibrate&&navigator.vibrate(50)},xe=()=>{R(null),G(),L(c),p(!0)},K=$=>{R($.id),z($.name),P($.price.toString()),L($.category),F($.warningLimit.toString()),te($.icon||"bottle1"),T($.iconColor||"#3b82f6"),p(!0)},G=()=>{z(""),P(""),F(""),L("safary"),te("bottle1"),T("#3b82f6")},pe=()=>{p(!1),R(null),G()},Ee=()=>{S&&O?(k!==null?t(k,{name:S,price:parseFloat(O),category:C,warningLimit:parseInt(M)||5,icon:Z,iconColor:E}):e({name:S,price:parseFloat(O),category:C,stock:0,warningLimit:parseInt(M)||5,icon:Z,iconColor:E}),pe()):alert("    ( )")},Te=b?x.find($=>$.id===b):null;return o.jsxs("div",{className:"space-y-4 animate-fade-in relative h-full flex flex-col",children:[o.jsxs("div",{className:"flex bg-black/20 p-1 rounded-xl border border-white/5 sticky top-0 z-10 backdrop-blur-md",children:[o.jsxs("button",{onClick:()=>d("safary"),className:`flex-1 py-2.5 rounded-lg flex items-center justify-center gap-2 transition-all text-xs font-bold ${c==="safary"?"bg-blue-600 text-white shadow-lg":"text-white/60 hover:text-white hover:bg-white/5"}`,children:[o.jsx(is,{className:"w-4 h-4"})," "]}),o.jsxs("button",{onClick:()=>d("filling"),className:`flex-1 py-2.5 rounded-lg flex items-center justify-center gap-2 transition-all text-xs font-bold ${c==="filling"?"bg-cyan-600 text-white shadow-lg":"text-white/60 hover:text-white hover:bg-white/5"}`,children:[o.jsx(rl,{className:"w-4 h-4"})," "]})]}),o.jsxs("button",{onClick:xe,className:`w-full py-4 rounded-xl text-white font-bold shadow-lg flex items-center justify-center gap-2 transition-all active:scale-95 group ${c==="safary"?"bg-blue-600/20 hover:bg-blue-600/30 border border-blue-500/30 text-blue-200":"bg-cyan-600/20 hover:bg-cyan-600/30 border border-cyan-500/30 text-cyan-200"}`,children:[o.jsx("div",{className:"bg-white/10 p-1 rounded-full group-hover:bg-white/20 transition-colors",children:o.jsx(Xa,{className:"w-5 h-5"})}),o.jsxs("span",{children:["  ",c==="safary"?"":""," "]})]}),o.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar pb-20 min-h-[300px]",children:o.jsxs(HR,{sensors:D,collisionDetection:JD,onDragStart:q,onDragEnd:V,children:[o.jsx(h6,{items:x.map($=>$.id),strategy:ux,children:x.length===0?o.jsxs("div",{className:"text-center py-12 text-white/30 border-2 border-dashed border-white/10 rounded-2xl mt-2 flex flex-col items-center gap-2",children:[c==="safary"?o.jsx(is,{className:"w-10 h-10 opacity-50"}):o.jsx(rl,{className:"w-10 h-10 opacity-50"}),o.jsxs("p",{className:"text-sm",children:["   ",c==="safary"?"":""," "]})]}):o.jsx("div",{className:"grid grid-cols-3 gap-3",children:x.map(($,ue)=>o.jsx(_6,{item:$,activeTab:c,onClick:()=>K($),deleteItem:a,onMoveUp:fe=>de(ue,"up",fe),onMoveDown:fe=>de(ue,"down",fe),isFirst:ue===0,isLast:ue===x.length-1},$.id))})}),o.jsx(o6,{dropAnimation:{sideEffects:IE({styles:{active:{opacity:"0.5"}}})},children:Te?o.jsxs("div",{className:"glass-card p-2 pt-3 rounded-2xl flex flex-col items-center gap-2 border border-white/20 bg-white/10 shadow-2xl scale-105 cursor-grabbing",style:{touchAction:"none"},children:[o.jsx("div",{className:"w-12 h-12 rounded-full flex items-center justify-center shadow-lg mb-1",style:{backgroundColor:`${Te.iconColor||"#3b82f6"}20`,border:`1px solid ${Te.iconColor||"#3b82f6"}40`},children:ut.cloneElement(((U=s0.find($=>$.id===(Te.icon||"bottle1")))==null?void 0:U.component)||o.jsx(Eu,{className:"w-6 h-6"}),{style:{color:Te.iconColor||"inherit"},className:"w-6 h-6"})}),o.jsxs("div",{className:"text-center w-full",children:[o.jsx("h3",{className:"font-bold text-[11px] text-white truncate w-full mb-1 px-1",children:Te.name}),o.jsxs("span",{className:`text-[10px] px-2 py-0.5 rounded font-mono font-bold ${c==="safary"?"bg-blue-500/10 text-blue-200":"bg-cyan-500/10 text-cyan-200"}`,children:[Te.price," ."]})]})]}):null})]})}),o.jsx(Mn,{isOpen:m,onClose:pe,title:k?"  ":"  ",icon:k?o.jsx(cl,{className:"text-yellow-400"}):o.jsx(Xa,{className:"text-blue-400"}),maxWidth:"max-w-sm",children:o.jsxs("div",{className:"space-y-4 p-1",children:[o.jsxs("div",{children:[o.jsx("label",{className:"text-xs text-white/50 mb-1 block mr-1",children:" "}),o.jsx(ht,{value:S,onChange:$=>z($.target.value),placeholder:":  20 "})]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsxs("div",{className:"flex-1",children:[o.jsx("label",{className:"text-xs text-white/50 mb-1 block mr-1",children:" (.)"}),o.jsx(ht,{type:"number",value:O,onChange:$=>P($.target.value),placeholder:"0",className:"text-center font-bold"})]}),o.jsxs("div",{className:"flex-1",children:[o.jsx("label",{className:"text-xs text-white/50 mb-1 block mr-1",children:"  ()"}),o.jsx(ht,{type:"number",value:M,onChange:$=>F($.target.value),placeholder:"5",className:"text-center"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"text-xs text-white/50 mb-1 block mr-1",children:""}),o.jsxs("div",{className:"flex gap-2 bg-black/20 p-1 rounded-xl",children:[o.jsx("button",{onClick:()=>L("safary"),className:`flex-1 py-2 text-xs rounded-lg transition-all ${C==="safary"?"bg-blue-600 text-white shadow":"text-white/50 hover:bg-white/5"}`,children:""}),o.jsx("button",{onClick:()=>L("filling"),className:`flex-1 py-2 text-xs rounded-lg transition-all ${C==="filling"?"bg-cyan-600 text-white shadow":"text-white/50 hover:bg-white/5"}`,children:""})]})]}),o.jsxs("div",{className:"bg-white/5 p-3 rounded-xl border border-white/5",children:[o.jsxs("p",{className:"text-[10px] text-white/40 mb-2 flex items-center gap-1",children:[o.jsx(gI,{className:"w-3 h-3"}),"    "]}),o.jsx("div",{className:"grid grid-cols-5 gap-2 mb-3",children:s0.map($=>o.jsx("button",{onClick:()=>te($.id),className:`aspect-square rounded-lg flex flex-col items-center justify-center gap-1 transition-all ${Z===$.id?"bg-white/10 border-white/30 ring-1 ring-white/20":"bg-white/5 border-transparent opacity-50 hover:opacity-100"}`,style:{color:Z===$.id?E:"white"},children:ut.cloneElement($.component,{className:"w-4 h-4"})},$.id))}),o.jsx("div",{className:"flex gap-1.5 justify-center flex-wrap",children:w6.map($=>o.jsx("button",{onClick:()=>T($),className:`w-5 h-5 rounded-full border-2 transition-all ${E===$?"border-white scale-110 shadow-lg":"border-transparent opacity-50 hover:opacity-100"}`,style:{backgroundColor:$}},$))})]}),o.jsxs(It,{onClick:Ee,className:`w-full py-3 ${k?"bg-yellow-600/30 text-yellow-200":"bg-green-600/30 text-green-200"}`,children:[k?o.jsx(Js,{className:"w-4 h-4"}):o.jsx(Xa,{className:"w-4 h-4"}),k?"  ":"  "]})]})})]})},Th=[{id:"safary",name:" "},{id:"filling",name:" "},{id:"expenses",name:""},{id:"ajal",name:""},{id:"inventory",name:""},{id:"distribution",name:""},{id:"reports",name:""},{id:"items",name:""},{id:"workers",name:""},{id:"backup",name:""},{id:"reset",name:""},{id:"logs",name:""}],Qw=({initialView:r="main",onBackToMain:e})=>{const{security:t,updateSecurity:a}=lt(),[l,c]=A.useState(r),[d,m]=A.useState(!1),[p,x]=A.useState(t.securityUsername),[v,b]=A.useState(t.securityPassword),[N,S]=A.useState(t.unlockPin||"7890780"),[z,O]=A.useState(t.adminPin||"7890790");A.useEffect(()=>{x(t.securityUsername),b(t.securityPassword),S(t.unlockPin||"7890780"),O(t.adminPin||"7890790")},[t]),A.useEffect(()=>{r&&c(r)},[r]);const P=M=>{M==="login"?(a({securityUsername:p,securityPassword:v}),alert("    ")):M==="unlock"?(a({unlockPin:N}),alert("     ")):M==="admin"&&(a({adminPin:z}),alert("    "))},C=M=>{const F=t.lockedSections||[];F.includes(M)||a({lockedSections:[...F,M]}),m(!1)},L=M=>{const F=t.lockedSections||[];a({lockedSections:F.filter(Z=>Z!==M)})};return l==="passwords"?o.jsxs("div",{className:"glass-card p-6 space-y-6 animate-fade-in",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[o.jsx("button",{onClick:()=>{c("main"),e&&e()},className:"p-2 hover:bg-white/10 rounded-full",children:o.jsx(Qt,{className:"w-5 h-5 text-white/60"})}),o.jsxs("h3",{className:"font-bold text-lg flex items-center gap-2",children:[o.jsx(Gf,{className:"text-yellow-400"}),"  "]})]}),o.jsxs("div",{className:"bg-blue-500/5 p-4 rounded-xl border border-blue-500/10",children:[o.jsx("h4",{className:"font-bold text-sm text-blue-300 mb-3",children:"  "}),o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{children:[o.jsx("label",{className:"text-[10px] text-white/40 mb-1 block",children:" "}),o.jsx(ht,{value:p,onChange:M=>x(M.target.value),placeholder:" "})]}),o.jsxs("div",{children:[o.jsx("label",{className:"text-[10px] text-white/40 mb-1 block",children:" "}),o.jsx(ht,{value:v,onChange:M=>b(M.target.value),type:"text",placeholder:" "})]}),o.jsx(It,{onClick:()=>P("login"),className:"w-full bg-blue-500/20 text-blue-200 text-xs",children:"  "})]})]}),o.jsxs("div",{className:"bg-red-500/5 p-4 rounded-xl border border-red-500/10",children:[o.jsx("h4",{className:"font-bold text-sm text-red-300 mb-3",children:"   "}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx(ht,{value:N,onChange:M=>S(M.target.value),type:"text",placeholder:" ( 7890780)",className:"text-center font-mono"}),o.jsx(It,{onClick:()=>P("unlock"),className:"w-24 bg-red-500/20 text-red-200 text-xs",children:""})]})]}),o.jsxs("div",{className:"bg-purple-500/5 p-4 rounded-xl border border-purple-500/10",children:[o.jsx("h4",{className:"font-bold text-sm text-purple-300 mb-3",children:"  ( )"}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx(ht,{value:z,onChange:M=>O(M.target.value),type:"text",placeholder:" ( 7890790)",className:"text-center font-mono"}),o.jsx(It,{onClick:()=>P("admin"),className:"w-24 bg-purple-500/20 text-purple-200 text-xs",children:""})]})]})]}):o.jsxs("div",{className:"space-y-4 animate-fade-in relative",children:[o.jsxs("div",{className:"glass-card p-6 rounded-2xl relative overflow-hidden group bg-gradient-to-br from-white/5 to-white/0 border border-white/10",children:[o.jsx("div",{className:"absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-cyan-500 to-blue-600 opacity-0 group-hover:opacity-100 transition-opacity"}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsxs("h2",{className:"text-lg font-bold text-white flex items-center gap-2",children:[o.jsx(RI,{className:t.securityEnabled?"text-cyan-400":"text-white/30"})," "]}),o.jsx("p",{className:`text-sm mt-1 transition-colors ${t.securityEnabled?"text-cyan-300":"text-white/40"}`,children:t.securityEnabled?" ":" "})]}),o.jsx("button",{onClick:()=>a({securityEnabled:!t.securityEnabled}),className:`w-14 h-8 rounded-full p-1 transition-all duration-300 flex items-center ${t.securityEnabled?"bg-cyan-600 shadow-[0_0_15px_rgba(8,145,178,0.4)]":"bg-white/10"}`,children:o.jsx("div",{className:`w-6 h-6 rounded-full bg-white shadow-md transform transition-transform duration-300 flex items-center justify-center ${t.securityEnabled?"-translate-x-6":"translate-x-0"}`,children:o.jsx(_I,{className:`w-3 h-3 ${t.securityEnabled?"text-cyan-600":"text-slate-400"}`})})})]})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[o.jsxs("div",{className:"glass-card p-3 rounded-xl text-center",children:[o.jsx("span",{className:"block text-2xl font-bold text-red-400",children:t.lockedSections.length}),o.jsx("span",{className:"text-[10px] text-white/50",children:" "})]}),o.jsxs("div",{className:"glass-card p-3 rounded-xl text-center",children:[o.jsx("span",{className:"block text-2xl font-bold text-emerald-400",children:Th.length-t.lockedSections.length}),o.jsx("span",{className:"text-[10px] text-white/50",children:" "})]})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx("div",{className:"flex items-center justify-between px-1",children:o.jsx("h3",{className:"text-sm font-bold text-white/70",children:"  "})}),o.jsx("div",{className:"space-y-2 min-h-[100px]",children:t.lockedSections.length===0?o.jsxs("div",{className:"text-center py-6 text-white/30 text-sm border-2 border-dashed border-white/10 rounded-xl bg-white/5",children:[o.jsx(Dw,{className:"mx-auto w-6 h-6 mb-2 opacity-50"}),"    "]}):t.lockedSections.map(M=>{const F=Th.find(Z=>Z.id===M);return F?o.jsxs("div",{className:"glass-inner p-3 rounded-xl flex items-center justify-between animate-fade-in bg-white/5 hover:bg-white/10 transition-colors",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"p-2 rounded-lg bg-red-500/10 text-red-400",children:o.jsx(Ya,{className:"w-4 h-4"})}),o.jsx("span",{className:"font-bold text-sm",children:F.name})]}),o.jsxs("button",{onClick:()=>L(M),className:"text-xs bg-white/5 hover:bg-white/10 hover:text-white text-white/60 px-3 py-2 rounded-lg transition-colors flex items-center gap-1",children:[o.jsx(Dw,{className:"w-3 h-3"})," "]})]},M):null})})]}),o.jsxs("button",{onClick:()=>m(!0),className:"w-full py-4 rounded-xl bg-gradient-to-r from-cyan-600 to-blue-600 hover:from-cyan-500 hover:to-blue-500 text-white font-bold shadow-lg shadow-cyan-900/20 transition-all flex items-center justify-center gap-2",children:[o.jsx(tE,{className:"w-5 h-5"}),"  "]}),d&&o.jsxs("div",{className:"absolute inset-0 bg-slate-900/95 backdrop-blur-sm z-50 rounded-2xl flex flex-col p-4 animate-fade-in",children:[o.jsxs("div",{className:"flex justify-between items-center mb-6",children:[o.jsxs("h3",{className:"text-lg font-bold text-white flex items-center gap-2",children:[o.jsx(Ya,{className:"text-cyan-400 w-5 h-5"}),"  "]}),o.jsx("button",{onClick:()=>m(!1),className:"p-2 hover:bg-white/10 rounded-full transition-colors",children:o.jsx(dl,{className:"w-5 h-5 text-white/60"})})]}),o.jsx("div",{className:"grid grid-cols-2 gap-3 overflow-y-auto custom-scrollbar flex-1 pb-4 content-start",children:Th.filter(M=>!t.lockedSections.includes(M.id)).length===0?o.jsx("p",{className:"col-span-2 text-center text-white/40 py-8",children:"   "}):Th.filter(M=>!t.lockedSections.includes(M.id)).map(M=>o.jsxs("button",{onClick:()=>C(M.id),className:"glass-btn p-4 rounded-xl flex flex-col items-center justify-center gap-2 group hover:bg-cyan-500/10 border-white/5 hover:border-cyan-500/30 transition-all",children:[o.jsx("div",{className:"p-3 rounded-full bg-white/5 group-hover:bg-cyan-500/20 transition-colors",children:o.jsx(Ya,{className:"w-6 h-6 text-white/70 group-hover:text-cyan-300"})}),o.jsx("span",{className:"text-sm font-bold text-white/80 group-hover:text-white",children:M.name})]},M.id))})]})]})},E6=({initialView:r="main",onNavigate:e,onCloseModal:t})=>{const{setSystemDate:a}=lt(),[l,c]=A.useState(""),d=()=>{if(!l)return;const p=new Date(l),x=new Date;if(x.setHours(23,59,59,999),p>x){alert("     ");return}a(p),alert(`   : ${l}.      .`),t()},m=()=>{a(new Date),alert("    "),t()};return r==="main"?o.jsxs("div",{className:"grid grid-cols-2 gap-4 mt-8 animate-fade-in",children:[o.jsxs("button",{onClick:()=>e("history"),className:"glass-card p-6 flex flex-col items-center justify-center gap-4 hover:bg-white/5 transition-all group",children:[o.jsx("div",{className:"p-4 rounded-full bg-cyan-500/10 group-hover:bg-cyan-500/20 transition-colors",children:o.jsx(si,{className:"w-8 h-8 text-cyan-300"})}),o.jsx("h3",{className:"text-lg font-bold",children:""}),o.jsx("p",{className:"text-[10px] text-white/50 text-center",children:"    "})]}),o.jsxs("button",{onClick:()=>e("passwords"),className:"glass-card p-6 flex flex-col items-center justify-center gap-4 hover:bg-white/5 transition-all group",children:[o.jsx("div",{className:"p-4 rounded-full bg-yellow-500/10 group-hover:bg-yellow-500/20 transition-colors",children:o.jsx(Gf,{className:"w-8 h-8 text-yellow-300"})}),o.jsx("h3",{className:"text-lg font-bold",children:""}),o.jsx("p",{className:"text-[10px] text-white/50 text-center",children:"    "})]})]}):r==="history"?o.jsxs("div",{className:"glass-card p-6 animate-fade-in",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-6",children:[o.jsx("button",{onClick:()=>e("main"),className:"p-2 hover:bg-white/10 rounded-full",children:o.jsx(Qt,{className:"w-5 h-5 text-white/60"})}),o.jsxs("h3",{className:"font-bold text-lg flex items-center gap-2",children:[o.jsx(si,{className:"text-cyan-400"})," ( )"]})]}),o.jsxs("div",{className:"bg-white/5 rounded-xl p-4 mb-4 border border-white/10",children:[o.jsx("p",{className:"text-xs text-white/70 mb-4 leading-relaxed",children:"          .         ."}),o.jsxs("div",{className:"mb-2",children:[o.jsx("label",{className:"text-xs text-white/50 mb-1 block",children:" "}),o.jsx(ht,{type:"date",value:l,onChange:p=>c(p.target.value),max:new Date().toISOString().split("T")[0],className:"text-center"})]})]}),o.jsx(It,{onClick:d,className:"w-full bg-cyan-600/20 text-cyan-200 mb-2",children:"   "}),o.jsx("button",{onClick:m,className:"w-full py-3 text-xs text-white/40 hover:text-white hover:bg-white/5 rounded-lg transition-colors",children:"    ()"})]}):null},S6=({type:r})=>{const{items:e,workers:t,customers:a,sales:l,expenses:c,distribution:d,security:m,resetSystem:p}=lt(),x=()=>{try{const b=G3({items:e,workers:t,customers:a,sales:l,expenses:c,distribution:d,security:m},2),N=new Blob([b],{type:"application/json"}),S=URL.createObjectURL(N),z=document.createElement("a");z.href=S,z.download=`backup_${new Date().toISOString().split("T")[0]}.json`,z.click()}catch(v){console.error("Backup generation failed",v),alert("     : "+v.message)}};return r==="reset"?o.jsxs("div",{className:"space-y-4 animate-fade-in text-center p-4",children:[o.jsx(Qf,{className:"w-16 h-16 text-red-500/50 mx-auto mb-4"}),o.jsx("h3",{className:"font-bold text-lg text-red-300 mb-2",children:" "}),o.jsx("p",{className:"text-sm text-white/60 mb-6",children:"       (  )     .      ."}),o.jsx(It,{variant:"danger",onClick:()=>{confirm("       !")&&p()},className:"w-full py-4 bg-red-600/20 hover:bg-red-600/30",children:"   (Reset System)"})]}):o.jsxs("div",{className:"space-y-4 text-center animate-fade-in",children:[o.jsx($N,{className:"w-16 h-16 text-emerald-400/50 mx-auto mb-2"}),o.jsx("h3",{className:"font-bold text-emerald-300",children:" "}),o.jsx("p",{className:"text-sm text-white/60 mb-4",children:"         ."}),o.jsx(It,{onClick:x,className:"w-full py-4 bg-emerald-600/20 hover:bg-emerald-600/30 text-emerald-200",children:"  "}),o.jsxs("label",{className:"block w-full cursor-pointer mt-4",children:[o.jsx("div",{className:"glass-btn w-full py-4 flex items-center justify-center gap-2 text-white/70 hover:text-white border-emerald-500/20",children:o.jsx("span",{children:"   "})}),o.jsx("input",{type:"file",className:"hidden",accept:".json",onChange:v=>{var N;const b=(N=v.target.files)==null?void 0:N[0];if(b){const S=new FileReader;S.onload=z=>{var O;try{const P=JSON.parse((O=z.target)==null?void 0:O.result);alert("           .")}catch{alert("Invalid file")}},S.readAsText(b)}}})]})]})},T6=({onBack:r,initialTab:e})=>{const[t,a]=A.useState(e),[l,c]=A.useState("main");A.useEffect(()=>{e==="history"?(a("settings"),c("history")):e==="passwords"?(a("settings"),c("passwords")):(a(e),c("main"))},[e]);const d=()=>{switch(t){case"status":return" ";case"workers":return" ";case"items":return" ";case"logs":return" ";case"security":return" ";case"settings":return" ";case"backup":return" ";case"reset":return" ";default:return" "}};return o.jsxs("div",{className:"w-full max-w-md mx-auto p-4 h-screen flex flex-col overflow-y-auto custom-scrollbar animate-fade-in bg-gradient-to-b from-slate-900 via-slate-900 to-gray-900/50",children:[o.jsxs("div",{className:"flex items-center gap-4 mb-6 pt-2 sticky top-0 z-20 bg-slate-900/95 backdrop-blur-sm pb-2 border-b border-white/5",children:[o.jsx("button",{onClick:r,className:"p-2.5 bg-white/5 hover:bg-white/10 border border-white/10 rounded-xl text-white transition-all active:scale-95",children:o.jsx(Qt,{className:"w-5 h-5"})}),o.jsxs("div",{children:[o.jsx("h1",{className:"text-lg font-bold text-white leading-tight",children:d()}),o.jsx("span",{className:"text-[10px] text-white/50 block",children:" "})]})]}),o.jsxs("div",{className:"flex-1 pb-4",children:[t==="status"&&o.jsx(CD,{}),t==="workers"&&o.jsx(ID,{}),t==="items"&&o.jsx(N6,{}),t==="logs"&&o.jsx(DD,{}),t==="security"&&o.jsx(Qw,{}),t==="settings"&&o.jsx(E6,{initialView:l,onNavigate:c,onCloseModal:()=>{}}),t==="settings"&&l==="passwords"&&o.jsx("div",{className:"-mt-6 relative z-10",children:o.jsx(Qw,{initialView:"passwords",onBackToMain:()=>c("main")})}),(t==="backup"||t==="reset")&&o.jsx(S6,{type:t})]})]})},j6=({onBack:r,onSelect:e})=>{const t=[{id:"status",label:" ",desc:"   ",icon:o.jsx(eC,{className:"w-5 h-5"}),color:"emerald"},{id:"workers",label:" ",desc:"   ",icon:o.jsx(nx,{className:"w-5 h-5"}),color:"orange"},{id:"items",label:" ",desc:"  ",icon:o.jsx(zu,{className:"w-5 h-5"}),color:"purple"},{id:"history",label:" ()",desc:"   ",icon:o.jsx(si,{className:"w-5 h-5"}),color:"cyan"},{id:"passwords",label:" ",desc:"   ",icon:o.jsx(Gf,{className:"w-5 h-5"}),color:"yellow"},{id:"security",label:" ",desc:"   ",icon:o.jsx(Ya,{className:"w-5 h-5"}),color:"indigo"},{id:"logs",label:" ",desc:"  ",icon:o.jsx(qC,{className:"w-5 h-5"}),color:"blue"},{id:"backup",label:" ",desc:"  ",icon:o.jsx($N,{className:"w-5 h-5"}),color:"teal"},{id:"reset",label:" ",desc:"    ",icon:o.jsx(Qf,{className:"w-5 h-5"}),color:"red"}],a=l=>{const c={emerald:"bg-emerald-500/10 border-emerald-500/20 text-emerald-300 group-hover:bg-emerald-500/20",orange:"bg-orange-500/10 border-orange-500/20 text-orange-300 group-hover:bg-orange-500/20",purple:"bg-purple-500/10 border-purple-500/20 text-purple-300 group-hover:bg-purple-500/20",cyan:"bg-cyan-500/10 border-cyan-500/20 text-cyan-300 group-hover:bg-cyan-500/20",yellow:"bg-yellow-500/10 border-yellow-500/20 text-yellow-300 group-hover:bg-yellow-500/20",indigo:"bg-indigo-500/10 border-indigo-500/20 text-indigo-300 group-hover:bg-indigo-500/20",blue:"bg-blue-500/10 border-blue-500/20 text-blue-300 group-hover:bg-blue-500/20",teal:"bg-teal-500/10 border-teal-500/20 text-teal-300 group-hover:bg-teal-500/20",red:"bg-red-500/10 border-red-500/20 text-red-300 group-hover:bg-red-500/20"};return c[l]||c.blue};return o.jsxs("div",{className:"w-full max-w-md mx-auto p-4 h-screen flex flex-col overflow-y-auto custom-scrollbar animate-fade-in bg-slate-900",children:[o.jsxs("div",{className:"flex items-center gap-4 mb-6 pt-4 sticky top-0 bg-slate-900 z-10 pb-4 border-b border-white/5",children:[o.jsx("button",{onClick:r,className:"p-3 bg-white/10 hover:bg-white/20 rounded-full text-white transition-all active:scale-95",children:o.jsx(Qt,{className:"w-6 h-6"})}),o.jsxs("h1",{className:"text-2xl font-bold text-white flex items-center gap-2",children:[o.jsx(Wg,{className:"w-8 h-8 text-gray-300"}),o.jsx("span",{children:" "})]})]}),o.jsx("div",{className:"grid grid-cols-1 gap-2 pb-20",children:t.map(l=>o.jsxs("button",{onClick:()=>e(l.id),className:`group relative flex items-center gap-3 p-3 rounded-xl border transition-all active:scale-[0.98] text-right w-full ${a(l.color)}`,children:[o.jsx("div",{className:"p-2 rounded-full bg-white/5 group-hover:scale-110 transition-transform shadow-sm",children:l.icon}),o.jsxs("div",{className:"flex-1",children:[o.jsx("h3",{className:"font-bold text-sm text-white mb-0.5",children:l.label}),o.jsx("p",{className:"text-[10px] text-white/50",children:l.desc})]}),o.jsx(Qt,{className:"w-4 h-4 text-white/20 group-hover:text-white/60 rotate-180 transition-colors"})]},l.id))}),o.jsx("div",{className:"text-center text-white/20 text-[10px] pb-4 font-mono",children:"System Control Panel v3.1"})]})},fl=({onFilterChange:r})=>{const[e,t]=A.useState(!1),[a,l]=A.useState("day"),[c,d]=A.useState(new Date().toISOString().split("T")[0]),[m,p]=A.useState(new Date().toISOString().slice(0,7)),[x,v]=A.useState(new Date().getFullYear().toString()),[b,N]=A.useState(new Date().toISOString().split("T")[0]),[S,z]=A.useState(new Date().toISOString().split("T")[0]),O=()=>{let C=new Date,L=new Date;if(a==="day")C=new Date(c),L=new Date(c);else if(a==="month"){const[M,F]=m.split("-").map(Number);C=new Date(M,F-1,1),L=new Date(M,F,0)}else if(a==="year"){const M=parseInt(x);C=new Date(M,0,1),L=new Date(M,11,31)}else a==="custom"&&(C=new Date(b),L=new Date(S));C.setHours(0,0,0,0),L.setHours(23,59,59,999),r(C,L,a),t(!1)},P=()=>a==="day"?`: ${c}`:a==="month"?`: ${m}`:a==="year"?`: ${x}`:`: ${b}  ${S}`;return o.jsxs(o.Fragment,{children:[o.jsxs("button",{onClick:()=>t(!0),className:"flex items-center gap-2 px-4 py-2 bg-white/5 hover:bg-white/10 border border-white/10 rounded-xl text-white transition-all group",children:[o.jsx(oI,{className:"w-5 h-5 text-cyan-400 group-hover:text-cyan-300"}),o.jsxs("div",{className:"flex flex-col items-start",children:[o.jsx("span",{className:"text-[10px] text-white/50 font-bold",children:" "}),o.jsx("span",{className:"text-[10px] text-cyan-100 font-mono tracking-tight",children:P()})]})]}),o.jsx(Mn,{isOpen:e,onClose:()=>t(!1),title:" ",icon:o.jsx(si,{className:"text-cyan-400"}),maxWidth:"max-w-sm",children:o.jsxs("div",{className:"space-y-4",children:[o.jsx("div",{className:"flex bg-black/20 p-1 rounded-xl",children:["day","month","year","custom"].map(C=>o.jsx("button",{onClick:()=>l(C),className:`flex-1 py-2 text-xs rounded-lg transition-all ${a===C?"bg-cyan-600 text-white shadow":"text-white/50 hover:text-white"}`,children:C==="day"?"":C==="month"?"":C==="year"?"":""},C))}),o.jsxs("div",{className:"glass-inner p-4 rounded-xl bg-white/5 border border-white/5",children:[a==="day"&&o.jsxs("div",{children:[o.jsx("label",{className:"text-xs text-white/50 block mb-2",children:" "}),o.jsx("input",{type:"date",value:c,onChange:C=>d(C.target.value),className:"w-full bg-black/30 border border-white/10 rounded-lg px-3 py-2 text-white text-center"})]}),a==="month"&&o.jsxs("div",{children:[o.jsx("label",{className:"text-xs text-white/50 block mb-2",children:" "}),o.jsx("input",{type:"month",value:m,onChange:C=>p(C.target.value),className:"w-full bg-black/30 border border-white/10 rounded-lg px-3 py-2 text-white text-center"})]}),a==="year"&&o.jsxs("div",{children:[o.jsx("label",{className:"text-xs text-white/50 block mb-2",children:" "}),o.jsx("input",{type:"number",value:x,onChange:C=>v(C.target.value),className:"w-full bg-black/30 border border-white/10 rounded-lg px-3 py-2 text-white text-center font-bold text-lg"})]}),a==="custom"&&o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsxs("div",{className:"flex-1",children:[o.jsx("label",{className:"text-[10px] text-white/50 block mb-1",children:""}),o.jsx("input",{type:"date",value:b,onChange:C=>N(C.target.value),className:"w-full bg-black/30 border border-white/10 rounded-lg px-2 py-2 text-xs text-white text-center"})]}),o.jsxs("div",{className:"flex-1",children:[o.jsx("label",{className:"text-[10px] text-white/50 block mb-1",children:""}),o.jsx("input",{type:"date",value:S,onChange:C=>z(C.target.value),className:"w-full bg-black/30 border border-white/10 rounded-lg px-2 py-2 text-xs text-white text-center"})]})]})]}),o.jsxs("button",{onClick:O,className:"w-full py-3 bg-gradient-to-r from-cyan-600 to-blue-600 rounded-xl text-white font-bold shadow-lg flex items-center justify-center gap-2",children:[o.jsx(df,{className:"w-4 h-4"})," "]})]})})]})},A6={:"bg-pink-500"," ":"bg-blue-500",:"bg-green-500",:"bg-purple-500",:"bg-orange-500"," ":"bg-gray-500"},C6=({onBack:r})=>{const{sales:e,expenses:t,distribution:a,customers:l}=lt(),[c,d]=A.useState(new Date),[m,p]=A.useState(new Date),[x,v]=A.useState("day"),b=(C,L,M)=>{d(C),p(L),v(M)},N=C=>ea(C,c,m),S=A.useMemo(()=>iE(e,t,a,l,N),[e,t,a,l,c,m]),z=S.filteredSales.filter(C=>!C.isReturn).reduce((C,L)=>C+(L.discount||0),0),O=A.useMemo(()=>{const C=new Set;return S.filteredSales.forEach(L=>{L.paymentMethod==="network"&&L.networkWallet&&C.add(L.networkWallet)}),Array.from(C)},[S.filteredSales]),P=()=>{const C="  ",L=`${c.toLocaleDateString()}  ${m.toLocaleDateString()}`,M=`
            <div style="margin-bottom: 20px; border: 1px solid #ccc; padding: 10px;">
                <h3> : <span dir="ltr">${S.netCashFlow.toLocaleString()}</span> .</h3>
            </div>
            <table style="width: 100%; border-collapse: collapse; margin-bottom: 20px;">
                <tr><td style="border: 1px solid #ccc; padding: 5px;"> </td><td style="border: 1px solid #ccc; padding: 5px;">${S.totalRevenue.toLocaleString()}</td></tr>
                <tr><td style="border: 1px solid #ccc; padding: 5px;">  </td><td style="border: 1px solid #ccc; padding: 5px;">${z.toLocaleString()}</td></tr>
                <tr><td style="border: 1px solid #ccc; padding: 5px;"> </td><td style="border: 1px solid #ccc; padding: 5px;">${S.actualExpenses.toLocaleString()}</td></tr>
                <tr><td style="border: 1px solid #ccc; padding: 5px;"></td><td style="border: 1px solid #ccc; padding: 5px;">${S.returnsTotal.toLocaleString()}</td></tr>
            </table>`;hl(C,L,"range",M)};return o.jsxs("div",{className:"w-full max-w-md mx-auto p-4 h-screen flex flex-col overflow-y-auto custom-scrollbar animate-fade-in bg-slate-900/50",children:[o.jsxs("div",{className:"flex items-center justify-between mb-6 pt-2",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("button",{onClick:r,className:"p-2.5 bg-white/5 hover:bg-white/10 border border-white/10 rounded-xl text-white transition-all",children:o.jsx(Qt,{className:"w-5 h-5"})}),o.jsx("div",{children:o.jsx("h1",{className:"text-lg font-bold text-white",children:" "})})]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx(fl,{onFilterChange:b}),o.jsx("button",{onClick:P,className:"p-2 bg-white/5 hover:bg-white/10 border border-white/10 rounded-xl text-white transition-all",children:o.jsx(ol,{className:"w-5 h-5"})})]})]}),o.jsxs("div",{className:`glass-card p-6 text-center border-t-4 mb-6 ${S.netCashFlow>=0?"border-t-emerald-500 bg-emerald-500/5":"border-t-red-500 bg-red-500/5"}`,children:[o.jsx("p",{className:"text-sm font-bold text-white/60 mb-2",children:"  (Net Profit)"}),o.jsxs("div",{className:`text-4xl font-bold font-mono tracking-wider ${S.netCashFlow>=0?"text-emerald-400":"text-red-400"}`,children:[S.netCashFlow>0?"+":"",S.netCashFlow.toLocaleString()," ",o.jsx("span",{className:"text-lg",children:"."})]})]}),o.jsxs("div",{className:"grid grid-cols-1 gap-4 pb-20",children:[o.jsxs("div",{className:"glass-card p-4 border border-white/5",children:[o.jsxs("h3",{className:"text-emerald-300 font-bold text-sm flex items-center gap-2 mb-4 border-b border-white/10 pb-2",children:[o.jsx(nl,{className:"w-4 h-4"}),"  ()"]}),o.jsxs("div",{className:"space-y-3 text-xs",children:[o.jsxs("div",{className:"flex justify-between items-center p-2 bg-white/5 rounded-lg",children:[o.jsx("span",{className:"text-white/70",children:" "}),o.jsx("span",{className:"text-emerald-200 font-bold text-sm",children:S.cashSalesRevenue.toLocaleString()})]}),o.jsxs("div",{className:"flex flex-col p-2 bg-white/5 rounded-lg gap-2",children:[o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("span",{className:"text-white/70",children:" "}),o.jsx("span",{className:"text-blue-200 font-bold text-sm",children:S.networkSalesRevenue.toLocaleString()})]}),O.length>0&&o.jsx("div",{className:"flex flex-wrap gap-1.5 mt-1 border-t border-white/5 pt-2",children:O.map(C=>o.jsxs("div",{className:`px-1.5 py-0.5 rounded text-[9px] text-white font-bold animate-pulse flex items-center gap-1 shadow-lg ${A6[C]||"bg-gray-500"}`,children:[o.jsx(sE,{className:"w-2 h-2"}),C]},C))})]}),o.jsxs("div",{className:"flex justify-between items-center p-2 bg-white/5 rounded-lg",children:[o.jsx("span",{className:"text-white/70",children:" "}),o.jsx("span",{className:"text-emerald-200 font-bold text-sm",children:S.distributionRevenue.toLocaleString()})]}),z>0&&o.jsxs("div",{className:"flex justify-between items-center p-2 bg-yellow-500/10 rounded-lg border border-yellow-500/20",children:[o.jsxs("span",{className:"text-yellow-200 flex items-center gap-1",children:[o.jsx(bI,{className:"w-3 h-3"}),"   "]}),o.jsx("span",{className:"text-yellow-300 font-bold text-sm",children:z.toLocaleString()})]}),o.jsxs("div",{className:"flex justify-between items-center mt-2 pt-2 border-t border-white/10",children:[o.jsx("span",{className:"font-bold text-white",children:" "}),o.jsx("span",{className:"font-bold text-emerald-400 text-base",children:S.totalRevenue.toLocaleString()})]})]})]}),o.jsxs("div",{className:"glass-card p-4 border border-white/5",children:[o.jsxs("h3",{className:"text-red-300 font-bold text-sm flex items-center gap-2 mb-4 border-b border-white/10 pb-2",children:[o.jsx(sl,{className:"w-4 h-4"}),"  "]}),o.jsxs("div",{className:"space-y-3 text-xs",children:[o.jsxs("div",{className:"flex justify-between items-center p-2 bg-white/5 rounded-lg",children:[o.jsx("span",{className:"text-white/70",children:""}),o.jsx("span",{className:"text-red-200 font-bold text-sm",children:S.returnsTotal.toLocaleString()})]}),o.jsxs("div",{className:"flex justify-between items-center p-2 bg-white/5 rounded-lg",children:[o.jsx("span",{className:"text-white/70",children:" "}),o.jsx("span",{className:"text-red-200 font-bold text-sm",children:S.actualExpenses.toLocaleString()})]}),S.ajalDiscounts>0&&o.jsxs("div",{className:"flex justify-between items-center p-2 bg-yellow-500/10 rounded-lg border border-yellow-500/10",children:[o.jsx("span",{className:"text-yellow-200",children:"  ()"}),o.jsx("span",{className:"text-yellow-300 font-bold text-sm",children:S.ajalDiscounts.toLocaleString()})]}),o.jsxs("div",{className:"flex justify-between items-center mt-2 pt-2 border-t border-white/10",children:[o.jsx("span",{className:"font-bold text-white",children:" "}),o.jsx("span",{className:"font-bold text-red-400 text-base",children:(S.returnsTotal+S.actualExpenses+S.ajalDiscounts).toLocaleString()})]})]})]})]})]})},I6=({onBack:r})=>{const{sales:e,expenses:t,distribution:a,customers:l}=lt(),[c,d]=A.useState("safary"),[m,p]=A.useState(new Date),[x,v]=A.useState(new Date),[b,N]=A.useState("day"),S=(F,Z,te)=>{p(F),v(Z),N(te)},z=F=>ea(F,m,x),P=A.useMemo(()=>iE(e,t,a,l,z),[e,t,a,l,m,x]).filteredSales.filter(F=>{const Z=F.paymentMethod!=="ajal";return c==="safary"?F.type==="safary"&&Z:c==="filling"?F.type==="filling"&&Z:!1}),C=A.useMemo(()=>P.flatMap(F=>F.items.map(Z=>({...Z,saleId:F.id,saleTotal:F.total,saleDiscount:F.discount||0,paymentMethod:F.paymentMethod,networkWallet:F.networkWallet,fullDate:F.fullDate,dateStr:F.date.split(" ")[0],isReturn:F.isReturn}))),[P]),L=P.reduce((F,Z)=>F+Z.total,0),M=()=>{const F=`   - ${c==="safary"?"":""}`,Z=`${m.toLocaleDateString()}  ${x.toLocaleDateString()}`,E=`
            <div style="margin-bottom: 10px; font-size: 12px; color: #666;">* :         .</div>
            <table style="width: 100%; border-collapse: collapse; font-size: 10px; text-align: center;">
                <thead>
                    <tr style="background-color: #f0f0f0;">
                        <th style="border: 1px solid #ccc;"></th>
                        <th style="border: 1px solid #ccc;"></th>
                        <th style="border: 1px solid #ccc;"> </th>
                        <th style="border: 1px solid #ccc;"> </th>
                        <th style="border: 1px solid #ccc;"> </th>
                        <th style="border: 1px solid #ccc;"> </th>
                        <th style="border: 1px solid #ccc;"> </th>
                    </tr>
                </thead>
                <tbody>${C.map(T=>{const k=T.paymentMethod==="network"?` (${T.networkWallet})`:"";return`
            <tr style="${T.isReturn?"color: red;":""}">
                <td style="border: 1px solid #ccc; padding: 5px;">${T.name}</td>
                <td style="border: 1px solid #ccc; padding: 5px;">${T.qty}</td>
                <td style="border: 1px solid #ccc; padding: 5px;">${T.price}</td>
                <td style="border: 1px solid #ccc; padding: 5px;">${T.total}</td>
                <td style="border: 1px solid #ccc; padding: 5px;">${T.saleDiscount>0?T.saleDiscount:"-"}</td>
                <td style="border: 1px solid #ccc; padding: 5px;">${k}</td>
                <td style="border: 1px solid #ccc; padding: 5px;">${Su(T.fullDate)} <br> <small>${T.dateStr}</small></td>
            </tr>
        `}).join("")}</tbody>
                <tfoot>
                    <tr style="background-color: #eee; font-weight: bold;">
                        <td colspan="3">   </td>
                        <td colspan="4" style="font-size: 14px;">${L.toLocaleString()}</td>
                    </tr>
                </tfoot>
            </table>
        `;hl(F,Z,"range",E)};return o.jsxs("div",{className:"w-full max-w-md mx-auto p-4 h-screen flex flex-col overflow-y-auto custom-scrollbar animate-fade-in bg-slate-900/50",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4 pt-2",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("button",{onClick:r,className:"p-2 bg-white/5 hover:bg-white/10 border border-white/10 rounded-xl text-white transition-all",children:o.jsx(Qt,{className:"w-5 h-5"})}),o.jsxs("div",{children:[o.jsx("h1",{className:"text-lg font-bold text-white",children:""}),o.jsx("span",{className:"text-[10px] text-white/40 block",children:"  ()"})]})]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx(fl,{onFilterChange:S}),o.jsx("button",{onClick:M,className:"p-2 bg-white/5 hover:bg-white/10 border border-white/10 rounded-xl text-white transition-all",children:o.jsx(ol,{className:"w-5 h-5"})})]})]}),o.jsxs("div",{className:"flex bg-white/5 p-1 rounded-xl mb-4 border border-white/5",children:[o.jsxs("button",{onClick:()=>d("safary"),className:`flex-1 py-2 rounded-lg text-xs flex items-center justify-center gap-2 transition-all ${c==="safary"?"bg-blue-600 text-white shadow":"text-white/50"}`,children:[o.jsx(is,{className:"w-4 h-4"})," "]}),o.jsxs("button",{onClick:()=>d("filling"),className:`flex-1 py-2 rounded-lg text-xs flex items-center justify-center gap-2 transition-all ${c==="filling"?"bg-cyan-600 text-white shadow":"text-white/50"}`,children:[o.jsx(rl,{className:"w-4 h-4"})," "]})]}),o.jsxs("div",{className:"glass-card p-4 mb-4 flex justify-between items-center bg-indigo-500/10 border-indigo-500/20",children:[o.jsx("span",{className:"text-xs text-indigo-300 font-bold",children:"  (/)"}),o.jsxs("span",{className:"text-xl font-bold text-white",children:[L.toLocaleString()," ",o.jsx("span",{className:"text-xs opacity-50",children:"."})]})]}),o.jsx("div",{className:"flex-1 overflow-hidden glass-card border border-white/10",children:o.jsx("div",{className:"overflow-y-auto h-full custom-scrollbar",children:o.jsxs("table",{className:"w-full text-xs text-right whitespace-nowrap",children:[o.jsx("thead",{className:"bg-white/5 text-white/50 sticky top-0 backdrop-blur-md z-10",children:o.jsxs("tr",{children:[o.jsx("th",{className:"p-3",children:""}),o.jsx("th",{className:"p-3 text-center",children:""}),o.jsx("th",{className:"p-3 text-center",children:""}),o.jsx("th",{className:"p-3 text-center",children:""}),o.jsx("th",{className:"p-3 text-center",children:""}),o.jsx("th",{className:"p-3 text-center",children:""}),o.jsx("th",{className:"p-3 text-center",children:""})]})}),o.jsx("tbody",{className:"divide-y divide-white/5",children:C.length===0?o.jsx("tr",{children:o.jsx("td",{colSpan:7,className:"text-center py-8 text-white/30",children:"     "})}):C.map((F,Z)=>o.jsxs("tr",{className:`hover:bg-white/5 ${F.isReturn?"bg-red-500/10":""}`,children:[o.jsxs("td",{className:"p-3 font-bold text-white/90",children:[F.name,F.isReturn&&o.jsx("span",{className:"text-[8px] text-red-300 block",children:""})]}),o.jsx("td",{className:"p-3 text-center font-mono",children:F.qty}),o.jsx("td",{className:"p-3 text-center font-mono text-white/70",children:F.price}),o.jsx("td",{className:`p-3 text-center font-bold ${F.isReturn?"text-red-300":"text-emerald-300"}`,children:F.total}),o.jsx("td",{className:"p-3 text-center text-yellow-500 font-mono",children:F.saleDiscount>0?F.saleDiscount:"-"}),o.jsxs("td",{className:"p-3 text-center",children:[F.paymentMethod==="cash"&&o.jsx("span",{className:"text-[9px] text-green-300",children:""}),F.paymentMethod==="network"&&o.jsxs("div",{className:"flex flex-col items-center",children:[o.jsx("span",{className:"text-[9px] text-blue-300",children:""}),o.jsx("span",{className:"text-[7px] text-white/30",children:F.networkWallet})]})]}),o.jsx("td",{className:"p-3 text-center text-white/50",children:o.jsxs("div",{className:"flex flex-col items-center",children:[o.jsx("span",{className:"font-mono text-[9px]",children:Su(F.fullDate)}),o.jsx("span",{className:"text-[8px] opacity-50",children:F.dateStr})]})})]},`${F.saleId}-${Z}`))})]})})})]})},D6=({onBack:r})=>{const{expenses:e}=lt(),[t,a]=A.useState(new Date),[l,c]=A.useState(new Date),[d,m]=A.useState("day"),p=(N,S,z)=>{a(N),c(S),m(z)},x=e.filter(N=>N.type==="purchase"&&ea(N.fullDate,t,l)),v=x.reduce((N,S)=>N+S.amount,0),b=()=>{const N="  ",S=`${t.toLocaleDateString()}  ${l.toLocaleDateString()}`,O=`
            <table style="width: 100%; border-collapse: collapse; font-size: 11px;">
                <thead>
                    <tr style="background-color: #f0f0f0;">
                        <th style="border: 1px solid #ccc;"> </th>
                        <th style="border: 1px solid #ccc;"> </th>
                        <th style="border: 1px solid #ccc;"></th>
                    </tr>
                </thead>
                <tbody>${x.map(P=>`
            <tr>
                <td style="border: 1px solid #ccc; padding: 5px;">${P.reason}</td>
                <td style="border: 1px solid #ccc; padding: 5px;">${P.amount}</td>
                <td style="border: 1px solid #ccc; padding: 5px;">${P.date}</td>
            </tr>
        `).join("")}</tbody>
                <tfoot>
                    <tr style="background-color: #eee; font-weight: bold;">
                        <td> </td>
                        <td>${v}</td>
                        <td></td>
                    </tr>
                </tfoot>
            </table>
        `;hl(N,S,"range",O)};return o.jsxs("div",{className:"w-full max-w-md mx-auto p-4 h-screen flex flex-col overflow-y-auto custom-scrollbar animate-fade-in bg-slate-900/50",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4 pt-2",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("button",{onClick:r,className:"p-2.5 bg-white/5 hover:bg-white/10 border border-white/10 rounded-xl text-white transition-all",children:o.jsx(Qt,{className:"w-5 h-5"})}),o.jsx("div",{children:o.jsx("h1",{className:"text-lg font-bold text-white",children:""})})]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx(fl,{onFilterChange:p}),o.jsx("button",{onClick:b,className:"p-2 bg-white/5 hover:bg-white/10 border border-white/10 rounded-xl text-white transition-all",children:o.jsx(ol,{className:"w-5 h-5"})})]})]}),o.jsxs("div",{className:"glass-card p-4 mb-4 flex justify-between items-center bg-blue-500/10 border-blue-500/20",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"p-2 bg-blue-500/20 rounded-full text-blue-300",children:o.jsx(is,{className:"w-6 h-6"})}),o.jsxs("div",{children:[o.jsx("span",{className:"text-xs text-blue-300 font-bold block",children:" "}),o.jsxs("span",{className:"text-[10px] text-white/50",children:[x.length," "]})]})]}),o.jsxs("span",{className:"text-xl font-bold text-white",children:[v.toLocaleString()," ",o.jsx("span",{className:"text-xs opacity-50",children:"."})]})]}),o.jsx("div",{className:"flex-1 overflow-hidden glass-card border border-white/10",children:o.jsx("div",{className:"overflow-y-auto h-full custom-scrollbar p-2 space-y-2",children:x.length===0?o.jsxs("div",{className:"text-center py-10 text-white/30 flex flex-col items-center",children:[o.jsx(hf,{className:"w-12 h-12 mb-2 opacity-50"}),o.jsx("p",{children:"      "})]}):x.map((N,S)=>o.jsxs("div",{className:"bg-white/5 border border-white/5 rounded-xl p-3 flex justify-between items-center hover:bg-white/10 transition-colors",children:[o.jsxs("div",{className:"flex items-start gap-3",children:[o.jsx("div",{className:"mt-1 p-2 bg-white/5 rounded-lg text-white/40",children:o.jsx(hf,{className:"w-4 h-4"})}),o.jsxs("div",{children:[o.jsx("span",{className:"block font-bold text-white text-sm mb-1",children:N.reason}),o.jsx("span",{className:"text-[10px] text-white/40 font-mono block",children:N.date})]})]}),o.jsxs("div",{className:"text-left",children:[o.jsx("span",{className:"block font-bold text-blue-300 text-lg",children:N.amount}),o.jsx("span",{className:"text-[9px] text-white/30",children:"."})]})]},S))})})]})},R6=({onBack:r})=>{const{distribution:e,items:t}=lt(),[a,l]=A.useState(new Date),[c,d]=A.useState(new Date),[m,p]=A.useState("day"),x=(S,z,O)=>{l(S),d(z),p(O)},v=e.filter(S=>ea(S.fullDate,a,c)),b=v.reduce((S,z)=>S+z.cash,0),N=()=>{const S=" ",z=`${a.toLocaleDateString()}  ${c.toLocaleDateString()}`,P=`
            <table style="width: 100%; border-collapse: collapse; font-size: 11px;">
                <thead>
                    <tr style="background-color: #f0f0f0;">
                        <th style="border: 1px solid #ccc;"> ()</th>
                        <th style="border: 1px solid #ccc;"></th>
                        <th style="border: 1px solid #ccc;"></th>
                    </tr>
                </thead>
                <tbody>${v.map(C=>`
                <tr>
                    <td style="border: 1px solid #ccc; padding: 5px;">${Object.entries(C.outputs||{}).map(([M,F])=>{const Z=t.find(te=>te.id===parseInt(M));return`${Z?Z.name:""} (${F})`}).join(" | ")||" "}</td>
                    <td style="border: 1px solid #ccc; padding: 5px;">${C.cash}</td>
                    <td style="border: 1px solid #ccc; padding: 5px;">${C.date}</td>
                </tr>
            `).join("")}</tbody>
                <tfoot>
                    <tr style="background-color: #eee; font-weight: bold;">
                        <td></td>
                        <td>${b}</td>
                        <td></td>
                    </tr>
                </tfoot>
            </table>
        `;hl(S,z,"range",P)};return o.jsxs("div",{className:"w-full max-w-md mx-auto p-4 h-screen flex flex-col overflow-y-auto custom-scrollbar animate-fade-in bg-slate-900/50",children:[o.jsxs("div",{className:"flex items-center justify-between mb-6 pt-2",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("button",{onClick:r,className:"p-2.5 bg-white/5 hover:bg-white/10 border border-white/10 rounded-xl text-white transition-all",children:o.jsx(Qt,{className:"w-5 h-5"})}),o.jsx("div",{children:o.jsx("h1",{className:"text-lg font-bold text-white",children:" "})})]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx(fl,{onFilterChange:x}),o.jsx("button",{onClick:N,className:"p-2 bg-white/5 hover:bg-white/10 border border-white/10 rounded-xl text-white transition-all",children:o.jsx(ol,{className:"w-5 h-5"})})]})]}),o.jsxs("div",{className:"glass-card p-4 mb-4 flex justify-between items-center bg-cyan-500/10 border-cyan-500/20",children:[o.jsx("span",{className:"text-xs text-cyan-300 font-bold",children:" "}),o.jsxs("span",{className:"text-xl font-bold text-white",children:[b.toLocaleString()," ",o.jsx("span",{className:"text-xs opacity-50",children:"."})]})]}),o.jsx("div",{className:"flex-1 overflow-hidden glass-card border border-white/10",children:o.jsx("div",{className:"overflow-y-auto h-full custom-scrollbar",children:o.jsxs("table",{className:"w-full text-xs text-right",children:[o.jsx("thead",{className:"bg-white/5 text-white/50 sticky top-0 backdrop-blur-md",children:o.jsxs("tr",{children:[o.jsx("th",{className:"p-3",children:" ()"}),o.jsx("th",{className:"p-3 text-center",children:""}),o.jsx("th",{className:"p-3 text-center",children:""})]})}),o.jsx("tbody",{className:"divide-y divide-white/5",children:v.length===0?o.jsx("tr",{children:o.jsx("td",{colSpan:3,className:"text-center py-8 text-white/30",children:"      "})}):v.map((S,z)=>{const O=Object.entries(S.outputs||{}).map(([P,C])=>{const L=t.find(M=>M.id===parseInt(P));return`${L?L.name:""} (${C})`}).join(" | ");return o.jsxs("tr",{className:"hover:bg-white/5",children:[o.jsx("td",{className:"p-3 font-bold text-white/80 max-w-[150px] truncate",children:O||" "}),o.jsx("td",{className:"p-3 text-center font-bold text-emerald-300",children:S.cash}),o.jsx("td",{className:"p-3 text-center text-white/50 font-mono",children:S.date})]},z)})})]})})})]})},k6=({onBack:r})=>{const{items:e,sales:t,distribution:a}=lt(),[l,c]=A.useState(new Date),[d,m]=A.useState(new Date),[p,x]=A.useState("day"),v=(C,L,M)=>{c(C),m(L),x(M)},b=e.filter(C=>C.category!=="filling"),N=A.useMemo(()=>b.map(C=>{let L=0,M=0,F=0,Z=0;t.filter(E=>ea(E.fullDate,l,d)).forEach(E=>{const T=E.items.find(k=>k.id===C.id);T&&(E.isReturn?(F+=T.qty,Z-=T.total):(L+=T.qty,Z+=T.total))}),a.filter(E=>ea(E.fullDate,l,d)).forEach(E=>{E.outputs&&E.outputs[C.id]&&(M+=E.outputs[C.id]),E.returns&&E.returns[C.id]&&(F+=E.returns[C.id])});const te=L+M-F;return{...C,salesQty:L,distQty:M,returnQty:F,netMovement:te,revenue:Z}}).sort((C,L)=>L.netMovement-C.netMovement),[b,t,a,l,d]),S=N.reduce((C,L)=>C+L.salesQty,0),z=N.reduce((C,L)=>C+L.distQty,0),O=N.reduce((C,L)=>C+L.returnQty,0),P=()=>{const C="   ",L=`${l.toLocaleDateString()}  ${d.toLocaleDateString()}`,M=N.map(Z=>`
            <tr>
                <td style="border: 1px solid #ccc; padding: 5px;">${Z.name}</td>
                <td style="border: 1px solid #ccc; padding: 5px; background-color: #f0f9ff;">${Z.salesQty}</td>
                <td style="border: 1px solid #ccc; padding: 5px; background-color: #fdf4ff;">${Z.distQty}</td>
                <td style="border: 1px solid #ccc; padding: 5px; color: red;">${Z.returnQty}</td>
                <td style="border: 1px solid #ccc; padding: 5px; font-weight: bold;">${Z.netMovement}</td>
                <td style="border: 1px solid #ccc; padding: 5px;">${Z.stock}</td>
                <td style="border: 1px solid #ccc; padding: 5px;">${Z.revenue.toLocaleString()}</td>
            </tr>
        `).join(""),F=`
            <div style="display: flex; justify-content: space-around; margin-bottom: 20px; text-align: center;">
                <div style="border: 1px solid #ccc; padding: 10px; border-radius: 5px;">
                    <strong>  ()</strong><br>${S}
                </div>
                <div style="border: 1px solid #ccc; padding: 10px; border-radius: 5px;">
                    <strong>  ()</strong><br>${z}
                </div>
                <div style="border: 1px solid #ccc; padding: 10px; border-radius: 5px;">
                    <strong> </strong><br>${O}
                </div>
            </div>
            <table style="width: 100%; border-collapse: collapse; font-size: 11px; text-align: center;">
                <thead>
                    <tr style="background-color: #f0f0f0;">
                        <th style="border: 1px solid #ccc; padding: 5px;"></th>
                        <th style="border: 1px solid #ccc; padding: 5px;"></th>
                        <th style="border: 1px solid #ccc; padding: 5px;"></th>
                        <th style="border: 1px solid #ccc; padding: 5px;"></th>
                        <th style="border: 1px solid #ccc; padding: 5px;"> </th>
                        <th style="border: 1px solid #ccc; padding: 5px;"> </th>
                        <th style="border: 1px solid #ccc; padding: 5px;"> </th>
                    </tr>
                </thead>
                <tbody>${M}</tbody>
            </table>
        `;hl(C,L,"range",F)};return o.jsxs("div",{className:"w-full max-w-md mx-auto p-4 h-screen flex flex-col overflow-y-auto custom-scrollbar animate-fade-in bg-slate-900/50",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4 pt-2",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("button",{onClick:r,className:"p-2.5 bg-white/5 hover:bg-white/10 border border-white/10 rounded-xl text-white transition-all",children:o.jsx(Qt,{className:"w-5 h-5"})}),o.jsx("div",{children:o.jsx("h1",{className:"text-lg font-bold text-white",children:" "})})]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx(fl,{onFilterChange:v}),o.jsx("button",{onClick:P,className:"p-2 bg-white/5 hover:bg-white/10 border border-white/10 rounded-xl text-white transition-all",children:o.jsx(ol,{className:"w-5 h-5"})})]})]}),o.jsxs("div",{className:"grid grid-cols-3 gap-2 mb-4",children:[o.jsxs("div",{className:"glass-card p-3 flex flex-col items-center justify-center bg-blue-500/10 border-blue-500/20",children:[o.jsxs("span",{className:"text-[10px] text-blue-200 mb-1 flex items-center gap-1",children:[o.jsx(iC,{className:"w-3 h-3"})," "]}),o.jsx("span",{className:"text-xl font-bold text-white",children:S})]}),o.jsxs("div",{className:"glass-card p-3 flex flex-col items-center justify-center bg-purple-500/10 border-purple-500/20",children:[o.jsxs("span",{className:"text-[10px] text-purple-200 mb-1 flex items-center gap-1",children:[o.jsx(zu,{className:"w-3 h-3"})," "]}),o.jsx("span",{className:"text-xl font-bold text-white",children:z})]}),o.jsxs("div",{className:"glass-card p-3 flex flex-col items-center justify-center bg-red-500/10 border-red-500/20",children:[o.jsxs("span",{className:"text-[10px] text-red-200 mb-1 flex items-center gap-1",children:[o.jsx(Qf,{className:"w-3 h-3"})," "]}),o.jsx("span",{className:"text-xl font-bold text-white",children:O})]})]}),o.jsx("div",{className:"flex-1 overflow-hidden glass-card border border-white/10",children:o.jsx("div",{className:"overflow-y-auto h-full custom-scrollbar",children:o.jsxs("table",{className:"w-full text-xs text-right whitespace-nowrap",children:[o.jsx("thead",{className:"bg-white/5 text-white/50 sticky top-0 backdrop-blur-md z-10",children:o.jsxs("tr",{children:[o.jsx("th",{className:"p-3",children:""}),o.jsx("th",{className:"p-3 text-center text-blue-300",children:""}),o.jsx("th",{className:"p-3 text-center text-purple-300",children:""}),o.jsx("th",{className:"p-3 text-center text-red-300",children:""}),o.jsx("th",{className:"p-3 text-center",children:""}),o.jsx("th",{className:"p-3 text-center text-emerald-300",children:""})]})}),o.jsx("tbody",{className:"divide-y divide-white/5",children:N.length===0?o.jsx("tr",{children:o.jsx("td",{colSpan:6,className:"text-center py-8 text-white/30",children:"  "})}):N.map((C,L)=>o.jsxs("tr",{className:"hover:bg-white/5",children:[o.jsxs("td",{className:"p-3",children:[o.jsx("div",{className:"font-bold text-white/90",children:C.name}),o.jsxs("div",{className:"text-[9px] text-white/40",children:[": ",C.stock]})]}),o.jsx("td",{className:"p-3 text-center text-blue-200 font-mono",children:C.salesQty>0?C.salesQty:"-"}),o.jsx("td",{className:"p-3 text-center text-purple-200 font-mono",children:C.distQty>0?C.distQty:"-"}),o.jsx("td",{className:"p-3 text-center text-red-300 font-mono",children:C.returnQty>0?C.returnQty:"-"}),o.jsx("td",{className:"p-3 text-center font-bold text-white/80",children:C.netMovement}),o.jsx("td",{className:"p-3 text-center text-emerald-300 font-bold",children:C.revenue>0?C.revenue.toLocaleString():"-"})]},L))})]})})})]})},M6=({onBack:r})=>{const{expenses:e}=lt(),[t,a]=A.useState(new Date),[l,c]=A.useState(new Date),[d,m]=A.useState("day"),p=(N,S,z)=>{a(N),c(S),m(z)},x=e.filter(N=>N.type==="general"&&ea(N.fullDate,t,l)),v=x.reduce((N,S)=>N+S.amount,0),b=()=>{const N="  ",S=`${t.toLocaleDateString()}  ${l.toLocaleDateString()}`,O=`
            <table style="width: 100%; border-collapse: collapse; font-size: 11px;">
                <thead>
                    <tr style="background-color: #f0f0f0;">
                        <th style="border: 1px solid #ccc;"></th>
                        <th style="border: 1px solid #ccc;"></th>
                        <th style="border: 1px solid #ccc;"></th>
                    </tr>
                </thead>
                <tbody>${x.map(P=>`
            <tr>
                <td style="border: 1px solid #ccc; padding: 5px;">${P.reason}</td>
                <td style="border: 1px solid #ccc; padding: 5px;">${P.amount}</td>
                <td style="border: 1px solid #ccc; padding: 5px;">${P.date.split(" ")[0]}</td>
            </tr>
        `).join("")}</tbody>
                <tfoot>
                    <tr style="background-color: #eee; font-weight: bold;">
                        <td></td>
                        <td>${v}</td>
                        <td></td>
                    </tr>
                </tfoot>
            </table>
        `;hl(N,S,"range",O)};return o.jsxs("div",{className:"w-full max-w-md mx-auto p-4 h-screen flex flex-col overflow-y-auto custom-scrollbar animate-fade-in bg-slate-900/50",children:[o.jsxs("div",{className:"flex items-center justify-between mb-6 pt-2",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("button",{onClick:r,className:"p-2.5 bg-white/5 hover:bg-white/10 border border-white/10 rounded-xl text-white transition-all",children:o.jsx(Qt,{className:"w-5 h-5"})}),o.jsx("div",{children:o.jsx("h1",{className:"text-lg font-bold text-white",children:"  "})})]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx(fl,{onFilterChange:p}),o.jsx("button",{onClick:b,className:"p-2 bg-white/5 hover:bg-white/10 border border-white/10 rounded-xl text-white transition-all",children:o.jsx(ol,{className:"w-5 h-5"})})]})]}),o.jsxs("div",{className:"glass-card p-4 mb-4 flex justify-between items-center bg-red-500/10 border-red-500/20",children:[o.jsx("span",{className:"text-xs text-red-300 font-bold",children:" "}),o.jsxs("span",{className:"text-xl font-bold text-white",children:[v.toLocaleString()," ",o.jsx("span",{className:"text-xs opacity-50",children:"."})]})]}),o.jsx("div",{className:"flex-1 overflow-hidden glass-card border border-white/10",children:o.jsx("div",{className:"overflow-y-auto h-full custom-scrollbar",children:o.jsxs("table",{className:"w-full text-xs text-right",children:[o.jsx("thead",{className:"bg-white/5 text-white/50 sticky top-0 backdrop-blur-md",children:o.jsxs("tr",{children:[o.jsx("th",{className:"p-3",children:""}),o.jsx("th",{className:"p-3 text-center",children:""}),o.jsx("th",{className:"p-3 text-center",children:""})]})}),o.jsx("tbody",{className:"divide-y divide-white/5",children:x.length===0?o.jsx("tr",{children:o.jsx("td",{colSpan:3,className:"text-center py-8 text-white/30",children:"     "})}):x.map((N,S)=>o.jsxs("tr",{className:"hover:bg-white/5",children:[o.jsx("td",{className:"p-3 font-bold text-white/90",children:N.reason}),o.jsx("td",{className:"p-3 text-center font-bold text-red-300",children:N.amount}),o.jsx("td",{className:"p-3 text-center text-white/50 font-mono",children:N.date.split(" ")[0]})]},S))})]})})})]})},V6=({onBack:r})=>{const{customers:e,sales:t}=lt(),[a,l]=A.useState(new Date),[c,d]=A.useState(new Date),[m,p]=A.useState("day"),x=(C,L,M)=>{l(C),d(L),p(M)},v=e.reduce((C,L)=>C+L.totalDebt,0),b=A.useMemo(()=>t.filter(C=>C.paymentMethod==="ajal"&&ea(C.fullDate,a,c)),[t,a,c]),N=A.useMemo(()=>{let C=[];return e.forEach(L=>{const M=L.transactions.filter(F=>(F.items.includes("")||F.items.includes("")||F.total<0)&&ea(F.date,a,c)).map(F=>({...F,customerName:L.name}));C=[...C,...M]}),C},[e,a,c]),S=b.reduce((C,L)=>C+L.total,0),z=N.reduce((C,L)=>C+Math.abs(L.total),0),O=S-z,P=()=>{const C="   ",L=`${a.toLocaleDateString()}  ${c.toLocaleDateString()}`,M=b.map(Z=>`
            <tr>
                <td style="border: 1px solid #ccc; padding: 5px;">${Z.customerName}</td>
                <td style="border: 1px solid #ccc; padding: 5px;">${Z.items.map(te=>te.name).join(" + ")}</td>
                <td style="border: 1px solid #ccc; padding: 5px;">${Z.total}</td>
                <td style="border: 1px solid #ccc; padding: 5px;">${Su(Z.fullDate)}</td>
                <td style="border: 1px solid #ccc; padding: 5px;">${Z.date.split(" ")[0]}</td>
            </tr>
        `).join(""),F=`
            <div style="display: flex; justify-content: space-between; margin-bottom: 20px;">
                <div style="border: 1px solid #ccc; padding: 10px; width: 30%; text-align: center;">
                    <strong>  ( )</strong><br>${S.toLocaleString()}
                </div>
                <div style="border: 1px solid #ccc; padding: 10px; width: 30%; text-align: center;">
                    <strong>  ( )</strong><br>${z.toLocaleString()}
                </div>
                <div style="border: 1px solid #ccc; padding: 10px; width: 30%; text-align: center;">
                    <strong>   ()</strong><br>${v.toLocaleString()}
                </div>
            </div>
            <h3>   ( )</h3>
            <table style="width: 100%; border-collapse: collapse; font-size: 11px; text-align: center;">
                <thead>
                    <tr style="background-color: #f0f0f0;">
                        <th style="border: 1px solid #ccc;"></th>
                        <th style="border: 1px solid #ccc;"></th>
                        <th style="border: 1px solid #ccc;"></th>
                        <th style="border: 1px solid #ccc;"></th>
                        <th style="border: 1px solid #ccc;"></th>
                    </tr>
                </thead>
                <tbody>${M}</tbody>
                <tfoot>
                    <tr style="background-color: #eee; font-weight: bold;">
                        <td colspan="2"></td>
                        <td>${S}</td>
                        <td colspan="2"></td>
                    </tr>
                </tfoot>
            </table>
        `;hl(C,L,"range",F)};return o.jsxs("div",{className:"w-full max-w-md mx-auto p-4 h-screen flex flex-col overflow-y-auto custom-scrollbar animate-fade-in bg-slate-900/50",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4 pt-2",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("button",{onClick:r,className:"p-2.5 bg-white/5 hover:bg-white/10 border border-white/10 rounded-xl text-white transition-all",children:o.jsx(Qt,{className:"w-5 h-5"})}),o.jsx("div",{children:o.jsx("h1",{className:"text-lg font-bold text-white",children:" "})})]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx(fl,{onFilterChange:x}),o.jsx("button",{onClick:P,className:"p-2 bg-white/5 hover:bg-white/10 border border-white/10 rounded-xl text-white transition-all",children:o.jsx(ol,{className:"w-5 h-5"})})]})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-4",children:[o.jsxs("div",{className:"glass-card p-3 bg-red-500/10 border-red-500/20",children:[o.jsxs("p",{className:"text-xs text-red-300 mb-1 flex items-center gap-1",children:[o.jsx(sl,{className:"w-3 h-3"}),"   ()"]}),o.jsx("p",{className:"text-xl font-bold text-white",children:S.toLocaleString()})]}),o.jsxs("div",{className:"glass-card p-3 bg-green-500/10 border-green-500/20",children:[o.jsxs("p",{className:"text-xs text-green-300 mb-1 flex items-center gap-1",children:[o.jsx(nl,{className:"w-3 h-3"}),"   ()"]}),o.jsx("p",{className:"text-xl font-bold text-white",children:z.toLocaleString()})]}),o.jsxs("div",{className:"glass-card p-3 bg-white/5 col-span-2 flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-xs text-white/50",children:"   "}),o.jsxs("p",{className:`text-lg font-bold ${O>0?"text-red-400":"text-green-400"}`,dir:"ltr",children:[O>0?"+":"",O.toLocaleString()]})]}),o.jsxs("div",{className:"text-left border-r border-white/10 pr-4",children:[o.jsx("p",{className:"text-xs text-white/50",children:"  "}),o.jsx("p",{className:"text-xl font-bold text-yellow-400",children:v.toLocaleString()})]})]})]}),o.jsxs("div",{className:"flex-1 overflow-hidden glass-card border border-white/10",children:[o.jsx("div",{className:"p-3 bg-white/5 border-b border-white/5 font-bold text-xs text-white/70",children:"   ()"}),o.jsx("div",{className:"overflow-y-auto h-full custom-scrollbar",children:o.jsxs("table",{className:"w-full text-xs text-right whitespace-nowrap",children:[o.jsx("thead",{className:"bg-white/5 text-white/50 sticky top-0 backdrop-blur-md",children:o.jsxs("tr",{children:[o.jsx("th",{className:"p-3",children:""}),o.jsx("th",{className:"p-3",children:""}),o.jsx("th",{className:"p-3 text-center",children:""}),o.jsx("th",{className:"p-3 text-center",children:""})]})}),o.jsx("tbody",{className:"divide-y divide-white/5",children:b.length===0?o.jsx("tr",{children:o.jsx("td",{colSpan:4,className:"text-center py-8 text-white/30",children:"      "})}):b.map((C,L)=>o.jsxs("tr",{className:"hover:bg-white/5",children:[o.jsxs("td",{className:"p-3 font-bold text-yellow-200",children:[C.customerName,o.jsx("span",{className:"block text-[8px] text-white/30 font-normal",children:C.date.split(" ")[0]})]}),o.jsx("td",{className:"p-3 text-white/80 max-w-[120px] truncate",children:C.items.map(M=>M.name).join(" + ")}),o.jsx("td",{className:"p-3 text-center font-bold text-red-300",children:C.total}),o.jsx("td",{className:"p-3 text-center text-white/50 font-mono",children:Su(C.fullDate)})]},L))})]})})]})]})},O6=({onBack:r})=>{const[e,t]=A.useState(null);if(e){const a=()=>t(null);switch(e){case"financial":return o.jsx(C6,{onBack:a});case"sales":return o.jsx(I6,{onBack:a});case"purchases":return o.jsx(D6,{onBack:a});case"distribution":return o.jsx(R6,{onBack:a});case"inventory":return o.jsx(k6,{onBack:a});case"expenses":return o.jsx(M6,{onBack:a});case"debts":return o.jsx(V6,{onBack:a});default:return null}}return o.jsxs("div",{className:"w-full max-w-md mx-auto p-4 h-screen flex flex-col overflow-y-auto custom-scrollbar animate-fade-in",children:[o.jsxs("div",{className:"flex items-center gap-4 mb-6 pt-4",children:[o.jsx("button",{onClick:r,className:"p-3 bg-white/10 hover:bg-white/20 rounded-full text-white transition-all active:scale-95",children:o.jsx(Qt,{className:"w-6 h-6"})}),o.jsxs("h1",{className:"text-2xl font-bold text-white flex items-center gap-2",children:[o.jsx(oi,{className:"w-8 h-8 text-indigo-300"}),o.jsx("span",{children:" "})]})]}),o.jsxs("div",{className:"flex-1 flex flex-col gap-3 pb-20",children:[o.jsx(Nr,{title:" ",description:"   ",icon:o.jsx(Uu,{className:"w-8 h-8"}),index:"01",colorTheme:"blue",onClick:()=>t("financial"),variant:"compact"}),o.jsx(Nr,{title:"",description:"   ",icon:o.jsx(is,{className:"w-8 h-8"}),index:"02",colorTheme:"cyan",onClick:()=>t("sales"),variant:"compact"}),o.jsx(Nr,{title:"",description:"    ",icon:o.jsx(is,{className:"w-8 h-8"}),index:"03",colorTheme:"purple",onClick:()=>t("purchases"),variant:"compact"}),o.jsx(Nr,{title:"",description:"   ",icon:o.jsx(al,{className:"w-8 h-8"}),index:"04",colorTheme:"cyan",onClick:()=>t("distribution"),variant:"compact"}),o.jsx(Nr,{title:"",description:"   ",icon:o.jsx(zu,{className:"w-8 h-8"}),index:"05",colorTheme:"purple",onClick:()=>t("inventory"),variant:"compact"}),o.jsx(Nr,{title:"",description:"   ",icon:o.jsx(uf,{className:"w-8 h-8"}),index:"06",colorTheme:"blue",onClick:()=>t("expenses"),variant:"compact"}),o.jsx(Nr,{title:"",description:"   ",icon:o.jsx(_u,{className:"w-8 h-8"}),index:"07",colorTheme:"purple",onClick:()=>t("debts"),variant:"compact"})]}),o.jsx("div",{className:"text-center text-white/30 text-xs font-['Amiri'] pb-4",children:"   "})]})},P6=()=>{const{security:r,isDarkMode:e}=lt(),[t,a]=A.useState(!1),[l,c]=A.useState(null),[d,m]=A.useState("dashboard"),[p,x]=A.useState("status"),[v,b]=A.useState(!1),[N,S]=A.useState(null),[z,O]=A.useState("");A.useEffect(()=>{document.body.setAttribute("data-theme",e?"dark":"light"),e?document.body.classList.add("text-white","bg-slate-900"):document.body.classList.remove("text-white","bg-slate-900")},[e]);const P=r.unlockPin||"7890780",C=r.adminPin||"7890790",L=()=>{a(!0)},M=()=>{a(!1),m("dashboard")},F=te=>{if(te==="sales-menu"){m("sales");return}if(te==="ajal-menu"||te==="ajal"){m("ajal");return}if(te==="expenses"){m("expenses");return}if(te==="distribution"){m("distribution");return}if(te==="reports"){m("reports");return}if(te==="management-menu"){m("management-menu");return}const E=["items","workers","backup","reset","settings","logs","history","passwords","status","security"];if(te==="security"||te==="settings"){S(te),b(!0);return}r.securityEnabled&&r.lockedSections.includes(te)?(S(te),b(!0)):E.includes(te)?(x(te),m("management-details")):c(te)},Z=()=>{let te=!1;N==="security"||N==="settings"?z===C&&(te=!0):z===P&&(te=!0),te?(b(!1),O(""),N&&(N==="ajal"?m("ajal"):N==="expenses"?m("expenses"):N==="reports"?m("reports"):N==="distribution"?m("distribution"):["items","workers","backup","reset","settings","logs","history","passwords","status","security"].includes(N)?(x(N),m("management-details")):N!=="management-menu"&&c(N))):(alert("   "),O(""))};return t?o.jsxs("div",{className:`min-h-screen bg-cover bg-center bg-fixed transition-all duration-300 ${e?"bg-[url('https://images.unsplash.com/photo-1518837695005-2083093ee35b?q=80&w=2070&auto=format&fit=crop')]":"bg-[url('https://images.unsplash.com/photo-1500375592092-40eb2168fd21?q=80&w=2134&auto=format&fit=crop')]"}`,children:[o.jsx("div",{className:`absolute inset-0 backdrop-blur-sm transition-colors duration-300 ${e?"bg-slate-900/80":"bg-cyan-100/20"}`}),o.jsxs("div",{className:"relative z-10",children:[d==="dashboard"?o.jsx(lD,{onOpenSection:F,onLogout:M}):d==="sales"?o.jsx(fD,{onBack:()=>m("dashboard"),onSelectSafary:()=>c("safary"),onSelectFilling:()=>c("filling")}):d==="expenses"?o.jsx(vD,{onBack:()=>m("dashboard")}):d==="reports"?o.jsx(O6,{onBack:()=>m("dashboard")}):d==="distribution"?o.jsx(AD,{onBack:()=>m("dashboard")}):d==="management-menu"?o.jsx(j6,{onBack:()=>m("dashboard"),onSelect:te=>F(te)}):d==="management-details"?o.jsx(T6,{onBack:()=>m("management-menu"),initialTab:p}):d==="ajal"?o.jsx(wD,{onBack:()=>m("dashboard"),onSelectGeneral:()=>m("ajal-general"),onSelectDistribution:()=>m("ajal-distribution"),onSelectStats:()=>c("ajal")}):o.jsx(_D,{onBack:()=>m("ajal"),mode:d==="ajal-general"?"general":"distribution"}),o.jsx(kw,{isOpen:l==="safary",onClose:()=>c(null),type:"safary"}),o.jsx(kw,{isOpen:l==="filling",onClose:()=>c(null),type:"filling"}),o.jsx(TD,{isOpen:l==="ajal",onClose:()=>c(null),mode:"stats"}),o.jsx(jD,{isOpen:l==="inventory",onClose:()=>c(null)}),o.jsx(Mn,{isOpen:v,onClose:()=>{b(!1),O("")},title:" ",icon:o.jsx(Ya,{className:"text-red-400"}),maxWidth:"max-w-xs",children:o.jsxs("div",{className:"text-center py-4",children:[o.jsx("p",{className:"mb-4 text-sm text-white/70",children:["security","settings"].includes(N||"")?"   ":"  .    "}),o.jsx(ht,{type:"password",value:z,onChange:te=>O(te.target.value),placeholder:" ",className:"text-center mb-4 font-mono text-lg",autoFocus:!0}),o.jsx(It,{onClick:Z,className:"w-full bg-blue-600 hover:bg-blue-500",children:""})]})})]})]}):o.jsx(iD,{onLogin:L})},ME=document.getElementById("root");if(!ME)throw new Error("Could not find root element to mount to");const L6=_T.createRoot(ME);L6.render(o.jsx(ut.StrictMode,{children:o.jsx(Q3,{children:o.jsx(MT,{children:o.jsx(P6,{})})})}));
